var e=void 0!==typeof self?self:this;function t(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function n(e){return!!e&&!!e[q]}function r(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);return!t||t===Object.prototype}(e)||Array.isArray(e)||!!e[F]||!!e.constructor[F]||c(e)||d(e))}function i(e,t,n){void 0===n&&(n=!1),0===o(e)?(n?Object.keys:K)(e).forEach((function(r){n&&"symbol"==typeof r||t(r,e[r],e)})):e.forEach((function(n,r){return t(r,n,e)}))}function o(e){var t=e[q];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:c(e)?2:d(e)?3:0}function a(e,t){return 2===o(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function s(e,t,n){var r=o(e);2===r?e.set(t,n):3===r?(e.delete(t),e.add(n)):e[t]=n}function u(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function c(e){return D&&e instanceof Map}function d(e){return j&&e instanceof Set}function l(e){return e.o||e.t}function f(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=H(e);delete t[q];for(var n=K(t),r=0;r<n.length;r++){var i=n[r],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function p(e,t){return void 0===t&&(t=!1),v(e)||n(e)||!r(e)||(o(e)>1&&(e.set=e.add=e.clear=e.delete=h),Object.freeze(e),t&&i(e,(function(e,t){return p(t,!0)}),!0)),e}function h(){t(2)}function v(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function m(e){var n=$[e];return n||t(18,e),n}function g(){return B}function y(e,t){t&&(m("Patches"),e.u=[],e.s=[],e.v=t)}function w(e){b(e),e.p.forEach(E),e.p=null}function b(e){e===B&&(B=e.l)}function S(e){return B={p:[],l:B,h:e,m:!0,_:0}}function E(e){var t=e[q];0===t.i||1===t.i?t.j():t.g=!0}function k(e,n){n._=n.p.length;var i=n.p[0],o=void 0!==e&&e!==i;return n.h.O||m("ES5").S(n,e,o),o?(i[q].P&&(w(n),t(4)),r(e)&&(e=C(n,e),n.l||T(n,e)),n.u&&m("Patches").M(i[q],e,n.u,n.s)):e=C(n,i,[]),w(n),n.u&&n.v(n.u,n.s),e!==U?e:void 0}function C(e,t,n){if(v(t))return t;var r=t[q];if(!r)return i(t,(function(i,o){return x(e,r,t,i,o,n)}),!0),t;if(r.A!==e)return t;if(!r.P)return T(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var o=4===r.i||5===r.i?r.o=f(r.k):r.o;i(3===r.i?new Set(o):o,(function(t,i){return x(e,r,o,t,i,n)})),T(e,o,!1),n&&e.u&&m("Patches").R(r,n,e.u,e.s)}return r.o}function x(e,t,i,o,u,c){if(n(u)){var d=C(e,u,c&&t&&3!==t.i&&!a(t.D,o)?c.concat(o):void 0);if(s(i,o,d),!n(d))return;e.m=!1}if(r(u)&&!v(u)){if(!e.h.N&&e._<1)return;C(e,u),t&&t.A.l||T(e,u)}}function T(e,t,n){void 0===n&&(n=!1),e.h.N&&e.m&&p(t,n)}function N(e,t){var n=e[q];return(n?l(n):e)[t]}function O(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function _(e){e.P||(e.P=!0,e.l&&_(e.l))}function P(e){e.o||(e.o=f(e.t))}function A(e,t,n){var r=c(t)?m("MapSet").T(t,n):d(t)?m("MapSet").F(t,n):e.O?function(e,t){var n=Array.isArray(e),r={i:n?1:0,A:t?t.A:g(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},i=r,o=V;n&&(i=[r],o=G);var a=Proxy.revocable(i,o),s=a.revoke,u=a.proxy;return r.k=u,r.j=s,u}(t,n):m("ES5").J(t,n);return(n?n.A:g()).p.push(r),r}function I(e){return n(e)||t(22,e),function e(t){if(!r(t))return t;var n,a=t[q],u=o(t);if(a){if(!a.P&&(a.i<4||!m("ES5").K(a)))return a.t;a.I=!0,n=M(t,u),a.I=!1}else n=M(t,u);return i(n,(function(t,r){a&&function(e,t){return 2===o(e)?e.get(t):e[t]}(a.t,t)===r||s(n,t,e(r))})),3===u?new Set(n):n}(e)}function M(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return f(e)}var R,B,L="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),D="undefined"!=typeof Map,j="undefined"!=typeof Set,z="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,U=L?Symbol.for("immer-nothing"):((R={})["immer-nothing"]=!0,R),F=L?Symbol.for("immer-draftable"):"__$immer_draftable",q=L?Symbol.for("immer-state"):"__$immer_state",K="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,H=Object.getOwnPropertyDescriptors||function(e){var t={};return K(e).forEach((function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)})),t},$={},V={get:function(e,t){if(t===q)return e;var n=l(e);if(!a(n,t))return function(e,t,n){var r,i=O(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.k):void 0}(e,n,t);var i=n[t];return e.I||!r(i)?i:i===N(e.t,t)?(P(e),e.o[t]=A(e.A.h,i,e)):i},has:function(e,t){return t in l(e)},ownKeys:function(e){return Reflect.ownKeys(l(e))},set:function(e,t,n){var r=O(l(e),t);if(null==r?void 0:r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=N(l(e),t),o=null==i?void 0:i[q];if(o&&o.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(u(n,i)&&(void 0!==n||a(e.t,t)))return!0;P(e),_(e)}return e.o[t]=n,e.D[t]=!0,!0},deleteProperty:function(e,t){return void 0!==N(e.t,t)||t in e.t?(e.D[t]=!1,P(e),_(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=l(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty:function(){t(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){t(12)}},G={};i(V,(function(e,t){G[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),G.deleteProperty=function(e,t){return V.deleteProperty.call(this,e[0],t)},G.set=function(e,t,n){return V.set.call(this,e[0],t,n,e[0])};var W=new(function(){function e(e){this.O=z,this.N=!0,"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),this.produce=this.produce.bind(this),this.produceWithPatches=this.produceWithPatches.bind(this)}var i=e.prototype;return i.produce=function(e,n,i){if("function"==typeof e&&"function"!=typeof n){var o=n;n=e;var a=this;return function(e){var t=this;void 0===e&&(e=o);for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return a.produce(e,(function(e){var r;return(r=n).call.apply(r,[t,e].concat(i))}))}}var s;if("function"!=typeof n&&t(6),void 0!==i&&"function"!=typeof i&&t(7),r(e)){var u=S(this),c=A(this,e,void 0),d=!0;try{s=n(c),d=!1}finally{d?w(u):b(u)}return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return y(u,i),k(e,u)}),(function(e){throw w(u),e})):(y(u,i),k(s,u))}if(!e||"object"!=typeof e){if((s=n(e))===U)return;return void 0===s&&(s=e),this.N&&p(s,!0),s}t(21,e)},i.produceWithPatches=function(e,t){var n,r,i=this;return"function"==typeof e?function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return i.produceWithPatches(t,(function(t){return e.apply(void 0,[t].concat(r))}))}:[this.produce(e,t,(function(e,t){n=e,r=t})),n,r]},i.createDraft=function(e){r(e)||t(8),n(e)&&(e=I(e));var i=S(this),o=A(this,e,void 0);return o[q].C=!0,b(i),o},i.finishDraft=function(e,t){var n=(e&&e[q]).A;return y(n,t),k(void 0,n)},i.setAutoFreeze=function(e){this.N=e},i.setUseProxies=function(e){e&&!z&&t(20),this.O=e},i.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var i=t[r];if(0===i.path.length&&"replace"===i.op){e=i.value;break}}var o=m("Patches").$;return n(e)?o(e,t):this.produce(e,(function(e){return o(e,t.slice(r+1))}))},e}()),Y=W.produce;W.produceWithPatches.bind(W),W.setAutoFreeze.bind(W),W.setUseProxies.bind(W),W.applyPatches.bind(W),W.createDraft.bind(W),W.finishDraft.bind(W);var Q=function(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof module?module:Function("return this")()),J=Object.freeze({__proto__:null,default:Q}),X=function(){return Math.random().toString(36).substring(7).split("").join(".")},Z={INIT:"@@redux/INIT"+X(),REPLACE:"@@redux/REPLACE"+X(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+X()}};function ee(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function te(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(te)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var i=e,o=t,a=[],s=a,u=!1;function c(){s===a&&(s=a.slice())}function d(){if(u)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return o}function l(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(u)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var t=!0;return c(),s.push(e),function(){if(t){if(u)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");t=!1,c();var n=s.indexOf(e);s.splice(n,1),a=null}}}function f(e){if(!ee(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,o=i(o,e)}finally{u=!1}for(var t=a=s,n=0;n<t.length;n++){(0,t[n])()}return e}function p(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");i=e,f({type:Z.REPLACE})}function h(){var e,t=l;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(d())}return n(),{unsubscribe:t(n)}}})[Q]=function(){return this},e}return f({type:Z.INIT}),(r={dispatch:f,subscribe:l,getState:d,replaceReducer:p})[Q]=h,r}function ne(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function re(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}var o,a=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:Z.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:Z.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+Z.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(e){o=e}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,i={},s=0;s<a.length;s++){var u=a[s],c=n[u],d=e[u],l=c(d,t);if(void 0===l){var f=ne(u,t);throw new Error(f)}i[u]=l,r=r||l!==d}return(r=r||a.length!==Object.keys(e).length)?i:e}}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e,t){var n=Object.keys(e);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(e)),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(n,!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function ue(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return ae({},n,{dispatch:r=se.apply(void 0,o)(n.dispatch)})}}}function ce(e,t){return e===t}function de(e,t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!e(t[i],n[i]))return!1;return!0}function le(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}!function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r]}((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ce,n=null,r=null;return function(){return de(t,n,arguments)||(r=e.apply(null,arguments)),n=arguments,r}}));var fe=le();function pe(){return(pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function me(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ge(e,t,n){return(ge=me()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&ve(i,n.prototype),i}).apply(null,arguments)}function ye(e){var t="function"==typeof Map?new Map:void 0;return(ye=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return ge(e,arguments,he(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),ve(r,e)})(e)}fe.withExtraArgument=le;var we="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?se:se.apply(null,arguments)};var be=function(e){var t,n;function r(){return e.apply(this,arguments)||this}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.concat=function(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return ge(r,(t=e.prototype.concat).call.apply(t,[this].concat(i)))},i.prepend=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])?ge(r,t[0].concat(this)):ge(r,t.concat(this))},r}(ye(Array));function Se(){return function(e){return function(e){void 0===e&&(e={});var t=e,n=t.thunk,r=void 0===n||n;t.immutableCheck,t.serializableCheck;var i=new be;r&&(!function(e){return"boolean"==typeof e}(r)?i.push(fe.withExtraArgument(r.extraArgument)):i.push(fe));return i}(e)}}var Ee,ke,Ce,xe,Te,Ne,Oe,_e,Pe,Ae,Ie,Me,Re,Be,Le,De,je,ze,Ue,Fe,qe,Ke,He,$e,Ve,Ge,We;function Ye(e){var t,n=Se(),r=e||{},i=r.reducer,o=void 0===i?void 0:i,a=r.middleware,s=void 0===a?n():a,u=r.devTools,c=void 0===u||u,d=r.preloadedState,l=void 0===d?void 0:d,f=r.enhancers,p=void 0===f?void 0:f;if("function"==typeof o)t=o;else{if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(o))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=re(o)}var h=ue.apply(void 0,"function"==typeof s?s(n):s),v=se;c&&(v=we(pe({trace:!1},"object"==typeof c&&c)));var m=[h];return Array.isArray(p)?m=[h].concat(p):"function"==typeof p&&(m=p(m)),te(t,l,v.apply(void 0,m))}function Qe(e,t){function n(){if(t){var n=t.apply(void 0,arguments);if(!n)throw new Error("prepareAction did not return an object");return pe({type:e,payload:n.payload},"meta"in n&&{meta:n.meta},{},"error"in n&&{error:n.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function Je(e){var t,n={},r=[],i={addCase:function(e,t){var r="string"==typeof e?e:e.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=t,i},addMatcher:function(e,t){return r.push({matcher:e,reducer:t}),i},addDefaultCase:function(e){return t=e,i}};return e(i),[n,r,t]}function Xe(e){var t=e.name,i=e.initialState;if(!t)throw new Error("`name` is a required option for createSlice");var o=e.reducers||{},a=void 0===e.extraReducers?[]:"function"==typeof e.extraReducers?Je(e.extraReducers):[e.extraReducers],s=a[0],u=void 0===s?{}:s,c=a[1],d=void 0===c?[]:c,l=a[2],f=void 0===l?void 0:l,p=Object.keys(o),h={},v={},m={};p.forEach((function(e){var n,r,i=o[e],a=function(e,t){return e+"/"+t}(t,e);"reducer"in i?(n=i.reducer,r=i.prepare):n=i,h[e]=n,v[a]=n,m[e]=r?Qe(a,r):Qe(a)}));var g=function(e,t,i,o){void 0===i&&(i=[]);var a="function"==typeof t?Je(t):[t,i,o],s=a[0],u=a[1],c=a[2];return function(t,i){void 0===t&&(t=e);var o=[s[i.type]].concat(u.filter((function(e){return(0,e.matcher)(i)})).map((function(e){return e.reducer})));return 0===o.filter((function(e){return!!e})).length&&(o=[c]),o.reduce((function(e,t){if(t){if(n(e)){var o=t(e,i);return void 0===o?e:o}if(r(e))return Y(e,(function(e){return t(e,i)}));var a=t(e,i);if(void 0===a){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return a}return e}),t)}}(i,pe({},u,{},v),d,f);return{name:t,reducer:g,actions:m,caseReducers:h}}"undefined"==typeof Symbol||(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"==typeof Symbol||(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator"))),function(){function e(e,t){var n=s[e];return n?n.enumerable=t:s[e]=n={configurable:!0,enumerable:t,get:function(){var t=this[q];return V.get(t,e)},set:function(t){var n=this[q];V.set(n,e,t)}},n}function t(e){for(var t=e.length-1;t>=0;t--){var n=e[t][q];if(!n.P)switch(n.i){case 5:o(n)&&_(n);break;case 4:r(n)&&_(n)}}}function r(e){for(var t=e.t,n=e.k,r=K(n),i=r.length-1;i>=0;i--){var o=r[i];if(o!==q){var s=t[o];if(void 0===s&&!a(t,o))return!0;var c=n[o],d=c&&c[q];if(d?d.t!==s:!u(c,s))return!0}}var l=!!t[q];return r.length!==K(t).length+(l?0:1)}function o(e){var t=e.k;if(t.length!==e.t.length)return!0;var n=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!n||n.get)}var s={};!function(e,t){$[e]||($[e]=t)}("ES5",{J:function(t,n){var r=Array.isArray(t),i=function(t,n){if(t){for(var r=Array(n.length),i=0;i<n.length;i++)Object.defineProperty(r,""+i,e(i,!0));return r}var o=H(n);delete o[q];for(var a=K(o),s=0;s<a.length;s++){var u=a[s];o[u]=e(u,t||!!o[u].enumerable)}return Object.create(Object.getPrototypeOf(n),o)}(r,t),o={i:r?5:4,A:n?n.A:g(),P:!1,I:!1,D:{},l:n,t:t,k:i,o:null,g:!1,C:!1};return Object.defineProperty(i,q,{value:o,writable:!0}),i},S:function(e,r,s){s?n(r)&&r[q].A===e&&t(e.p):(e.u&&function e(t){if(t&&"object"==typeof t){var n=t[q];if(n){var r=n.t,s=n.k,u=n.D,c=n.i;if(4===c)i(s,(function(t){t!==q&&(void 0!==r[t]||a(r,t)?u[t]||e(s[t]):(u[t]=!0,_(n)))})),i(r,(function(e){void 0!==s[e]||a(s,e)||(u[e]=!1,_(n))}));else if(5===c){if(o(n)&&(_(n),u.length=!0),s.length<r.length)for(var d=s.length;d<r.length;d++)u[d]=!1;else for(var l=r.length;l<s.length;l++)u[l]=!0;for(var f=Math.min(s.length,r.length),p=0;p<f;p++)void 0===u[p]&&e(s[p])}}}}(e.p[0]),t(e.p))},K:function(e){return 4===e.i?r(e):o(e)}})}(),function(e){e.First="first-authentication-step",e.Second="second-authentication-step"}(Ee||(Ee={})),function(e){e.Admin="admin",e.Creator="creator",e.CreatorLite="creator_lite",e.Guest="guest",e.Viewer="viewer"}(ke||(ke={})),function(e){e.Fatal="fatal",e.Error="error",e.Warning="warn",e.Info="info",e.Debug="debug"}(Ce||(Ce={})),function(e){e.Initiated="Shared Auth Flow Initiated",e.GraphQLSubscribed="Shared Auth GraphQL Subscribed",e.GraphQLHeardBack="Shared Auth GraphQL Heard Back",e.SessionRequestTokenReceived="Shared Auth Received Session Request Token",e.LoginSuccess="Shared Auth Login Success"}(xe||(xe={})),function(e){e.EXTENSION_RECORDING_SUPPORT_ARTICLE="https://support.loom.com/hc/en-us/articles/360002187698-Getting-started-with-the-Chrome-Extension",e.DESKTOP_RECORDING_SUPPORT_ARTICLE="https://support.loom.com/hc/en-us/articles/360002207917-Getting-started-with-the-Desktop-App",e.CHROME_EXTENSION_INSTALL="https://chrome.google.com/webstore/detail/loom-video-recorder-scree/liecbddmkiiihnedobmlmillhodjkdmb"}(Te||(Te={})),function(e){e.Production="https://loom.com",e.Staging="https://stage.loom.com",e.Development="https://loomlocal.com:4444"}(Ne||(Ne={})),function(e){e.INITIATE_LOOM_RECORDER_FROM_BUTTON="initiate-loom-recorder-from-script"}(Oe||(Oe={})),function(e){e.V5="v5"}(_e||(_e={})),function(e){e.CHROME="chrome",e.SDK="sdk"}(Pe||(Pe={})),function(e){e.CloseModal="close-modal",e.DeleteRecording="delete-modal",e.RedoRecording="restart-recording",e.InsertRecording="insert-recording"}(Ae||(Ae={})),function(e){e.RecordingControls="recording-controls",e.Authentication="authentication",e.Offline="offline",e.SystemPermissions="system-permissions",e.MemberVideoLimitPaywall="member-video-limit-paywall",e.ErrorModal="error-modal"}(Ie||(Ie={})),function(e){e.PreRecording="pre-recording",e.Countdown="countdown",e.Recording="recording",e.Paused="paused",e.PostRecording="post-recording",e.Closed="closed"}(Me||(Me={})),function(e){e.ScreenAndCamera="screen_cam",e.ScreenOnly="screen",e.CameraOnly="cam"}(Re||(Re={})),function(e){e.Camera="cam",e.Desktop="desktop",e.Tab="tab"}(Be||(Be={})),function(e){e.Success="success",e.Failed="failed"}(Le||(Le={})),function(e){e[e.WS_CLOSE_CODE_NORMAL=1e3]="WS_CLOSE_CODE_NORMAL",e[e.WS_CLOSE_CODE_GOING_AWAY=1001]="WS_CLOSE_CODE_GOING_AWAY",e[e.WS_CLOSE_UNSUPPORTED_DATA=1003]="WS_CLOSE_UNSUPPORTED_DATA",e[e.WS_CLOSE_CODE_ABNORMAL_CLOSE=1006]="WS_CLOSE_CODE_ABNORMAL_CLOSE"}(De||(De={})),function(e){e.Abandoning="wrucore-is-abandoning",e.Abandoned="wrucore-is-abandoned",e.Intitializing="wrucore-is-initializing",e.Ready="wrucore-is-ready",e.Starting="wrucore-is-starting",e.Recording="wrucore-is-recording",e.Pausing="wrucore-is-pausing",e.Paused="wrucore-is-paused",e.Resuming="wrucore-is-resuming",e.Resumed="wrucore-is-resumed",e.Cancelling="wrucore-is-cancelling",e.Cancelled="wrucore-is-cancelled",e.MediaStreamStopped="wrucore-is-media-stream-stopped",e.Completing="wrucore-is-completing",e.FinishedUploading="wrucore-is-finished-uploading",e.Completed="wrucore-is-completed",e.Unknown="wrucore-unknown-state"}(je||(je={})),function(e){e.Lowest="lowest",e.Low="low",e.Normal="normal",e.High="high",e.Highest="highest"}(ze||(ze={})),function(e){e.Development="loom-media-dev",e.Test="loom-media-test",e.Stage="loom-media-staging",e.Production="loom-media-production"}(Ue||(Ue={})),function(e){e.USWest2="us-west-2"}(Fe||(Fe={})),function(e){e.Granted="granted",e.Prompt="prompt",e.Denied="denied"}(qe||(qe={})),function(e){e.PermissionDismissedError="PermissionDismissedError"}(Ke||(Ke={})),function(e){e.Development="development",e.Testbench="testbench",e.Staging="staging",e.Production="production"}(He||(He={})),function(e){e.Development="https://loomlocal.com:4444",e.Staging="https://stage.loom.com",e.Production="https://www.loom.com"}($e||($e={})),function(e){e.TEAM_PLATFORM_QA_AUTH="team-platform-qa-auth",e.ENABLE_SDK_MEMBER_VIDEO_LIMITS="enable-sdk-member-video-limits",e.GUEST_RECORDING_LIMITS="guest-recording-limits",e.ENABLE_SDK_PICTURE_IN_PICTURE="enable-sdk-picture-in-picture"}(Ve||(Ve={})),function(e){e.Closed="closed",e.PreRecording="pre-recording",e.ActiveRecording="active-recording",e.PostRecording="post-recording"}(Ge||(Ge={})),function(e){e.ContentContainer="lo-engage-ext-container",e.Shadow="loom-shadow",e.PreRecordingOverlay="lo-pre-recording-overlay"}(We||(We={}));const Ze={workspaces:[],defaultWorkspace:void 0,defaultWorkspaceAdmins:[]},et=Xe({name:"workspaces",initialState:Ze,reducers:{setWorkspaces(e,t){e.workspaces=t.payload.workspaces,e.defaultWorkspace=t.payload.defaultWorkspace},resetWorkspaces:()=>Ze,setDefaultWorkspaceAdmins(e,t){e.defaultWorkspaceAdmins=t.payload.admins}}}),tt=["personal","team","enterprise"],nt=["team","enterprise"];var rt=Object.freeze({__proto__:null,oAuthKeys:{GOOGLE:"google",SLACK:"slack",WINDOWS:"windows",AUTH0:"auth0",APPLE:"apple"},ACCOUNT_TYPE_PERSONAL:"personal",ACCOUNT_TYPE_TEAM:"team",ACCOUNT_TYPE_ENTERPRISE:"enterprise",TRIALING:"trialing",ALL_ACCOUNT_TYPES:tt,TEAM_ACCOUNT_TYPES:nt,DEFAULT_PREFERENCES_COOKIE:{mediaDevices:{},recorderSettings:{}},SDK_SHARED_USER_RECORDING_LIMIT:5});const it={user:void 0,updateZendeskUser:!1,isFetching:!1,isTrialing:!1,isVerifyingEmail:!1,hasWorkspaceAccess:!1,loginErrorMessage:"",isAuthenticated:!1,termsAccepted:!1,termsAcceptedError:!1,authStep:Ee.First,isSignIn:!1,isSdkSharedUser:!1,hasReachedRecordingLimit:!1,oAuthUri:"",guestRecordingEnabled:!1},ot=Xe({name:"authentication",initialState:it,reducers:{userLoginRequest(e){e.isFetching=!0,e.loginErrorMessage=""},userLogout:()=>it,userLoginSuccess(e,t){const n=t.payload;e.user=n,e.isFetching=!1,e.isTrialing="trialing"===(null==n?void 0:n.trial_status),e.hasWorkspaceAccess=nt.includes(null==n?void 0:n.account_type),e.isAuthenticated=!0,e.hasReachedRecordingLimit=n.sdkPartnerSessionVideos&&n.sdkPartnerSessionVideos.length>=5||!1},userLoginFailed(e,t){e.isFetching=!1,e.loginErrorMessage=t.payload},clearLoginErrorMessage(e){e.loginErrorMessage=""},userVerifyEmail(e,t){const n=t.payload;e.user=n,e.isVerifyingEmail=!0,e.isFetching=!1},setTermsAccepted(e,t){e.termsAccepted=t.payload,t.payload&&(e.termsAcceptedError=!1)},setTermsAcceptedError(e,t){e.termsAcceptedError=t.payload},setAuthStep(e,t){e.authStep=t.payload,e.loginErrorMessage=""},setIsSignIn(e,t){e.isSignIn=t.payload},setOAuthUri(e,t){e.oAuthUri=t.payload},setGuestRecordingEnabled(e,t){e.guestRecordingEnabled=t.payload}},extraReducers:e=>{e.addCase(et.actions.setWorkspaces,((e,t)=>{e.isSdkSharedUser=t.payload.isSdkSharedUser}))}}),at={x:0,y:0},st=[at],ut=[Me.Countdown,Me.Paused,Me.PostRecording,Me.Recording],ct=Qe("UPDATE_MICROPHONE"),dt=Qe("OPEN_PRE_RECORDING_MENU");var lt=Object.freeze({__proto__:null,START_RECORDING:"start-recording",PAUSE_RECORDING:"pause-recording",RESUME_RECORDING:"resume-recording",END_RECORDING:"end-recording",OPEN_PRE_RECORDING_MENU:"open-pre-recording-menu",CLOSE_PRE_RECORDING_MENU:"close-pre-recording-menu",UPDATE_TIME_ELAPSED:"update-time-elapsed",NUM_AUDIO_BARS:7,MAX_Z_INDEX:2147483647,CAMERA_POSITION_BOTTOM_LEFT:at,ALL:st,ACTIVE_RECORDING_STAGES:ut,updateMicrophone:ct,openPreRecordingMenu:dt});const ft={appStage:Me.Closed,audioData:Array(7).fill(0),canceledDesktopError:!1,dimensions:{width:0,height:0},hostUrl:"",isCapturing:!0,isLoomUploading:!1,micMutedError:!1,videoDurationLimit:300,recordingType:Re.ScreenAndCamera,screenType:Be.Desktop,session:void 0,tab:void 0,timeElapsed:0,mediaDevicePermissions:qe.Prompt},pt=Xe({name:"recorder",initialState:ft,reducers:{exitPreRecordingStage:e=>Object.assign(Object.assign({},ft),{hostUrl:e.hostUrl,recordingType:e.recordingType,videoDurationLimit:e.videoDurationLimit}),startCountdown(e){e.appStage=Me.Countdown},startRecording(e,t){e.dimensions=t.payload,e.appStage=Me.Recording},pauseRecording(e){e.appStage=Me.Paused},resumeRecording(e){e.appStage=Me.Recording},cancelRecording:e=>Object.assign(Object.assign({},ft),{screenType:e.screenType,recordingType:e.recordingType,hostUrl:e.hostUrl}),endRecording:e=>Object.assign(Object.assign({},ft),{appStage:Me.PostRecording,screenType:e.screenType,recordingType:e.recordingType,hostUrl:e.hostUrl,isLoomUploading:!0}),updateTimeElapsed(e,t){e.timeElapsed=t.payload},disableCanceledDesktopError(e){e.canceledDesktopError=!1},preCaptureCam(e){e.screenType=Be.Camera},preCaptureDesktop(e){e.screenType=Be.Desktop},preCaptureTab(e){e.screenType=Be.Tab},captureCam(e){e.isCapturing=!0,e.screenType=Be.Camera},captureDesktop(e){e.isCapturing=!0,e.screenType=Be.Desktop},captureTab(e,t){e.isCapturing=!0,e.screenType=Be.Tab,e.tab=t.payload},updateMicMutedError(e,t){e.micMutedError=t.payload},updateRecordingSession(e,t){e.session=t.payload.session,e.tab=t.payload.tab},updateSelectedRecordingType(e,t){e.recordingType=t.payload},closePreviewModal:e=>Object.assign(Object.assign({},ft),{hostUrl:e.hostUrl}),finishedUploading(e){e.isLoomUploading=!1},updateHostUrl(e,t){e.hostUrl=t.payload},updateMediaDevicesState(e,t){e.mediaDevicePermissions=t.payload.mediaDevicePermissions}},extraReducers:e=>{e.addCase(ct,(e=>{e.micMutedError=!1})).addCase(dt,(e=>{e.appStage=Me.PreRecording})).addCase(et.actions.setWorkspaces,((e,{payload:{defaultWorkspace:t}})=>{var n;e.videoDurationLimit=t?t.organization.limits.VIDEO_DURATION||(null===(n=t.member_limits)||void 0===n?void 0:n.VIDEO_DURATION):300})).addCase(et.actions.resetWorkspaces,(e=>{e.videoDurationLimit=300}))}}),ht={isEnabled:!0,isMenuExpanded:!0,isExpandedDefault:!0,isCameraTooltipExpanded:!1,isCaptureSourceExpanded:!1,isMessageShown:!1},vt=Xe({name:"bubbleMenu",initialState:ht,reducers:{toggleBubbleMenu(e){e.isMenuExpanded=!e.isMenuExpanded},toggleBubbleCameraMenu:e=>Object.assign(Object.assign({},e),{camera:!e.isCameraTooltipExpanded,captureSource:!1}),updateBubbleExpandedDefault(e,t){e.isExpandedDefault=t.payload},updateBubbleMessageShown(e,t){e.isMessageShown=t.payload}},extraReducers:e=>{e.addCase(pt.actions.startRecording,(e=>Object.assign(Object.assign({},ht),{isMenuExpanded:e.isExpandedDefault}))).addCase(pt.actions.endRecording,(e=>Object.assign(Object.assign({},ht),{isExpandedDefault:e.isExpandedDefault})))}}),mt=e=>Qe(`consumer_trigger/${e}`),gt={updateBubbleEnabledRecorderSettings:mt("updateBubbleEnabledRecorderSettings")};var yt=Object.freeze({__proto__:null,LOOM_URI:"@*LOOM_URI*@",LOOM_HTTP_URI:"https://loom.com",PLANS_AND_BILLING_URI:"https://loom.com/settings/workspace#plans",MY_VIDEOS_URI:"https://loom.com/my-videos",NOTIFICATIONS_TAB:"notifications-tab",PRE_RECORDING_TAB:"pre-recording-tab",AUDIO_GLOW_ON:"audio-glow-on",AUDIO_GLOW_OFF:"audio-glow-off",AUDIO_GLOW_PAUSED:"audio-glow-paused",TOOLTIP_DISMISSED_STORAGE_KEY:"workspace-tooltip-limit-dismissed"});const wt=Object.assign(Object.assign(Object.assign({},lt),yt),rt),bt={openPreRecordingMenu:dt,updateMicrophone:ct},St={enabled:!0,started:!1,paused:!1,secondsLeft:3,paywallDismissed:!1},Et=Xe({name:"countdown",initialState:St,reducers:{decrementCountdown(e){e.secondsLeft-=1},pauseCountdown(e){e.paused=!0},resumeCountdown(e){e.paused=!1,e.started=!0},enableCancelledDesktopError:()=>St,updateCountdownEnabled(e,t){e.enabled=t.payload},updateCountdownPaywallDismissed(e,t){e.paywallDismissed=t.payload}},extraReducers:e=>{e.addCase(pt.actions.endRecording,(e=>{e.paused=St.paused,e.secondsLeft=St.secondsLeft,e.started=St.started})),e.addCase(pt.actions.cancelRecording,(e=>{e.paused=St.paused,e.secondsLeft=St.secondsLeft,e.started=St.started}))}}),kt={propagateError:mt("propagateError")},Ct={trackAnalytics:mt("trackAnalytics")},xt={quitPage:mt("quitPage")},Tt=Xe({name:"featureFlags",initialState:{activeFlags:[],inactiveFlags:[]},reducers:{setFeatureFlags(e,t){const n=t.payload,r=[],i=[];n.forEach((e=>{const t=e.flag,n=e.resultDetails.result;"true"===n?r.push(t):"false"===n&&i.push(t)})),e.activeFlags=r,e.inactiveFlags=i}}}),Nt={checkDevicePermissions:mt("checkDevicePermissions"),updateMediaDevices:mt("updateMediaDevices"),initializeCameras:mt("initializeCameras"),initializeMicrophones:mt("initializeMicrophones")},Ot={getWorkspaces:mt("get_workspaces"),getDefaultWorkspaceAdmins:mt("get_default_workspace_admins")},_t=Xe({name:"meta",initialState:{latestConsumerTrigger:null},reducers:{},extraReducers:e=>e.addMatcher((e=>"string"==typeof e.type&&e.type.startsWith("consumer_trigger/")),((e,t)=>{e.latestConsumerTrigger=t.type}))}),Pt=Xe({name:"settings",initialState:{apiKey:"",sdkConfig:{bubbleResizable:!0}},reducers:{setApiKey(e,t){e.apiKey=t.payload},setSDKConfig(e,t){e.sdkConfig=Object.assign(Object.assign({},e.sdkConfig),t.payload)}}}),At=Xe({name:"network",initialState:{userCanConnect:!0,userHasInternetConnection:!0,isPlannedDowntime:!1},reducers:{userCanConnect(e,t){e.userCanConnect=t.payload},userHasInternetConnection(e,t){e.userHasInternetConnection=t.payload},isPlannedDowntime(e,t){e.isPlannedDowntime=t.payload}}}),It={startRecording:mt("start_recording"),redoRecording:mt("redo_recording"),deleteRecording:mt("delete_recording"),cancelRecording:mt("cancel_recording"),endRecording:mt("end_recording"),updateMicrophone:mt("update_microphone"),copyVideoUrl:mt("copy_video_url"),togglePauseRecording:mt("toggle_pause_recording"),resumeRecording:mt("resume_recording"),pauseRecording:mt("pause_recording"),oAuthLoginUser:mt("oauth_login_user"),initializeBackground:mt("initialize_background"),getFeatureFlags:mt("get_feature_flags"),checkUserAuthenticated:mt("check_user_authenticated"),emailSignInUser:mt("email_sign_in_user"),emailSignUpUser:mt("email_sign_up_user"),resendVerificationEmail:mt("resend_verification_email"),updateSelectedScreenType:mt("update_selected_screen_type"),finishRecordingPreview:mt("finish_recording_preview"),updateUserRecordingSettings:mt("updateUserRecordingSettings")},Mt={loomVideo:void 0,dimensions:{width:0,height:0},sessionId:void 0,confirm:Ae.InsertRecording},Rt=Xe({name:"preview-modal",initialState:Mt,reducers:{updateLoomVideo(e,t){e.loomVideo=t.payload},confirmationClosePreviewModal(e){e.confirm=Ae.CloseModal},confirmationDeleteRecording(e){e.confirm=Ae.DeleteRecording},confirmationRedoRecording(e){e.confirm=Ae.RedoRecording},resetConfirm(e){e.confirm=Ae.InsertRecording}},extraReducers:e=>{e.addCase(pt.actions.startRecording,((e,t)=>{e.dimensions=t.payload})).addCase(It.startRecording,(()=>Mt)).addCase(pt.actions.updateRecordingSession,((e,t)=>{e.sessionId=t.payload.session.id}))}}),Bt=Xe({name:"pre-recording",initialState:{shouldRenderCamera:!0,modalToDisplay:Ie.RecordingControls,previousView:void 0,showAvatarMenu:!1,tempPhotoExperience:!1,tempAvatarUrl:void 0,tempAvatarDims:{height:void 0,width:void 0},capturingTempAvatar:!1,photoCountdownSeconds:3,isRetake:!1,glowStatus:"audio-glow-off",dbLevel:0,workspaceLimitTooltipDismissed:!1,bannerNotification:void 0,errorModalMessage:""},reducers:{goBackToPreviousView(e){e.previousView===Ie.RecordingControls&&(e.modalToDisplay=Ie.RecordingControls),e.previousView=void 0},setOffline(e){e.modalToDisplay=Ie.Offline},openAuthModalFromView(e,t){e.modalToDisplay=Ie.Authentication,e.previousView=t.payload},openSystemPermissionsModal(e,t){e.modalToDisplay=Ie.SystemPermissions,e.previousView=t.payload},updateGlow(e,t){e.dbLevel=t.payload.level,e.glowStatus=t.payload.status},toggleAvatarMenu(e){e.showAvatarMenu=!e.showAvatarMenu},startTempPhotoExperience(e){e.tempPhotoExperience=!0,e.showAvatarMenu=!1},endTempPhotoExperience(e){e.tempPhotoExperience=!1},resetAvatarCountdown(e){e.photoCountdownSeconds=3},decrementAvatarCountdown(e){e.photoCountdownSeconds-=1},updateTempAvatar(e,t){const{url:n,height:r,width:i}=t.payload;e.tempAvatarUrl=n,e.tempAvatarDims={height:r,width:i}},toggleCapturingAvatar(e){e.capturingTempAvatar=!e.capturingTempAvatar},turnOnCamera(e){e.tempAvatarUrl=void 0},setIsRetake(e,t){e.isRetake=t.payload},updateWorkspaceLimitTooltipDismissed(e,t){e.workspaceLimitTooltipDismissed=t.payload},setBannerNotification(e,t){e.bannerNotification=t.payload},clearBannerNotification(e){e.bannerNotification=void 0},setMemberPaywall(e){e.modalToDisplay=Ie.MemberVideoLimitPaywall},showErrorModal(e,t){e.errorModalMessage=t.payload.errorMessage,e.modalToDisplay=Ie.ErrorModal}},extraReducers:e=>{e.addCase(pt.actions.endRecording,(e=>{e.tempAvatarUrl=void 0,e.showAvatarMenu=!1,e.tempPhotoExperience=!1,e.isRetake=!1})).addCase(ot.actions.userLoginSuccess,(e=>{e.modalToDisplay=Ie.RecordingControls})).addCase(ot.actions.userLogout,(e=>{e.modalToDisplay=Ie.Authentication}))}}),Lt={openPreRecordingMenu:mt("open_pre_recording_menu")},Dt=Xe({name:"recorderSettings",initialState:{availableCameras:[],accessRequested:!1,cameraId:void 0,tempAvatarCameraId:void 0,defaultCameraId:void 0,cameraPosition:at,cameraSize:1,defaultCameraPosition:at,highQuality:!0,flipCamera:!0,microphoneId:void 0,defaultMicrophoneId:void 0,screenType:Be.Desktop,microphones:[],audioEnabled:!0,cameraEnabled:!0,tabAudio:!1,avatarOnScreenOnly:!0,tempHideCamera:!1,currAvatar:0,recordingTimerEnabled:!0},reducers:{accessRequested(e,t){e.accessRequested=t.payload},turnOffMicrophone(e){e.audioEnabled=!1},turnOnMicrophone(e){e.audioEnabled=!0},updateMicrophones(e,t){e.microphones=t.payload},turnOnCamera(e){e.cameraEnabled=!0,e.cameraId=e.defaultCameraId},turnOffCamera(e){e.cameraEnabled=!1,e.cameraId=void 0},updateCamera(e,t){const n=t.payload;return Object.assign(Object.assign({},e),{cameraId:n,defaultCameraId:n||e.defaultCameraId||e.cameraId,tempAvatarCameraId:n||e.defaultCameraId||e.cameraId})},updateDefaultCamera(e,t){e.defaultCameraId=t.payload},updateCameraPosition(e,t){e.cameraPosition={x:t.payload.x,y:t.payload.y}},updateCameraSize(e,t){e.cameraSize=t.payload},updateDefaultCameraPosition(e,t){e.cameraPosition={x:t.payload.x,y:t.payload.y},e.defaultCameraPosition={x:t.payload.x,y:t.payload.y}},updateFlipCamera(e,t){e.flipCamera=t.payload},updateHighQuality(e,t){e.highQuality=t.payload},updateTabAudio(e,t){e.tabAudio=t.payload},updateRecordingTimerEnabled(e,t){e.recordingTimerEnabled=t.payload},updateAvailableCameras(e,t){e.availableCameras=t.payload},updateSelectedScreenType(e,t){e.screenType=t.payload}},extraReducers:e=>{e.addCase(pt.actions.endRecording,(e=>Object.assign(Object.assign({},e),{cameraPosition:e.defaultCameraPosition,highQuality:!0}))).addCase(pt.actions.captureCam,(e=>{e.tabAudio=!1})).addCase(pt.actions.captureDesktop,(e=>{e.tabAudio=!1})).addCase(pt.actions.captureTab,(e=>{e.tabAudio=!1})).addCase(ct,((e,t)=>{e.microphoneId=t.payload,e.defaultMicrophoneId=t.payload}))}});var jt;!function(e){e.RecordingCompleted="recording-completed",e.RecordingLimit="recording-limit",e.UnrecoverableError="unrecoverable-error",e.MediaStreamStopped="media-stream-stopped",e.ScreenRecordingEnded="screen-recording-ended",e.FailedToStartRecording="failed-to-start-recording"}(jt||(jt={}));const zt=re({authentication:ot.reducer,bubbleMenu:vt.reducer,countdown:Et.reducer,featureFlags:Tt.reducer,network:At.reducer,preRecording:Bt.reducer,previewRecording:Rt.reducer,recorder:pt.reducer,recorderSettings:Dt.reducer,workspaces:et.reducer,meta:_t.reducer,settings:Pt.reducer}),Ut=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ot.actions),vt.actions),Et.actions),Tt.actions),At.actions),Bt.actions),Rt.actions),pt.actions),Dt.actions),et.actions),_t.actions),Pt.actions),bt),Ft=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Ct),gt),kt),Nt),xt),Lt),It),Ot),qt=(e,t)=>({trigger:e,handler:t}),Kt="integrations.sdk",Ht=Kt+".consumers",$t=Ht+".start_recording",Vt=["SDK Record Button Configured"],Gt=[({analytics:e,metrics:t})=>qt(Ft.trackAnalytics,(({},{event:n,properties:r,trackOverrides:i})=>{Vt.includes(n)||(e.track(n,r,i),t.increment("integrations.sdk.analytics",{event:n}))}))];var Wt=[],Yt=[],Qt="undefined"!=typeof Uint8Array?Uint8Array:Array,Jt=!1;function Xt(){Jt=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,n=e.length;t<n;++t)Wt[t]=e[t],Yt[e.charCodeAt(t)]=t;Yt["-".charCodeAt(0)]=62,Yt["_".charCodeAt(0)]=63}function Zt(e,t,n){for(var r,i,o=[],a=t;a<n;a+=3)r=(e[a]<<16)+(e[a+1]<<8)+e[a+2],o.push(Wt[(i=r)>>18&63]+Wt[i>>12&63]+Wt[i>>6&63]+Wt[63&i]);return o.join("")}function en(e){var t;Jt||Xt();for(var n=e.length,r=n%3,i="",o=[],a=16383,s=0,u=n-r;s<u;s+=a)o.push(Zt(e,s,s+a>u?u:s+a));return 1===r?(t=e[n-1],i+=Wt[t>>2],i+=Wt[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=Wt[t>>10],i+=Wt[t>>4&63],i+=Wt[t<<2&63],i+="="),o.push(i),o.join("")}function tn(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,d=-7,l=n?i-1:0,f=n?-1:1,p=e[t+l];for(l+=f,o=p&(1<<-d)-1,p>>=-d,d+=s;d>0;o=256*o+e[t+l],l+=f,d-=8);for(a=o&(1<<-d)-1,o>>=-d,d+=r;d>0;a=256*a+e[t+l],l+=f,d-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)}function nn(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,d=(1<<c)-1,l=d>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+l>=1?f/u:f*Math.pow(2,1-l))*u>=2&&(a++,u/=2),a+l>=d?(s=0,a=d):a+l>=1?(s=(t*u-1)*Math.pow(2,i),a+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+p]=255&a,p+=h,a/=256,c-=8);e[n+p-h]|=128*v}var rn={}.toString,on=Array.isArray||function(e){return"[object Array]"==rn.call(e)};function an(){return un.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function sn(e,t){if(an()<t)throw new RangeError("Invalid typed array length");return un.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=un.prototype:(null===e&&(e=new un(t)),e.length=t),e}function un(e,t,n){if(!(un.TYPED_ARRAY_SUPPORT||this instanceof un))return new un(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return ln(this,e)}return cn(this,e,t,n)}function cn(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);un.TYPED_ARRAY_SUPPORT?(e=t).__proto__=un.prototype:e=fn(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!un.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|vn(t,n),i=(e=sn(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(hn(t)){var n=0|pn(t.length);return 0===(e=sn(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?sn(e,0):fn(e,t);if("Buffer"===t.type&&on(t.data))return fn(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function dn(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function ln(e,t){if(dn(t),e=sn(e,t<0?0:0|pn(t)),!un.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function fn(e,t){var n=t.length<0?0:0|pn(t.length);e=sn(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function pn(e){if(e>=an())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+an().toString(16)+" bytes");return 0|e}function hn(e){return!(null==e||!e._isBuffer)}function vn(e,t){if(hn(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Fn(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return qn(e).length;default:if(r)return Fn(e).length;t=(""+t).toLowerCase(),r=!0}}function mn(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return Pn(this,t,n);case"utf8":case"utf-8":return Nn(this,t,n);case"ascii":return On(this,t,n);case"latin1":case"binary":return _n(this,t,n);case"base64":return Tn(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return An(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function gn(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function yn(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=un.from(t,r)),hn(t))return 0===t.length?-1:wn(e,t,n,r,i);if("number"==typeof t)return t&=255,un.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):wn(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function wn(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var d=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===d?0:o-d)){if(-1===d&&(d=o),o-d+1===u)return d*a}else-1!==d&&(o-=o-d),d=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var l=!0,f=0;f<u;f++)if(c(e,o+f)!==c(t,f)){l=!1;break}if(l)return o}return-1}function bn(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function Sn(e,t,n,r){return Kn(Fn(t,e.length-n),e,n,r)}function En(e,t,n,r){return Kn(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function kn(e,t,n,r){return En(e,t,n,r)}function Cn(e,t,n,r){return Kn(qn(t),e,n,r)}function xn(e,t,n,r){return Kn(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function Tn(e,t,n){return 0===t&&n===e.length?en(e):en(e.slice(t,n))}function Nn(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,u,c=e[i],d=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=n)switch(l){case 1:c<128&&(d=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(d=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(d=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(d=u)}null===d?(d=65533,l=1):d>65535&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),i+=l}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}un.TYPED_ARRAY_SUPPORT=void 0===e.TYPED_ARRAY_SUPPORT||e.TYPED_ARRAY_SUPPORT,un.poolSize=8192,un._augment=function(e){return e.__proto__=un.prototype,e},un.from=function(e,t,n){return cn(null,e,t,n)},un.TYPED_ARRAY_SUPPORT&&(un.prototype.__proto__=Uint8Array.prototype,un.__proto__=Uint8Array),un.alloc=function(e,t,n){return function(e,t,n,r){return dn(t),t<=0?sn(e,t):void 0!==n?"string"==typeof r?sn(e,t).fill(n,r):sn(e,t).fill(n):sn(e,t)}(null,e,t,n)},un.allocUnsafe=function(e){return ln(null,e)},un.allocUnsafeSlow=function(e){return ln(null,e)},un.isBuffer=function(e){return null!=e&&(!!e._isBuffer||Hn(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&Hn(e.slice(0,0))}(e))},un.compare=function(e,t){if(!hn(e)||!hn(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},un.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},un.concat=function(e,t){if(!on(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return un.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=un.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!hn(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},un.byteLength=vn,un.prototype._isBuffer=!0,un.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)gn(this,t,t+1);return this},un.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)gn(this,t,t+3),gn(this,t+1,t+2);return this},un.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)gn(this,t,t+7),gn(this,t+1,t+6),gn(this,t+2,t+5),gn(this,t+3,t+4);return this},un.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?Nn(this,0,e):mn.apply(this,arguments)},un.prototype.equals=function(e){if(!hn(e))throw new TypeError("Argument must be a Buffer");return this===e||0===un.compare(this,e)},un.prototype.inspect=function(){var e="";return this.length>0&&(e=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(e+=" ... ")),"<Buffer "+e+">"},un.prototype.compare=function(e,t,n,r,i){if(!hn(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(r,i),c=e.slice(t,n),d=0;d<s;++d)if(u[d]!==c[d]){o=u[d],a=c[d];break}return o<a?-1:a<o?1:0},un.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},un.prototype.indexOf=function(e,t,n){return yn(this,e,t,n,!0)},un.prototype.lastIndexOf=function(e,t,n){return yn(this,e,t,n,!1)},un.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return bn(this,e,t,n);case"utf8":case"utf-8":return Sn(this,e,t,n);case"ascii":return En(this,e,t,n);case"latin1":case"binary":return kn(this,e,t,n);case"base64":return Cn(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xn(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},un.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function On(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function _n(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function Pn(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=Un(e[o]);return i}function An(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function In(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function Mn(e,t,n,r,i,o){if(!hn(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function Rn(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function Bn(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function Ln(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Dn(e,t,n,r,i){return i||Ln(e,0,n,4),nn(e,t,n,r,23,4),n+4}function jn(e,t,n,r,i){return i||Ln(e,0,n,8),nn(e,t,n,r,52,8),n+8}un.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),un.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=un.prototype;else{var i=t-e;n=new un(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},un.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||In(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},un.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||In(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},un.prototype.readUInt8=function(e,t){return t||In(e,1,this.length),this[e]},un.prototype.readUInt16LE=function(e,t){return t||In(e,2,this.length),this[e]|this[e+1]<<8},un.prototype.readUInt16BE=function(e,t){return t||In(e,2,this.length),this[e]<<8|this[e+1]},un.prototype.readUInt32LE=function(e,t){return t||In(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},un.prototype.readUInt32BE=function(e,t){return t||In(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},un.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||In(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},un.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||In(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},un.prototype.readInt8=function(e,t){return t||In(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},un.prototype.readInt16LE=function(e,t){t||In(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},un.prototype.readInt16BE=function(e,t){t||In(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},un.prototype.readInt32LE=function(e,t){return t||In(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},un.prototype.readInt32BE=function(e,t){return t||In(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},un.prototype.readFloatLE=function(e,t){return t||In(e,4,this.length),tn(this,e,!0,23,4)},un.prototype.readFloatBE=function(e,t){return t||In(e,4,this.length),tn(this,e,!1,23,4)},un.prototype.readDoubleLE=function(e,t){return t||In(e,8,this.length),tn(this,e,!0,52,8)},un.prototype.readDoubleBE=function(e,t){return t||In(e,8,this.length),tn(this,e,!1,52,8)},un.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||Mn(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},un.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||Mn(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},un.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||Mn(this,e,t,1,255,0),un.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},un.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||Mn(this,e,t,2,65535,0),un.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Rn(this,e,t,!0),t+2},un.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||Mn(this,e,t,2,65535,0),un.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Rn(this,e,t,!1),t+2},un.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||Mn(this,e,t,4,4294967295,0),un.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):Bn(this,e,t,!0),t+4},un.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||Mn(this,e,t,4,4294967295,0),un.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Bn(this,e,t,!1),t+4},un.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);Mn(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},un.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);Mn(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},un.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||Mn(this,e,t,1,127,-128),un.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},un.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||Mn(this,e,t,2,32767,-32768),un.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):Rn(this,e,t,!0),t+2},un.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||Mn(this,e,t,2,32767,-32768),un.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):Rn(this,e,t,!1),t+2},un.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||Mn(this,e,t,4,2147483647,-2147483648),un.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):Bn(this,e,t,!0),t+4},un.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||Mn(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),un.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):Bn(this,e,t,!1),t+4},un.prototype.writeFloatLE=function(e,t,n){return Dn(this,e,t,!0,n)},un.prototype.writeFloatBE=function(e,t,n){return Dn(this,e,t,!1,n)},un.prototype.writeDoubleLE=function(e,t,n){return jn(this,e,t,!0,n)},un.prototype.writeDoubleBE=function(e,t,n){return jn(this,e,t,!1,n)},un.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!un.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},un.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!un.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=hn(e)?e:Fn(new un(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var zn=/[^+\/0-9A-Za-z-_]/g;function Un(e){return e<16?"0"+e.toString(16):e.toString(16)}function Fn(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function qn(e){return function(e){var t,n,r,i,o,a;Jt||Xt();var s=e.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===e[s-2]?2:"="===e[s-1]?1:0,a=new Qt(3*s/4-o),r=o>0?s-4:s;var u=0;for(t=0,n=0;t<r;t+=4,n+=3)i=Yt[e.charCodeAt(t)]<<18|Yt[e.charCodeAt(t+1)]<<12|Yt[e.charCodeAt(t+2)]<<6|Yt[e.charCodeAt(t+3)],a[u++]=i>>16&255,a[u++]=i>>8&255,a[u++]=255&i;return 2===o?(i=Yt[e.charCodeAt(t)]<<2|Yt[e.charCodeAt(t+1)]>>4,a[u++]=255&i):1===o&&(i=Yt[e.charCodeAt(t)]<<10|Yt[e.charCodeAt(t+1)]<<4|Yt[e.charCodeAt(t+2)]>>2,a[u++]=i>>8&255,a[u++]=255&i),a}(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(zn,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Kn(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Hn(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}var $n=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const Vn=e=>un.from(e).toString("base64");function Gn(e){return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Wn="function"==typeof Symbol&&null!=Symbol.toStringTag?Symbol.toStringTag:"@@toStringTag";function Yn(e,t){for(var n,r=/\r\n|[\n\r]/g,i=1,o=t+1;(n=r.exec(e.body))&&n.index<t;)i+=1,o=t+1-(n.index+n[0].length);return{line:i,column:o}}function Qn(e){return Jn(e.source,Yn(e.source,e.start))}function Jn(e,t){var n=e.locationOffset.column-1,r=Zn(n)+e.body,i=t.line-1,o=e.locationOffset.line-1,a=t.line+o,s=1===t.line?n:0,u=t.column+s,c="".concat(e.name,":").concat(a,":").concat(u,"\n"),d=r.split(/\r\n|[\n\r]/g),l=d[i];if(l.length>120){for(var f=Math.floor(u/80),p=u%80,h=[],v=0;v<l.length;v+=80)h.push(l.slice(v,v+80));return c+Xn([["".concat(a),h[0]]].concat(h.slice(1,f+1).map((function(e){return["",e]})),[[" ",Zn(p-1)+"^"],["",h[f+1]]]))}return c+Xn([["".concat(a-1),d[i-1]],["".concat(a),l],["",Zn(u-1)+"^"],["".concat(a+1),d[i+1]]])}function Xn(e){var t=e.filter((function(e){return e[0],void 0!==e[1]})),n=Math.max.apply(Math,t.map((function(e){return e[0].length})));return t.map((function(e){var t=e[0],r=e[1];return function(e,t){return Zn(e-t.length)+t}(n,t)+(r?" | "+r:" |")})).join("\n")}function Zn(e){return Array(e+1).join(" ")}function er(e){return(er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nr(e,t){return!t||"object"!==er(t)&&"function"!=typeof t?rr(e):t}function rr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ir(e){var t="function"==typeof Map?new Map:void 0;return(ir=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return or(e,arguments,ur(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),sr(r,e)})(e)}function or(e,t,n){return(or=ar()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&sr(i,n.prototype),i}).apply(null,arguments)}function ar(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function sr(e,t){return(sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ur(e){return(ur=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var cr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sr(e,t)}(s,ir(Error));var t,n,r,i,o,a=(t=s,n=ar(),function(){var e,r=ur(t);if(n){var i=ur(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return nr(this,e)});function s(e,t,n,r,i,o,u){var c,d,l,f,p;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),p=a.call(this,e);var h,v=Array.isArray(t)?0!==t.length?t:void 0:t?[t]:void 0,m=n;!m&&v&&(m=null===(h=v[0].loc)||void 0===h?void 0:h.source);var g,y=r;!y&&v&&(y=v.reduce((function(e,t){return t.loc&&e.push(t.loc.start),e}),[])),y&&0===y.length&&(y=void 0),r&&n?g=r.map((function(e){return Yn(n,e)})):v&&(g=v.reduce((function(e,t){return t.loc&&e.push(Yn(t.loc.source,t.loc.start)),e}),[]));var w,b=u;if(null==b&&null!=o){var S=o.extensions;"object"==Gn(w=S)&&null!==w&&(b=S)}return Object.defineProperties(rr(p),{name:{value:"GraphQLError"},message:{value:e,enumerable:!0,writable:!0},locations:{value:null!==(c=g)&&void 0!==c?c:void 0,enumerable:null!=g},path:{value:null!=i?i:void 0,enumerable:null!=i},nodes:{value:null!=v?v:void 0},source:{value:null!==(d=m)&&void 0!==d?d:void 0},positions:{value:null!==(l=y)&&void 0!==l?l:void 0},originalError:{value:o},extensions:{value:null!==(f=b)&&void 0!==f?f:void 0,enumerable:null!=b}}),null!=o&&o.stack?(Object.defineProperty(rr(p),"stack",{value:o.stack,writable:!0,configurable:!0}),nr(p)):(Error.captureStackTrace?Error.captureStackTrace(rr(p),s):Object.defineProperty(rr(p),"stack",{value:Error().stack,writable:!0,configurable:!0}),p)}return r=s,(i=[{key:"toString",value:function(){return function(e){var t=e.message;if(e.nodes)for(var n=0,r=e.nodes;n<r.length;n++){var i=r[n];i.loc&&(t+="\n\n"+Qn(i.loc))}else if(e.source&&e.locations)for(var o=0,a=e.locations;o<a.length;o++){var s=a[o];t+="\n\n"+Jn(e.source,s)}return t}(this)}},{key:Wn,get:function(){return"Object"}}])&&tr(r.prototype,i),o&&tr(r,o),s}();function dr(e,t,n){return new cr("Syntax Error: ".concat(n),void 0,e,[t])}var lr=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"});var fr="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;function pr(e){var t=e.prototype.toJSON;"function"==typeof t||function(e,t){if(!Boolean(e))throw new Error(null!=t?t:"Unexpected invariant triggered.")}(0),e.prototype.inspect=t,fr&&(e.prototype[fr]=t)}var hr=function(){function e(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}return e.prototype.toJSON=function(){return{start:this.start,end:this.end}},e}();pr(hr);var vr=function(){function e(e,t,n,r,i,o,a){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=a,this.prev=o,this.next=null}return e.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();function mr(e){return null!=e&&"string"==typeof e.kind}pr(vr);var gr=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function yr(e){return(yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wr(e){return br(e,[])}function br(e,t){switch(yr(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":return null===e?"null":function(e,t){if(-1!==t.indexOf(e))return"[Circular]";var n=[].concat(t,[e]),r=function(e){var t=e[String(fr)];if("function"==typeof t)return t;if("function"==typeof e.inspect)return e.inspect}(e);if(void 0!==r){var i=r.call(e);if(i!==e)return"string"==typeof i?i:br(i,n)}else if(Array.isArray(e))return function(e,t){if(0===e.length)return"[]";if(t.length>2)return"[Array]";for(var n=Math.min(10,e.length),r=e.length-n,i=[],o=0;o<n;++o)i.push(br(e[o],t));1===r?i.push("... 1 more item"):r>1&&i.push("... ".concat(r," more items"));return"["+i.join(", ")+"]"}(e,n);return function(e,t){var n=Object.keys(e);if(0===n.length)return"{}";if(t.length>2)return"["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){var n=e.constructor.name;if("string"==typeof n&&""!==n)return n}return t}(e)+"]";return"{ "+n.map((function(n){return n+": "+br(e[n],t)})).join(", ")+" }"}(e,n)}(e,t);default:return String(e)}}function Sr(e,t){if(!Boolean(e))throw new Error(t)}function Er(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var kr=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GraphQL request",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{line:1,column:1};"string"==typeof e||Sr(0,"Body must be a string. Received: ".concat(wr(e),".")),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||Sr(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||Sr(0,"column in locationOffset is 1-indexed and must be positive.")}var t,n,r;return t=e,(n=[{key:Wn,get:function(){return"Source"}}])&&Er(t.prototype,n),r&&Er(t,r),e}();var Cr=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function xr(e){var t=e.split(/\r\n|[\n\r]/g),n=function(e){for(var t,n=!0,r=!0,i=0,o=null,a=0;a<e.length;++a)switch(e.charCodeAt(a)){case 13:10===e.charCodeAt(a+1)&&++a;case 10:n=!1,r=!0,i=0;break;case 9:case 32:++i;break;default:r&&!n&&(null===o||i<o)&&(o=i),r=!1}return null!==(t=o)&&void 0!==t?t:0}(e);if(0!==n)for(var r=1;r<t.length;r++)t[r]=t[r].slice(n);for(var i=0;i<t.length&&Tr(t[i]);)++i;for(var o=t.length;o>i&&Tr(t[o-1]);)--o;return t.slice(i,o).join("\n")}function Tr(e){for(var t=0;t<e.length;++t)if(" "!==e[t]&&"\t"!==e[t])return!1;return!0}var Nr=function(){function e(e){var t=new vr(gr.SOF,0,0,0,0,null);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}var t=e.prototype;return t.advance=function(){return this.lastToken=this.token,this.token=this.lookahead()},t.lookahead=function(){var e=this.token;if(e.kind!==gr.EOF)do{var t;e=null!==(t=e.next)&&void 0!==t?t:e.next=_r(this,e)}while(e.kind===gr.COMMENT);return e},e}();function Or(e){return isNaN(e)?gr.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function _r(e,t){for(var n=e.source,r=n.body,i=r.length,o=t.end;o<i;){var a=r.charCodeAt(o),s=e.line,u=1+o-e.lineStart;switch(a){case 65279:case 9:case 32:case 44:++o;continue;case 10:++o,++e.line,e.lineStart=o;continue;case 13:10===r.charCodeAt(o+1)?o+=2:++o,++e.line,e.lineStart=o;continue;case 33:return new vr(gr.BANG,o,o+1,s,u,t);case 35:return Ar(n,o,s,u,t);case 36:return new vr(gr.DOLLAR,o,o+1,s,u,t);case 38:return new vr(gr.AMP,o,o+1,s,u,t);case 40:return new vr(gr.PAREN_L,o,o+1,s,u,t);case 41:return new vr(gr.PAREN_R,o,o+1,s,u,t);case 46:if(46===r.charCodeAt(o+1)&&46===r.charCodeAt(o+2))return new vr(gr.SPREAD,o,o+3,s,u,t);break;case 58:return new vr(gr.COLON,o,o+1,s,u,t);case 61:return new vr(gr.EQUALS,o,o+1,s,u,t);case 64:return new vr(gr.AT,o,o+1,s,u,t);case 91:return new vr(gr.BRACKET_L,o,o+1,s,u,t);case 93:return new vr(gr.BRACKET_R,o,o+1,s,u,t);case 123:return new vr(gr.BRACE_L,o,o+1,s,u,t);case 124:return new vr(gr.PIPE,o,o+1,s,u,t);case 125:return new vr(gr.BRACE_R,o,o+1,s,u,t);case 34:return 34===r.charCodeAt(o+1)&&34===r.charCodeAt(o+2)?Br(n,o,s,u,t,e):Rr(n,o,s,u,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Ir(n,o,a,s,u,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return jr(n,o,s,u,t)}throw dr(n,o,Pr(a))}var c=e.line,d=1+o-e.lineStart;return new vr(gr.EOF,i,i,c,d,t)}function Pr(e){return e<32&&9!==e&&10!==e&&13!==e?"Cannot contain the invalid character ".concat(Or(e),"."):39===e?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(Or(e),".")}function Ar(e,t,n,r,i){var o,a=e.body,s=t;do{o=a.charCodeAt(++s)}while(!isNaN(o)&&(o>31||9===o));return new vr(gr.COMMENT,t,s,n,r,i,a.slice(t+1,s))}function Ir(e,t,n,r,i,o){var a=e.body,s=n,u=t,c=!1;if(45===s&&(s=a.charCodeAt(++u)),48===s){if((s=a.charCodeAt(++u))>=48&&s<=57)throw dr(e,u,"Invalid number, unexpected digit after 0: ".concat(Or(s),"."))}else u=Mr(e,u,s),s=a.charCodeAt(u);if(46===s&&(c=!0,s=a.charCodeAt(++u),u=Mr(e,u,s),s=a.charCodeAt(u)),69!==s&&101!==s||(c=!0,43!==(s=a.charCodeAt(++u))&&45!==s||(s=a.charCodeAt(++u)),u=Mr(e,u,s),s=a.charCodeAt(u)),46===s||function(e){return 95===e||e>=65&&e<=90||e>=97&&e<=122}(s))throw dr(e,u,"Invalid number, expected digit but got: ".concat(Or(s),"."));return new vr(c?gr.FLOAT:gr.INT,t,u,r,i,o,a.slice(t,u))}function Mr(e,t,n){var r=e.body,i=t,o=n;if(o>=48&&o<=57){do{o=r.charCodeAt(++i)}while(o>=48&&o<=57);return i}throw dr(e,i,"Invalid number, expected digit but got: ".concat(Or(o),"."))}function Rr(e,t,n,r,i){for(var o=e.body,a=t+1,s=a,u=0,c="";a<o.length&&!isNaN(u=o.charCodeAt(a))&&10!==u&&13!==u;){if(34===u)return c+=o.slice(s,a),new vr(gr.STRING,t,a+1,n,r,i,c);if(u<32&&9!==u)throw dr(e,a,"Invalid character within String: ".concat(Or(u),"."));if(++a,92===u){switch(c+=o.slice(s,a-1),u=o.charCodeAt(a)){case 34:c+='"';break;case 47:c+="/";break;case 92:c+="\\";break;case 98:c+="\b";break;case 102:c+="\f";break;case 110:c+="\n";break;case 114:c+="\r";break;case 116:c+="\t";break;case 117:var d=Lr(o.charCodeAt(a+1),o.charCodeAt(a+2),o.charCodeAt(a+3),o.charCodeAt(a+4));if(d<0){var l=o.slice(a+1,a+5);throw dr(e,a,"Invalid character escape sequence: \\u".concat(l,"."))}c+=String.fromCharCode(d),a+=4;break;default:throw dr(e,a,"Invalid character escape sequence: \\".concat(String.fromCharCode(u),"."))}s=++a}}throw dr(e,a,"Unterminated string.")}function Br(e,t,n,r,i,o){for(var a=e.body,s=t+3,u=s,c=0,d="";s<a.length&&!isNaN(c=a.charCodeAt(s));){if(34===c&&34===a.charCodeAt(s+1)&&34===a.charCodeAt(s+2))return d+=a.slice(u,s),new vr(gr.BLOCK_STRING,t,s+3,n,r,i,xr(d));if(c<32&&9!==c&&10!==c&&13!==c)throw dr(e,s,"Invalid character within String: ".concat(Or(c),"."));10===c?(++s,++o.line,o.lineStart=s):13===c?(10===a.charCodeAt(s+1)?s+=2:++s,++o.line,o.lineStart=s):92===c&&34===a.charCodeAt(s+1)&&34===a.charCodeAt(s+2)&&34===a.charCodeAt(s+3)?(d+=a.slice(u,s)+'"""',u=s+=4):++s}throw dr(e,s,"Unterminated string.")}function Lr(e,t,n,r){return Dr(e)<<12|Dr(t)<<8|Dr(n)<<4|Dr(r)}function Dr(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function jr(e,t,n,r,i){for(var o=e.body,a=o.length,s=t+1,u=0;s!==a&&!isNaN(u=o.charCodeAt(s))&&(95===u||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122);)++s;return new vr(gr.NAME,t,s,n,r,i,o.slice(t,s))}function zr(e,t){return new Ur(e,t).parseDocument()}var Ur=function(){function e(e,t){var n=function(e){return e instanceof kr}(e)?e:new kr(e);this._lexer=new Nr(n),this._options=t}var t=e.prototype;return t.parseName=function(){var e=this.expectToken(gr.NAME);return{kind:lr.NAME,value:e.value,loc:this.loc(e)}},t.parseDocument=function(){var e=this._lexer.token;return{kind:lr.DOCUMENT,definitions:this.many(gr.SOF,this.parseDefinition,gr.EOF),loc:this.loc(e)}},t.parseDefinition=function(){if(this.peek(gr.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(gr.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},t.parseOperationDefinition=function(){var e=this._lexer.token;if(this.peek(gr.BRACE_L))return{kind:lr.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(e)};var t,n=this.parseOperationType();return this.peek(gr.NAME)&&(t=this.parseName()),{kind:lr.OPERATION_DEFINITION,operation:n,name:t,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseOperationType=function(){var e=this.expectToken(gr.NAME);switch(e.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(e)},t.parseVariableDefinitions=function(){return this.optionalMany(gr.PAREN_L,this.parseVariableDefinition,gr.PAREN_R)},t.parseVariableDefinition=function(){var e=this._lexer.token;return{kind:lr.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(gr.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(gr.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(e)}},t.parseVariable=function(){var e=this._lexer.token;return this.expectToken(gr.DOLLAR),{kind:lr.VARIABLE,name:this.parseName(),loc:this.loc(e)}},t.parseSelectionSet=function(){var e=this._lexer.token;return{kind:lr.SELECTION_SET,selections:this.many(gr.BRACE_L,this.parseSelection,gr.BRACE_R),loc:this.loc(e)}},t.parseSelection=function(){return this.peek(gr.SPREAD)?this.parseFragment():this.parseField()},t.parseField=function(){var e,t,n=this._lexer.token,r=this.parseName();return this.expectOptionalToken(gr.COLON)?(e=r,t=this.parseName()):t=r,{kind:lr.FIELD,alias:e,name:t,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(gr.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},t.parseArguments=function(e){var t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(gr.PAREN_L,t,gr.PAREN_R)},t.parseArgument=function(){var e=this._lexer.token,t=this.parseName();return this.expectToken(gr.COLON),{kind:lr.ARGUMENT,name:t,value:this.parseValueLiteral(!1),loc:this.loc(e)}},t.parseConstArgument=function(){var e=this._lexer.token;return{kind:lr.ARGUMENT,name:this.parseName(),value:(this.expectToken(gr.COLON),this.parseValueLiteral(!0)),loc:this.loc(e)}},t.parseFragment=function(){var e=this._lexer.token;this.expectToken(gr.SPREAD);var t=this.expectOptionalKeyword("on");return!t&&this.peek(gr.NAME)?{kind:lr.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(e)}:{kind:lr.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseFragmentDefinition=function(){var e,t=this._lexer.token;return this.expectKeyword("fragment"),!0===(null===(e=this._options)||void 0===e?void 0:e.experimentalFragmentVariables)?{kind:lr.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}:{kind:lr.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},t.parseFragmentName=function(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()},t.parseValueLiteral=function(e){var t=this._lexer.token;switch(t.kind){case gr.BRACKET_L:return this.parseList(e);case gr.BRACE_L:return this.parseObject(e);case gr.INT:return this._lexer.advance(),{kind:lr.INT,value:t.value,loc:this.loc(t)};case gr.FLOAT:return this._lexer.advance(),{kind:lr.FLOAT,value:t.value,loc:this.loc(t)};case gr.STRING:case gr.BLOCK_STRING:return this.parseStringLiteral();case gr.NAME:switch(this._lexer.advance(),t.value){case"true":return{kind:lr.BOOLEAN,value:!0,loc:this.loc(t)};case"false":return{kind:lr.BOOLEAN,value:!1,loc:this.loc(t)};case"null":return{kind:lr.NULL,loc:this.loc(t)};default:return{kind:lr.ENUM,value:t.value,loc:this.loc(t)}}case gr.DOLLAR:if(!e)return this.parseVariable()}throw this.unexpected()},t.parseStringLiteral=function(){var e=this._lexer.token;return this._lexer.advance(),{kind:lr.STRING,value:e.value,block:e.kind===gr.BLOCK_STRING,loc:this.loc(e)}},t.parseList=function(e){var t=this,n=this._lexer.token;return{kind:lr.LIST,values:this.any(gr.BRACKET_L,(function(){return t.parseValueLiteral(e)}),gr.BRACKET_R),loc:this.loc(n)}},t.parseObject=function(e){var t=this,n=this._lexer.token;return{kind:lr.OBJECT,fields:this.any(gr.BRACE_L,(function(){return t.parseObjectField(e)}),gr.BRACE_R),loc:this.loc(n)}},t.parseObjectField=function(e){var t=this._lexer.token,n=this.parseName();return this.expectToken(gr.COLON),{kind:lr.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e),loc:this.loc(t)}},t.parseDirectives=function(e){for(var t=[];this.peek(gr.AT);)t.push(this.parseDirective(e));return t},t.parseDirective=function(e){var t=this._lexer.token;return this.expectToken(gr.AT),{kind:lr.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e),loc:this.loc(t)}},t.parseTypeReference=function(){var e,t=this._lexer.token;return this.expectOptionalToken(gr.BRACKET_L)?(e=this.parseTypeReference(),this.expectToken(gr.BRACKET_R),e={kind:lr.LIST_TYPE,type:e,loc:this.loc(t)}):e=this.parseNamedType(),this.expectOptionalToken(gr.BANG)?{kind:lr.NON_NULL_TYPE,type:e,loc:this.loc(t)}:e},t.parseNamedType=function(){var e=this._lexer.token;return{kind:lr.NAMED_TYPE,name:this.parseName(),loc:this.loc(e)}},t.parseTypeSystemDefinition=function(){var e=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(e.kind===gr.NAME)switch(e.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(e)},t.peekDescription=function(){return this.peek(gr.STRING)||this.peek(gr.BLOCK_STRING)},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},t.parseSchemaDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");var n=this.parseDirectives(!0),r=this.many(gr.BRACE_L,this.parseOperationTypeDefinition,gr.BRACE_R);return{kind:lr.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:r,loc:this.loc(e)}},t.parseOperationTypeDefinition=function(){var e=this._lexer.token,t=this.parseOperationType();this.expectToken(gr.COLON);var n=this.parseNamedType();return{kind:lr.OPERATION_TYPE_DEFINITION,operation:t,type:n,loc:this.loc(e)}},t.parseScalarTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");var n=this.parseName(),r=this.parseDirectives(!0);return{kind:lr.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");var n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();return{kind:lr.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o,loc:this.loc(e)}},t.parseImplementsInterfaces=function(){var e;if(!this.expectOptionalKeyword("implements"))return[];if(!0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLImplementsInterfaces)){var t=[];this.expectOptionalToken(gr.AMP);do{t.push(this.parseNamedType())}while(this.expectOptionalToken(gr.AMP)||this.peek(gr.NAME));return t}return this.delimitedMany(gr.AMP,this.parseNamedType)},t.parseFieldsDefinition=function(){var e;return!0===(null===(e=this._options)||void 0===e?void 0:e.allowLegacySDLEmptyFields)&&this.peek(gr.BRACE_L)&&this._lexer.lookahead().kind===gr.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(gr.BRACE_L,this.parseFieldDefinition,gr.BRACE_R)},t.parseFieldDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseArgumentDefs();this.expectToken(gr.COLON);var i=this.parseTypeReference(),o=this.parseDirectives(!0);return{kind:lr.FIELD_DEFINITION,description:t,name:n,arguments:r,type:i,directives:o,loc:this.loc(e)}},t.parseArgumentDefs=function(){return this.optionalMany(gr.PAREN_L,this.parseInputValueDef,gr.PAREN_R)},t.parseInputValueDef=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName();this.expectToken(gr.COLON);var r,i=this.parseTypeReference();this.expectOptionalToken(gr.EQUALS)&&(r=this.parseValueLiteral(!0));var o=this.parseDirectives(!0);return{kind:lr.INPUT_VALUE_DEFINITION,description:t,name:n,type:i,defaultValue:r,directives:o,loc:this.loc(e)}},t.parseInterfaceTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");var n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();return{kind:lr.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o,loc:this.loc(e)}},t.parseUnionTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseUnionMemberTypes();return{kind:lr.UNION_TYPE_DEFINITION,description:t,name:n,directives:r,types:i,loc:this.loc(e)}},t.parseUnionMemberTypes=function(){return this.expectOptionalToken(gr.EQUALS)?this.delimitedMany(gr.PIPE,this.parseNamedType):[]},t.parseEnumTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseEnumValuesDefinition();return{kind:lr.ENUM_TYPE_DEFINITION,description:t,name:n,directives:r,values:i,loc:this.loc(e)}},t.parseEnumValuesDefinition=function(){return this.optionalMany(gr.BRACE_L,this.parseEnumValueDefinition,gr.BRACE_R)},t.parseEnumValueDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseDirectives(!0);return{kind:lr.ENUM_VALUE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseInputObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseInputFieldsDefinition();return{kind:lr.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:r,fields:i,loc:this.loc(e)}},t.parseInputFieldsDefinition=function(){return this.optionalMany(gr.BRACE_L,this.parseInputValueDef,gr.BRACE_R)},t.parseTypeSystemExtension=function(){var e=this._lexer.lookahead();if(e.kind===gr.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)},t.parseSchemaExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var t=this.parseDirectives(!0),n=this.optionalMany(gr.BRACE_L,this.parseOperationTypeDefinition,gr.BRACE_R);if(0===t.length&&0===n.length)throw this.unexpected();return{kind:lr.SCHEMA_EXTENSION,directives:t,operationTypes:n,loc:this.loc(e)}},t.parseScalarTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var t=this.parseName(),n=this.parseDirectives(!0);if(0===n.length)throw this.unexpected();return{kind:lr.SCALAR_TYPE_EXTENSION,name:t,directives:n,loc:this.loc(e)}},t.parseObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return{kind:lr.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i,loc:this.loc(e)}},t.parseInterfaceTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return{kind:lr.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i,loc:this.loc(e)}},t.parseUnionTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseUnionMemberTypes();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:lr.UNION_TYPE_EXTENSION,name:t,directives:n,types:r,loc:this.loc(e)}},t.parseEnumTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseEnumValuesDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:lr.ENUM_TYPE_EXTENSION,name:t,directives:n,values:r,loc:this.loc(e)}},t.parseInputObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseInputFieldsDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:lr.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:r,loc:this.loc(e)}},t.parseDirectiveDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(gr.AT);var n=this.parseName(),r=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var o=this.parseDirectiveLocations();return{kind:lr.DIRECTIVE_DEFINITION,description:t,name:n,arguments:r,repeatable:i,locations:o,loc:this.loc(e)}},t.parseDirectiveLocations=function(){return this.delimitedMany(gr.PIPE,this.parseDirectiveLocation)},t.parseDirectiveLocation=function(){var e=this._lexer.token,t=this.parseName();if(void 0!==Cr[t.value])return t;throw this.unexpected(e)},t.loc=function(e){var t;if(!0!==(null===(t=this._options)||void 0===t?void 0:t.noLocation))return new hr(e,this._lexer.lastToken,this._lexer.source)},t.peek=function(e){return this._lexer.token.kind===e},t.expectToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t;throw dr(this._lexer.source,t.start,"Expected ".concat(qr(e),", found ").concat(Fr(t),"."))},t.expectOptionalToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t},t.expectKeyword=function(e){var t=this._lexer.token;if(t.kind!==gr.NAME||t.value!==e)throw dr(this._lexer.source,t.start,'Expected "'.concat(e,'", found ').concat(Fr(t),"."));this._lexer.advance()},t.expectOptionalKeyword=function(e){var t=this._lexer.token;return t.kind===gr.NAME&&t.value===e&&(this._lexer.advance(),!0)},t.unexpected=function(e){var t=null!=e?e:this._lexer.token;return dr(this._lexer.source,t.start,"Unexpected ".concat(Fr(t),"."))},t.any=function(e,t,n){this.expectToken(e);for(var r=[];!this.expectOptionalToken(n);)r.push(t.call(this));return r},t.optionalMany=function(e,t,n){if(this.expectOptionalToken(e)){var r=[];do{r.push(t.call(this))}while(!this.expectOptionalToken(n));return r}return[]},t.many=function(e,t,n){this.expectToken(e);var r=[];do{r.push(t.call(this))}while(!this.expectOptionalToken(n));return r},t.delimitedMany=function(e,t){this.expectOptionalToken(e);var n=[];do{n.push(t.call(this))}while(this.expectOptionalToken(e));return n},e}();function Fr(e){var t=e.value;return qr(e.kind)+(null!=t?' "'.concat(t,'"'):"")}function qr(e){return function(e){return e===gr.BANG||e===gr.DOLLAR||e===gr.AMP||e===gr.PAREN_L||e===gr.PAREN_R||e===gr.SPREAD||e===gr.COLON||e===gr.EQUALS||e===gr.AT||e===gr.BRACKET_L||e===gr.BRACKET_R||e===gr.BRACE_L||e===gr.PIPE||e===gr.BRACE_R}(e)?'"'.concat(e,'"'):e}var Kr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function Hr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function $r(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}function Vr(e){var t={exports:{}};return e(t,t.exports),t.exports}var Gr=$r(Object.freeze({__proto__:null,parse:zr,parseValue:function(e,t){var n=new Ur(e,t);n.expectToken(gr.SOF);var r=n.parseValueLiteral(!1);return n.expectToken(gr.EOF),r},parseType:function(e,t){var n=new Ur(e,t);n.expectToken(gr.SOF);var r=n.parseTypeReference();return n.expectToken(gr.EOF),r},Parser:Ur})).parse;function Wr(e){return e.replace(/[\s,]+/g," ").trim()}var Yr={},Qr={};var Jr=!0;function Xr(e,t){var n=Object.prototype.toString.call(e);if("[object Array]"===n)return e.map((function(e){return Xr(e,t)}));if("[object Object]"!==n)throw new Error("Unexpected input.");t&&e.loc&&delete e.loc,e.loc&&(delete e.loc.startToken,delete e.loc.endToken);var r,i,o,a=Object.keys(e);for(r in a)a.hasOwnProperty(r)&&(i=e[a[r]],"[object Object]"!==(o=Object.prototype.toString.call(i))&&"[object Array]"!==o||(e[a[r]]=Xr(i,!0)));return e}var Zr=!1;function ei(e){var t=Wr(e);if(Yr[t])return Yr[t];var n=Gr(e,{experimentalFragmentVariables:Zr});if(!n||"Document"!==n.kind)throw new Error("Not a valid GraphQL document.");return n=Xr(n=function(e){for(var t,n={},r=[],i=0;i<e.definitions.length;i++){var o=e.definitions[i];if("FragmentDefinition"===o.kind){var a=o.name.value,s=Wr((t=o.loc).source.body.substring(t.start,t.end));Qr.hasOwnProperty(a)&&!Qr[a][s]?(Jr&&console.warn("Warning: fragment with name "+a+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"),Qr[a][s]=!0):Qr.hasOwnProperty(a)||(Qr[a]={},Qr[a][s]=!0),n[s]||(n[s]=!0,r.push(o))}else r.push(o)}return e.definitions=r,e}(n),!1),Yr[t]=n,n}function ti(){for(var e=Array.prototype.slice.call(arguments),t=e[0],n="string"==typeof t?t:t[0],r=1;r<e.length;r++)e[r]&&e[r].kind&&"Document"===e[r].kind?n+=e[r].loc.source.body:n+=e[r],n+=t[r];return ei(n)}ti.default=ti,ti.resetCaches=function(){Yr={},Qr={}},ti.disableFragmentWarnings=function(){Jr=!1},ti.enableExperimentalFragmentVariables=function(){Zr=!0},ti.disableExperimentalFragmentVariables=function(){Zr=!1};var ni=ti;function ri(e,t){return t.tag=e,t}function ii(){}function oi(e){return function(t){var n=e.length;let r=!1,i=!1,o=!1,a=0;t(ri(0,[function(s){if(s)r=!0;else if(i)o=!0;else{for(i=o=!0;o&&!r;)a<n?(s=e[a],a=a+1|0,o=!1,t(ri(1,[s]))):(r=!0,t(0));i=!1}}]))}}function ai(){}function si(e){e(0)}function ui(e){return e(0)}function ci(e){return function(t){return function(n){let r=ii,i=!1,o=[],a=!1;t((function(t){"number"==typeof t?a||(a=!0,0===o.length&&n(0)):t.tag?a||(i=!1,function(e){function t(e){"number"==typeof e?0!==o.length&&(o=o.filter(s),e=0===o.length,a&&e?n(0):!i&&e&&(i=!0,r(0))):e.tag?0!==o.length&&(n(ri(1,[e[0]])),u(0)):(u=e=e[0],o=o.concat(e),e(0))}function s(e){return e!==u}let u=ii;1===e.length?e(t):e.bind(null,t)}(e(t[0])),i||(i=!0,r(0))):r=t[0]})),n(ri(0,[function(e){e?(a||(a=!0,r(e)),o.forEach((function(t){return t(e)})),o=[]):(i||a?i=!1:(i=!0,r(0)),o.forEach(ui))}]))}}}function di(e){return e}function li(e){return function(t){return function(n){let r=!1;return t((function(t){if("number"==typeof t)r||(r=!0,n(t));else if(t.tag)r||(e(t[0]),n(t));else{var i=t[0];n(ri(0,[function(e){if(!r)return e&&(r=!0),i(e)}]))}}))}}}function fi(e){e(0)}function pi(e){return function(t){return function(n){let r=[],i=ii;return t((function(t){"number"==typeof t?oi(r)(n):t.tag?(r.length>=e&&0<e&&r.shift(),r.push(t[0]),i(0)):(t=t[0],0>=e?(t(1),function(e){let t=!1;e(ri(0,[function(n){n?t=!0:t||e(0)}]))}(n)):(i=t,t(0)))}))}}}function hi(e){return function(t){let n=ii,r=!1;return t((function(t){"number"==typeof t?r=!0:t.tag?r||(e(t[0]),n(0)):(n=t=t[0],t(0))})),{unsubscribe:function(){if(!r)return r=!0,n(1)}}}}function vi(){}function mi(e){return function(t){return function(n){let r=ii;return t((function(t){"number"==typeof t?n(t):t.tag?e(t[0])?n(t):r(0):(r=t[0],n(t))}))}}}function gi(e){return function(t){let n=!1;t(ri(0,[function(r){r?n=!0:n||(n=!0,t(ri(1,[e])),t(0))}]))}}function yi(e){return function(t){let n=ai,r=!1;n=e({next:function(e){r||t(ri(1,[e]))},complete:function(){r||(r=!0,t(0))}}),t(ri(0,[function(e){if(e&&!r)return r=!0,n()}]))}}function wi(){let e=[],t=!1;return{source:function(t){function n(e){return e!==t}e=e.concat(t),t(ri(0,[function(t){t&&(e=e.filter(n))}]))},next:function(n){t||e.forEach((function(e){e(ri(1,[n]))}))},complete:function(){t||(t=!0,e.forEach(si))}}}function bi(e){return function(t){return function(n){return t((function(t){t="number"==typeof t?0:t.tag?ri(1,[e(t[0])]):ri(0,[t[0]]),n(t)}))}}}function Si(e){return ci(di)(oi(e))}function Ei(e){return function(t){return function(n){return t((function(t){"number"==typeof t||t.tag?n(t):(n(t),e())}))}}}function ki(e){function t(e){"number"==typeof e?(n.forEach(fi),n=[]):e.tag?(i=!1,n.forEach((function(t){t(e)}))):r=e[0]}let n=[],r=ii,i=!1;return function(o){function a(e){return e!==o}n=n.concat(o),1===n.length&&e(t),o(ri(0,[function(e){if(e){if(n=n.filter(a),0===n.length)return r(1)}else i||(i=!0,r(e))}]))}}function Ci(e){return function(t){return function(n){let r=!1,i=0,o=ii;t((function(t){"number"==typeof t?r||(r=!0,n(0)):t.tag?i<e&&!r&&(i=i+1|0,n(t),!r&&i>=e&&(r=!0,n(0),o(1))):(t=t[0],0>=e?(r=!0,n(0),t(1)):o=t)})),n(ri(0,[function(t){if(!r){if(t)return r=!0,o(1);if(i<e)return o(0)}}]))}}}function xi(e){return function(t){return function(n){function r(e){"number"!=typeof e&&(e.tag?(i=!0,o(1),n(0)):(a=e=e[0],e(0)))}let i=!1,o=ii,a=ii;t((function(t){"number"==typeof t?i||(i=!0,a(1),n(0)):t.tag?i||n(t):(o=t[0],e(r))})),n(ri(0,[function(e){if(!i)return e?(i=!0,o(1),a(1)):o(0)}]))}}}"function"!=typeof Symbol||(Symbol.observable||(Symbol.observable=Symbol("observable")));var Ti,Ni=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};!function(e){e[e.Success=0]="Success",e[e.Unauthenticated=1]="Unauthenticated",e[e.ConnectionFailed=2]="ConnectionFailed",e[e.RequestFailed=3]="RequestFailed",e[e.UnknownFailure=4]="UnknownFailure"}(Ti||(Ti={}));const Oi=["No logged in viewer found"],_i=e=>{const{failure:t,context:n,message:r}=e;return{kind:Le.Failed,message:r,context:n,stackContext:[{context:t.context,message:t.message},...t.stackContext]}};var Pi=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function Ai(e,t,n){console["fatal"===e?"error":e](t,n)}const Ii=e=>{const{isConsoleLogActive:t,onCrumbHook:n,trackerMethods:r,baseContext:i={}}=e;let o=Object.assign({},i);const a=(e,n)=>(i,a={},s={})=>(e=>{r.forEach((t=>{t.onEvent(e)})),!0===t()&&Ai(e.level,e.message,e.context)})({level:e,message:i,context:Object.assign(Object.assign({},a),o),tags:Object.assign(Object.assign({},s),n)}),s=a(Ce.Error,{priority:"p1"});return{crumb:e=>{const i=(new Date).getTime();e.context=Object.assign(Object.assign({},o),e.context),n([i,e]),r.map((t=>t.captureCrumb([i,e]))),!0===t()&&Ai(e.level,e.message,e.context)},recordFail:e=>{const{message:t,context:n,stackContext:r}=e;s(t,Object.assign(Object.assign({},n),{stackContext:r,stack:(new Error).stack}),{})},fatal:a(Ce.Fatal,{priority:"p0"}),error:s,warn:a(Ce.Warning,{}),info:a(Ce.Info,{}),debug:a(Ce.Debug,{}),teardown:()=>Pi(void 0,void 0,void 0,(function*(){const e=r.map((e=>e.teardown()));yield Promise.all(e)})),addToBaseContext:e=>{o=Object.assign(Object.assign({},o),e)}}};
/*!
 * JavaScript Cookie v2.2.1
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */var Mi=Vr((function(e,t){!function(t){e.exports=t()}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function i(){}function o(t,n,o){if("undefined"!=typeof document){"number"==typeof(o=e({path:"/"},i.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var u in o)o[u]&&(s+="; "+u,!0!==o[u]&&(s+="="+o[u].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var i={},o=document.cookie?document.cookie.split("; "):[],a=0;a<o.length;a++){var s=o[a].split("="),u=s.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=t(s[0]);if(u=(r.read||r)(u,c)||t(u),n)try{u=JSON.parse(u)}catch(e){}if(i[c]=u,e===c)break}catch(e){}}return e?i[e]:i}}return i.set=o,i.get=function(e){return a(e,!1)},i.getJSON=function(e){return a(e,!0)},i.remove=function(t,n){o(t,"",e(n,{expires:-1}))},i.defaults={},i.withConverter=n,i}((function(){}))}))}));function Ri(){try{const e=Mi.getJSON("loom/preferences");if(!e)throw new Error("SDK Preferences cookie not set");return r=e,{kind:Le.Success,payload:r}}catch(r){return e=r,t=`Failed to load user context, ${r.message}`,{kind:Le.Failed,message:t,context:{args:e,extra:null!=n?n:{}},stackContext:[]}}var e,t,n,r}const Bi=e=>{const t=Ri();return t.kind===Le.Failed?(e.info("No preferences cookie found for user",{context:t}),wt.DEFAULT_PREFERENCES_COOKIE):t.payload},Li=(e,t,n)=>{((e,t)=>{const n=Bi(e),r={mediaDevices:Object.assign(Object.assign({},n.mediaDevices),t.mediaDevices),recorderSettings:Object.assign(Object.assign({},n.recorderSettings),t.mediaDevices)};try{Mi.set("loom/preferences",JSON.stringify(r),{domain:window.location.hostname,expires:365})}catch(t){e.error("Failed to write updated SDK preferences cookie",{error:t})}})(t,n),n.mediaDevices&&Di(e,n.mediaDevices),n.recorderSettings&&ji(e,n.recorderSettings)},Di=(e,{cameraId:t,microphoneId:n})=>{t&&e(Ut.updateCamera(t)),n&&e(Ut.updateMicrophone(n))},ji=(e,t)=>{void 0!==(null==t?void 0:t.bubble_menu_expanded_default)&&e(Ut.updateBubbleExpandedDefault(t.bubble_menu_expanded_default)),void 0!==(null==t?void 0:t.camera_size)&&e(Ut.updateCameraSize(t.camera_size)),void 0!==(null==t?void 0:t.countdown_enabled)&&e(Ut.updateCountdownEnabled(t.countdown_enabled)),void 0!==(null==t?void 0:t.flip_camera)&&e(Ut.updateFlipCamera(t.flip_camera))},zi=e=>e&&e.includeBoundaries?"(?:(?<=\\s|^)(?=[a-fA-F\\d:])|(?<=[a-fA-F\\d:])(?=\\s|$))":"",Ui="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",Fi="[a-fA-F\\d]{1,4}",qi=`\n(?:\n(?:${Fi}:){7}(?:${Fi}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:${Fi}:){6}(?:${Ui}|:${Fi}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:${Fi}:){5}(?::${Ui}|(?::${Fi}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:${Fi}:){4}(?:(?::${Fi}){0,1}:${Ui}|(?::${Fi}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:${Fi}:){3}(?:(?::${Fi}){0,2}:${Ui}|(?::${Fi}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:${Fi}:){2}(?:(?::${Fi}){0,3}:${Ui}|(?::${Fi}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:${Fi}:){1}(?:(?::${Fi}){0,4}:${Ui}|(?::${Fi}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::${Fi}){0,5}:${Ui}|(?::${Fi}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),Ki=new RegExp(`(?:^${Ui}$)|(?:^${qi}$)`),Hi=new RegExp(`^${Ui}$`),$i=new RegExp(`^${qi}$`),Vi=e=>e&&e.exact?Ki:new RegExp(`(?:${zi(e)}${Ui}${zi(e)})|(?:${zi(e)}${qi}${zi(e)})`,"g");Vi.v4=e=>e&&e.exact?Hi:new RegExp(`${zi(e)}${Ui}${zi(e)}`,"g"),Vi.v6=e=>e&&e.exact?$i:new RegExp(`${zi(e)}${qi}${zi(e)}`,"g");var Gi=Vi;const Wi=e=>Gi({exact:!0}).test(e);Wi.v4=e=>Gi.v4({exact:!0}).test(e),Wi.v6=e=>Gi.v6({exact:!0}).test(e),Wi.version=e=>Wi(e)?Wi.v4(e)?4:6:void 0;var Yi=Wi;class Qi extends Error{constructor(){super("Request was cancelled"),this.name="CancelError"}get isCanceled(){return!0}}const Ji={timeout:5e3},Xi={v4:["https://ipv4.icanhazip.com/","https://api.ipify.org/"],v6:["https://ipv6.icanhazip.com/","https://api6.ipify.org/"]},Zi=(e,t,n)=>{const r=new XMLHttpRequest;let i;const o=new Promise(((o,a)=>{i=a,r.addEventListener("error",a,{once:!0}),r.addEventListener("timeout",a,{once:!0}),r.addEventListener("load",(()=>{const e=r.responseText.trim();e&&Yi[n](e)?o(e):a()}),{once:!0}),r.open("GET",e),r.timeout=t.timeout,r.send()}));return o.cancel=()=>{r.abort(),i(new Qi)},o},eo=(e,t)=>{let n;const r=async function(){const r=[].concat.apply(Xi[e],t.fallbackUrls||[]);for(const i of r)try{n=Zi(i,t,e);return await n}catch(e){if(e instanceof Qi)throw e}throw new Error("Couldn't find your IP")}();return r.cancel=()=>{n.cancel()},r};var to={v4:e=>eo("v4",{...Ji,...e}),v6:e=>eo("v6",{...Ji,...e})};var no=async e=>{if(e={timeout:5e3,ipVersion:4,...e},navigator&&!1===navigator.onLine)return!1;const t=4===e.ipVersion?"v4":"v6";try{return await to[t](e),!0}catch(e){return!1}},ro=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const io=({logger:e})=>ro(void 0,void 0,void 0,(function*(){const t=yield no(),n=yield(e=>ro(void 0,void 0,void 0,(function*(){var t;try{const e=yield fetch(`${null===(t=null===window||void 0===window?void 0:window.location)||void 0===t?void 0:t.origin}/downtime`),{downtime:n}=yield e.json();return n||!1}catch(t){return e.crumb({level:Ce.Warning,message:"Unable to fetch /downtime data",context:{err:t}}),!1}})))(e);return e.crumb({level:Ce.Info,message:`🔌 Connection check - 🌐 Internet: ${t?"online":"offline"} - ⏰ Downtime: ${n}`,context:{online:t}}),{online:t,downtime:n}}));var oo=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var ao=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var so=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var uo=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var co=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const lo={google:"api/auth/google",slack:"api/auth/slack",apple:"api/auth/apple",windows:"api/auth/windows",auth0:"api/auth/auth0"},fo=[e=>qt(Ft.checkUserAuthenticated,(({dispatch:t,getState:n})=>oo(void 0,void 0,void 0,(function*(){const{authentication:{user:r},settings:{apiKey:i},recorder:{hostUrl:o}}=n();yield fetch(`${o}/integrations-app/sdk/authenticate?api_key=${i}`,{method:"POST"});const a=Bi(e.logger),s=yield(({logger:e,gqlClient:t,metrics:n})=>Ni(void 0,void 0,void 0,(function*(){var r,i;const o=yield t.query(ni`
        query IsUserLoggedIn {
          me {
            id
            first_name
            account_type
            default_workspace_id
            recorder_settings
            status
            sdkPartnerSessionVideos
          }
        }
      `,void 0,{requestPolicy:"network-only"}).toPromise(),a=null===(r=o.data)||void 0===r?void 0:r.me,s=o.error;return null!=(null==a?void 0:a.id)?(null!=s&&e.crumb({level:Ce.Warning,message:"getCurrentUser: Viewer was found, but errors were encountered",context:{graphqlErrors:s.graphQLErrors.map((({message:e})=>e)),networkErrors:null===(i=s.networkError)||void 0===i?void 0:i.message}}),n.increment("integrations.sdk.login.request",{success:!0}),{kind:Ti.Success,me:a}):null==s?(e.crumb({level:Ce.Error,message:"getCurrentUser: Missing viewer and an error was not provided",context:{result:o}}),{kind:Ti.UnknownFailure}):null!=s.networkError?(e.crumb({level:Ce.Warning,message:"getCurrentUser: Network error",context:{result:o}}),{kind:Ti.ConnectionFailed}):null!=s.graphQLErrors.find((({message:e})=>Oi.map((t=>e.includes(t))).includes(!0)))?{kind:Ti.Unauthenticated}:{kind:Ti.RequestFailed}})))(e);if(e.metrics.increment(Kt+".auth.result",{resultKind:s.kind}),!e.config.guestRecordingEnabled&&s.kind===Ti.Unauthenticated)return void t(Ut.openAuthModalFromView());if(s.kind===Ti.Unauthenticated&&void 0!==r)return void t(Ut.userLogout());if(s.kind!==Ti.Success){let n="There was an error using Loom.";const{online:r,downtime:i}=yield io(e);return r||(n="You seem to be offline.",e.metrics.increment(Kt+".auth.failed",{reason:"offline"}),t(Ut.userHasInternetConnection(!1))),i&&(n="Loom planned downtime.",e.metrics.increment(Kt+".auth.failed",{reason:"downtime"}),t(Ut.isPlannedDowntime(!0))),(()=>{const e="loomhq:testThirdPartyCookieSupport";return document.cookie=`${e}; SameSite=None; Secure`,new RegExp(e).test(document.cookie)})()||(t(Ut.setBannerNotification({type:"danger",message:"Enable third-party cookies to use the Loom recorder"})),e.metrics.increment(Kt+".auth.failed",{reason:"third-party"}),n="Enable third-party cookies to use the Loom recorder"),void t(Ut.showErrorModal({errorMessage:n}))}const{me:u}=s;Li(t,e.logger,Object.assign(Object.assign({},a),{recorderSettings:Object.assign(Object.assign({},u.recorder_settings),a.recorderSettings)})),t(Ut.userLoginSuccess(u)),t(Ft.getWorkspaces()),e.analytics.addToBaseContext({userOrganizationId:u.default_workspace_id}),e.logger.addToBaseContext({user:{id:u.id,status:u.status}})})))),e=>qt(Ft.emailSignInUser,((t,{email:n,password:r})=>ao(void 0,void 0,void 0,(function*(){var i,o;const{gqlClient:a,logger:s}=e;try{t.dispatch(Ut.userLoginRequest());const e=null===(i=(yield a.mutation(ni`
              mutation LoginUserWithEmailAndPassword(
                $email: String!
                $password: String!
              ) {
                loginUserWithEmailAndPassword(
                  email: $email
                  password: $password
                ) {
                  __typename
                  ... on RegularUser {
                    id
                    account_type
                    default_workspace_id
                    recorder_settings
                  }
                  ... on Error {
                    message
                  }
                  ... on GenericError {
                    message
                    error
                  }
                }
              }
            `,{email:n,password:r}).toPromise()).data)||void 0===i?void 0:i.loginUserWithEmailAndPassword;if((null==e?void 0:e.id)||"UserAlreadyLoggedInError"===(null==e?void 0:e.__typename))t.dispatch(Ft.checkUserAuthenticated());else{const n=null!==(o=null==e?void 0:e.__typename)&&void 0!==o?o:"Unknown",r=(null==e?void 0:e.message)?(null==e?void 0:e.error)?e.message+"; "+e.error:e.message:"";s.error("Failed to sign in user",{errorType:n,errorMessage:r}),t.dispatch(Ut.userLoginFailed((e=>{switch(e){case"UserNotAuthorizedError":return"Your login information was incorrect. Please check and try again.";default:return"Oops! Something went wrong. Try logging in via OAuth or SSO."}})(n)))}}catch(e){s.error(e)}})))),e=>qt(Ft.emailSignUpUser,((t,{email:n,password:r,termsAccepted:i,firstName:o,lastName:a})=>so(void 0,void 0,void 0,(function*(){var s,u;const{gqlClient:c,logger:d,config:l}=e;try{t.dispatch(Ut.userLoginRequest());const e=null===(s=(yield c.mutation(ni`
              mutation CreateUserWithEmailAndPassword(
                $email: String!
                $password: String!
                $termsAccepted: Boolean!
                $firstName: String!
                $lastName: String!
                $referrerPartnerId: ID!
              ) {
                createUserWithEmailAndPassword(
                  email: $email
                  password: $password
                  termsAccepted: $termsAccepted
                  firstName: $firstName
                  lastName: $lastName
                  referrerPartnerId: $referrerPartnerId
                ) {
                  __typename
                  ... on RegularUser {
                    id
                    account_type
                    default_workspace_id
                    email
                  }
                  ... on Error {
                    message
                  }
                  ... on GenericError {
                    message
                    error
                  }
                }
              }
            `,{email:n,password:r,termsAccepted:i,firstName:o,lastName:a,referrerPartnerId:l.sdkPartnerId}).toPromise()).data)||void 0===s?void 0:s.createUserWithEmailAndPassword;if(null==e?void 0:e.id)t.dispatch(Ut.userVerifyEmail(e));else{const n=null!==(u=null==e?void 0:e.__typename)&&void 0!==u?u:"Unknown",r=(null==e?void 0:e.message)?(null==e?void 0:e.error)?e.message+"; "+e.error:e.message:"";d.error("Failed to sign up user",{errorType:n,errorMessage:r}),t.dispatch(Ut.userLoginFailed((e=>{switch(e){case"UserAlreadyExistsError":return"You appear to already have an account.";default:return"Oops! Something went wrong on our end. Please try that again."}})(n)))}}catch(e){d.error("EmailSignUpUser consumer failed.",e)}})))),e=>qt(Ft.oAuthLoginUser,(({dispatch:t},{provider:n})=>co(void 0,void 0,void 0,(function*(){const{gqlClient:r,logger:i,config:o}=e;try{const{publicKeyAsPem:e,privateKey:a}=yield $n(void 0,void 0,void 0,(function*(){const{publicKey:e,privateKey:t}=yield window.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},!0,["encrypt","decrypt"]),n=yield window.crypto.subtle.exportKey("spki",e);return{publicKeyAsPem:(e=>{let t="-----BEGIN PUBLIC KEY-----\n";for(;e.length>0;)t+=e.substring(0,64)+"\n",e=e.substring(64);return t+="-----END PUBLIC KEY-----",t})(Vn(n)),privateKey:t,publicKey:e}})),s=Vn(e),u=ni`
          subscription OnSessionRequestToken($encodedPublicKey: String!) {
            sessionRequestToken(encodedPublicKey: $encodedPublicKey) {
              token
              status
            }
          }
        `,{unsubscribe:c}=function(){for(var e=arguments,t=arguments[0],n=1,r=arguments.length;n<r;n++)t=e[n](t);return t}(r.subscription(u,{encodedPublicKey:s}),hi((e=>co(void 0,void 0,void 0,(function*(){var n,r;if(c(),null===(null===(n=e.data)||void 0===n?void 0:n.sessionRequestToken))return void i.error("empty payload received from OnSessionRequestToken subscription");const{token:o,status:s}=null===(r=e.data)||void 0===r?void 0:r.sessionRequestToken;var u;if("failure"!==s)try{const e=(u=o,un.from(u,"base64"));yield((e,t)=>$n(void 0,void 0,void 0,(function*(){const n=yield window.crypto.subtle.decrypt({name:"RSA-OAEP"},e,t);return un.from(n)})))(a,e),t(Ft.checkUserAuthenticated())}catch(e){i.error("Unable to decrypt sessionRequestToken.",{err:e})}else i.error("sessionRequestToken request failed.")}))))),d=[`ak=${s}`,`referrer_partner_id=${o.sdkPartnerId}`],l=`${window.location.origin}/${lo[n]}?${d.join("&")}`;t(Ut.setOAuthUri(l))}catch(e){i.error("Authentication consumer failed.",e)}})))),e=>qt(Ft.resendVerificationEmail,((t,{email:n})=>uo(void 0,void 0,void 0,(function*(){(yield function(e,t){var n;return uo(this,void 0,void 0,(function*(){try{const r=yield t.gqlClient.mutation(ni`
          mutation SendEmailVerificationEmail($email: String!) {
            sendEmailVerificationEmail(email: $email)
          }
        `,{email:e}).toPromise();if(null!=r.error)throw r.error.toString();return!!(null===(n=r.data)||void 0===n?void 0:n.sendEmailVerificationEmail)}catch(e){return t.logger.error("Failed to resend verification email",e),!1}}))}(n,e))?t.dispatch(Ut.setBannerNotification({type:"success",message:"Verification email sent!"})):t.dispatch(Ut.setBannerNotification({type:"danger",message:"Oops! Please try that again shortly."}))}))))];var po=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const ho=[e=>qt(Ft.getFeatureFlags,(({dispatch:t})=>po(void 0,void 0,void 0,(function*(){const n=yield(({logger:e,gqlClient:t,metrics:n},r)=>po(void 0,void 0,void 0,(function*(){var i,o;try{const e=yield t.query(ni`
          query GetBulkFlagsForUser($flags: [String!]!, $anonId: String!) {
            getBulkFlagsForUser(flags: $flags, anonId: $anonId) {
              flag
              resultDetails {
                result
              }
            }
          }
        `,{flags:r,anonId:""},{requestPolicy:"cache-and-network"}).toPromise();if(e.error)throw e.error;return n.increment("integrations.sdk.feature_flags.request",{success:!0}),null!==(o=null===(i=e.data)||void 0===i?void 0:i.getBulkFlagsForUser)&&void 0!==o?o:[]}catch(t){return n.increment("integrations.sdk.feature_flags.request",{success:!1}),e.warn("Unable to fetch feature flags",{error:t}),[]}})))(e,[...Object.values(Ve)]);t(Ut.setFeatureFlags(n))}))))];var vo,mo,go,yo,wo;!function(e){e.Call="call",e.Reply="reply",e.Syn="syn",e.SynAck="synAck",e.Ack="ack"}(vo||(vo={})),function(e){e.Fulfilled="fulfilled",e.Rejected="rejected"}(mo||(mo={})),function(e){e.ConnectionDestroyed="ConnectionDestroyed",e.ConnectionTimeout="ConnectionTimeout",e.NotInIframe="NotInIframe",e.NoIframeSrc="NoIframeSrc"}(go||(go={})),function(e){e.DataCloneError="DataCloneError"}(yo||(yo={})),function(e){e.Message="message"}(wo||(wo={}));const bo=({name:e,message:t,stack:n})=>({name:e,message:t,stack:n});let So=0;var Eo=()=>++So,ko=(e,t,n,r,i)=>{const{localName:o,local:a,remote:s,originForSending:u,originForReceiving:c}=t;let d=!1;i(`${o}: Connecting call sender`);const l=e=>(...t)=>{let n;i(`${o}: Sending ${e}() call`);try{s.closed&&(n=!0)}catch(e){n=!0}if(n&&r(),d){const t=new Error(`Unable to send ${e}() call due to destroyed connection`);throw t.code=go.ConnectionDestroyed,t}return new Promise(((n,r)=>{const d=Eo(),l=t=>{if(t.source!==s||t.data.penpal!==vo.Reply||t.data.id!==d)return;if(t.origin!==c)return void i(`${o} received message from origin ${t.origin} which did not match expected origin ${c}`);const u=t.data;i(`${o}: Received ${e}() reply`),a.removeEventListener(wo.Message,l);let f=u.returnValue;u.returnValueIsError&&(f=(e=>{const t=new Error;return Object.keys(e).forEach((n=>t[n]=e[n])),t})(f)),(u.resolution===mo.Fulfilled?n:r)(f)};a.addEventListener(wo.Message,l);const f={penpal:vo.Call,id:d,methodName:e,args:t};s.postMessage(f,u)}))};return n.reduce(((e,t)=>(e[t]=l(t),e)),e),()=>{d=!0}},Co=(e,t,n,r)=>{const{destroy:i,onDestroy:o}=n;return n=>{if(!(e instanceof RegExp?e.test(n.origin):"*"===e||e===n.origin))return void r(`Child: Handshake - Received SYN-ACK from origin ${n.origin} which did not match expected origin ${e}`);r("Child: Handshake - Received SYN-ACK, responding with ACK");const a="null"===n.origin?"*":n.origin,s={penpal:vo.Ack,methodNames:Object.keys(t)};window.parent.postMessage(s,a);const u={localName:"Child",local:window,remote:window.parent,originForSending:a,originForReceiving:n.origin},c=((e,t,n)=>{const{localName:r,local:i,remote:o,originForSending:a,originForReceiving:s}=e;let u=!1;const c=e=>{if(e.source!==o||e.data.penpal!==vo.Call)return;if(e.origin!==s)return void n(`${r} received message from origin ${e.origin} which did not match expected origin ${s}`);const i=e.data,{methodName:c,args:d,id:l}=i;n(`${r}: Received ${c}() call`);const f=e=>t=>{if(n(`${r}: Sending ${c}() reply`),u)return void n(`${r}: Unable to send ${c}() reply due to destroyed connection`);const i={penpal:vo.Reply,id:l,resolution:e,returnValue:t};e===mo.Rejected&&t instanceof Error&&(i.returnValue=bo(t),i.returnValueIsError=!0);try{o.postMessage(i,a)}catch(e){if(e.name===yo.DataCloneError){const t={penpal:vo.Reply,id:l,resolution:mo.Rejected,returnValue:bo(e),returnValueIsError:!0};o.postMessage(t,a)}throw e}};new Promise((e=>e(t[c].apply(t,d)))).then(f(mo.Fulfilled),f(mo.Rejected))};return i.addEventListener(wo.Message,c),()=>{u=!0,i.removeEventListener(wo.Message,c)}})(u,t,r);o(c);const d={},l=ko(d,u,n.data.methodNames,i,r);return o(l),d}};var xo=(e={})=>{const{parentOrigin:t="*",methods:n={},timeout:r,debug:i=!1}=e,o=(e=>(...t)=>{e&&console.log("[Penpal]",...t)})(i),a=(()=>{const e=[];let t=!1;return{destroy(n){t=!0,e.forEach((e=>{e(n)}))},onDestroy(n){t?n():e.push(n)}}})(),{destroy:s,onDestroy:u}=a;(()=>{if(window===window.top){const e=new Error("connectToParent() must be called within an iframe");throw e.code=go.NotInIframe,e}})();const c=Co(t,n,a,o);return{promise:new Promise(((e,n)=>{const i=((e,t)=>{let n;return void 0!==e&&(n=window.setTimeout((()=>{const n=new Error(`Connection timed out after ${e}ms`);n.code=go.ConnectionTimeout,t(n)}),e)),()=>{clearTimeout(n)}})(r,s),a=t=>{if((()=>{try{clearTimeout()}catch(e){return!1}return!0})()&&t.source===parent&&t.data&&t.data.penpal===vo.SynAck){const n=c(t);n&&(window.removeEventListener(wo.Message,a),i(),e(n))}};window.addEventListener(wo.Message,a),(()=>{o("Child: Handshake - Sending SYN");const e={penpal:vo.Syn},n=t instanceof RegExp?"*":t;window.parent.postMessage(e,n)})(),u((e=>{window.removeEventListener(wo.Message,a),e||((e=new Error("Connection destroyed")).code=go.ConnectionDestroyed),n(e)}))})),destroy(){s()}}};function To(e,t){const n=[];return Object.keys(t).forEach((r=>{e[r]!==t[r]&&n.push({key:r,value:t[r],change:"updated"})})),Object.keys(e).forEach((e=>{t.hasOwnProperty(e)||n.push({key:e,change:"removed"})})),n}const No=e=>t=>{try{return{error:null,value:e.dispatch(t)}}catch(e){return console.error("error dispatching result:",e),{error:e.message,value:null}}};class Oo extends Error{constructor(e){super(Oo._prepareSuperMessage(e)),Object.defineProperty(this,"name",{value:"NonError",configurable:!0,writable:!0}),Error.captureStackTrace&&Error.captureStackTrace(this,Oo)}static _prepareSuperMessage(e){try{return JSON.stringify(e)}catch{return String(e)}}}const _o=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],Po=Symbol(".toJSON called"),Ao=({from:e,seen:t,to_:n,forceEnumerable:r})=>{const i=n||(Array.isArray(e)?[]:{});if(t.push(e),"function"==typeof e.toJSON&&!0!==e[Po])return(e=>{e[Po]=!0;const t=e.toJSON();return delete e[Po],t})(e);for(const[n,o]of Object.entries(e))un.isBuffer(o)?i[n]="[object Buffer]":"function"!=typeof o&&(o&&"object"==typeof o?t.includes(e[n])?i[n]="[Circular]":i[n]=Ao({from:e[n],seen:t.slice(),forceEnumerable:r}):i[n]=o);for(const{property:t,enumerable:n}of _o)"string"==typeof e[t]&&Object.defineProperty(i,t,{value:e[t],enumerable:!!r||n,configurable:!0,writable:!0});return i};var Io=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e&&!Array.isArray(e)){const t=new Error;return Ao({from:e,seen:[],to_:t}),t}return new Oo(e)};const Mo=[({logger:e})=>qt(Ft.propagateError,(({},{error:t,componentStack:n,context:r})=>{const i=Io(t);e.error(i.message,r,Object.assign({componentStack:n},i.stack&&{errorStack:i.stack}))}))];var Ro=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function Bo(e){return"Permission dismissed"===e.message?qe.Prompt:qe.Denied}const Lo=()=>Ro(void 0,void 0,void 0,(function*(){var e;if(!(null===(e=null===navigator||void 0===navigator?void 0:navigator.mediaDevices)||void 0===e?void 0:e.enumerateDevices))throw new Error("Browser not supported. Please visit https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices#browser_compatibility for a full browser compatibility list.");return(yield navigator.mediaDevices.enumerateDevices()).filter((e=>"videoinput"===e.kind||"audioinput"===e.kind))}));var Do,jo=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};!function(e){e.UserDeclined="User declined",e.MissingPermissions="Missing Permissions",e.UnableToOpen="Unable to open stream"}(Do||(Do={}));const zo={audio:void 0,camera:void 0,display:void 0},Uo=(e,{logger:t})=>jo(void 0,void 0,void 0,(function*(){try{return yield navigator.mediaDevices.getUserMedia(e)}catch(e){const{userAgent:n}=navigator;return t.warn("Media Utilities: Unable to capture media stream",{err:e,userAgent:n}),e}})),Fo=({logger:e})=>{try{zo.camera&&(qo("camera"),Ko("camera")),zo.display&&(qo("display"),Ko("display")),zo.audio&&Ko("audio")}catch(t){return e.error("Failed to stop some or all tracks of a media stream:",{err:t}),!1}return!0},qo=e=>{zo.audio&&zo.audio.getAudioTracks().forEach((t=>{var n;null===(n=zo[e])||void 0===n||n.removeTrack(t)}))},Ko=e=>{var t;null===(t=zo[e])||void 0===t||t.getTracks().forEach((e=>{e.stop()})),zo[e]=void 0};var Ho=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const $o="SDK Ask Device Permissions",Vo={asked:"asked",granted:"granted",denied:"denied"};var Go;!function(e){e.Camera="camera",e.Microphone="microphone"}(Go||(Go={}));var Wo=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function Yo(e){return Wo(this,void 0,void 0,(function*(){const{logger:t,analytics:n}=e;n.track($o,{state:Vo.asked});const r=yield(e=>Ro(void 0,void 0,void 0,(function*(){const{logger:t,metrics:n}=e;let r;try{const n=yield Uo({audio:!0,video:!0},e);if(n instanceof Error)throw n;const i=null==n?void 0:n.getTracks();let o=!1,a=!1;null==i||i.forEach((e=>{e.stop(),o=o||"audio"===e.kind,a=a||"video"===e.kind})),a&&o?r=qe.Granted:(r=qe.Prompt,t.warn("Media Utilities [Devices]: not all devices allowed",{tracks:i,micsAvailable:o,camerasAvailable:a}))}catch(e){n.increment("integrations.media-devices.request_device_permissions.failed"),t.warn("Media Utilities [Devices]: permissions not granted",{error:e}),r=Bo(e)}return n.increment("integrations.media-devices.request_device_permissions",{result:r}),r})))(e);return r===qe.Granted?n.track($o,{state:Vo.granted}):(n.track($o,{state:r}),t.warn("User has not granted camera/microphone permissions",{context:{permissions:r}})),t.info("Requesting browser device permissions",{permissions:r}),r}))}function Qo(e){return Wo(this,void 0,void 0,(function*(){const{metrics:t,logger:n}=e,r=yield function({logger:e,metrics:t}){return Ro(this,void 0,void 0,(function*(){let n;try{if(!navigator.permissions)throw new Error(`navigator.permissions is "${typeof navigator.permissions}"`);const{state:e}=yield navigator.permissions.query({name:"camera"}),{state:t}=yield navigator.permissions.query({name:"microphone"});n=e===qe.Granted&&t===qe.Granted?qe.Granted:qe.Prompt}catch(t){const{userAgent:r}=navigator;n=Bo(t),e.warn("Browser does not have full support of Web Permissions API",{context:{err:t,userAgent:r}}),n=qe.Denied}return t.increment("integrations.media-devices.has_media_device_permissions",{result:n}),n}))}(e);return t.increment("integrations.sdk.media.device_permissions.request",{initialPermissions:r}),r!==qe.Granted?(n.warn("User has blocked media devices",{initialPermissions:r}),yield Yo(e)):r}))}const Jo=e=>qt(Ft.checkDevicePermissions,(({dispatch:t})=>Wo(void 0,void 0,void 0,(function*(){const n=yield Qo(e);t(Ut.updateMediaDevicesState({mediaDevicePermissions:n})),t(Ut.openPreRecordingMenu())}))));var Xo=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const Zo=[Jo,({logger:e,metrics:t})=>qt(Ft.initializeCameras,(({getState:n,dispatch:r})=>Ho(void 0,void 0,void 0,(function*(){const i=yield Ho(void 0,void 0,void 0,(function*(){return(yield Lo()).filter((e=>e.deviceId&&"videoinput"===e.kind)).map((e=>({deviceId:e.deviceId,label:e.label})))}));r(Ut.updateAvailableCameras(i));const{cameraId:o,defaultCameraId:a,cameraEnabled:s}=n().recorderSettings;let u=a;const c=i.map((e=>e.deviceId));t.increment("integrations.sdk.media.initialize_cameras",{cameras:c.length}),c.length>0?(s||r(Ut.turnOnCamera()),void 0!==a&&-1!==c.indexOf(a)||(u=c[0],r(Ut.updateDefaultCamera(u))),o&&-1===c.indexOf(o)&&r(Ft.updateMediaDevices({cameraId:u}))):(r(Ut.turnOffCamera()),e.warn("No cameras available!"))})))),({logger:e,metrics:t})=>qt(Ft.initializeMicrophones,(({getState:n,dispatch:r})=>Xo(void 0,void 0,void 0,(function*(){const{microphones:i,defaultMicrophoneId:o,audioEnabled:a}=n().recorderSettings,s=yield Xo(void 0,void 0,void 0,(function*(){return(yield Lo()).filter((e=>e.deviceId&&"audioinput"===e.kind)).map((e=>({deviceId:e.deviceId,label:e.label})))}));if(t.increment("integrations.sdk.media.initialize_microphones",{microphones:s.length}),i.length!==s.length&&r(Ut.updateMicrophones(s)),0===s.length)return void r(Ut.turnOffMicrophone());a||r(Ut.turnOnMicrophone());const u=((e,t)=>{const n=e.find((e=>"default"===e.deviceId)),r=e.find((e=>e.deviceId===t));return(null==r?void 0:r.deviceId)||(null==n?void 0:n.deviceId)||e[0].deviceId})(s,o);e.info("audio-control: Updating microphone",{microphoneId:u}),r(Ft.updateMediaDevices({microphoneId:u}))})))),({logger:e})=>qt(Ft.updateMediaDevices,(({dispatch:t},n)=>{Li(t,e,{mediaDevices:n})}))];var ea=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const ta=[e=>qt(Ft.quitPage,(({getState:t})=>ea(void 0,void 0,void 0,(function*(){const{previewRecording:{sessionId:n},recorder:{appStage:r,hostUrl:i}}=t();if(yield e.metrics.flush(),n&&wt.ACTIVE_RECORDING_STAGES.includes(r)){e.metrics.increment("integrations.sdk.beacon.sent"),e.analytics.track("SDK Beacon Sent",{sessionId:n,appStage:r});const t=new Blob([JSON.stringify({sessionId:n,appStage:r})],{type:"application/json; charset=UTF-8"});navigator.sendBeacon(`${i}/integrations-app/sdk/beacon`,t)}}))))];var na=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const ra=[e=>qt(Ft.openPreRecordingMenu,(({dispatch:t,getState:n})=>na(void 0,void 0,void 0,(function*(){const{recorder:{appStage:r}}=n();r===Me.Closed&&(yield Jo(e).handler({dispatch:t,getState:n},void 0),t(Ut.openPreRecordingMenu()),t(Ft.checkUserAuthenticated()))}))))];var ia=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function oa(e,t){var n,r;return ia(this,void 0,void 0,(function*(){try{const i=yield t.gqlClient.mutation(ni`
          mutation DeleteVideo($id: ID!) {
            deleteVideo(id: $id)
          }
        `,{id:e}).toPromise();if(null!=i.error)throw i.error.toString();return null!==(r=null===(n=i.data)||void 0===n?void 0:n.deleteVideo)&&void 0!==r&&r}catch(e){return t.logger.error("Failed to delete recording",{error:e}),!1}}))}var aa=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};let sa,ua;const ca=(e,t)=>{const n=new Audio(`https://cdn.loom.com/assets/loom-sdk/${e}-recording.mp3`);return n.addEventListener("error",(e=>{const{userAgent:n}=navigator;t.crumb({level:Ce.Warning,message:"Unable to load start-recording.mp3 file",context:{err:e,userAgent:n}})})),n},da=(e,t,n)=>{const{handlerName:r,eventDescription:i,eventLogLevel:o=Ce.Info}=t,{onTrigger:a}=e,s=n.currentStatus();return n.log.crumb({message:`mediarecorder.build: ${r}`,level:Ce.Info,context:{options:e,status:s}}),t=>{const s=n.currentStatus();n.log.crumb({message:`${r}: MediaRecorder has ${i}`,level:o,context:{event:t,options:e,status:s}}),a.map((e=>e(t,n.log)))}},la={interval:{setup:setInterval,teardown:clearInterval},timeout:{setup:setTimeout,teardown:clearTimeout}},fa=(e,t)=>{const{name:n,ms:r,onTrigger:i,kind:o}=e,{setup:a,teardown:s}=la[o],u=(e,r)=>t.crumb({level:Ce.Info,message:`${o}, ${n}: ${e}`,context:r});u("initialised",e);let c=0;const d=()=>{u("stopped",{}),s(c)};return{clear:d,reset:()=>{d(),c=a((()=>{u("triggered",{}),i()}),r),u("reset",{})}}};function pa(e){return null!=e&&"object"==typeof e&&!0===e["@@functional/placeholder"]}function ha(e){return function t(n){return 0===arguments.length||pa(n)?t:e.apply(this,arguments)}}function va(e){return function t(n,r){switch(arguments.length){case 0:return t;case 1:return pa(n)?t:ha((function(t){return e(n,t)}));default:return pa(n)&&pa(r)?t:pa(n)?ha((function(t){return e(t,r)})):pa(r)?ha((function(t){return e(n,t)})):e(n,r)}}}function ma(e,t){switch(e){case 0:return function(){return t.apply(this,arguments)};case 1:return function(e){return t.apply(this,arguments)};case 2:return function(e,n){return t.apply(this,arguments)};case 3:return function(e,n,r){return t.apply(this,arguments)};case 4:return function(e,n,r,i){return t.apply(this,arguments)};case 5:return function(e,n,r,i,o){return t.apply(this,arguments)};case 6:return function(e,n,r,i,o,a){return t.apply(this,arguments)};case 7:return function(e,n,r,i,o,a,s){return t.apply(this,arguments)};case 8:return function(e,n,r,i,o,a,s,u){return t.apply(this,arguments)};case 9:return function(e,n,r,i,o,a,s,u,c){return t.apply(this,arguments)};case 10:return function(e,n,r,i,o,a,s,u,c,d){return t.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}function ga(e,t,n){return function(){for(var r=[],i=0,o=e,a=0;a<t.length||i<arguments.length;){var s;a<t.length&&(!pa(t[a])||i>=arguments.length)?s=t[a]:(s=arguments[i],i+=1),r[a]=s,pa(s)||(o-=1),a+=1}return o<=0?n.apply(this,r):ma(o,ga(e,r,n))}}var ya=va((function(e,t){return 1===e?ha(t):ma(e,ga(e,[],t))}));function wa(e){return function t(n,r,i){switch(arguments.length){case 0:return t;case 1:return pa(n)?t:va((function(t,r){return e(n,t,r)}));case 2:return pa(n)&&pa(r)?t:pa(n)?va((function(t,n){return e(t,r,n)})):pa(r)?va((function(t,r){return e(n,t,r)})):ha((function(t){return e(n,r,t)}));default:return pa(n)&&pa(r)&&pa(i)?t:pa(n)&&pa(r)?va((function(t,n){return e(t,n,i)})):pa(n)&&pa(i)?va((function(t,n){return e(t,r,n)})):pa(r)&&pa(i)?va((function(t,r){return e(n,t,r)})):pa(n)?ha((function(t){return e(t,r,i)})):pa(r)?ha((function(t){return e(n,t,i)})):pa(i)?ha((function(t){return e(n,r,t)})):e(n,r,i)}}}var ba=Array.isArray||function(e){return null!=e&&e.length>=0&&"[object Array]"===Object.prototype.toString.call(e)};function Sa(e){return null!=e&&"function"==typeof e["@@transducer/step"]}function Ea(e,t,n){return function(){if(0===arguments.length)return n();var r=Array.prototype.slice.call(arguments,0),i=r.pop();if(!ba(i)){for(var o=0;o<e.length;){if("function"==typeof i[e[o]])return i[e[o]].apply(i,r);o+=1}if(Sa(i)){var a=t.apply(null,r);return a(i)}}return n.apply(this,arguments)}}var ka=function(){return this.xf["@@transducer/init"]()},Ca=function(e){return this.xf["@@transducer/result"](e)};function xa(e){return"[object String]"===Object.prototype.toString.call(e)}var Ta=ha((function(e){return!!ba(e)||!!e&&("object"==typeof e&&(!xa(e)&&(1===e.nodeType?!!e.length:0===e.length||e.length>0&&(e.hasOwnProperty(0)&&e.hasOwnProperty(e.length-1)))))})),Na=function(){function e(e){this.f=e}return e.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},e.prototype["@@transducer/result"]=function(e){return e},e.prototype["@@transducer/step"]=function(e,t){return this.f(e,t)},e}();var Oa=va((function(e,t){return ma(e.length,(function(){return e.apply(t,arguments)}))}));function _a(e,t,n){for(var r=n.next();!r.done;){if((t=e["@@transducer/step"](t,r.value))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r=n.next()}return e["@@transducer/result"](t)}function Pa(e,t,n,r){return e["@@transducer/result"](n[r](Oa(e["@@transducer/step"],e),t))}var Aa="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function Ia(e,t,n){if("function"==typeof e&&(e=function(e){return new Na(e)}(e)),Ta(n))return function(e,t,n){for(var r=0,i=n.length;r<i;){if((t=e["@@transducer/step"](t,n[r]))&&t["@@transducer/reduced"]){t=t["@@transducer/value"];break}r+=1}return e["@@transducer/result"](t)}(e,t,n);if("function"==typeof n["fantasy-land/reduce"])return Pa(e,t,n,"fantasy-land/reduce");if(null!=n[Aa])return _a(e,t,n[Aa]());if("function"==typeof n.next)return _a(e,t,n);if("function"==typeof n.reduce)return Pa(e,t,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}var Ma=function(){function e(e,t){this.xf=t,this.f=e}return e.prototype["@@transducer/init"]=ka,e.prototype["@@transducer/result"]=Ca,e.prototype["@@transducer/step"]=function(e,t){return this.xf["@@transducer/step"](e,this.f(t))},e}(),Ra=va((function(e,t){return new Ma(e,t)}));function Ba(e,t){return Object.prototype.hasOwnProperty.call(t,e)}var La=Object.prototype.toString,Da=function(){return"[object Arguments]"===La.call(arguments)?function(e){return"[object Arguments]"===La.call(e)}:function(e){return Ba("callee",e)}}(),ja=!{toString:null}.propertyIsEnumerable("toString"),za=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Ua=function(){return arguments.propertyIsEnumerable("length")}(),Fa=function(e,t){for(var n=0;n<e.length;){if(e[n]===t)return!0;n+=1}return!1},qa="function"!=typeof Object.keys||Ua?ha((function(e){if(Object(e)!==e)return[];var t,n,r=[],i=Ua&&Da(e);for(t in e)!Ba(t,e)||i&&"length"===t||(r[r.length]=t);if(ja)for(n=za.length-1;n>=0;)Ba(t=za[n],e)&&!Fa(r,t)&&(r[r.length]=t),n-=1;return r})):ha((function(e){return Object(e)!==e?[]:Object.keys(e)})),Ka=va(Ea(["fantasy-land/map","map"],Ra,(function(e,t){switch(Object.prototype.toString.call(t)){case"[object Function]":return ya(t.length,(function(){return e.call(this,t.apply(this,arguments))}));case"[object Object]":return Ia((function(n,r){return n[r]=e(t[r]),n}),{},qa(t));default:return function(e,t){for(var n=0,r=t.length,i=Array(r);n<r;)i[n]=e(t[n]),n+=1;return i}(e,t)}}))),Ha=Number.isInteger||function(e){return e<<0===e},$a=va((function(e,t){var n=e<0?t.length+e:e;return xa(t)?t.charAt(n):t[n]})),Va=va((function(e,t){return e.map((function(e){for(var n,r=t,i=0;i<e.length;){if(null==r)return;n=e[i],r=Ha(n)?$a(n,r):r[n],i+=1}return r}))})),Ga=va((function(e,t){return Va([e],t)[0]})),Wa=wa(Ia),Ya=wa((function(e,t,n){var r={};for(var i in n)r[i]=n[i];return r[e]=t,r})),Qa=ha((function(e){return null==e})),Ja=wa((function e(t,n,r){if(0===t.length)return n;var i=t[0];if(t.length>1){var o=!Qa(r)&&Ba(i,r)?r[i]:Ha(t[1])?[]:{};n=e(Array.prototype.slice.call(t,1),n,o)}if(Ha(i)&&ba(r)){var a=[].concat(r);return a[i]=n,a}return Ya(i,n,r)}));function Xa(e){return e}var Za=ha(Xa),es=va((function(e,t){return function(n){return function(r){return Ka((function(e){return t(e,r)}),n(e(r)))}}})),ts=ha((function(e){return es(Ga(e),Ja(e))})),ns=function(e){return{value:e,map:function(t){return ns(t(e))}}},rs=wa((function(e,t,n){return e((function(e){return ns(t(e))}))(n).value})),is=va((function(e,t){return function(e,t){var n;t=t||[];var r=(e=e||[]).length,i=t.length,o=[];for(n=0;n<r;)o[o.length]=e[n],n+=1;for(n=0;n<i;)o[o.length]=t[n],n+=1;return o}([e],t)}));const os=va((function(e,t){return ya(t.length,(function(){for(var n=[],r=0;r<t.length;)n.push(t[r].call(this,arguments[r])),r+=1;return e.apply(this,n.concat(Array.prototype.slice.call(arguments,t.length)))}))}))(rs,[ts,is,Za]),as=e=>[[640,Math.floor(2e3*e*1e3)],[1280,Math.floor(4e3*e*1e3)],[1920,Math.floor(6e3*e*1e3)]],ss=e=>({vp8:as(e),vp9:as(.9*e)}),us={[ze.Lowest]:ss(.1),[ze.Low]:ss(.25),[ze.Normal]:ss(1),[ze.High]:ss(2),[ze.Highest]:ss(5)},cs=(e,t,n)=>{const r=e.getVideoTracks().length>0,i=e.getAudioTracks().length>0;if(!1===r&&!1===i)return{audioBitsPerSecond:0,videoBitsPerSecond:0,mimeType:""};if(!1===r&&!0===i)return{audioBitsPerSecond:128e3,videoBitsPerSecond:0,mimeType:"video/webm;codecs=opus"};let{width:o}=e.getVideoTracks()[0].getSettings();var a;null==o&&(n.crumb({level:Ce.Error,message:"recorderOptions: videotrack is missing a width. Attempting fallback",context:{mediastream:(a=e,{id:a.id,active:a.active,audioTrackCount:a.getAudioTracks().length,videoTrackCount:a.getVideoTracks().length})}}),o=320);const[s,u]=["video/webm",["vp9","vp8"].find((e=>MediaRecorder.isTypeSupported(`video/webm;codecs=${e}`)))||"vp8"],c=(e=>{const{settings:t,width:n,codec:r}=e,i=us[t.videoQuality],[,o]=i[r].reduce(((e,t)=>Math.abs(t[0]-n)<Math.abs(e[0]-n)?t:e));return o})({width:o,codec:u,settings:t});return!1===i?{audioBitsPerSecond:0,videoBitsPerSecond:c,mimeType:`${s};codecs=${u}`}:{audioBitsPerSecond:128e3,videoBitsPerSecond:c,mimeType:`${s};codecs=${u},opus`}},ds=({stream:e,settings:t,handlerOptions:n},r)=>{const i=cs(e,t,r.log);r.log.crumb({level:Ce.Info,message:"mediarecorder: chosen recorder options",context:i});const o=new MediaRecorder(e,i),a=((e,t,n)=>{const{thresholds:r}=e,i=fa({name:"data-available",ms:r.datatimeout,onTrigger:()=>{t.stop()},kind:"timeout"},n),o=fa({name:"request-step",ms:r.requestInterval,onTrigger:()=>{t.requestData()},kind:"interval"},n);return Wa(((e,t)=>os(t[0],t[1],e)),e,[[["onpauseOptions","onTrigger"],()=>i.clear()],[["onpauseOptions","onTrigger"],()=>o.clear()],[["onstopOptions","onTrigger"],()=>i.clear()],[["onstopOptions","onTrigger"],()=>o.clear()],[["onstartOptions","onTrigger"],()=>i.reset()],[["onstartOptions","onTrigger"],()=>o.reset()],[["onresumeOptions","onTrigger"],()=>o.reset()],[["onresumeOptions","onTrigger"],()=>i.reset()],[["ondataOptions","onTrigger"],()=>i.reset()]])})(n,o,r.log);return o.ondataavailable=((e,t,n)=>{const{onTrigger:r,onErrorTeardown:i,uploadFn:o}=t;n.log.crumb({message:"mediarecorder.build: ondata",level:Ce.Info,context:{options:t}});let a=0;return t=>{r.map((e=>e(t,n.log)));const{data:s,data:{size:u}}=t;if(u>0)return n.log.crumb({message:"ondata: Received blob, triggering upload function",level:Ce.Info,context:{size:u,previousConsecutiveEmptyEvents:a}}),o(s),void(a=0);const c=n.currentStatus();a++,n.log.crumb({message:"ondata: Empty blob received from mediarecorder",level:Ce.Warning,context:{consecutiveEmptyEvents:a,status:c}}),a>=10&&(n.log.crumb({message:"ondata: Too many empty events from the mediarecorder",level:Ce.Error,context:{consecutiveEmptyEvents:a,status:c}}),i(e))}})(o,a.ondata,r),o.onerror=da(a.onerror,{handlerName:"onerror",eventDescription:"thrown an error",eventLogLevel:Ce.Error},r),o.onpause=da(a.onpause,{handlerName:"onpause",eventDescription:"paused"},r),o.onresume=da(a.onresume,{handlerName:"onresume",eventDescription:"resumed"},r),o.onstart=da(a.onstart,{handlerName:"onstart",eventDescription:"started"},r),o.onstop=da(a.onstop,{handlerName:"onstop",eventDescription:"stopped"},r),[{abandon:()=>{["recording","paused"].includes(o.state)&&o.stop()},start:e=>o.start(e),stop:()=>o.stop(),pause:()=>o.pause(),resume:()=>o.resume()},o]},ls=(e,t,n)=>{const{hooks:r}=e,i=(e,t)=>{const i=`mediarecorder.${e}: Unexpected error`,o=new Error(i);n.log.crumb({level:Ce.Error,message:i,context:Object.assign({error:o},t)}),r.onUnrecoverable(o)};return{ondata:{onTrigger:[()=>{const e=n.currentStatus();!1===[je.Recording,je.MediaStreamStopped,je.Completing].includes(e)&&n.log.crumb({level:Ce.Warning,message:`ondata: Triggered while in unexpected state ${e}`,context:{status:e}})}],onErrorTeardown:e=>{i("ondata",{mediarecorder:e})},uploadFn:t.uploadFn},onerror:{onTrigger:[e=>{i("onError",{event:e})}]},onstop:{onTrigger:[()=>{switch(n.currentStatus()){case je.MediaStreamStopped:return void r.onMediaStreamStopped();case je.Cancelling:case je.Abandoning:return void t.cancelRecording();case je.Completing:return void t.completeRecording()}}]},onpause:{onTrigger:[]},onstart:{onTrigger:[()=>t.setFinishedStarting()]},onresume:{onTrigger:[]},thresholds:{datatimeout:1e4,requestInterval:5e3}}};var fs=Vr((function(e,t){t.statusFinder=void 0;const n=(e,t,r)=>{const[i,...o]=t;if(!0===i.test(e)){const{subStates:t,status:r}=i;return 0===t.length?r:n(e,t,r)}return 0===o.length?r:n(e,o,r)};t.statusFinder=n}));const ps=[{status:je.Abandoning,test:({markers:e})=>e.startedAbandoning,subStates:[{status:je.Abandoned,test:({markers:e})=>e.finishedTeardown,subStates:[]}]},{status:je.Intitializing,test:({mediarecorder:e,markers:t})=>null==e&&!1===t.finishedInitializing&&!1===t.startedStarting&&!1===t.finishedStarting&&!1===t.startedCancel&&!1===t.finishedTeardown&&!1===t.startedCompletion&&!1===t.finishedCompletion,subStates:[]},{status:je.Ready,test:({mediarecorder:e,markers:t})=>null!=e&&"inactive"===e.state&&!0===t.finishedInitializing&&!1===t.startedStarting&&!1===t.finishedStarting&&!1===t.startedCancel&&!1===t.finishedTeardown&&!1===t.startedCompletion&&!1===t.finishedCompletion,subStates:[]},{status:je.Starting,test:({mediarecorder:e,markers:t})=>null!=e&&["inactive","recording"].includes(e.state)&&!0===t.finishedInitializing&&!0===t.startedStarting&&!1===t.finishedStarting&&!1===t.startedCancel&&!1===t.finishedTeardown&&!1===t.startedCompletion&&!1===t.finishedCompletion,subStates:[]},{status:je.Recording,test:({mediarecorder:e,markers:t})=>null!=e&&"recording"===e.state&&!0===t.finishedInitializing&&!0===t.startedStarting&&!0===t.finishedStarting&&!1===t.startedCancel&&!1===t.finishedTeardown&&!1===t.startedCompletion&&!1===t.finishedCompletion,subStates:[]},{status:je.Paused,test:({mediarecorder:e,markers:t})=>null!=e&&"paused"===e.state&&!1===t.startedCancel&&!1===t.startedCompletion,subStates:[]},{status:je.MediaStreamStopped,test:({mediarecorder:e,markers:t})=>null!=e&&"inactive"===e.state&&!0===t.finishedInitializing&&!0===t.startedStarting&&!0===t.finishedStarting&&!1===t.startedCancel&&!1===t.startedAbandoning&&!1===t.startedCompletion,subStates:[]},{status:je.Cancelling,test:({mediarecorder:e,markers:t})=>null!=e&&["paused","recording","inactive"].includes(e.state)&&!0===t.startedCancel,subStates:[{status:je.Cancelled,test:({mediarecorder:e,markers:t})=>null!=e&&"inactive"===e.state&&!0===t.finishedTeardown,subStates:[]}]},{status:je.Completing,test:({mediarecorder:e,markers:t})=>null!=e&&["paused","recording","inactive"].includes(e.state)&&!0===t.startedCompletion,subStates:[{status:je.FinishedUploading,test:({mediarecorder:e,markers:t})=>null!=e&&"inactive"===e.state&&!0===t.finishedUploading,subStates:[{status:je.Completed,test:({markers:e})=>!0===e.finishedCompletion,subStates:[]}]}]}],hs=(e,t)=>new URL(`/v1/videos/${t}`,e).href,vs=e=>hs(e.host,e.videoId),ms=e=>hs(e.host,`${e.videoId}/complete`),gs=e=>hs(e.host,`${e.videoId}/upload_credentials?bucketVersion=v2`),ys=e=>hs(e.host,`${e.videoId}/metadata`),ws=e=>hs(e.host,`${e.videoId}/message_progress`),bs=e=>hs(e.host,`${e.videoId}/total_parts`);var Ss=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const Es=(e,t)=>Ss(void 0,void 0,void 0,(function*(){const{url:n,method:r,headers:i={}}=e,o=new URL(n);let a;try{a=yield(()=>{const e={credentials:"include",headers:Object.assign(Object.assign({},i),{"content-type":"application/json"}),method:r,timeout:3e4};return"GET"===r?(o.search=new URLSearchParams(t).toString(),fetch(o.toString(),e)):fetch(o.toString(),Object.assign({body:JSON.stringify(t)},e))})()}catch(t){return{kind:Le.Failed,message:`Fetch failed: ${t.message}`,context:{args:e,extra:{error:t.toString()}},stackContext:[]}}const s=yield a.text();if(a.ok){if(0===s.length)return{kind:Le.Success,payload:{}};try{return{kind:Le.Success,payload:JSON.parse(s)}}catch(t){return{kind:Le.Failed,message:"invalid http body provided by api",context:{args:e,extra:{httpBody:s,status:a.status,statusText:a.statusText,headers:a.headers,url:a.url,redirected:a.redirected}},stackContext:[]}}}return{kind:Le.Failed,message:"invalid response, outside of 200-300 range",context:{args:e,extra:{status:a.status,statusText:a.statusText,headers:a.headers,url:a.url,redirected:a.redirected,rawBody:s}},stackContext:[]}}));var ks=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var Cs=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var xs=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var Ts=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var Ns=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const Os=(e,t)=>Ns(void 0,void 0,void 0,(function*(){t=t||e.remainingAttempts;const{fn:n,shouldRetry:r,remainingAttempts:i}=e,o=yield n();return r(o)&&i>0?(yield(a=(e=>{const t=Math.pow(e,2)-Math.pow(e,1.9)+2,n=1e3*Math.min(30,t);return Math.floor(n)})(t-i),new Promise((e=>setTimeout(e,a)))),yield Os(Object.assign(Object.assign({},e),{remainingAttempts:i-1}),t)):{hadSuccess:!1===r(o),result:o};var a})),_s=(e,t)=>{const n=t instanceof Array,r="object"==typeof t;if(!n&&!r)return t;const i=Object.assign(t);if(n)for(let t=0;t<i.length;t++)i[t]=_s(e,i[t]);else if(r){Object.keys(i).forEach((t=>{t===e?delete i[e]:null!=i[t]&&(i[t]=_s(e,i[t]))}))}return i};var Ps=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const As=(e,t)=>Ps(void 0,void 0,void 0,(function*(){const{callFn:n,purpose:r,breadcrumbs:i,allowedRetries:o}=e;t.crumb({level:Ce.Info,message:`api.callApi: Attempting to "${r}"`,context:Object.assign(Object.assign({},i),{callFn:n.toString()})});const{result:a}=yield Os({fn:()=>n(),shouldRetry:e=>e.kind===Le.Failed&&404!==e.context.extra.status,remainingAttempts:o});if(a.kind===Le.Failed){const n=_i({failure:a,context:{args:e,extra:i},message:`api.callApi: Failed to "${r}"`});return 404!==a.context.extra.status?t.recordFail(n):t.crumb({level:Ce.Warning,message:`api.callApi: Failed to ${r}. 404, resource did not exist`,context:{}}),n}return a}));class Is{constructor(){this.handlers=[]}on(e){this.handlers.push(e)}off(e){this.handlers=this.handlers.filter((t=>t!==e))}clear(){this.handlers=[]}trigger(e){this.handlers.slice(0).forEach((t=>{t(e)}))}expose(){return this}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ms=function(e,t){return(Ms=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Rs(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Ms(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Bs=function(){return(Bs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Ls(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function Ds(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function js(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function zs(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Us(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Fs(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e}function qs(e){return this instanceof qs?(this.v=e,this):new qs(e)}function Ks(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{!function(e){e.value instanceof qs?Promise.resolve(e.value.v).then(u,c):d(o[0][2],e)}(i[e](t))}catch(e){d(o[0][3],e)}}function u(e){s("next",e)}function c(e){s("throw",e)}function d(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function Hs(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=zs(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}var $s="3.15.0",Vs=function(e,t){return(Vs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Gs(e,t){function n(){this.constructor=e}Vs(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ws=function(){return(Ws=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Ys(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function Qs(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Js(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function Xs(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Js(arguments[t]));return e}function Zs(e){return this instanceof Zs?(this.v=e,this):new Zs(e)}var eu=Object.freeze({__proto__:null,__extends:Gs,get __assign(){return Ws},__rest:Ys,__decorate:function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__param:function(e,t){return function(n,r){t(n,r,e)}},__metadata:function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter:function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},__generator:function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},__createBinding:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]},__exportStar:function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||(t[n]=e[n])},__values:Qs,__read:Js,__spread:Xs,__spreadArrays:function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},__await:Zs,__asyncGenerator:function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{!function(e){e.value instanceof Zs?Promise.resolve(e.value.v).then(u,c):d(o[0][2],e)}(i[e](t))}catch(e){d(o[0][3],e)}}function u(e){s("next",e)}function c(e){s("throw",e)}function d(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}},__asyncDelegator:function(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:Zs(e[r](t)),done:"return"===r}:i?i(t):t}:i}},__asyncValues:function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=Qs(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}},__makeTemplateObject:function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__importStar:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},__importDefault:function(e){return e&&e.__esModule?e:{default:e}},__classPrivateFieldGet:function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},__classPrivateFieldSet:function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}}),tu=Vr((function(e,t){t.isEmptyData=void 0,t.isEmptyData=function(e){return"string"==typeof e?0===e.length:0===e.byteLength}})),nu=Vr((function(e,t){t.EMPTY_DATA_SHA_256=t.SHA_256_HMAC_ALGO=t.SHA_256_HASH=void 0,t.SHA_256_HASH={name:"SHA-256"},t.SHA_256_HMAC_ALGO={name:"HMAC",hash:t.SHA_256_HASH},t.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])}));var ru=function(e){return"function"==typeof TextEncoder?function(e){return(new TextEncoder).encode(e)}(e):function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128)t.push(i);else if(i<2048)t.push(i>>6|192,63&i|128);else if(n+1<e.length&&55296==(64512&i)&&56320==(64512&e.charCodeAt(n+1))){var o=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n));t.push(o>>18|240,o>>12&63|128,o>>6&63|128,63&o|128)}else t.push(i>>12|224,i>>6&63|128,63&i|128)}return Uint8Array.from(t)}(e)},iu=function(e){return"function"==typeof TextDecoder?function(e){return new TextDecoder("utf-8").decode(e)}(e):function(e){for(var t="",n=0,r=e.length;n<r;n++){var i=e[n];if(i<128)t+=String.fromCharCode(i);else if(192<=i&&i<224){var o=e[++n];t+=String.fromCharCode((31&i)<<6|63&o)}else if(240<=i&&i<365){var a="%"+[i,e[++n],e[++n],e[++n]].map((function(e){return e.toString(16)})).join("%");t+=decodeURIComponent(a)}else t+=String.fromCharCode((15&i)<<12|(63&e[++n])<<6|63&e[++n])}return t}(e)},ou=Object.freeze({__proto__:null,fromUtf8:ru,toUtf8:iu}),au={};for(var su=Object.freeze({__proto__:null,locateWindow:function(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:au}}),uu=$r(ou),cu=$r(su),du=Vr((function(e,t){t.Sha256=void 0;var n=function(){function e(e){e?(this.operation=function(e){return new Promise((function(t,n){var i=cu.locateWindow().msCrypto.subtle.importKey("raw",r(e),nu.SHA_256_HMAC_ALGO,!1,["sign"]);i.oncomplete=function(){i.result&&t(i.result),n("ImportKey completed without importing key.")},i.onerror=function(){n("ImportKey failed to import key.")}}))}(e).then((function(e){return cu.locateWindow().msCrypto.subtle.sign(nu.SHA_256_HMAC_ALGO,e)})),this.operation.catch((function(){}))):this.operation=Promise.resolve(cu.locateWindow().msCrypto.subtle.digest("SHA-256"))}return e.prototype.update=function(e){var t=this;tu.isEmptyData(e)||(this.operation=this.operation.then((function(n){return n.onerror=function(){t.operation=Promise.reject(new Error("Error encountered updating hash"))},n.process(r(e)),n})),this.operation.catch((function(){})))},e.prototype.digest=function(){return this.operation.then((function(e){return new Promise((function(t,n){e.onerror=function(){n("Error encountered finalizing hash")},e.oncomplete=function(){e.result&&t(new Uint8Array(e.result)),n("Error encountered finalizing hash")},e.finish()}))}))},e}();function r(e){return"string"==typeof e?uu.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=n})),lu=Vr((function(e,t){t.Sha256=void 0;var n=function(){function e(e){this.toHash=new Uint8Array(0),void 0!==e&&(this.key=new Promise((function(t,n){cu.locateWindow().crypto.subtle.importKey("raw",r(e),nu.SHA_256_HMAC_ALGO,!1,["sign"]).then(t,n)})),this.key.catch((function(){})))}return e.prototype.update=function(e){if(!tu.isEmptyData(e)){var t=r(e),n=new Uint8Array(this.toHash.byteLength+t.byteLength);n.set(this.toHash,0),n.set(t,this.toHash.byteLength),this.toHash=n}},e.prototype.digest=function(){var e=this;return this.key?this.key.then((function(t){return cu.locateWindow().crypto.subtle.sign(nu.SHA_256_HMAC_ALGO,t,e.toHash).then((function(e){return new Uint8Array(e)}))})):tu.isEmptyData(this.toHash)?Promise.resolve(nu.EMPTY_DATA_SHA_256):Promise.resolve().then((function(){return cu.locateWindow().crypto.subtle.digest(nu.SHA_256_HASH,e.toHash)})).then((function(e){return Promise.resolve(new Uint8Array(e))}))},e}();function r(e){return"string"==typeof e?uu.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=n})),fu=Vr((function(e,t){t.MAX_HASHABLE_LENGTH=t.INIT=t.KEY=t.DIGEST_LENGTH=t.BLOCK_SIZE=void 0,t.BLOCK_SIZE=64,t.DIGEST_LENGTH=32,t.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),t.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],t.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1})),pu=Vr((function(e,t){t.RawSha256=void 0;var n=function(){function e(){this.state=Int32Array.from(fu.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=0,n=e.byteLength;if(this.bytesHashed+=n,8*this.bytesHashed>fu.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;n>0;)this.buffer[this.bufferLength++]=e[t++],n--,this.bufferLength===fu.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),n=this.bufferLength;if(t.setUint8(this.bufferLength++,128),n%fu.BLOCK_SIZE>=fu.BLOCK_SIZE-8){for(var r=this.bufferLength;r<fu.BLOCK_SIZE;r++)t.setUint8(r,0);this.hashBuffer(),this.bufferLength=0}for(r=this.bufferLength;r<fu.BLOCK_SIZE-8;r++)t.setUint8(r,0);t.setUint32(fu.BLOCK_SIZE-8,Math.floor(e/4294967296),!0),t.setUint32(fu.BLOCK_SIZE-4,e),this.hashBuffer(),this.finished=!0}var i=new Uint8Array(fu.DIGEST_LENGTH);for(r=0;r<8;r++)i[4*r]=this.state[r]>>>24&255,i[4*r+1]=this.state[r]>>>16&255,i[4*r+2]=this.state[r]>>>8&255,i[4*r+3]=this.state[r]>>>0&255;return i},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],d=0;d<fu.BLOCK_SIZE;d++){if(d<16)this.temp[d]=(255&e[4*d])<<24|(255&e[4*d+1])<<16|(255&e[4*d+2])<<8|255&e[4*d+3];else{var l=this.temp[d-2],f=(l>>>17|l<<15)^(l>>>19|l<<13)^l>>>10,p=((l=this.temp[d-15])>>>7|l<<25)^(l>>>18|l<<14)^l>>>3;this.temp[d]=(f+this.temp[d-7]|0)+(p+this.temp[d-16]|0)}var h=(((a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7))+(a&s^~a&u)|0)+(c+(fu.KEY[d]+this.temp[d]|0)|0)|0,v=((n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10))+(n&r^n&i^r&i)|0;c=u,u=s,s=a,a=o+h|0,o=i,i=r,r=n,n=h+v|0}t[0]+=n,t[1]+=r,t[2]+=i,t[3]+=o,t[4]+=a,t[5]+=s,t[6]+=u,t[7]+=c},e}();t.RawSha256=n})),hu=$r(eu),vu=Vr((function(e,t){t.Sha256=void 0;var n=function(){function e(e){if(this.hash=new pu.RawSha256,e){this.outer=new pu.RawSha256;var t=function(e){var t=r(e);if(t.byteLength>fu.BLOCK_SIZE){var n=new pu.RawSha256;n.update(t),t=n.digest()}var i=new Uint8Array(fu.BLOCK_SIZE);return i.set(t),i}(e),n=new Uint8Array(fu.BLOCK_SIZE);n.set(t);for(var i=0;i<fu.BLOCK_SIZE;i++)t[i]^=54,n[i]^=92;this.hash.update(t),this.outer.update(n);for(i=0;i<t.byteLength;i++)t[i]=0}}return e.prototype.update=function(e){if(!function(e){if("string"==typeof e)return 0===e.length;return 0===e.byteLength}(e)&&!this.error)try{this.hash.update(r(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){return hu.__awaiter(this,void 0,void 0,(function(){return hu.__generator(this,(function(e){return[2,this.digestSync()]}))}))},e}();function r(e){return"string"==typeof e?uu.fromUtf8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}t.Sha256=n})),mu=Vr((function(e,t){hu.__exportStar(vu,t)})),gu=Vr((function(e,t){t.supportsZeroByteGCM=t.supportsSubtleCrypto=t.supportsSecureRandom=t.supportsWebCrypto=void 0;var n=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function r(e){return"object"==typeof e&&"object"==typeof e.crypto&&"function"==typeof e.crypto.getRandomValues}function i(e){return e&&n.every((function(t){return"function"==typeof e[t]}))}t.supportsWebCrypto=function(e){return!(!r(e)||"object"!=typeof e.crypto.subtle)&&i(e.crypto.subtle)},t.supportsSecureRandom=r,t.supportsSubtleCrypto=i,t.supportsZeroByteGCM=function(e){return hu.__awaiter(this,void 0,void 0,(function(){var t;return hu.__generator(this,(function(n){switch(n.label){case 0:if(!i(e))return[2,!1];n.label=1;case 1:return n.trys.push([1,4,,5]),[4,e.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return t=n.sent(),[4,e.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},t,new Uint8Array(0))];case 3:return[2,16===n.sent().byteLength];case 4:return n.sent(),[2,!1];case 5:return[2]}}))}))}})),yu=Vr((function(e,t){hu.__exportStar(gu,t)})),wu=Object.freeze({__proto__:null}),bu=Object.freeze({__proto__:null}),Su=Object.freeze({__proto__:null}),Eu=Object.freeze({__proto__:null}),ku=Vr((function(e,t){t.isMsWindow=void 0;var n=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];t.isMsWindow=function(e){if(function(e){return"MSInputMethodContext"in e&&"msCrypto"in e}(e)&&void 0!==e.msCrypto.subtle){var t=e.msCrypto,r=t.getRandomValues,i=t.subtle;return n.map((function(e){return i[e]})).concat(r).every((function(e){return"function"==typeof e}))}return!1}})),Cu=$r(wu),xu=$r(bu),Tu=$r(Su),Nu=$r(Eu),Ou=Vr((function(e,t){hu.__exportStar(Cu,t),hu.__exportStar(xu,t),hu.__exportStar(Tu,t),hu.__exportStar(Nu,t),hu.__exportStar(ku,t)})),_u=Vr((function(e,t){t.Sha256=void 0;var n=function(){function e(e){yu.supportsWebCrypto(cu.locateWindow())?this.hash=new lu.Sha256(e):Ou.isMsWindow(cu.locateWindow())?this.hash=new du.Sha256(e):this.hash=new mu.Sha256(e)}return e.prototype.update=function(e,t){this.hash.update(e,t)},e.prototype.digest=function(){return this.hash.digest()},e}();t.Sha256=n})),Pu=Vr((function(e,t){t.WebCryptoSha256=t.Ie11Sha256=void 0,hu.__exportStar(_u,t),Object.defineProperty(t,"Ie11Sha256",{enumerable:!0,get:function(){return du.Sha256}}),Object.defineProperty(t,"WebCryptoSha256",{enumerable:!0,get:function(){return lu.Sha256}})})),Au=Vr((function(e,t){t.Crc32=t.crc32=void 0,t.crc32=function(e){return(new n).update(e).digest()};var n=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(e){var t,n;try{for(var i=hu.__values(e),o=i.next();!o.done;o=i.next()){var a=o.value;this.checksum=this.checksum>>>8^r[255&(this.checksum^a)]}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return this},e.prototype.digest=function(){return(4294967295^this.checksum)>>>0},e}();t.Crc32=n;var r=Uint32Array.from([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117])})),Iu={},Mu={},Ru=0;Ru<256;Ru++){var Bu=Ru.toString(16).toLowerCase();1===Bu.length&&(Bu="0"+Bu),Iu[Ru]=Bu,Mu[Bu]=Ru}function Lu(e){for(var t="",n=0;n<e.byteLength;n++)t+=Iu[e[n]];return t}var Du=function(){function e(e){if(this.bytes=e,8!==e.byteLength)throw new Error("Int64 buffers must be exactly 8 bytes")}return e.fromNumber=function(t){if(t>0x8000000000000000||t<-0x8000000000000000)throw new Error(t+" is too large (or, if negative, too small) to represent as an Int64");for(var n=new Uint8Array(8),r=7,i=Math.abs(Math.round(t));r>-1&&i>0;r--,i/=256)n[r]=i;return t<0&&ju(n),new e(n)},e.prototype.valueOf=function(){var e=this.bytes.slice(0),t=128&e[0];return t&&ju(e),parseInt(Lu(e),16)*(t?-1:1)},e.prototype.toString=function(){return String(this.valueOf())},e}();function ju(e){for(var t=0;t<8;t++)e[t]^=255;for(t=7;t>-1&&(e[t]++,0===e[t]);t--);}var zu,Uu=function(){function e(e,t){this.toUtf8=e,this.fromUtf8=t}return e.prototype.format=function(e){var t,n,r,i,o=[];try{for(var a=zs(Object.keys(e)),s=a.next();!s.done;s=a.next()){var u=s.value,c=this.fromUtf8(u);o.push(Uint8Array.from([c.byteLength]),c,this.formatHeaderValue(e[u]))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}var d=new Uint8Array(o.reduce((function(e,t){return e+t.byteLength}),0)),l=0;try{for(var f=zs(o),p=f.next();!p.done;p=f.next()){var h=p.value;d.set(h,l),l+=h.byteLength}}catch(e){r={error:e}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}return d},e.prototype.formatHeaderValue=function(e){switch(e.type){case"boolean":return Uint8Array.from([e.value?0:1]);case"byte":return Uint8Array.from([2,e.value]);case"short":var t=new DataView(new ArrayBuffer(3));return t.setUint8(0,3),t.setInt16(1,e.value,!1),new Uint8Array(t.buffer);case"integer":var n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,e.value,!1),new Uint8Array(n.buffer);case"long":var r=new Uint8Array(9);return r[0]=5,r.set(e.value.bytes,1),r;case"binary":var i=new DataView(new ArrayBuffer(3+e.value.byteLength));i.setUint8(0,6),i.setUint16(1,e.value.byteLength,!1);var o=new Uint8Array(i.buffer);return o.set(e.value,3),o;case"string":var a=this.fromUtf8(e.value),s=new DataView(new ArrayBuffer(3+a.byteLength));s.setUint8(0,7),s.setUint16(1,a.byteLength,!1);var u=new Uint8Array(s.buffer);return u.set(a,3),u;case"timestamp":var c=new Uint8Array(9);return c[0]=8,c.set(Du.fromNumber(e.value.valueOf()).bytes,1),c;case"uuid":if(!Qu.test(e.value))throw new Error("Invalid UUID received: "+e.value);var d=new Uint8Array(17);return d[0]=9,d.set(function(e){if(e.length%2!=0)throw new Error("Hex encoded strings must have an even number length");for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2){var r=e.substr(n,2).toLowerCase();if(!(r in Mu))throw new Error("Cannot decode unrecognized sequence "+r+" as hexadecimal");t[n/2]=Mu[r]}return t}(e.value.replace(/\-/g,"")),1),d}},e.prototype.parse=function(e){for(var t={},n=0;n<e.byteLength;){var r=e.getUint8(n++),i=this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,r));switch(n+=r,e.getUint8(n++)){case 0:t[i]={type:Fu,value:!0};break;case 1:t[i]={type:Fu,value:!1};break;case 2:t[i]={type:qu,value:e.getInt8(n++)};break;case 3:t[i]={type:Ku,value:e.getInt16(n,!1)},n+=2;break;case 4:t[i]={type:Hu,value:e.getInt32(n,!1)},n+=4;break;case 5:t[i]={type:$u,value:new Du(new Uint8Array(e.buffer,e.byteOffset+n,8))},n+=8;break;case 6:var o=e.getUint16(n,!1);n+=2,t[i]={type:Vu,value:new Uint8Array(e.buffer,e.byteOffset+n,o)},n+=o;break;case 7:var a=e.getUint16(n,!1);n+=2,t[i]={type:Gu,value:this.toUtf8(new Uint8Array(e.buffer,e.byteOffset+n,a))},n+=a;break;case 8:t[i]={type:Wu,value:new Date(new Du(new Uint8Array(e.buffer,e.byteOffset+n,8)).valueOf())},n+=8;break;case 9:var s=new Uint8Array(e.buffer,e.byteOffset+n,16);n+=16,t[i]={type:Yu,value:Lu(s.subarray(0,4))+"-"+Lu(s.subarray(4,6))+"-"+Lu(s.subarray(6,8))+"-"+Lu(s.subarray(8,10))+"-"+Lu(s.subarray(10))};break;default:throw new Error("Unrecognized header type tag")}}return t},e}();!function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"}(zu||(zu={}));var Fu="boolean",qu="byte",Ku="short",Hu="integer",$u="long",Vu="binary",Gu="string",Wu="timestamp",Yu="uuid",Qu=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var Ju=function(){function e(e,t){this.headerMarshaller=new Uu(e,t)}return e.prototype.marshall=function(e){var t=e.headers,n=e.body,r=this.headerMarshaller.format(t),i=r.byteLength+n.byteLength+16,o=new Uint8Array(i),a=new DataView(o.buffer,o.byteOffset,o.byteLength),s=new Au.Crc32;return a.setUint32(0,i,!1),a.setUint32(4,r.byteLength,!1),a.setUint32(8,s.update(o.subarray(0,8)).digest(),!1),o.set(r,12),o.set(n,r.byteLength+12),a.setUint32(i-4,s.update(o.subarray(8,i-4)).digest(),!1),o},e.prototype.unmarshall=function(e){var t=function(e){var t=e.byteLength,n=e.byteOffset,r=e.buffer;if(t<16)throw new Error("Provided message too short to accommodate event stream message overhead");var i=new DataView(r,n,t),o=i.getUint32(0,!1);if(t!==o)throw new Error("Reported message length does not match received message length");var a=i.getUint32(4,!1),s=i.getUint32(8,!1),u=i.getUint32(t-4,!1),c=(new Au.Crc32).update(new Uint8Array(r,n,8));if(s!==c.digest())throw new Error("The prelude checksum specified in the message ("+s+") does not match the calculated CRC32 checksum ("+c.digest()+")");if(c.update(new Uint8Array(r,n+8,t-12)),u!==c.digest())throw new Error("The message checksum ("+c.digest()+") did not match the expected value of "+u);return{headers:new DataView(r,n+8+4,a),body:new Uint8Array(r,n+8+4+a,o-a-16)}}(e),n=t.headers,r=t.body;return{headers:this.headerMarshaller.parse(n),body:r}},e.prototype.formatHeaders=function(e){return this.headerMarshaller.format(e)},e}();var Xu=function(){function e(e){var t=e.utf8Encoder,n=e.utf8Decoder;this.eventMarshaller=new Ju(t,n),this.utfEncoder=t}return e.prototype.deserialize=function(e,t){return function(e,t){var n;return(n={})[Symbol.asyncIterator]=function(){return Ks(this,arguments,(function(){var n,r,i,o,a,s,u,c,d,l,f,p,h,v,m,g,y;return js(this,(function(w){switch(w.label){case 0:w.trys.push([0,12,13,18]),n=Hs(e),w.label=1;case 1:return[4,qs(n.next())];case 2:if((r=w.sent()).done)return[3,11];if(i=r.value,o=t.eventMarshaller.unmarshall(i),"error"!==(a=o.headers[":message-type"].value))return[3,3];throw(s=new Error(o.headers[":error-message"].value||"UnknownError")).name=o.headers[":error-code"].value,s;case 3:return"exception"!==a?[3,5]:(u=o.headers[":exception-type"].value,(v={})[u]=o,c=v,[4,qs(t.deserializer(c))]);case 4:if((d=w.sent()).$unknown)throw(l=new Error(t.toUtf8(o.body))).name=u,l;throw d[u];case 5:return"event"!==a?[3,9]:((m={})[o.headers[":event-type"].value]=o,f=m,[4,qs(t.deserializer(f))]);case 6:return(p=w.sent()).$unknown?[3,10]:[4,qs(p)];case 7:return[4,w.sent()];case 8:return w.sent(),[3,10];case 9:throw Error("Unrecognizable event type: "+o.headers[":event-type"].value);case 10:return[3,1];case 11:return[3,18];case 12:return h=w.sent(),g={error:h},[3,18];case 13:return w.trys.push([13,,16,17]),r&&!r.done&&(y=n.return)?[4,qs(y.call(n))]:[3,15];case 14:w.sent(),w.label=15;case 15:return[3,17];case 16:if(g)throw g.error;return[7];case 17:return[7];case 18:return[2]}}))}))},n}(function(e){var t,n=0,r=0,i=null,o=null,a=function(e){if("number"!=typeof e)throw new Error("Attempted to allocate an event message where size was not a number: "+e);n=e,r=4,i=new Uint8Array(e),new DataView(i.buffer).setUint32(0,e,!1)};return(t={})[Symbol.asyncIterator]=function(){return Ks(this,arguments,(function(){var t,s,u,c,d,l,f,p;return js(this,(function(h){switch(h.label){case 0:t=e[Symbol.asyncIterator](),h.label=1;case 1:return[4,qs(t.next())];case 2:return s=h.sent(),u=s.value,s.done?n?[3,4]:[4,qs(void 0)]:[3,10];case 3:return[2,h.sent()];case 4:return n!==r?[3,7]:[4,qs(i)];case 5:return[4,h.sent()];case 6:return h.sent(),[3,8];case 7:throw new Error("Truncated event message received.");case 8:return[4,qs(void 0)];case 9:return[2,h.sent()];case 10:c=u.length,d=0,h.label=11;case 11:if(!(d<c))return[3,15];if(!i){if(l=c-d,o||(o=new Uint8Array(4)),f=Math.min(4-r,l),o.set(u.slice(d,d+f),r),d+=f,(r+=f)<4)return[3,15];a(new DataView(o.buffer).getUint32(0,!1)),o=null}return p=Math.min(n-r,c-d),i.set(u.slice(d,d+p),r),r+=p,d+=p,n&&n===r?[4,qs(i)]:[3,14];case 12:return[4,h.sent()];case 13:h.sent(),i=null,n=0,r=0,h.label=14;case 14:return[3,11];case 15:return[3,1];case 16:return[2]}}))}))},t}(e),{eventMarshaller:this.eventMarshaller,deserializer:t,toUtf8:this.utfEncoder})},e.prototype.serialize=function(e,t){var n,r=this;return(n={})[Symbol.asyncIterator]=function(){return Ks(this,arguments,(function(){var n,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:c.trys.push([0,7,8,13]),n=Hs(e),c.label=1;case 1:return[4,qs(n.next())];case 2:return(i=c.sent()).done?[3,6]:(o=i.value,[4,qs(r.eventMarshaller.marshall(t(o)))]);case 3:return[4,c.sent()];case 4:c.sent(),c.label=5;case 5:return[3,1];case 6:return[3,13];case 7:return a=c.sent(),s={error:a},[3,13];case 8:return c.trys.push([8,,11,12]),i&&!i.done&&(u=n.return)?[4,qs(u.call(n))]:[3,10];case 9:c.sent(),c.label=10;case 10:return[3,12];case 11:if(s)throw s.error;return[7];case 12:return[7];case 13:return[4,qs(new Uint8Array(0))];case 14:return[4,c.sent()];case 15:return c.sent(),[2]}}))}))},n},e}(),Zu=function(){function e(e){var t=e.utf8Encoder,n=e.utf8Decoder;this.eventMarshaller=new Ju(t,n),this.universalMarshaller=new Xu({utf8Decoder:n,utf8Encoder:t})}return e.prototype.deserialize=function(e,t){var n=ec(e)?function(e){var t;return(t={})[Symbol.asyncIterator]=function(){return Ks(this,arguments,(function(){var t,n,r,i;return js(this,(function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,qs(t.read())];case 3:return n=o.sent(),r=n.done,i=n.value,r?[4,qs(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,qs(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))},t}(e):e;return this.universalMarshaller.deserialize(n,t)},e.prototype.serialize=function(e,t){var n,r=this.universalMarshaller.serialize(e,t);return"function"==typeof ReadableStream?(n=r[Symbol.asyncIterator](),new ReadableStream({pull:function(e){return Ds(this,void 0,void 0,(function(){var t,r,i;return js(this,(function(o){switch(o.label){case 0:return[4,n.next()];case 1:return t=o.sent(),r=t.done,i=t.value,r?[2,e.close()]:(e.enqueue(i),[2])}}))}))}})):r},e}(),ec=function(e){return"function"==typeof ReadableStream&&e instanceof ReadableStream},tc=function(){function e(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}return e.isInstance=function(e){if(!e)return!1;var t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers},e}(),nc=function(){function e(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.substr(-1)?e.protocol+":":e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?"/"+e.path:e.path:"/"}return e.isInstance=function(e){if(!e)return!1;var t=e;return"method"in t&&"protocol"in t&&"hostname"in t&&"path"in t&&"object"==typeof t.query&&"object"==typeof t.headers},e.prototype.clone=function(){var t,n=new e(Bs(Bs({},this),{headers:Bs({},this.headers)}));return n.query&&(n.query=(t=n.query,Object.keys(t).reduce((function(e,n){var r,i=t[n];return Bs(Bs({},e),((r={})[n]=Array.isArray(i)?Fs([],Us(i)):i,r))}),{}))),n},e}();var rc=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,ic)},ic=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};for(var oc=function(){function e(e){var t=(void 0===e?{}:e).requestTimeout;this.requestTimeout=t}return e.prototype.destroy=function(){},e.prototype.handle=function(e,t){var n=(void 0===t?{}:t).abortSignal,r=this.requestTimeout;if(null==n?void 0:n.aborted){var i=new Error("Request aborted");return i.name="AbortError",Promise.reject(i)}var o=e.path;if(e.query){var a=function(e){var t,n,r=[];try{for(var i=zs(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var a=o.value,s=e[a];if(a=rc(a),Array.isArray(s))for(var u=0,c=s.length;u<c;u++)r.push(a+"="+rc(s[u]));else{var d=a;(s||"string"==typeof s)&&(d+="="+rc(s)),r.push(d)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}(e.query);a&&(o+="?"+a)}var s=e.port,u=e.method,c=e.protocol+"//"+e.hostname+(s?":"+s:"")+o,d={body:"GET"===u||"HEAD"===u?void 0:e.body,headers:new Headers(e.headers),method:u};"undefined"!=typeof AbortController&&(d.signal=n);var l,f=new Request(c,d),p=[fetch(f).then((function(e){var t,n,r=e.headers,i={};try{for(var o=zs(r.entries()),a=o.next();!a.done;a=o.next()){var s=a.value;i[s[0]]=s[1]}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return void 0!==e.body?{response:new tc({headers:i,statusCode:e.status,body:e.body})}:e.blob().then((function(t){return{response:new tc({headers:i,statusCode:e.status,body:t})}}))})),(l=r,void 0===l&&(l=0),new Promise((function(e,t){l&&setTimeout((function(){var e=new Error("Request did not complete within "+l+" ms");e.name="TimeoutError",t(e)}),l)})))];return n&&p.push(new Promise((function(e,t){n.onabort=function(){var e=new Error("Request aborted");e.name="AbortError",t(e)}}))),Promise.race(p)},e}(),ac={},sc=new Array(64),uc=0,cc="A".charCodeAt(0),dc="Z".charCodeAt(0);uc+cc<=dc;uc++){var lc=String.fromCharCode(uc+cc);ac[lc]=uc,sc[uc]=lc}for(uc=0,cc="a".charCodeAt(0),dc="z".charCodeAt(0);uc+cc<=dc;uc++){lc=String.fromCharCode(uc+cc);var fc=uc+26;ac[lc]=fc,sc[fc]=lc}for(uc=0;uc<10;uc++){ac[uc.toString(10)]=uc+52;lc=uc.toString(10),fc=uc+52;ac[lc]=fc,sc[fc]=lc}ac["+"]=62,sc[62]="+",ac["/"]=63,sc[63]="/";function pc(e){var t=e.length/4*3;"=="===e.substr(-2)?t-=2:"="===e.substr(-1)&&t--;for(var n=new ArrayBuffer(t),r=new DataView(n),i=0;i<e.length;i+=4){for(var o=0,a=0,s=i,u=i+3;s<=u;s++)"="!==e[s]?(o|=ac[e[s]]<<6*(u-s),a+=6):o>>=6;var c=i/4*3;o>>=a%8;for(var d=Math.floor(a/8),l=0;l<d;l++){var f=8*(d-l-1);r.setUint8(c+l,(o&255<<f)>>f)}}return new Uint8Array(n)}function hc(e){return new Promise((function(t,n){var r=new FileReader;r.onloadend=function(){var e;if(2!==r.readyState)return n(new Error("Reader aborted too early"));var i=null!==(e=r.result)&&void 0!==e?e:"",o=i.indexOf(","),a=o>-1?o+1:i.length;t(i.substring(a))},r.onabort=function(){return n(new Error("Read aborted"))},r.onerror=function(){return n(r.error)},r.readAsDataURL(e)}))}function vc(e,t,n){return void 0===n&&(n=1048576),new Promise((function(r,i){var o=new FileReader;o.addEventListener("error",i),o.addEventListener("abort",i);var a=e.size,s=0;function u(){s>=a?r():o.readAsArrayBuffer(e.slice(s,Math.min(a,s+n)))}o.addEventListener("load",(function(e){var n=e.target.result;t(new Uint8Array(n)),s+=n.byteLength,u()})),u()}))}var mc=[1732584193,4023233417,2562383102,271733878],gc=function(){function e(){this.state=Uint32Array.from(mc),this.buffer=new DataView(new ArrayBuffer(64)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(!function(e){if("string"==typeof e)return 0===e.length;return 0===e.byteLength}(e)){if(this.finished)throw new Error("Attempted to update an already finished hash.");var t=function(e){if("string"==typeof e)return ru(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT);return new Uint8Array(e)}(e),n=0,r=t.byteLength;for(this.bytesHashed+=r;r>0;)this.buffer.setUint8(this.bufferLength++,t[n++]),r--,64===this.bufferLength&&(this.hashBuffer(),this.bufferLength=0)}},e.prototype.digest=function(){return Ds(this,void 0,void 0,(function(){var e,t,n,r,i,o,a;return js(this,(function(s){if(!this.finished){if(t=(e=this).buffer,n=e.bufferLength,r=e.bytesHashed,i=8*r,t.setUint8(this.bufferLength++,128),n%64>=56){for(a=this.bufferLength;a<64;a++)t.setUint8(a,0);this.hashBuffer(),this.bufferLength=0}for(a=this.bufferLength;a<56;a++)t.setUint8(a,0);t.setUint32(56,i>>>0,!0),t.setUint32(60,Math.floor(i/4294967296),!0),this.hashBuffer(),this.finished=!0}for(o=new DataView(new ArrayBuffer(16)),a=0;a<4;a++)o.setUint32(4*a,this.state[a],!0);return[2,new Uint8Array(o.buffer,o.byteOffset,o.byteLength)]}))}))},e.prototype.hashBuffer=function(){var e=this.buffer,t=this.state,n=t[0],r=t[1],i=t[2],o=t[3];n=wc(n,r,i,o,e.getUint32(0,!0),7,3614090360),o=wc(o,n,r,i,e.getUint32(4,!0),12,3905402710),i=wc(i,o,n,r,e.getUint32(8,!0),17,606105819),r=wc(r,i,o,n,e.getUint32(12,!0),22,3250441966),n=wc(n,r,i,o,e.getUint32(16,!0),7,4118548399),o=wc(o,n,r,i,e.getUint32(20,!0),12,1200080426),i=wc(i,o,n,r,e.getUint32(24,!0),17,2821735955),r=wc(r,i,o,n,e.getUint32(28,!0),22,4249261313),n=wc(n,r,i,o,e.getUint32(32,!0),7,1770035416),o=wc(o,n,r,i,e.getUint32(36,!0),12,2336552879),i=wc(i,o,n,r,e.getUint32(40,!0),17,4294925233),r=wc(r,i,o,n,e.getUint32(44,!0),22,2304563134),n=wc(n,r,i,o,e.getUint32(48,!0),7,1804603682),o=wc(o,n,r,i,e.getUint32(52,!0),12,4254626195),i=wc(i,o,n,r,e.getUint32(56,!0),17,2792965006),n=bc(n,r=wc(r,i,o,n,e.getUint32(60,!0),22,1236535329),i,o,e.getUint32(4,!0),5,4129170786),o=bc(o,n,r,i,e.getUint32(24,!0),9,3225465664),i=bc(i,o,n,r,e.getUint32(44,!0),14,643717713),r=bc(r,i,o,n,e.getUint32(0,!0),20,3921069994),n=bc(n,r,i,o,e.getUint32(20,!0),5,3593408605),o=bc(o,n,r,i,e.getUint32(40,!0),9,38016083),i=bc(i,o,n,r,e.getUint32(60,!0),14,3634488961),r=bc(r,i,o,n,e.getUint32(16,!0),20,3889429448),n=bc(n,r,i,o,e.getUint32(36,!0),5,568446438),o=bc(o,n,r,i,e.getUint32(56,!0),9,3275163606),i=bc(i,o,n,r,e.getUint32(12,!0),14,4107603335),r=bc(r,i,o,n,e.getUint32(32,!0),20,1163531501),n=bc(n,r,i,o,e.getUint32(52,!0),5,2850285829),o=bc(o,n,r,i,e.getUint32(8,!0),9,4243563512),i=bc(i,o,n,r,e.getUint32(28,!0),14,1735328473),n=Sc(n,r=bc(r,i,o,n,e.getUint32(48,!0),20,2368359562),i,o,e.getUint32(20,!0),4,4294588738),o=Sc(o,n,r,i,e.getUint32(32,!0),11,2272392833),i=Sc(i,o,n,r,e.getUint32(44,!0),16,1839030562),r=Sc(r,i,o,n,e.getUint32(56,!0),23,4259657740),n=Sc(n,r,i,o,e.getUint32(4,!0),4,2763975236),o=Sc(o,n,r,i,e.getUint32(16,!0),11,1272893353),i=Sc(i,o,n,r,e.getUint32(28,!0),16,4139469664),r=Sc(r,i,o,n,e.getUint32(40,!0),23,3200236656),n=Sc(n,r,i,o,e.getUint32(52,!0),4,681279174),o=Sc(o,n,r,i,e.getUint32(0,!0),11,3936430074),i=Sc(i,o,n,r,e.getUint32(12,!0),16,3572445317),r=Sc(r,i,o,n,e.getUint32(24,!0),23,76029189),n=Sc(n,r,i,o,e.getUint32(36,!0),4,3654602809),o=Sc(o,n,r,i,e.getUint32(48,!0),11,3873151461),i=Sc(i,o,n,r,e.getUint32(60,!0),16,530742520),n=Ec(n,r=Sc(r,i,o,n,e.getUint32(8,!0),23,3299628645),i,o,e.getUint32(0,!0),6,4096336452),o=Ec(o,n,r,i,e.getUint32(28,!0),10,1126891415),i=Ec(i,o,n,r,e.getUint32(56,!0),15,2878612391),r=Ec(r,i,o,n,e.getUint32(20,!0),21,4237533241),n=Ec(n,r,i,o,e.getUint32(48,!0),6,1700485571),o=Ec(o,n,r,i,e.getUint32(12,!0),10,2399980690),i=Ec(i,o,n,r,e.getUint32(40,!0),15,4293915773),r=Ec(r,i,o,n,e.getUint32(4,!0),21,2240044497),n=Ec(n,r,i,o,e.getUint32(32,!0),6,1873313359),o=Ec(o,n,r,i,e.getUint32(60,!0),10,4264355552),i=Ec(i,o,n,r,e.getUint32(24,!0),15,2734768916),r=Ec(r,i,o,n,e.getUint32(52,!0),21,1309151649),n=Ec(n,r,i,o,e.getUint32(16,!0),6,4149444226),o=Ec(o,n,r,i,e.getUint32(44,!0),10,3174756917),i=Ec(i,o,n,r,e.getUint32(8,!0),15,718787259),r=Ec(r,i,o,n,e.getUint32(36,!0),21,3951481745),t[0]=n+t[0]&4294967295,t[1]=r+t[1]&4294967295,t[2]=i+t[2]&4294967295,t[3]=o+t[3]&4294967295},e}();function yc(e,t,n,r,i,o){return((t=(t+e&4294967295)+(r+o&4294967295)&4294967295)<<i|t>>>32-i)+n&4294967295}function wc(e,t,n,r,i,o,a){return yc(t&n|~t&r,e,t,i,o,a)}function bc(e,t,n,r,i,o,a){return yc(t&r|n&~r,e,t,i,o,a)}function Sc(e,t,n,r,i,o,a){return yc(t^n^r,e,t,i,o,a)}function Ec(e,t,n,r,i,o,a){return yc(n^(t|~r),e,t,i,o,a)}var kc,Cc={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},xc=function(e){return{applyToStack:function(t){t.add(function(e){return function(t,n){return function(r){return Ds(void 0,void 0,void 0,(function(){var i;return js(this,(function(o){return(null===(i=null==e?void 0:e.retryStrategy)||void 0===i?void 0:i.mode)&&(n.userAgent=Fs(Fs([],Us(n.userAgent||[])),[["cfg/retry-mode",e.retryStrategy.mode]])),[2,e.retryStrategy.retry(t,r)]}))}))}}}(e),Cc)}}},Tc=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],Nc=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Oc=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],_c=[500,502,503,504],Pc=function(e){var t,n;return 429===(null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||Nc.includes(e.name)||1==(null===(n=e.$retryable)||void 0===n?void 0:n.throttling)},Ac=new Uint8Array(16);function Ic(){if(!kc&&!(kc="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return kc(Ac)}var Mc=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Rc(e){return"string"==typeof e&&Mc.test(e)}for(var Bc=[],Lc=0;Lc<256;++Lc)Bc.push((Lc+256).toString(16).substr(1));function Dc(e,t,n){var r=(e=e||{}).random||(e.rng||Ic)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(Bc[e[t+0]]+Bc[e[t+1]]+Bc[e[t+2]]+Bc[e[t+3]]+"-"+Bc[e[t+4]]+Bc[e[t+5]]+"-"+Bc[e[t+6]]+Bc[e[t+7]]+"-"+Bc[e[t+8]]+Bc[e[t+9]]+"-"+Bc[e[t+10]]+Bc[e[t+11]]+Bc[e[t+12]]+Bc[e[t+13]]+Bc[e[t+14]]+Bc[e[t+15]]).toLowerCase();if(!Rc(n))throw TypeError("Stringified UUID is invalid");return n}(r)}var jc=function(e,t){return Math.floor(Math.min(2e4,Math.random()*Math.pow(2,t)*e))},zc=function(e){return!!e&&(function(e){return void 0!==e.$retryable}(e)||function(e){return Tc.includes(e.name)}(e)||Pc(e)||function(e){var t;return Oc.includes(e.name)||_c.includes((null===(t=e.$metadata)||void 0===t?void 0:t.httpStatusCode)||0)}(e))},Uc=function(){function e(e,t){var n,r,i,o,a,s,u,c;this.maxAttemptsProvider=e,this.mode="standard",this.retryDecider=null!==(n=null==t?void 0:t.retryDecider)&&void 0!==n?n:zc,this.delayDecider=null!==(r=null==t?void 0:t.delayDecider)&&void 0!==r?r:jc,this.retryQuota=null!==(i=null==t?void 0:t.retryQuota)&&void 0!==i?i:(a=o=500,s=o,u=function(e){return"TimeoutError"===e.name?10:5},c=function(e){return u(e)<=s},Object.freeze({hasRetryTokens:c,retrieveRetryTokens:function(e){if(!c(e))throw new Error("No retry token available");var t=u(e);return s-=t,t},releaseRetryTokens:function(e){s+=null!=e?e:1,s=Math.min(s,a)}}))}return e.prototype.shouldRetry=function(e,t,n){return t<n&&this.retryDecider(e)&&this.retryQuota.hasRetryTokens(e)},e.prototype.getMaxAttempts=function(){return Ds(this,void 0,void 0,(function(){var e;return js(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.maxAttemptsProvider()];case 1:return e=t.sent(),[3,3];case 2:return t.sent(),e=3,[3,3];case 3:return[2,e]}}))}))},e.prototype.retry=function(e,t){return Ds(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return js(this,(function(d){switch(d.label){case 0:return r=0,i=0,[4,this.getMaxAttempts()];case 1:o=d.sent(),a=t.request,nc.isInstance(a)&&(a.headers["amz-sdk-invocation-id"]=Dc()),s=function(){var s,c,d,l,f,p;return js(this,(function(h){switch(h.label){case 0:return h.trys.push([0,2,,5]),nc.isInstance(a)&&(a.headers["amz-sdk-request"]="attempt="+(r+1)+"; max="+o),[4,e(t)];case 1:return s=h.sent(),c=s.response,d=s.output,u.retryQuota.releaseRetryTokens(n),d.$metadata.attempts=r+1,d.$metadata.totalRetryDelay=i,[2,{value:{response:c,output:d}}];case 2:return l=h.sent(),f=Fc(l),r++,u.shouldRetry(f,r,o)?(n=u.retryQuota.retrieveRetryTokens(f),p=u.delayDecider(Pc(f)?500:100,r),i+=p,[4,new Promise((function(e){return setTimeout(e,p)}))]):[3,4];case 3:return h.sent(),[2,"continue"];case 4:throw f.$metadata||(f.$metadata={}),f.$metadata.attempts=r,f.$metadata.totalRetryDelay=i,f;case 5:return[2]}}))},u=this,d.label=2;case 2:return[5,s()];case 3:return"object"==typeof(c=d.sent())?[2,c.value]:[3,2];case 4:return[2]}}))}))},e}(),Fc=function(e){return e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):"string"==typeof e?new Error(e):new Error("AWS SDK error wrapper for "+e)},qc=function(e){if(void 0===e&&(e=3),"number"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e};var Kc=Hr(Vr((function(e,t){e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=90)}({17:function(e,t,n){t.__esModule=!0,t.default=void 0;var r=n(18),i=function(){function e(){}return e.getFirstMatch=function(e,t){var n=t.match(e);return n&&n.length>0&&n[1]||""},e.getSecondMatch=function(e,t){var n=t.match(e);return n&&n.length>1&&n[2]||""},e.matchAndReturnConst=function(e,t,n){if(e.test(t))return n},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,n,r){void 0===r&&(r=!1);var i=e.getVersionPrecision(t),o=e.getVersionPrecision(n),a=Math.max(i,o),s=0,u=e.map([t,n],(function(t){var n=a-e.getVersionPrecision(t),r=t+new Array(n+1).join(".0");return e.map(r.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(r&&(s=a-Math.min(i,o)),a-=1;a>=s;){if(u[0][a]>u[1][a])return 1;if(u[0][a]===u[1][a]){if(a===s)return 0;a-=1}else if(u[0][a]<u[1][a])return-1}},e.map=function(e,t){var n,r=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r},e.find=function(e,t){var n,r;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(n=0,r=e.length;n<r;n+=1){var i=e[n];if(t(i,n))return i}},e.assign=function(e){for(var t,n,r=e,i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(Object.assign)return Object.assign.apply(Object,[e].concat(o));var s=function(){var e=o[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){r[t]=e[t]}))};for(t=0,n=o.length;t<n;t+=1)s();return e},e.getBrowserAlias=function(e){return r.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return r.BROWSER_MAP[e]||""},e}();t.default=i,e.exports=t.default},18:function(e,t,n){t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(91))&&r.__esModule?r:{default:r},o=n(18);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){}var t,n,r;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new i.default(e,t)},e.parse=function(e){return new i.default(e).getResult()},t=e,r=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}],(n=null)&&a(t.prototype,n),r&&a(t,r),e}();t.default=s,e.exports=t.default},91:function(e,t,n){t.__esModule=!0,t.default=void 0;var r=u(n(92)),i=u(n(93)),o=u(n(94)),a=u(n(95)),s=u(n(17));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=s.default.find(r.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=s.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=s.default.find(a.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return s.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,n={},r=0,i={},o=0;if(Object.keys(e).forEach((function(t){var a=e[t];"string"==typeof a?(i[t]=a,o+=1):"object"==typeof a&&(n[t]=a,r+=1)})),r>0){var a=Object.keys(n),u=s.default.find(a,(function(e){return t.isOS(e)}));if(u){var c=this.satisfies(n[u]);if(void 0!==c)return c}var d=s.default.find(a,(function(e){return t.isPlatform(e)}));if(d){var l=this.satisfies(n[d]);if(void 0!==l)return l}}if(o>0){var f=Object.keys(i),p=s.default.find(f,(function(e){return t.isBrowser(e,!0)}));if(void 0!==p)return this.compareVersion(i[p])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var n=this.getBrowserName().toLowerCase(),r=e.toLowerCase(),i=s.default.getBrowserTypeByAlias(r);return t&&i&&(r=i.toLowerCase()),r===n},t.compareVersion=function(e){var t=[0],n=e,r=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]||"<"===e[0]?(n=e.substr(1),"="===e[1]?(r=!0,n=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?n=e.substr(1):"~"===e[0]&&(r=!0,n=e.substr(1)),t.indexOf(s.default.compareVersions(i,n,r))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=c,e.exports=t.default},92:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},n=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},n=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},n=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},n=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},n=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},n=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},n=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},n=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},n=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},n=i.default.getFirstMatch(o,e)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},n=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},n=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},n=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},n=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},n=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},n=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t={name:"Android Browser"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},n=i.default.getFirstMatch(o,e);return n&&(t.version=n),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(t,e),version:i.default.getSecondMatch(t,e)}}}];t.default=a,e.exports=t.default},93:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/Roku\/DVP/],describe:function(e){var t=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:o.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),n=i.default.getWindowsVersionName(t);return{name:o.OS_MAP.Windows,version:t,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:o.OS_MAP.iOS},n=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return n&&(t.version=n),t}},{test:[/macintosh/i],describe:function(e){var t=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),n=i.default.getMacOSVersionName(t),r={name:o.OS_MAP.MacOS,version:t};return n&&(r.versionName=n),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),n=e.test(/android/i);return t&&n},describe:function(e){var t=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),n=i.default.getAndroidVersionName(t),r={name:o.OS_MAP.Android,version:t};return n&&(r.versionName=n),r}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:o.OS_MAP.WebOS};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||i.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:o.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:o.OS_MAP.PlayStation4,version:t}}}];t.default=a,e.exports=t.default},94:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=i.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",n={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(n.model=t),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),n=e.test(/like (ipod|iphone)/i);return t&&!n},describe:function(e){var t=i.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];t.default=a,e.exports=t.default},95:function(e,t,n){t.__esModule=!0,t.default=void 0;var r,i=(r=n(17))&&r.__esModule?r:{default:r},o=n(18),a=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:o.ENGINE_MAP.Blink};var t=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:o.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:o.ENGINE_MAP.Trident},n=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:o.ENGINE_MAP.Presto},n=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),n=e.test(/like gecko/i);return t&&!n},describe:function(e){var t={name:o.ENGINE_MAP.Gecko},n=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:o.ENGINE_MAP.WebKit},n=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}];t.default=a,e.exports=t.default}})}))),Hc=new Set(["af-south-1","ap-east-1","ap-northeast-1","ap-northeast-2","ap-south-1","ap-southeast-1","ap-southeast-2","ca-central-1","eu-central-1","eu-north-1","eu-south-1","eu-west-1","eu-west-2","eu-west-3","me-south-1","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]),$c=new Set(["cn-north-1","cn-northwest-1"]),Vc=new Set(["us-iso-east-1"]),Gc=new Set(["us-isob-east-1"]),Wc=new Set(["us-gov-east-1","us-gov-west-1"]);var Yc,Qc={apiVersion:"2006-03-01",disableHostPrefix:!1,logger:{},regionInfoProvider:function(e,t){var n=void 0;switch(e){case"af-south-1":n={hostname:"s3.af-south-1.amazonaws.com",partition:"aws"};break;case"ap-east-1":n={hostname:"s3.ap-east-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-1":n={hostname:"s3.ap-northeast-1.amazonaws.com",partition:"aws"};break;case"ap-northeast-2":n={hostname:"s3.ap-northeast-2.amazonaws.com",partition:"aws"};break;case"ap-south-1":n={hostname:"s3.ap-south-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-1":n={hostname:"s3.ap-southeast-1.amazonaws.com",partition:"aws"};break;case"ap-southeast-2":n={hostname:"s3.ap-southeast-2.amazonaws.com",partition:"aws"};break;case"aws-global":n={hostname:"s3.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"ca-central-1":n={hostname:"s3.ca-central-1.amazonaws.com",partition:"aws"};break;case"cn-north-1":n={hostname:"s3.cn-north-1.amazonaws.com.cn",partition:"aws-cn"};break;case"cn-northwest-1":n={hostname:"s3.cn-northwest-1.amazonaws.com.cn",partition:"aws-cn"};break;case"eu-central-1":n={hostname:"s3.eu-central-1.amazonaws.com",partition:"aws"};break;case"eu-north-1":n={hostname:"s3.eu-north-1.amazonaws.com",partition:"aws"};break;case"eu-south-1":n={hostname:"s3.eu-south-1.amazonaws.com",partition:"aws"};break;case"eu-west-1":n={hostname:"s3.eu-west-1.amazonaws.com",partition:"aws"};break;case"eu-west-2":n={hostname:"s3.eu-west-2.amazonaws.com",partition:"aws"};break;case"eu-west-3":n={hostname:"s3.eu-west-3.amazonaws.com",partition:"aws"};break;case"fips-us-gov-west-1":n={hostname:"s3-fips.us-gov-west-1.amazonaws.com",partition:"aws-us-gov",signingRegion:"us-gov-west-1"};break;case"me-south-1":n={hostname:"s3.me-south-1.amazonaws.com",partition:"aws"};break;case"s3-external-1":n={hostname:"s3-external-1.amazonaws.com",partition:"aws",signingRegion:"us-east-1"};break;case"sa-east-1":n={hostname:"s3.sa-east-1.amazonaws.com",partition:"aws"};break;case"us-east-1":n={hostname:"s3.us-east-1.amazonaws.com",partition:"aws"};break;case"us-east-2":n={hostname:"s3.us-east-2.amazonaws.com",partition:"aws"};break;case"us-gov-east-1":n={hostname:"s3.us-gov-east-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-gov-west-1":n={hostname:"s3.us-gov-west-1.amazonaws.com",partition:"aws-us-gov"};break;case"us-iso-east-1":n={hostname:"s3.us-iso-east-1.c2s.ic.gov",partition:"aws-iso"};break;case"us-isob-east-1":n={hostname:"s3.us-isob-east-1.sc2s.sgov.gov",partition:"aws-iso-b"};break;case"us-west-1":n={hostname:"s3.us-west-1.amazonaws.com",partition:"aws"};break;case"us-west-2":n={hostname:"s3.us-west-2.amazonaws.com",partition:"aws"};break;default:Hc.has(e)&&(n={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws"}),$c.has(e)&&(n={hostname:"s3.{region}.amazonaws.com.cn".replace("{region}",e),partition:"aws-cn"}),Vc.has(e)&&(n={hostname:"s3.{region}.c2s.ic.gov".replace("{region}",e),partition:"aws-iso"}),Gc.has(e)&&(n={hostname:"s3.{region}.sc2s.sgov.gov".replace("{region}",e),partition:"aws-iso-b"}),Wc.has(e)&&(n={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws-us-gov"}),void 0===n&&(n={hostname:"s3.{region}.amazonaws.com".replace("{region}",e),partition:"aws"})}return Promise.resolve(Bs({signingService:"s3"},n))},serviceId:"S3",signingEscapePath:!1,urlParser:function(e){var t,n=new URL(e),r=n.hostname,i=n.pathname,o=n.port,a=n.protocol,s=n.search;return s&&(t=function(e){var t,n,r={};if(e=e.replace(/^\?/,""))try{for(var i=zs(e.split("&")),o=i.next();!o.done;o=i.next()){var a=Us(o.value.split("="),2),s=a[0],u=a[1],c=void 0===u?null:u;s=decodeURIComponent(s),c&&(c=decodeURIComponent(c)),s in r?Array.isArray(r[s])?r[s].push(c):r[s]=[r[s],c]:r[s]=c}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(s)),{hostname:r,port:o?parseInt(o):void 0,protocol:a,path:i,query:t}},useArnRegion:!1},Jc=Bs(Bs({},Qc),{runtime:"browser",base64Decoder:pc,base64Encoder:function(e){for(var t="",n=0;n<e.length;n+=3){for(var r=0,i=0,o=n,a=Math.min(n+3,e.length);o<a;o++)r|=e[o]<<8*(a-o-1),i+=8;var s=Math.ceil(i/6);r<<=6*s-i;for(var u=1;u<=s;u++){var c=6*(s-u);t+=sc[(r&63<<c)>>c]}t+="==".slice(0,4-s)}return t},bodyLengthChecker:function(e){if("string"==typeof e){for(var t=e.length,n=t-1;n>=0;n--){var r=e.charCodeAt(n);r>127&&r<=2047?t++:r>2047&&r<=65535&&(t+=2)}return t}return"number"==typeof e.byteLength?e.byteLength:"number"==typeof e.size?e.size:void 0},credentialDefaultProvider:function(e){return function(){return Promise.reject(new Error("Credential is missing"))}},defaultUserAgentProvider:function(e){var t=e.serviceId,n=e.clientVersion;return function(){return Ds(void 0,void 0,void 0,(function(){var e,r,i,o,a,s,u,c,d;return js(this,(function(l){return e="undefined"!=typeof window&&(null===(i=null===window||void 0===window?void 0:window.navigator)||void 0===i?void 0:i.userAgent)?Kc.parse(window.navigator.userAgent):void 0,r=[["aws-sdk-js",n],["os/"+((null===(o=null==e?void 0:e.os)||void 0===o?void 0:o.name)||"other"),null===(a=null==e?void 0:e.os)||void 0===a?void 0:a.version],["lang/js"],["md/browser",(null!==(u=null===(s=null==e?void 0:e.browser)||void 0===s?void 0:s.name)&&void 0!==u?u:"unknown")+"_"+(null!==(d=null===(c=null==e?void 0:e.browser)||void 0===c?void 0:c.version)&&void 0!==d?d:"unknown")]],t&&r.push(["api/"+t,n]),[2,r]}))}))}}({serviceId:Qc.serviceId,clientVersion:$s}),eventStreamSerdeProvider:function(e){return new Zu(e)},maxAttempts:3,md5:gc,region:(Yc="Region is missing",function(){return Promise.reject(Yc)}),requestHandler:new oc,sha256:Pu.Sha256,streamCollector:function(e){return"function"==typeof Blob&&e instanceof Blob?function(e){return Ds(this,void 0,void 0,(function(){var t,n;return js(this,(function(r){switch(r.label){case 0:return[4,hc(e)];case 1:return t=r.sent(),n=pc(t),[2,new Uint8Array(n)]}}))}))}(e):function(e){return Ds(this,void 0,void 0,(function(){var t,n,r,i,o,a,s;return js(this,(function(u){switch(u.label){case 0:t=new Uint8Array(0),n=e.getReader(),r=!1,u.label=1;case 1:return r?[3,3]:[4,n.read()];case 2:return i=u.sent(),o=i.done,(a=i.value)&&(s=t,(t=new Uint8Array(s.length+a.length)).set(s),t.set(a,s.length)),r=o,[3,1];case 3:return[2,t]}}))}))}(e)},streamHasher:function(e,t){return Ds(this,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return n=new e,[4,vc(t,(function(e){n.update(e)}))];case 1:return r.sent(),[2,n.digest()]}}))}))},utf8Decoder:ru,utf8Encoder:iu}),Xc=function(e){var t=e.endpoint,n=e.urlParser;if("string"==typeof t){var r=Promise.resolve(n(t));return function(){return r}}if("object"==typeof t){var i=Promise.resolve(t);return function(){return i}}return t},Zc=function(e){return Ds(void 0,void 0,void 0,(function(){var t,n,r,i,o;return js(this,(function(a){switch(a.label){case 0:return t=e.tls,n=void 0===t||t,[4,e.region()];case 1:if(r=a.sent(),!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");return[4,e.regionInfoProvider(r)];case 2:if(!(i=(null!==(o=a.sent())&&void 0!==o?o:{}).hostname))throw new Error("Cannot resolve hostname from client config");return[2,e.urlParser((n?"https:":"http:")+"//"+i)]}}))}))},ed=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},td=function(e){return"string"==typeof e&&0===e.indexOf("arn:")&&e.split(":").length>=6},nd=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,rd=/(\d+\.){3}\d+/,id=/\.\./,od=/\./,ad=/^(.+\.)?s3[.-]([a-z0-9-]+)\./,sd=/^s3(-external-1)?\.amazonaws\.com$/,ud=function(e){return dd(e)?e.replace(/fips-|-fips/,""):e},cd=function(e){var t=e.match(ad);return[t[2],e.replace(new RegExp("^"+t[0]),"")]},dd=function(e){return e.startsWith("fips-")||e.endsWith("-fips")},ld=function(e,t){return e===t||ud(e)===t||e===ud(t)},fd=function(e,t){if(void 0===t&&(t={tlsCompatible:!0}),e.length>=64||!/^[a-z0-9][a-z0-9.-]+[a-z0-9]$/.test(e)||/(\d+\.){3}\d+/.test(e)||/[.-]{2}/.test(e)||(null==t?void 0:t.tlsCompatible)&&od.test(e))throw new Error("Invalid DNS label "+e)},pd=function(e){if(e)throw new Error("Dualstack endpoint is not supported with Outpost")},hd=function(e){var t=e.isCustomEndpoint;e.baseHostname;var n=e.dualstackEndpoint,r=e.accelerateEndpoint;if(t){if(n)throw new Error("Dualstack endpoint is not supported with custom endpoint");if(r)throw new Error("Accelerate endpoint is not supported with custom endpoint")}return function(e){return"string"==typeof e.bucketName}(e)?md(Bs(Bs({},e),{isCustomEndpoint:t})):vd(Bs(Bs({},e),{isCustomEndpoint:t}))},vd=function(e){var t,n=e.isCustomEndpoint,r=e.baseHostname,i=Us(n?[e.clientRegion,r]:(t=r,sd.test(t)?[t.replace(".amazonaws.com",""),"amazonaws.com"]:cd(t)),2),o=i[0],a=i[1],s=e.pathStyleEndpoint,u=e.dualstackEndpoint,c=void 0!==u&&u,d=e.accelerateEndpoint,l=void 0!==d&&d,f=e.tlsCompatible,p=void 0===f||f,h=e.useArnRegion,v=e.bucketName,m=e.clientPartition,g=void 0===m?"aws":m,y=e.clientSigningRegion,w=void 0===y?o:y;!function(e){if(e.pathStyleEndpoint)throw new Error("Path-style S3 endpoint is not supported when bucket is an ARN");if(e.accelerateEndpoint)throw new Error("Accelerate endpoint is not supported when bucket is an ARN");if(!e.tlsCompatible)throw new Error("HTTPS is required when bucket is an ARN")}({pathStyleEndpoint:s,accelerateEndpoint:l,tlsCompatible:p});var b=v.service,S=v.partition,E=v.accountId,k=v.region,C=v.resource;!function(e){if("s3"!==e&&"s3-outposts"!==e&&"s3-object-lambda"!==e)throw new Error("Expect 's3' or 's3-outposts' or 's3-object-lambda' in ARN service component")}(b),function(e,t){if(e!==t.clientPartition)throw new Error('Partition in ARN is incompatible, got "'+e+'" but expected "'+t.clientPartition+'"')}(S,{clientPartition:g}),function(e){if(!/[0-9]{12}/.exec(e))throw new Error("Access point ARN accountID does not match regex '[0-9]{12}'")}(E),function(e,t){if(""===e)throw new Error("ARN region is empty");if(!t.useArnRegion&&!ld(e,t.clientRegion)&&!ld(e,t.clientSigningRegion))throw new Error("Region in ARN is incompatible, got "+e+" but expected "+t.clientRegion);if(t.useArnRegion&&dd(e))throw new Error("Endpoint does not support FIPS region")}(k,{useArnRegion:h,clientRegion:o,clientSigningRegion:w});var x=function(e){var t=e.includes(":")?":":"/",n=Us(e.split(t)),r=n[0],i=n.slice(1);if("accesspoint"===r){if(1!==i.length||""===i[0])throw new Error("Access Point ARN should have one resource accesspoint"+t+"{accesspointname}");return{accesspointName:i[0]}}if("outpost"===r){if(!i[0]||"accesspoint"!==i[1]||!i[2]||3!==i.length)throw new Error("Outpost ARN should have resource outpost"+t+"{outpostId}"+t+"accesspoint"+t+"{accesspointName}");var o=Us(i,3),a=o[0];return o[1],{outpostId:a,accesspointName:o[2]}}throw new Error("ARN resource should begin with 'accesspoint"+t+"' or 'outpost"+t+"'")}(C),T=x.accesspointName,N=x.outpostId,O=T+"-"+E;fd(O,{tlsCompatible:p});var _=h?k:o,P=h?k:w;return"s3-object-lambda"===b?(pd(c),{bucketEndpoint:!0,hostname:O+"."+b+"."+_+"."+a,signingRegion:P,signingService:b}):N?(function(e){if("s3-outposts"!==e)throw new Error("Expect 's3-posts' in Outpost ARN service component")}(b),fd(N,{tlsCompatible:p}),pd(c),function(e){if(dd(null!=e?e:""))throw new Error("FIPS region is not supported with Outpost, got "+e)}(_),{bucketEndpoint:!0,hostname:O+"."+N+(n?"":".s3-outposts."+_)+"."+a,signingRegion:P,signingService:"s3-outposts"}):(function(e){if("s3"!==e)throw new Error("Expect 's3' in Accesspoint ARN service component")}(b),{bucketEndpoint:!0,hostname:""+O+(n?"":".s3-accesspoint"+(c?".dualstack":"")+"."+_)+"."+a,signingRegion:P})},md=function(e){var t,n=e.accelerateEndpoint,r=void 0!==n&&n,i=e.clientRegion,o=e.baseHostname,a=e.bucketName,s=e.dualstackEndpoint,u=void 0!==s&&s,c=e.pathStyleEndpoint,d=void 0!==c&&c,l=e.tlsCompatible,f=void 0===l||l,p=e.isCustomEndpoint,h=Us(void 0!==p&&p?[i,o]:(t=o,sd.test(t)?["us-east-1","amazonaws.com"]:cd(t)),2),v=h[0],m=h[1];return d||!function(e){return nd.test(e)&&!rd.test(e)&&!id.test(e)}(a)||f&&od.test(a)?{bucketEndpoint:!1,hostname:u?"s3.dualstack."+v+"."+m:o}:(r?o="s3-accelerate"+(u?".dualstack":"")+"."+m:u&&(o="s3.dualstack."+v+"."+m),{bucketEndpoint:!0,hostname:a+"."+o})},gd=function(e){return function(t,n){return function(r){return Ds(void 0,void 0,void 0,(function(){var i,o,a,s,u,c,d,l,f,p,h,v,m,g,y,w,b,S;return js(this,(function(E){switch(E.label){case 0:return i=r.input.Bucket,o=e.bucketEndpoint,a=r.request,nc.isInstance(a)?e.bucketEndpoint?(a.hostname=i,[3,7]):[3,1]:[3,8];case 1:return td(i)?(s=function(e){var t=e.split(":");if(t.length<6||"arn"!==t[0])throw new Error("Malformed ARN");var n=Us(t);return{partition:n[1],service:n[2],region:n[3],accountId:n[4],resource:n.slice(5).join(":")}}(i),u=ud,[4,e.region()]):[3,5];case 2:return g=u.apply(void 0,[E.sent()]),[4,e.regionInfoProvider(g)];case 3:return c=E.sent()||{},d=c.partition,l=c.signingRegion,f=void 0===l?g:l,[4,e.useArnRegion()];case 4:return p=E.sent(),h=hd({bucketName:s,baseHostname:a.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:"https:"===a.protocol,useArnRegion:p,clientPartition:d,clientSigningRegion:f,clientRegion:g,isCustomEndpoint:e.isCustomEndpoint}),b=h.hostname,S=h.bucketEndpoint,v=h.signingRegion,m=h.signingService,v&&v!==f&&(n.signing_region=v),m&&"s3"!==m&&(n.signing_service=m),a.hostname=b,o=S,[3,7];case 5:return y=ud,[4,e.region()];case 6:g=y.apply(void 0,[E.sent()]),w=hd({bucketName:i,clientRegion:g,baseHostname:a.hostname,accelerateEndpoint:e.useAccelerateEndpoint,dualstackEndpoint:e.useDualstackEndpoint,pathStyleEndpoint:e.forcePathStyle,tlsCompatible:"https:"===a.protocol,isCustomEndpoint:e.isCustomEndpoint}),b=w.hostname,S=w.bucketEndpoint,a.hostname=b,o=S,E.label=7;case 7:o&&(a.path=a.path.replace(/^(\/)?[^\/]+/,""),""===a.path&&(a.path="/")),E.label=8;case 8:return[2,t(Bs(Bs({},r),{request:a}))]}}))}))}}},yd={tags:["BUCKET_ENDPOINT"],name:"bucketEndpointMiddleware",relation:"before",toMiddleware:"hostHeaderMiddleware",override:!0},wd=function(e){return{applyToStack:function(t){t.addRelativeTo(gd(e),yd)}}};var bd={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Sd=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(r){return Ds(t,void 0,void 0,(function(){var t,i,o,a,s;return js(this,(function(u){return t=r.request,nc.isInstance(t)&&(i=t.body,o=t.headers,i&&-1===Object.keys(o).map((function(e){return e.toLowerCase()})).indexOf("content-length")&&void 0!==(a=e(i))&&(t.headers=Bs(Bs({},t.headers),((s={})["content-length"]=String(a),s)))),[2,n(Bs(Bs({},r),{request:t}))]}))}))}}}(e.bodyLengthChecker),bd)}}};var Ed={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},kd=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(r){return Ds(t,void 0,void 0,(function(){var t;return js(this,(function(i){return t=r.request,nc.isInstance(t)&&t.body&&"node"===e.runtime&&(t.headers=Bs(Bs({},t.headers),{Expect:"100-continue"})),[2,n(Bs(Bs({},r),{request:t}))]}))}))}}}(e),Ed)}}};var Cd={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},xd=function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(n){return Ds(void 0,void 0,void 0,(function(){var r,i;return js(this,(function(o){return nc.isInstance(n.request)?(r=n.request,(void 0===(i=(e.requestHandler.metadata||{}).handlerProtocol)?"":i).indexOf("h2")>=0&&!r.headers[":authority"]?(delete r.headers.host,r.headers[":authority"]=""):r.headers.host||(r.headers.host=r.hostname),[2,t(n)]):[2,t(n)]}))}))}}}(e),Cd)}}},Td={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Nd=function(e){return{applyToStack:function(e){e.add((function(e,t){return function(n){return Ds(void 0,void 0,void 0,(function(){var r,i,o,a,s,u,c,d,l;return js(this,(function(f){switch(f.label){case 0:return r=t.clientName,i=t.commandName,o=t.inputFilterSensitiveLog,a=t.logger,s=t.outputFilterSensitiveLog,[4,e(n)];case 1:return u=f.sent(),a?("function"==typeof a.info&&(c=u.output,d=c.$metadata,l=Ls(c,["$metadata"]),a.info({clientName:r,commandName:i,input:o(n.input),output:s(l),metadata:d})),[2,u]):[2,u]}}))}))}}),Td)}}};var Od={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},_d=function(e){return{applyToStack:function(e){e.add(function(){var e=this;return function(t){return function(n){return Ds(e,void 0,void 0,(function(){var e,r;return js(this,(function(i){if("string"==typeof(e=n.input.Bucket)&&!td(e)&&e.indexOf("/")>=0)throw(r=new Error("Bucket name shouldn't contain '/', received '"+e+"'")).name="InvalidBucketName",r;return[2,t(Bs({},n))]}))}))}}}(),Od)}}},Pd={step:"build",tags:["USE_REGIONAL_ENDPOINT","S3"],name:"useRegionalEndpointMiddleware",override:!0},Ad=function(e){return{applyToStack:function(t){t.add(function(e){return function(t){return function(n){return Ds(void 0,void 0,void 0,(function(){var r,i;return js(this,(function(o){switch(o.label){case 0:return r=n.request,!nc.isInstance(r)||e.isCustomEndpoint?[2,t(Bs({},n))]:"s3.amazonaws.com"!==r.hostname?[3,1]:(r.hostname="s3.us-east-1.amazonaws.com",[3,3]);case 1:return i="aws-global",[4,e.region()];case 2:i===o.sent()&&(r.hostname="s3.amazonaws.com"),o.label=3;case 3:return[2,t(Bs({},n))]}}))}))}}}(e),Pd)}}},Id=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},Md=function(e,t){return Id(e,t).then((function(e){return t.utf8Encoder(e)}))},Rd={relation:"after",toMiddleware:"deserializerMiddleware",tags:["THROW_200_EXCEPTIONS","S3"],name:"throw200ExceptionsMiddleware",override:!0},Bd=function(e){return{applyToStack:function(t){t.addRelativeTo(function(e){return function(t){return function(n){return Ds(void 0,void 0,void 0,(function(){var r,i,o,a,s,u,c;return js(this,(function(d){switch(d.label){case 0:return[4,t(n)];case 1:return r=d.sent(),i=r.response,tc.isInstance(i)?(o=i.statusCode,a=i.body,o<200&&o>=300?[2,r]:[4,Id(a,e)]):[2,r];case 2:return s=d.sent(),[4,Md(s,e)];case 3:if(u=d.sent(),0===s.length)throw(c=new Error("S3 aborted request")).name="InternalError",c;return u&&u.match("<Error>")&&(i.statusCode=400),i.body=s,[2,r]}}))}))}}}(e),Rd)}}};!function(e){function t(t,n){void 0===n&&(n=!0);var r=e.call(this,t)||this;return r.tryNextLink=n,r}Rs(t,e),t.from=function(e,t){return void 0===t&&(t=!0),Object.defineProperty(e,"tryNextLink",{value:t,configurable:!1,enumerable:!1,writable:!1}),e}}(Error);var Ld="X-Amz-Date".toLowerCase(),Dd=["authorization",Ld,"date"],jd="X-Amz-Signature".toLowerCase(),zd="X-Amz-Security-Token".toLowerCase(),Ud={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Fd=/^proxy-/,qd=/^sec-/,Kd="AWS4-HMAC-SHA256-PAYLOAD",Hd={},$d=[];function Vd(e,t,n){return e+"/"+t+"/"+n+"/aws4_request"}function Gd(e,t,n){var r=new e(t);return r.update(n),r.digest()}function Wd(e,t,n){var r,i,o=e.headers,a={};try{for(var s=zs(Object.keys(o).sort()),u=s.next();!u.done;u=s.next()){var c=u.value,d=c.toLowerCase();(d in Ud||(null==t?void 0:t.has(d))||Fd.test(d)||qd.test(d))&&(!n||n&&!n.has(d))||(a[d]=o[c].trim().replace(/\s+/g," "))}}catch(e){r={error:e}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a}var Yd=function(e){return"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e)};function Qd(e,t){var n=e.headers,r=e.body;return Ds(this,void 0,void 0,(function(){var e,i,o,a,s,u,c;return js(this,(function(d){switch(d.label){case 0:try{for(e=zs(Object.keys(n)),i=e.next();!i.done;i=e.next())if("x-amz-content-sha256"===(o=i.value).toLowerCase())return[2,n[o]]}catch(e){u={error:e}}finally{try{i&&!i.done&&(c=e.return)&&c.call(e)}finally{if(u)throw u.error}}return null!=r?[3,1]:[2,"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855"];case 1:return"string"==typeof r||ArrayBuffer.isView(r)||Yd(r)?((a=new t).update(r),s=Lu,[4,a.digest()]):[3,3];case 2:return[2,s.apply(void 0,[d.sent()])];case 3:return[2,"UNSIGNED-PAYLOAD"]}}))}))}function Jd(e){var t=e.headers,n=e.query,r=Ls(e,["headers","query"]);return Bs(Bs({},r),{headers:Bs({},t),query:n?Xd(n):void 0})}function Xd(e){return Object.keys(e).reduce((function(t,n){var r,i=e[n];return Bs(Bs({},t),((r={})[n]=Array.isArray(i)?Fs([],Us(i)):i,r))}),{})}function Zd(e){var t,n;e="function"==typeof e.clone?e.clone():Jd(e);try{for(var r=zs(Object.keys(e.headers)),i=r.next();!i.done;i=r.next()){var o=i.value;Dd.indexOf(o.toLowerCase())>-1&&delete e.headers[o]}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return e}function el(e){return function(e){if("number"==typeof e)return new Date(1e3*e);if("string"==typeof e)return Number(e)?new Date(1e3*Number(e)):new Date(e);return e}(e).toISOString().replace(/\.\d{3}Z$/,"Z")}var tl=function(){function e(e){var t=e.applyChecksum,n=e.credentials,r=e.region,i=e.service,o=e.sha256,a=e.uriEscapePath,s=void 0===a||a;this.service=i,this.sha256=o,this.uriEscapePath=s,this.applyChecksum="boolean"!=typeof t||t,this.regionProvider=il(r),this.credentialProvider=ol(n)}return e.prototype.presign=function(e,t){return void 0===t&&(t={}),Ds(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p,h,v,m,g,y,w,b,S,E,k,C,x;return js(this,(function(T){switch(T.label){case 0:return n=t.signingDate,r=void 0===n?new Date:n,i=t.expiresIn,o=void 0===i?3600:i,a=t.unsignableHeaders,s=t.unhoistableHeaders,u=t.signableHeaders,c=t.signingRegion,d=t.signingService,[4,this.credentialProvider()];case 1:return l=T.sent(),null==c?[3,2]:(p=c,[3,4]);case 2:return[4,this.regionProvider()];case 3:p=T.sent(),T.label=4;case 4:return f=p,h=nl(r),v=h.longDate,m=h.shortDate,o>604800?[2,Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future")]:(g=Vd(m,f,null!=d?d:this.service),y=function(e,t){var n,r,i;void 0===t&&(t={});var o="function"==typeof e.clone?e.clone():Jd(e),a=o.headers,s=o.query,u=void 0===s?{}:s;try{for(var c=zs(Object.keys(a)),d=c.next();!d.done;d=c.next()){var l=d.value,f=l.toLowerCase();"x-amz-"!==f.substr(0,6)||(null===(i=t.unhoistableHeaders)||void 0===i?void 0:i.has(f))||(u[l]=a[l],delete a[l])}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return Bs(Bs({},e),{headers:a,query:u})}(Zd(e),{unhoistableHeaders:s}),l.sessionToken&&(y.query["X-Amz-Security-Token"]=l.sessionToken),y.query["X-Amz-Algorithm"]="AWS4-HMAC-SHA256",y.query["X-Amz-Credential"]=l.accessKeyId+"/"+g,y.query["X-Amz-Date"]=v,y.query["X-Amz-Expires"]=o.toString(10),w=Wd(y,a,u),y.query["X-Amz-SignedHeaders"]=rl(w),b=y.query,S="X-Amz-Signature",E=this.getSignature,k=[v,g,this.getSigningKey(l,f,m,d)],C=this.createCanonicalRequest,x=[y,w],[4,Qd(e,this.sha256)]);case 5:return[4,E.apply(this,k.concat([C.apply(this,x.concat([T.sent()]))]))];case 6:return b[S]=T.sent(),[2,y]}}))}))},e.prototype.sign=function(e,t){return Ds(this,void 0,void 0,(function(){return js(this,(function(n){return"string"==typeof e?[2,this.signString(e,t)]:e.headers&&e.payload?[2,this.signEvent(e,t)]:[2,this.signRequest(e,t)]}))}))},e.prototype.signEvent=function(e,t){var n=e.headers,r=e.payload,i=t.signingDate,o=void 0===i?new Date:i,a=t.priorSignature,s=t.signingRegion,u=t.signingService;return Ds(this,void 0,void 0,(function(){var e,t,i,c,d,l,f,p,h,v,m;return js(this,(function(g){switch(g.label){case 0:return null==s?[3,1]:(t=s,[3,3]);case 1:return[4,this.regionProvider()];case 2:t=g.sent(),g.label=3;case 3:return e=t,i=nl(o),c=i.shortDate,d=i.longDate,l=Vd(c,e,null!=u?u:this.service),[4,Qd({headers:{},body:r},this.sha256)];case 4:return f=g.sent(),(p=new this.sha256).update(n),v=Lu,[4,p.digest()];case 5:return h=v.apply(void 0,[g.sent()]),m=[Kd,d,l,a,h,f].join("\n"),[2,this.signString(m,{signingDate:o,signingRegion:e,signingService:u})]}}))}))},e.prototype.signString=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,i=void 0===r?new Date:r,o=n.signingRegion,a=n.signingService;return Ds(this,void 0,void 0,(function(){var t,n,r,s,u,c,d,l;return js(this,(function(f){switch(f.label){case 0:return[4,this.credentialProvider()];case 1:return t=f.sent(),null==o?[3,2]:(r=o,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=f.sent(),f.label=4;case 4:return n=r,s=nl(i).shortDate,d=(c=this.sha256).bind,[4,this.getSigningKey(t,n,s,a)];case 5:return(u=new(d.apply(c,[void 0,f.sent()]))).update(e),l=Lu,[4,u.digest()];case 6:return[2,l.apply(void 0,[f.sent()])]}}))}))},e.prototype.signRequest=function(e,t){var n=void 0===t?{}:t,r=n.signingDate,i=void 0===r?new Date:r,o=n.signableHeaders,a=n.unsignableHeaders,s=n.signingRegion,u=n.signingService;return Ds(this,void 0,void 0,(function(){var t,n,r,c,d,l,f,p,h,v,m;return js(this,(function(g){switch(g.label){case 0:return[4,this.credentialProvider()];case 1:return t=g.sent(),null==s?[3,2]:(r=s,[3,4]);case 2:return[4,this.regionProvider()];case 3:r=g.sent(),g.label=4;case 4:return n=r,c=Zd(e),d=nl(i),l=d.longDate,f=d.shortDate,p=Vd(f,n,null!=u?u:this.service),c.headers[Ld]=l,t.sessionToken&&(c.headers[zd]=t.sessionToken),[4,Qd(c,this.sha256)];case 5:return h=g.sent(),!function(e,t){var n,r;e=e.toLowerCase();try{for(var i=zs(Object.keys(t)),o=i.next();!o.done;o=i.next())if(e===o.value.toLowerCase())return!0}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1}("x-amz-content-sha256",c.headers)&&this.applyChecksum&&(c.headers["x-amz-content-sha256"]=h),v=Wd(c,a,o),[4,this.getSignature(l,p,this.getSigningKey(t,n,f,u),this.createCanonicalRequest(c,v,h))];case 6:return m=g.sent(),c.headers.authorization="AWS4-HMAC-SHA256 Credential="+t.accessKeyId+"/"+p+", SignedHeaders="+rl(v)+", Signature="+m,[2,c]}}))}))},e.prototype.createCanonicalRequest=function(e,t,n){var r=Object.keys(t).sort();return e.method+"\n"+this.getCanonicalPath(e)+"\n"+function(e){var t,n,r=e.query,i=void 0===r?{}:r,o=[],a={},s=function(e){if(e.toLowerCase()===jd)return"continue";o.push(e);var t=i[e];"string"==typeof t?a[e]=rc(e)+"="+rc(t):Array.isArray(t)&&(a[e]=t.slice(0).sort().reduce((function(t,n){return t.concat([rc(e)+"="+rc(n)])}),[]).join("&"))};try{for(var u=zs(Object.keys(i).sort()),c=u.next();!c.done;c=u.next())s(c.value)}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return o.map((function(e){return a[e]})).filter((function(e){return e})).join("&")}(e)+"\n"+r.map((function(e){return e+":"+t[e]})).join("\n")+"\n\n"+r.join(";")+"\n"+n},e.prototype.createStringToSign=function(e,t,n){return Ds(this,void 0,void 0,(function(){var r,i;return js(this,(function(o){switch(o.label){case 0:return(r=new this.sha256).update(n),[4,r.digest()];case 1:return i=o.sent(),[2,"AWS4-HMAC-SHA256\n"+e+"\n"+t+"\n"+Lu(i)]}}))}))},e.prototype.getCanonicalPath=function(e){var t=e.path;return this.uriEscapePath?"/"+encodeURIComponent(t.replace(/^\//,"")).replace(/%2F/g,"/"):t},e.prototype.getSignature=function(e,t,n,r){return Ds(this,void 0,void 0,(function(){var i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return[4,this.createStringToSign(e,t,r)];case 1:return i=c.sent(),s=(a=this.sha256).bind,[4,n];case 2:return(o=new(s.apply(a,[void 0,c.sent()]))).update(i),u=Lu,[4,o.digest()];case 3:return[2,u.apply(void 0,[c.sent()])]}}))}))},e.prototype.getSigningKey=function(e,t,n,r){return function(e,t,n,r,i){return Ds(void 0,void 0,void 0,(function(){var o,a,s,u,c,d,l,f,p;return js(this,(function(h){switch(h.label){case 0:return[4,Gd(e,t.secretAccessKey,t.accessKeyId)];case 1:if(o=h.sent(),(a=n+":"+r+":"+i+":"+Lu(o)+":"+t.sessionToken)in Hd)return[2,Hd[a]];for($d.push(a);$d.length>50;)delete Hd[$d.shift()];s="AWS4"+t.secretAccessKey,h.label=2;case 2:h.trys.push([2,7,8,9]),u=zs([n,r,i,"aws4_request"]),c=u.next(),h.label=3;case 3:return c.done?[3,6]:(d=c.value,[4,Gd(e,s,d)]);case 4:s=h.sent(),h.label=5;case 5:return c=u.next(),[3,3];case 6:return[3,9];case 7:return l=h.sent(),f={error:l},[3,9];case 8:try{c&&!c.done&&(p=u.return)&&p.call(u)}finally{if(f)throw f.error}return[7];case 9:return[2,Hd[a]=s]}}))}))}(this.sha256,e,n,t,r||this.service)},e}(),nl=function(e){var t=el(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.substr(0,8)}},rl=function(e){return Object.keys(e).sort().join(";")},il=function(e){if("string"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},ol=function(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},al=function(e){if("object"==typeof e){var t=Promise.resolve(e);return function(){return t}}return e},sl=function(e){return"function"==typeof e?function(e,t,n){var r,i;if(void 0===t)return function(){return i||(r=e(),i=!0),r};var o=!1;return function(){return Ds(void 0,void 0,void 0,(function(){var a;return js(this,(function(s){switch(s.label){case 0:return i||(r=e(),i=!0),o?[2,r]:[4,r];case 1:return a=s.sent(),n&&!n(a)?(o=!0,[2,a]):t(a)?[2,r=e()]:[2,a]}}))}))}}(e,(function(e){return void 0!==e.expiration&&e.expiration.getTime()-Date.now()<3e5}),(function(e){return void 0!==e.expiration})):al(e)},ul=function(e){return new Date(Date.now()+e)};function cl(e){return function(t,n){return function(r){return Ds(this,void 0,void 0,(function(){var i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:return nc.isInstance(r.request)?"function"!=typeof e.signer?[3,2]:[4,e.signer()]:[2,t(r)];case 1:return o=p.sent(),[3,3];case 2:o=e.signer,p.label=3;case 3:return i=o,s=t,u=[Bs({},r)],f={},[4,i.sign(r.request,{signingDate:new Date(Date.now()+e.systemClockOffset),signingRegion:n.signing_region,signingService:n.signing_service})];case 4:return[4,s.apply(void 0,[Bs.apply(void 0,u.concat([(f.request=p.sent(),f)]))])];case 5:return a=p.sent(),c=a.response.headers,(d=c&&(c.date||c.Date))&&(l=Date.parse(d),h=l,v=e.systemClockOffset,Math.abs(ul(v).getTime()-h)>=3e5&&(e.systemClockOffset=l-Date.now())),[2,a]}var h,v}))}))}}}var dl={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0};var ll=/[^\!\#\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,fl=function(e){var t=Us(e,2),n=t[0],r=t[1],i=n.indexOf("/"),o=n.substring(0,i),a=n.substring(i+1);return"api"===o&&(a=a.toLowerCase()),[o,a,r].filter((function(e){return e&&e.length>0})).map((function(e){return null==e?void 0:e.replace(ll,"_")})).join("/")},pl={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},hl=function(e){return{applyToStack:function(t){var n;t.add((n=e,function(e,t){return function(r){return Ds(void 0,void 0,void 0,(function(){var i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:return i=r.request,nc.isInstance(i)?(o=i.headers,a=(null===(l=null==t?void 0:t.userAgent)||void 0===l?void 0:l.map(fl))||[],[4,n.defaultUserAgentProvider()]):[2,e(r)];case 1:return s=p.sent().map(fl),u=(null===(f=null==n?void 0:n.customUserAgent)||void 0===f?void 0:f.map(fl))||[],c=Fs(Fs(Fs([],Us(s)),Us(a)),Us(u)).join(" "),d=Fs(Fs([],Us(s.filter((function(e){return e.startsWith("aws-sdk-")})))),Us(u)).join(" "),"browser"!==n.runtime?(d&&(o["x-amz-user-agent"]=o["x-amz-user-agent"]?o["user-agent"]+" "+d:d),o["user-agent"]=c):o["x-amz-user-agent"]=c,[2,e(Bs(Bs({},r),{request:i}))]}}))}))}}),pl)}}},vl=function(){var e=[],t=[],n=new Set,r=function(n){return e.forEach((function(e){n.add(e.middleware,Bs({},e))})),t.forEach((function(e){n.addRelativeTo(e.middleware,Bs({},e))})),n},i=function(e){var t=[];return e.before.forEach((function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,Fs([],Us(i(e))))})),t.push(e),e.after.reverse().forEach((function(e){0===e.before.length&&0===e.after.length?t.push(e):t.push.apply(t,Fs([],Us(i(e))))})),t},o=function(){var n,r=[],o=[],a={};return e.forEach((function(e){var t=Bs(Bs({},e),{before:[],after:[]});t.name&&(a[t.name]=t),r.push(t)})),t.forEach((function(e){var t=Bs(Bs({},e),{before:[],after:[]});t.name&&(a[t.name]=t),o.push(t)})),o.forEach((function(e){if(e.toMiddleware){var t=a[e.toMiddleware];if(void 0===t)throw new Error(e.toMiddleware+" is not found when adding "+(e.name||"anonymous")+" middleware "+e.relation+" "+e.toMiddleware);"after"===e.relation&&t.after.push(e),"before"===e.relation&&t.before.push(e)}})),(n=r,n.sort((function(e,t){return ml[t.step]-ml[e.step]||gl[t.priority||"normal"]-gl[e.priority||"normal"]}))).map(i).reduce((function(e,t){return e.push.apply(e,Fs([],Us(t))),e}),[]).map((function(e){return e.middleware}))},a={add:function(t,r){void 0===r&&(r={});var i=r.name,o=r.override,a=Bs({step:"initialize",priority:"normal",middleware:t},r);if(i){if(n.has(i)){if(!o)throw new Error("Duplicate middleware name '"+i+"'");var s=e.findIndex((function(e){return e.name===i})),u=e[s];if(u.step!==a.step||u.priority!==a.priority)throw new Error('"'+i+'" middleware with '+u.priority+" priority in "+u.step+" step cannot be overridden by same-name middleware with "+a.priority+" priority in "+a.step+" step.");e.splice(s,1)}n.add(i)}e.push(a)},addRelativeTo:function(e,r){var i=r.name,o=r.override,a=Bs({middleware:e},r);if(i){if(n.has(i)){if(!o)throw new Error("Duplicate middleware name '"+i+"'");var s=t.findIndex((function(e){return e.name===i})),u=t[s];if(u.toMiddleware!==a.toMiddleware||u.relation!==a.relation)throw new Error('"'+i+'" middleware '+u.relation+' "'+u.toMiddleware+'" middleware cannot be overridden by same-name middleware '+a.relation+' "'+a.toMiddleware+'" middleware.');t.splice(s,1)}n.add(i)}t.push(a)},clone:function(){return r(vl())},use:function(e){e.applyToStack(a)},remove:function(r){return"string"==typeof r?function(r){var i=!1,o=function(e){return!e.name||e.name!==r||(i=!0,n.delete(r),!1)};return e=e.filter(o),t=t.filter(o),i}(r):function(r){var i=!1,o=function(e){return e.middleware!==r||(i=!0,e.name&&n.delete(e.name),!1)};return e=e.filter(o),t=t.filter(o),i}(r)},removeByTag:function(r){var i=!1,o=function(e){var t=e.tags,o=e.name;return!t||!t.includes(r)||(o&&n.delete(o),i=!0,!1)};return e=e.filter(o),t=t.filter(o),i},concat:function(e){var t=r(vl());return t.use(e),t},applyToStack:r,resolve:function(e,t){var n,r;try{for(var i=zs(o().reverse()),a=i.next();!a.done;a=i.next()){e=(0,a.value)(e,t)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return e}};return a},ml={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},gl={high:3,normal:2,low:1},yl=function(){function e(e){this.middlewareStack=vl(),this.config=e}return e.prototype.send=function(e,t,n){var r="function"!=typeof t?t:void 0,i="function"==typeof t?t:n,o=e.resolveMiddleware(this.middlewareStack,this.config,r);if(!i)return o(e).then((function(e){return e.output}));o(e).then((function(e){return i(null,e.output)}),(function(e){return i(e)})).catch((function(){}))},e.prototype.destroy=function(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()},e}(),wl=function(){this.middlewareStack=vl()};function bl(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16)}))}var Sl=function(e){return Array.isArray(e)?e:[e]},El=function(e){for(var t in e)e.hasOwnProperty(t)&&void 0!==e[t]["#text"]?e[t]=e[t]["#text"]:"object"==typeof e[t]&&null!==e[t]&&(e[t]=El(e[t]));return e},kl=function(){var e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,Fs([null],Us(arguments))),n=new t;return Object.setPrototypeOf(n,e.prototype),n};kl.prototype=Object.create(String.prototype,{constructor:{value:kl,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf(kl,String),function(e){function t(){return null!==e&&e.apply(this,arguments)||this}Rs(t,e),t.prototype.deserializeJSON=function(){return JSON.parse(e.prototype.toString.call(this))},t.prototype.toJSON=function(){return e.prototype.toString.call(this)},t.fromObject=function(e){return e instanceof t?e:new t(e instanceof String||"string"==typeof e?e:JSON.stringify(e))}}(kl);var Cl=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],xl=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Tl(e){var t=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDay(),i=e.getUTCDate(),o=e.getUTCHours(),a=e.getUTCMinutes(),s=e.getUTCSeconds();return Cl[r]+", "+(i<10?"0"+i:""+i)+" "+xl[n]+" "+t+" "+(o<10?"0"+o:""+o)+":"+(a<10?"0"+a:""+a)+":"+(s<10?"0"+s:""+s)+" GMT"}var Nl,Ol,_l,Pl,Al,Il,Ml,Rl,Bl,Ll,Dl,jl,zl,Ul,Fl,ql,Kl,Hl,$l,Vl,Gl,Wl,Yl,Ql,Jl,Xl,Zl,ef,tf,nf,rf,of,af,sf,uf,cf,df,lf,ff,pf,hf,vf,mf,gf,yf,wf,bf,Sf,Ef,kf,Cf,xf,Tf,Nf,Of,_f,Pf,Af,If,Mf,Rf,Bf,Lf,Df,jf,zf,Uf,Ff,qf,Kf,Hf,$f,Vf,Gf,Wf,Yf,Qf,Jf,Xf,Zf,ep,tp,np,rp,ip,op,ap,sp,up,cp,dp,lp,fp,pp,hp,vp,mp,gp,yp,wp,bp,Sp,Ep,kp,Cp,xp,Tp,Np,Op,_p,Pp,Ap,Ip,Mp,Rp,Bp,Lp,Dp,jp,zp,Up,Fp,qp,Kp,Hp,$p,Vp,Gp,Wp,Yp,Qp,Jp,Xp,Zp,eh,th,nh,rh,ih,oh,ah,sh,uh,ch,dh,lh,fh,ph,hh,vh,mh,gh,yh,wh,bh,Sh,Eh,kh,Ch,xh,Th,Nh,Oh,_h,Ph,Ah,Ih,Mh,Rh,Bh,Lh,Dh,jh,zh,Uh,Fh,qh,Kh,Hh,$h,Vh,Gh,Wh,Yh,Qh,Jh,Xh,Zh,ev,tv,nv,rv,iv,ov,av,sv,uv,cv,dv,lv,fv,pv,hv,vv,mv,gv,yv,wv,bv,Sv,Ev,kv,Cv,xv,Tv,Nv,Ov,_v,Pv,Av,Iv,Mv,Rv,Bv,Lv,Dv,jv,zv,Uv,Fv,qv,Kv,Hv,$v,Vv,Gv,Wv,Yv,Qv,Jv,Xv,Zv,em,tm,nm,rm,im,om,am,sm,um,cm="***SensitiveInformation***",dm=function(e){function t(t){var n,r,i,o=this,a=function(e){var t;return Bs(Bs({},e),{tls:null===(t=e.tls)||void 0===t||t,endpoint:e.endpoint?Xc(e):function(){return Zc(e)},isCustomEndpoint:!!e.endpoint})}(function(e){if(!e.region)throw new Error("Region is missing");return Bs(Bs({},e),{region:ed(e.region)})}(Bs(Bs({},Jc),t))),s=function(e){return Bs(Bs({},e),{eventStreamMarshaller:e.eventStreamSerdeProvider(e)})}(function(e){return Bs(Bs({},e),{customUserAgent:"string"==typeof e.customUserAgent?[[e.customUserAgent]]:e.customUserAgent})}(function(e){var t=e.bucketEndpoint,n=void 0!==t&&t,r=e.forcePathStyle,i=void 0!==r&&r,o=e.useAccelerateEndpoint,a=void 0!==o&&o,s=e.useDualstackEndpoint,u=void 0!==s&&s,c=e.useArnRegion,d=void 0!==c&&c;return Bs(Bs({},e),{bucketEndpoint:n,forcePathStyle:i,useAccelerateEndpoint:a,useDualstackEndpoint:u,useArnRegion:"function"==typeof d?d:function(){return Promise.resolve(d)}})}(function(e){var t,n=e.credentials?sl(e.credentials):e.credentialDefaultProvider(e),r=e.signingEscapePath,i=void 0===r||r,o=e.systemClockOffset,a=void 0===o?e.systemClockOffset||0:o,s=e.sha256;return t=e.signer?al(e.signer):function(){return al(e.region)().then((function(t){return Ds(void 0,void 0,void 0,(function(){return js(this,(function(n){switch(n.label){case 0:return[4,e.regionInfoProvider(t)];case 1:return[2,[n.sent()||{},t]]}}))}))})).then((function(t){var r=Us(t,2),o=r[0],a=r[1],u=o.signingRegion,c=o.signingService;return e.signingRegion=e.signingRegion||u||a,e.signingName=e.signingName||c||e.serviceId,new tl({credentials:n,region:e.signingRegion,service:e.signingName,sha256:s,uriEscapePath:i})}))},Bs(Bs({},e),{systemClockOffset:a,signingEscapePath:i,credentials:n,signer:t})}((r=qc((n=a).maxAttempts),Bs(Bs({},n),{maxAttempts:r,retryStrategy:n.retryStrategy||new Uc(r)}))))));return(o=e.call(this,s)||this).config=s,o.middlewareStack.use(xc(o.config)),o.middlewareStack.use(Sd(o.config)),o.middlewareStack.use(xd(o.config)),o.middlewareStack.use(Nd(o.config)),o.middlewareStack.use((i=o.config,{applyToStack:function(e){e.addRelativeTo(cl(i),dl)}})),o.middlewareStack.use(_d(o.config)),o.middlewareStack.use(Ad(o.config)),o.middlewareStack.use(kd(o.config)),o.middlewareStack.use(hl(o.config)),o}return Rs(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this)},t}(yl);!function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Nl||(Nl={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Ol||(Ol={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(_l||(_l={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Pl||(Pl={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Al||(Al={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Il||(Il={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Ml||(Ml={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Rl||(Rl={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Bl||(Bl={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Ll||(Ll={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:cm})}}(Dl||(Dl={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(jl||(jl={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(zl||(zl={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Ul||(Ul={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Fl||(Fl={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs(Bs({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:cm}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:cm})}}(ql||(ql={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs(Bs(Bs(Bs({},e),e.SSECustomerKey&&{SSECustomerKey:cm}),e.SSEKMSKeyId&&{SSEKMSKeyId:cm}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:cm}),e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:cm})}}(Kl||(Kl={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Hl||(Hl={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}($l||($l={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Vl||(Vl={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Gl||(Gl={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Wl||(Wl={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Yl||(Yl={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs(Bs({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:cm}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:cm})}}(Ql||(Ql={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs(Bs(Bs({},e),e.SSECustomerKey&&{SSECustomerKey:cm}),e.SSEKMSKeyId&&{SSEKMSKeyId:cm}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:cm})}}(Jl||(Jl={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Xl||(Xl={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Zl||(Zl={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(ef||(ef={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(tf||(tf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(nf||(nf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(rf||(rf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(of||(of={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(af||(af={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(sf||(sf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(uf||(uf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(cf||(cf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(df||(df={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(lf||(lf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(ff||(ff={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(pf||(pf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(hf||(hf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(vf||(vf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(mf||(mf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(gf||(gf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(yf||(yf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(wf||(wf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(bf||(bf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Sf||(Sf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Ef||(Ef={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(kf||(kf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Cf||(Cf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(xf||(xf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Tf||(Tf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Nf||(Nf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Of||(Of={})),function(e){e.visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},e.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:Nf.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:Of.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0}}(_f||(_f={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Pf||(Pf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Af||(Af={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(If||(If={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Mf||(Mf={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.Filter&&{Filter:_f.filterSensitiveLog(e.Filter)})}}(Rf||(Rf={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.AnalyticsConfiguration&&{AnalyticsConfiguration:Rf.filterSensitiveLog(e.AnalyticsConfiguration)})}}(Bf||(Bf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Lf||(Lf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Df||(Df={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(jf||(jf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(zf||(zf={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.KMSMasterKeyID&&{KMSMasterKeyID:cm})}}(Uf||(Uf={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.ApplyServerSideEncryptionByDefault&&{ApplyServerSideEncryptionByDefault:Uf.filterSensitiveLog(e.ApplyServerSideEncryptionByDefault)})}}(Ff||(Ff={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.Rules&&{Rules:e.Rules.map((function(e){return Ff.filterSensitiveLog(e)}))})}}(qf||(qf={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:qf.filterSensitiveLog(e.ServerSideEncryptionConfiguration)})}}(Kf||(Kf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Hf||(Hf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}($f||($f={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Vf||(Vf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Gf||(Gf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Wf||(Wf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Yf||(Yf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Qf||(Qf={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.KeyId&&{KeyId:cm})}}(Jf||(Jf={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Xf||(Xf={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.SSEKMS&&{SSEKMS:Jf.filterSensitiveLog(e.SSEKMS)})}}(Zf||(Zf={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.Encryption&&{Encryption:Zf.filterSensitiveLog(e.Encryption)})}}(ep||(ep={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.S3BucketDestination&&{S3BucketDestination:ep.filterSensitiveLog(e.S3BucketDestination)})}}(tp||(tp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(np||(np={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(rp||(rp={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.Destination&&{Destination:tp.filterSensitiveLog(e.Destination)})}}(ip||(ip={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.InventoryConfiguration&&{InventoryConfiguration:ip.filterSensitiveLog(e.InventoryConfiguration)})}}(op||(op={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(ap||(ap={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(sp||(sp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(up||(up={})),function(e){e.visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},e.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:Nf.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:up.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0}}(cp||(cp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(dp||(dp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(lp||(lp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(fp||(fp={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.Filter&&{Filter:cp.filterSensitiveLog(e.Filter)})}}(pp||(pp={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.Rules&&{Rules:e.Rules.map((function(e){return pp.filterSensitiveLog(e)}))})}}(hp||(hp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(vp||(vp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(mp||(mp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(gp||(gp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(yp||(yp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(wp||(wp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(bp||(bp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Sp||(Sp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Ep||(Ep={})),function(e){e.visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},e.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:Nf.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:Ep.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0}}(kp||(kp={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.Filter&&{Filter:kp.filterSensitiveLog(e.Filter)})}}(Cp||(Cp={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.MetricsConfiguration&&{MetricsConfiguration:Cp.filterSensitiveLog(e.MetricsConfiguration)})}}(xp||(xp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Tp||(Tp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Np||(Np={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Op||(Op={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(_p||(_p={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Pp||(Pp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Ap||(Ap={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Ip||(Ip={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Mp||(Mp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Rp||(Rp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Bp||(Bp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Lp||(Lp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Dp||(Dp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(jp||(jp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(zp||(zp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Up||(Up={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Fp||(Fp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(qp||(qp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Kp||(Kp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Hp||(Hp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}($p||($p={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Vp||(Vp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Gp||(Gp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Wp||(Wp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Yp||(Yp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Qp||(Qp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Jp||(Jp={})),function(e){e.visit=function(e,t){return void 0!==e.Prefix?t.Prefix(e.Prefix):void 0!==e.Tag?t.Tag(e.Tag):void 0!==e.And?t.And(e.And):t._(e.$unknown[0],e.$unknown[1])},e.filterSensitiveLog=function(e){var t;return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:Nf.filterSensitiveLog(e.Tag)}:void 0!==e.And?{And:Jp.filterSensitiveLog(e.And)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0}}(Xp||(Xp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Zp||(Zp={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(eh||(eh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(th||(th={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.Filter&&{Filter:Xp.filterSensitiveLog(e.Filter)})}}(nh||(nh={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.Rules&&{Rules:e.Rules.map((function(e){return nh.filterSensitiveLog(e)}))})}}(rh||(rh={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.ReplicationConfiguration&&{ReplicationConfiguration:rh.filterSensitiveLog(e.ReplicationConfiguration)})}}(ih||(ih={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(oh||(oh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(ah||(ah={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(sh||(sh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(uh||(uh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(ch||(ch={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(dh||(dh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(lh||(lh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(fh||(fh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(ph||(ph={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(hh||(hh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(vh||(vh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(mh||(mh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(gh||(gh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(yh||(yh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(wh||(wh={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:cm})}}(bh||(bh={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.SSECustomerKey&&{SSECustomerKey:cm})}}(Sh||(Sh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Eh||(Eh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(kh||(kh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Ch||(Ch={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(xh||(xh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Th||(Th={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Nh||(Nh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Oh||(Oh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(_h||(_h={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Ph||(Ph={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Ah||(Ah={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Ih||(Ih={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Mh||(Mh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Rh||(Rh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Bh||(Bh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Lh||(Lh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Dh||(Dh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(jh||(jh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(zh||(zh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Uh||(Uh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Fh||(Fh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(qh||(qh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Kh||(Kh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Hh||(Hh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}($h||($h={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:cm})}}(Vh||(Vh={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.SSECustomerKey&&{SSECustomerKey:cm})}}(Gh||(Gh={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.AnalyticsConfigurationList&&{AnalyticsConfigurationList:e.AnalyticsConfigurationList.map((function(e){return Rf.filterSensitiveLog(e)}))})}}(Wh||(Wh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Yh||(Yh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Qh||(Qh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Jh||(Jh={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.InventoryConfigurationList&&{InventoryConfigurationList:e.InventoryConfigurationList.map((function(e){return ip.filterSensitiveLog(e)}))})}}(Xh||(Xh={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Zh||(Zh={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.MetricsConfigurationList&&{MetricsConfigurationList:e.MetricsConfigurationList.map((function(e){return Cp.filterSensitiveLog(e)}))})}}(ev||(ev={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(tv||(tv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(nv||(nv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(rv||(rv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(iv||(iv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(ov||(ov={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(av||(av={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(sv||(sv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(uv||(uv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(cv||(cv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(dv||(dv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(lv||(lv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(fv||(fv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(pv||(pv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(hv||(hv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(vv||(vv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(mv||(mv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(gv||(gv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(yv||(yv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(wv||(wv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(bv||(bv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Sv||(Sv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Ev||(Ev={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(kv||(kv={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.AnalyticsConfiguration&&{AnalyticsConfiguration:Rf.filterSensitiveLog(e.AnalyticsConfiguration)})}}(Cv||(Cv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(xv||(xv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Tv||(Tv={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.ServerSideEncryptionConfiguration&&{ServerSideEncryptionConfiguration:qf.filterSensitiveLog(e.ServerSideEncryptionConfiguration)})}}(Nv||(Nv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Ov||(Ov={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.InventoryConfiguration&&{InventoryConfiguration:ip.filterSensitiveLog(e.InventoryConfiguration)})}}(_v||(_v={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.Rules&&{Rules:e.Rules.map((function(e){return pp.filterSensitiveLog(e)}))})}}(Pv||(Pv={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.LifecycleConfiguration&&{LifecycleConfiguration:Pv.filterSensitiveLog(e.LifecycleConfiguration)})}}(Av||(Av={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Iv||(Iv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Mv||(Mv={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.MetricsConfiguration&&{MetricsConfiguration:Cp.filterSensitiveLog(e.MetricsConfiguration)})}}(Rv||(Rv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Bv||(Bv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Lv||(Lv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Dv||(Dv={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.ReplicationConfiguration&&{ReplicationConfiguration:rh.filterSensitiveLog(e.ReplicationConfiguration)})}}(jv||(jv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(zv||(zv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Uv||(Uv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Fv||(Fv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(qv||(qv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Kv||(Kv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Hv||(Hv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}($v||($v={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Vv||(Vv={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs(Bs({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:cm}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:cm})}}(Gv||(Gv={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs(Bs(Bs({},e),e.SSECustomerKey&&{SSECustomerKey:cm}),e.SSEKMSKeyId&&{SSEKMSKeyId:cm}),e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:cm})}}(Wv||(Wv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Yv||(Yv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Qv||(Qv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Jv||(Jv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Xv||(Xv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Zv||(Zv={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(em||(em={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(tm||(tm={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(nm||(nm={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(rm||(rm={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(im||(im={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(om||(om={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(am||(am={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(sm||(sm={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(um||(um={}));var lm=function(){function e(e,t){void 0===t&&(t=[]),this.name=e,this.children=t,this.attributes={}}return e.prototype.withName=function(e){return this.name=e,this},e.prototype.addAttribute=function(e,t){return this.attributes[e]=t,this},e.prototype.addChildNode=function(e){return this.children.push(e),this},e.prototype.removeAttribute=function(e){return delete this.attributes[e],this},e.prototype.toString=function(){var e,t,n=Boolean(this.children.length),r="<"+this.name,i=this.attributes;try{for(var o=zs(Object.keys(i)),a=o.next();!a.done;a=o.next()){var s=a.value,u=i[s];null!=u&&(r+=" "+s+'="'+((""+u).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+'"'))}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r+(n?">"+this.children.map((function(e){return e.toString()})).join("")+"</"+this.name+">":"/>")},e}();var fm=function(){function e(e){this.value=e}return e.prototype.toString=function(){return(""+this.value).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")},e}(),pm=Vr((function(e,t){const n=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r="["+n+"][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",i=new RegExp("^"+r+"$");t.isExist=function(e){return void 0!==e},t.isEmptyObject=function(e){return 0===Object.keys(e).length},t.merge=function(e,t,n){if(t){const r=Object.keys(t),i=r.length;for(let o=0;o<i;o++)e[r[o]]="strict"===n?[t[r[o]]]:t[r[o]]}},t.getValue=function(e){return t.isExist(e)?e:""},t.buildOptions=function(e,t,n){var r={};if(!e)return t;for(let i=0;i<n.length;i++)void 0!==e[n[i]]?r[n[i]]=e[n[i]]:r[n[i]]=t[n[i]];return r},t.isTagNameInArrayMode=function(e,t,n){return!1!==t&&(t instanceof RegExp?t.test(e):"function"==typeof t?!!t(e,n):"strict"===t)},t.isName=function(e){const t=i.exec(e);return!(null==t)},t.getAllMatches=function(e,t){const n=[];let r=t.exec(e);for(;r;){const i=[],o=r.length;for(let e=0;e<o;e++)i.push(r[e]);n.push(i),r=t.exec(e)}return n},t.nameRegexp=r}));const hm=function(e,t,n){const r={};if((!e.child||pm.isEmptyObject(e.child))&&(!e.attrsMap||pm.isEmptyObject(e.attrsMap)))return pm.isExist(e.val)?e.val:"";if(pm.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)){const i=pm.isTagNameInArrayMode(e.tagname,t.arrayMode,n);r[t.textNodeName]=i?[e.val]:e.val}pm.merge(r,e.attrsMap,t.arrayMode);const i=Object.keys(e.child);for(let o=0;o<i.length;o++){const a=i[o];if(e.child[a]&&e.child[a].length>1){r[a]=[];for(let n in e.child[a])e.child[a].hasOwnProperty(n)&&r[a].push(hm(e.child[a][n],t,a))}else{const i=hm(e.child[a][0],t,a),o=!0===t.arrayMode&&"object"==typeof i||pm.isTagNameInArrayMode(a,t.arrayMode,n);r[a]=o?[i]:i}}return r};var vm={convertToJson:hm},mm=function(e,t,n){this.tagname=e,this.parent=t,this.child={},this.attrsMap={},this.val=n,this.addChild=function(e){Array.isArray(this.child[e.tagname])?this.child[e.tagname].push(e):this.child[e.tagname]=[e]}};const gm=pm.buildOptions;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,pm.nameRegexp),!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const ym={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(e,t){return e},attrValueProcessor:function(e,t){return e},stopNodes:[]};var wm=ym;const bm=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];var Sm=bm;function Em(e,t,n){return t&&(n.trimValues&&(t=t.trim()),t=Cm(t=n.tagValueProcessor(t,e),n.parseNodeValue,n.parseTrueNumberOnly)),t}function km(e,t){if(t.ignoreNameSpace){const t=e.split(":"),n="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=n+t[1])}return e}function Cm(e,t,n){if(t&&"string"==typeof e){let t;return""===e.trim()||isNaN(e)?t="true"===e||"false"!==e&&e:(-1!==e.indexOf("0x")?t=Number.parseInt(e,16):-1!==e.indexOf(".")?(t=Number.parseFloat(e),e=e.replace(/\.?0+$/,"")):t=Number.parseInt(e,10),n&&(t=String(t)===e?t:e)),t}return pm.isExist(e)?e:""}const xm=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function Tm(e,t){if(!t.ignoreAttributes&&"string"==typeof e){e=e.replace(/\r?\n/g," ");const n=pm.getAllMatches(e,xm),r=n.length,i={};for(let e=0;e<r;e++){const r=km(n[e][1],t);r.length&&(void 0!==n[e][4]?(t.trimValues&&(n[e][4]=n[e][4].trim()),n[e][4]=t.attrValueProcessor(n[e][4],r),i[t.attributeNamePrefix+r]=Cm(n[e][4],t.parseAttributeValue,t.parseTrueNumberOnly)):t.allowBooleanAttributes&&(i[t.attributeNamePrefix+r]=!0))}if(!Object.keys(i).length)return;if(t.attrNodeName){const e={};return e[t.attrNodeName]=i,e}return i}}function Nm(e,t){let n,r="";for(let i=t;i<e.length;i++){let t=e[i];if(n)t===n&&(n="");else if('"'===t||"'"===t)n=t;else{if(">"===t)return{data:r,index:i};"\t"===t&&(t=" ")}r+=t}}function Om(e,t,n,r){const i=e.indexOf(t,n);if(-1===i)throw new Error(r);return i+t.length-1}var _m={defaultOptions:wm,props:Sm,getTraversalObj:function(e,t){e=e.replace(/\r\n?/g,"\n"),t=gm(t,ym,bm);const n=new mm("!xml");let r=n,i="";for(let n=0;n<e.length;n++){if("<"===e[n])if("/"===e[n+1]){const o=Om(e,">",n,"Closing Tag is not closed.");let a=e.substring(n+2,o).trim();if(t.ignoreNameSpace){const e=a.indexOf(":");-1!==e&&(a=a.substr(e+1))}r&&(r.val?r.val=pm.getValue(r.val)+""+Em(a,i,t):r.val=Em(a,i,t)),t.stopNodes.length&&t.stopNodes.includes(r.tagname)&&(r.child=[],null==r.attrsMap&&(r.attrsMap={}),r.val=e.substr(r.startIndex+1,n-r.startIndex-1)),r=r.parent,i="",n=o}else if("?"===e[n+1])n=Om(e,"?>",n,"Pi Tag is not closed.");else if("!--"===e.substr(n+1,3))n=Om(e,"--\x3e",n,"Comment is not closed.");else if("!D"===e.substr(n+1,2)){const t=Om(e,">",n,"DOCTYPE is not closed.");n=e.substring(n,t).indexOf("[")>=0?e.indexOf("]>",n)+1:t}else if("!["===e.substr(n+1,2)){const o=Om(e,"]]>",n,"CDATA is not closed.")-2,a=e.substring(n+9,o);if(i&&(r.val=pm.getValue(r.val)+""+Em(r.tagname,i,t),i=""),t.cdataTagName){const e=new mm(t.cdataTagName,r,a);r.addChild(e),r.val=pm.getValue(r.val)+t.cdataPositionChar,a&&(e.val=a)}else r.val=(r.val||"")+(a||"");n=o+2}else{const o=Nm(e,n+1);let a=o.data;const s=o.index,u=a.indexOf(" ");let c=a,d=!0;if(-1!==u&&(c=a.substr(0,u).replace(/\s\s*$/,""),a=a.substr(u+1)),t.ignoreNameSpace){const e=c.indexOf(":");-1!==e&&(c=c.substr(e+1),d=c!==o.data.substr(e+1))}if(r&&i&&"!xml"!==r.tagname&&(r.val=pm.getValue(r.val)+""+Em(r.tagname,i,t)),a.length>0&&a.lastIndexOf("/")===a.length-1){"/"===c[c.length-1]?(c=c.substr(0,c.length-1),a=c):a=a.substr(0,a.length-1);const e=new mm(c,r,"");c!==a&&(e.attrsMap=Tm(a,t)),r.addChild(e)}else{const e=new mm(c,r);t.stopNodes.length&&t.stopNodes.includes(e.tagname)&&(e.startIndex=s),c!==a&&d&&(e.attrsMap=Tm(a,t)),r.addChild(e),r=e}i="",n=s}else i+=e[n]}return n}};const Pm={allowBooleanAttributes:!1},Am=["allowBooleanAttributes"];function Im(e,t){for(var n=t;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{var r=e.substr(n,t-n);if(t>5&&"xml"===r)return jm("InvalidXml","XML declaration allowed only at the start of the document.",Um(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function Mm(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let n=1;for(t+=8;t<e.length;t++)if("<"===e[t])n++;else if(">"===e[t]&&(n--,0===n))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}function Rm(e,t){let n="",r="",i=!1;for(;t<e.length;t++){if('"'===e[t]||"'"===e[t])if(""===r)r=e[t];else{if(r!==e[t])continue;r=""}else if(">"===e[t]&&""===r){i=!0;break}n+=e[t]}return""===r&&{value:n,index:t,tagClosed:i}}const Bm=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function Lm(e,t){const n=pm.getAllMatches(e,Bm),r={};for(let i=0;i<n.length;i++){if(0===n[i][1].length)return jm("InvalidAttr","Attribute '"+n[i][2]+"' has no space in starting.",Fm(e,n[i][0]));if(void 0===n[i][3]&&!t.allowBooleanAttributes)return jm("InvalidAttr","boolean attribute '"+n[i][2]+"' is not allowed.",Fm(e,n[i][0]));const o=n[i][2];if(!zm(o))return jm("InvalidAttr","Attribute '"+o+"' is an invalid name.",Fm(e,n[i][0]));if(r.hasOwnProperty(o))return jm("InvalidAttr","Attribute '"+o+"' is repeated.",Fm(e,n[i][0]));r[o]=1}return!0}function Dm(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let n=/\d/;for("x"===e[t]&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(n))break}return-1}(e,++t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(";"===e[t])break;return-1}return t}function jm(e,t,n){return{err:{code:e,msg:t,line:n}}}function zm(e){return pm.isName(e)}function Um(e,t){return e.substring(0,t).split(/\r?\n/).length}function Fm(e,t){return e.indexOf(t)+t.length}var qm=function(e,t){t=pm.buildOptions(t,Pm,Am);const n=[];let r=!1,i=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let a=0;a<e.length;a++)if("<"===e[a]&&"?"===e[a+1]){if(a+=2,a=Im(e,a),a.err)return a}else{if("<"!==e[a]){if(" "===e[a]||"\t"===e[a]||"\n"===e[a]||"\r"===e[a])continue;return jm("InvalidChar","char '"+e[a]+"' is not expected.",Um(e,a))}if(a++,"!"===e[a]){a=Mm(e,a);continue}{let s=!1;"/"===e[a]&&(s=!0,a++);let u="";for(;a<e.length&&">"!==e[a]&&" "!==e[a]&&"\t"!==e[a]&&"\n"!==e[a]&&"\r"!==e[a];a++)u+=e[a];if(u=u.trim(),"/"===u[u.length-1]&&(u=u.substring(0,u.length-1),a--),o=u,!pm.isName(o)){let t;return t=0===u.trim().length?"There is an unnecessary space between tag name and backward slash '</ ..'.":"Tag '"+u+"' is an invalid name.",jm("InvalidTag",t,Um(e,a))}const c=Rm(e,a);if(!1===c)return jm("InvalidAttr","Attributes for '"+u+"' have open quote.",Um(e,a));let d=c.value;if(a=c.index,"/"===d[d.length-1]){d=d.substring(0,d.length-1);const n=Lm(d,t);if(!0!==n)return jm(n.err.code,n.err.msg,Um(e,a-d.length+n.err.line));r=!0}else if(s){if(!c.tagClosed)return jm("InvalidTag","Closing tag '"+u+"' doesn't have proper closing.",Um(e,a));if(d.trim().length>0)return jm("InvalidTag","Closing tag '"+u+"' can't have attributes or invalid starting.",Um(e,a));{const t=n.pop();if(u!==t)return jm("InvalidTag","Closing tag '"+t+"' is expected inplace of '"+u+"'.",Um(e,a));0==n.length&&(i=!0)}}else{const o=Lm(d,t);if(!0!==o)return jm(o.err.code,o.err.msg,Um(e,a-d.length+o.err.line));if(!0===i)return jm("InvalidXml","Multiple possible root nodes found.",Um(e,a));n.push(u),r=!0}for(a++;a<e.length;a++)if("<"===e[a]){if("!"===e[a+1]){a++,a=Mm(e,a);continue}if("?"!==e[a+1])break;if(a=Im(e,++a),a.err)return a}else if("&"===e[a]){const t=Dm(e,a);if(-1==t)return jm("InvalidChar","char '&' is not expected.",Um(e,a));a=t}"<"===e[a]&&a--}}var o;return r?!(n.length>0)||jm("InvalidXml","Invalid '"+JSON.stringify(n,null,4).replace(/\r?\n/g,"")+"' found.",1):jm("InvalidXml","Start tag expected.",1)};const Km=function(e){return String.fromCharCode(e)},Hm={nilChar:Km(176),missingChar:Km(201),nilPremitive:Km(175),missingPremitive:Km(200),emptyChar:Km(178),emptyValue:Km(177),boundryChar:Km(179),objStart:Km(198),arrStart:Km(204),arrayEnd:Km(185)},$m=[Hm.nilChar,Hm.nilPremitive,Hm.missingChar,Hm.missingPremitive,Hm.boundryChar,Hm.emptyChar,Hm.emptyValue,Hm.arrayEnd,Hm.objStart,Hm.arrStart],Vm=function(e,t,n){if("string"==typeof t)return e&&e[0]&&void 0!==e[0].val?Gm(e[0].val):Gm(e);{const i=void 0===(r=e)?Hm.missingChar:null===r?Hm.nilChar:!(r.child&&0===Object.keys(r.child).length&&(!r.attrsMap||0===Object.keys(r.attrsMap).length))||Hm.emptyChar;if(!0===i){let r="";if(Array.isArray(t)){r+=Hm.arrStart;const i=t[0],o=e.length;if("string"==typeof i)for(let t=0;t<o;t++){const n=Gm(e[t].val);r=Wm(r,n)}else for(let t=0;t<o;t++){const o=Vm(e[t],i,n);r=Wm(r,o)}r+=Hm.arrayEnd}else{r+=Hm.objStart;const i=Object.keys(t);Array.isArray(e)&&(e=e[0]);for(let o in i){const a=i[o];let s;s=!n.ignoreAttributes&&e.attrsMap&&e.attrsMap[a]?Vm(e.attrsMap[a],t[a],n):a===n.textNodeName?Vm(e.val,t[a],n):Vm(e.child[a],t[a],n),r=Wm(r,s)}}return r}return i}var r},Gm=function(e){switch(e){case void 0:return Hm.missingPremitive;case null:return Hm.nilPremitive;case"":return Hm.emptyValue;default:return e}},Wm=function(e,t){return Ym(t[0])||Ym(e[e.length-1])||(e+=Hm.boundryChar),e+t},Ym=function(e){return-1!==$m.indexOf(e)};const Qm=pm.buildOptions;var Jm={convert2nimn:function(e,t,n){return n=Qm(n,_m.defaultOptions,_m.props),Vm(e,t,n)}};const Xm=pm.buildOptions,Zm=function(e,t,n){let r="{";const i=Object.keys(e.child);for(let n=0;n<i.length;n++){var o=i[n];if(e.child[o]&&e.child[o].length>1){for(var a in r+='"'+o+'" : [ ',e.child[o])r+=Zm(e.child[o][a],t)+" , ";r=r.substr(0,r.length-1)+" ] "}else r+='"'+o+'" : '+Zm(e.child[o][0],t)+" ,"}return pm.merge(r,e.attrsMap),pm.isEmptyObject(r)?pm.isExist(e.val)?e.val:"":(pm.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==t.cdataPositionChar)&&(r+='"'+t.textNodeName+'" : '+function(e){return!0!==e&&!1!==e&&isNaN(e)?'"'+e+'"':e}(e.val)),","===r[r.length-1]&&(r=r.substr(0,r.length-2)),r+"}")};var eg={convertToJsonString:function(e,t){return(t=Xm(t,_m.defaultOptions,_m.props)).indentBy=t.indentBy||"",Zm(e,t)}};const tg=pm.buildOptions,ng={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(e){return e},attrValueProcessor:function(e){return e}},rg=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function ig(e){this.options=tg(e,ng,rg),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=fg),this.options.cdataTagName?this.isCDATA=pg:this.isCDATA=function(){return!1},this.replaceCDATAstr=og,this.replaceCDATAarr=ag,this.options.format?(this.indentate=lg,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=dg,this.buildObjNode=ug):(this.buildTextNode=cg,this.buildObjNode=sg),this.buildTextValNode=cg,this.buildObjectNode=sg}function og(e,t){return e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e?e+"<![CDATA["+t+"]]"+this.tagEndChar:e.replace(this.options.cdataPositionChar,"<![CDATA["+t+"]]"+this.tagEndChar)}function ag(e,t){if(e=this.options.tagValueProcessor(""+e),""===this.options.cdataPositionChar||""===e)return e+"<![CDATA["+t.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let n in t)e=e.replace(this.options.cdataPositionChar,"<![CDATA["+t[n]+"]]>");return e+this.newLine}function sg(e,t,n,r){return n&&!e.includes("<")?this.indentate(r)+"<"+t+n+">"+e+"</"+t+this.tagEndChar:this.indentate(r)+"<"+t+n+this.tagEndChar+e+this.indentate(r)+"</"+t+this.tagEndChar}function ug(e,t,n,r){return""!==e?this.buildObjectNode(e,t,n,r):this.indentate(r)+"<"+t+n+"/"+this.tagEndChar}function cg(e,t,n,r){return this.indentate(r)+"<"+t+n+">"+this.options.tagValueProcessor(e)+"</"+t+this.tagEndChar}function dg(e,t,n,r){return""!==e?this.buildTextValNode(e,t,n,r):this.indentate(r)+"<"+t+n+"/"+this.tagEndChar}function lg(e){return this.options.indentBy.repeat(e)}function fg(e){return!!e.startsWith(this.options.attributeNamePrefix)&&e.substr(this.attrPrefixLen)}function pg(e){return e===this.options.cdataTagName}ig.prototype.parse=function(e){return this.j2x(e,0).val},ig.prototype.j2x=function(e,t){let n="",r="";const i=Object.keys(e),o=i.length;for(let a=0;a<o;a++){const o=i[a];if(void 0===e[o]);else if(null===e[o])r+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)r+=this.buildTextNode(e[o],o,"",t);else if("object"!=typeof e[o]){const i=this.isAttribute(o);i?n+=" "+i+'="'+this.options.attrValueProcessor(""+e[o])+'"':this.isCDATA(o)?e[this.options.textNodeName]?r+=this.replaceCDATAstr(e[this.options.textNodeName],e[o]):r+=this.replaceCDATAstr("",e[o]):o===this.options.textNodeName?e[this.options.cdataTagName]||(r+=this.options.tagValueProcessor(""+e[o])):r+=this.buildTextNode(e[o],o,"",t)}else if(Array.isArray(e[o]))if(this.isCDATA(o))r+=this.indentate(t),e[this.options.textNodeName]?r+=this.replaceCDATAarr(e[this.options.textNodeName],e[o]):r+=this.replaceCDATAarr("",e[o]);else{const n=e[o].length;for(let i=0;i<n;i++){const n=e[o][i];if(void 0===n);else if(null===n)r+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if("object"==typeof n){const e=this.j2x(n,t+1);r+=this.buildObjNode(e.val,o,e.attrStr,t)}else r+=this.buildTextNode(n,o,"",t)}}else if(this.options.attrNodeName&&o===this.options.attrNodeName){const t=Object.keys(e[o]),r=t.length;for(let i=0;i<r;i++)n+=" "+t[i]+'="'+this.options.attrValueProcessor(""+e[o][t[i]])+'"'}else{const n=this.j2x(e[o],t+1);r+=this.buildObjNode(n.val,o,n.attrStr,t)}}return{attrStr:n,val:r}};var hg=ig,vg=Vr((function(e,t){const n=_m,r=pm.buildOptions;t.parse=function(e,t,i){if(i){!0===i&&(i={});const t=qm(e,i);if(!0!==t)throw Error(t.err.msg)}t=r(t,n.defaultOptions,n.props);const o=_m.getTraversalObj(e,t);return vm.convertToJson(o,t)},t.convertTonimn=Jm.convert2nimn,t.getTraversalObj=_m.getTraversalObj,t.convertToJson=vm.convertToJson,t.convertToJsonString=eg.convertToJsonString,t.validate=qm,t.j2xParser=hg,t.parseToNimn=function(e,n,r){return t.convertTonimn(t.getTraversalObj(e,r),n,r)}})),mg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return js(this,(function(d){switch(d.label){case 0:return r=[Bs({},e)],c={},[4,OE(e.body,t)];case 1:switch(n=Bs.apply(void 0,r.concat([(c.body=d.sent(),c)])),o="UnknownError",o=_E(e,n.body),o){case"NoSuchUpload":case"com.amazonaws.s3#NoSuchUpload":return[3,2]}return[3,4];case 2:return a=[{}],[4,lw(n)];case 3:return i=Bs.apply(void 0,[Bs.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:CE(e)}]),[3,5];case 4:s=n.body,o=s.code||s.Code||o,i=Bs(Bs({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:CE(e)}),d.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},gg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},yg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return js(this,(function(d){switch(d.label){case 0:return r=[Bs({},e)],c={},[4,OE(e.body,t)];case 1:switch(n=Bs.apply(void 0,r.concat([(c.body=d.sent(),c)])),o="UnknownError",o=_E(e,n.body),o){case"ObjectNotInActiveTierError":case"com.amazonaws.s3#ObjectNotInActiveTierError":return[3,2]}return[3,4];case 2:return a=[{}],[4,hw(n)];case 3:return i=Bs.apply(void 0,[Bs.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:CE(e)}]),[3,5];case 4:s=n.body,o=s.code||s.Code||o,i=Bs(Bs({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:CE(e)}),d.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},wg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:return r=[Bs({},e)],d={},[4,OE(e.body,t)];case 1:switch(n=Bs.apply(void 0,r.concat([(d.body=l.sent(),d)])),o="UnknownError",o=_E(e,n.body),o){case"BucketAlreadyExists":case"com.amazonaws.s3#BucketAlreadyExists":return[3,2];case"BucketAlreadyOwnedByYou":case"com.amazonaws.s3#BucketAlreadyOwnedByYou":return[3,4]}return[3,6];case 2:return a=[{}],[4,aw(n)];case 3:return i=Bs.apply(void 0,[Bs.apply(void 0,a.concat([l.sent()])),{name:o,$metadata:CE(e)}]),[3,7];case 4:return s=[{}],[4,sw(n)];case 5:return i=Bs.apply(void 0,[Bs.apply(void 0,s.concat([l.sent()])),{name:o,$metadata:CE(e)}]),[3,7];case 6:u=n.body,o=u.code||u.Code||o,i=Bs(Bs({},u),{name:""+o,message:u.message||u.Message||o,$fault:"client",$metadata:CE(e)}),l.label=7;case 7:return c=i.message||i.Message||o,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}}))}))},bg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Sg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Eg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},kg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Cg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},xg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Tg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Ng=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Og=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},_g=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Pg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Ag=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Ig=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Mg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Rg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Bg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Lg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Dg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},jg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},zg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Ug=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Fg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},qg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Kg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Hg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},$g=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Vg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Gg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Wg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Yg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Qg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Jg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Xg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Zg=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},ey=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},ty=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},ny=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},ry=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},iy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:return r=[Bs({},e)],d={},[4,OE(e.body,t)];case 1:switch(n=Bs.apply(void 0,r.concat([(d.body=l.sent(),d)])),o="UnknownError",o=_E(e,n.body),o){case"InvalidObjectState":case"com.amazonaws.s3#InvalidObjectState":return[3,2];case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,4]}return[3,6];case 2:return a=[{}],[4,uw(n)];case 3:return i=Bs.apply(void 0,[Bs.apply(void 0,a.concat([l.sent()])),{name:o,$metadata:CE(e)}]),[3,7];case 4:return s=[{}],[4,dw(n)];case 5:return i=Bs.apply(void 0,[Bs.apply(void 0,s.concat([l.sent()])),{name:o,$metadata:CE(e)}]),[3,7];case 6:u=n.body,o=u.code||u.Code||o,i=Bs(Bs({},u),{name:""+o,message:u.message||u.Message||o,$fault:"client",$metadata:CE(e)}),l.label=7;case 7:return c=i.message||i.Message||o,i.message=c,delete i.Message,[2,Promise.reject(Object.assign(new Error(c),i))]}}))}))},oy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return js(this,(function(d){switch(d.label){case 0:return r=[Bs({},e)],c={},[4,OE(e.body,t)];case 1:switch(n=Bs.apply(void 0,r.concat([(c.body=d.sent(),c)])),o="UnknownError",o=_E(e,n.body),o){case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,2]}return[3,4];case 2:return a=[{}],[4,dw(n)];case 3:return i=Bs.apply(void 0,[Bs.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:CE(e)}]),[3,5];case 4:s=n.body,o=s.code||s.Code||o,i=Bs(Bs({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:CE(e)}),d.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},ay=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},sy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},uy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},cy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},dy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},ly=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},fy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return js(this,(function(d){switch(d.label){case 0:return r=[Bs({},e)],c={},[4,OE(e.body,t)];case 1:switch(n=Bs.apply(void 0,r.concat([(c.body=d.sent(),c)])),o="UnknownError",o=_E(e,n.body),o){case"NotFound":case"com.amazonaws.s3#NotFound":return[3,2]}return[3,4];case 2:return a=[{}],[4,fw(n)];case 3:return i=Bs.apply(void 0,[Bs.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:CE(e)}]),[3,5];case 4:s=n.body,o=s.code||s.Code||o,i=Bs(Bs({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:CE(e)}),d.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},py=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return js(this,(function(d){switch(d.label){case 0:return r=[Bs({},e)],c={},[4,OE(e.body,t)];case 1:switch(n=Bs.apply(void 0,r.concat([(c.body=d.sent(),c)])),o="UnknownError",o=_E(e,n.body),o){case"NotFound":case"com.amazonaws.s3#NotFound":return[3,2]}return[3,4];case 2:return a=[{}],[4,fw(n)];case 3:return i=Bs.apply(void 0,[Bs.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:CE(e)}]),[3,5];case 4:s=n.body,o=s.code||s.Code||o,i=Bs(Bs({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:CE(e)}),d.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},hy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},vy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},my=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},gy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},yy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},wy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},by=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return js(this,(function(d){switch(d.label){case 0:return r=[Bs({},e)],c={},[4,OE(e.body,t)];case 1:switch(n=Bs.apply(void 0,r.concat([(c.body=d.sent(),c)])),o="UnknownError",o=_E(e,n.body),o){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return a=[{}],[4,cw(n)];case 3:return i=Bs.apply(void 0,[Bs.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:CE(e)}]),[3,5];case 4:s=n.body,o=s.code||s.Code||o,i=Bs(Bs({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:CE(e)}),d.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},Sy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return js(this,(function(d){switch(d.label){case 0:return r=[Bs({},e)],c={},[4,OE(e.body,t)];case 1:switch(n=Bs.apply(void 0,r.concat([(c.body=d.sent(),c)])),o="UnknownError",o=_E(e,n.body),o){case"NoSuchBucket":case"com.amazonaws.s3#NoSuchBucket":return[3,2]}return[3,4];case 2:return a=[{}],[4,cw(n)];case 3:return i=Bs.apply(void 0,[Bs.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:CE(e)}]),[3,5];case 4:s=n.body,o=s.code||s.Code||o,i=Bs(Bs({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:CE(e)}),d.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},Ey=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},ky=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Cy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},xy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Ty=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Ny=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Oy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},_y=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Py=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Ay=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Iy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},My=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Ry=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},By=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Ly=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Dy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},jy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},zy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Uy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Fy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},qy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Ky=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return js(this,(function(d){switch(d.label){case 0:return r=[Bs({},e)],c={},[4,OE(e.body,t)];case 1:switch(n=Bs.apply(void 0,r.concat([(c.body=d.sent(),c)])),o="UnknownError",o=_E(e,n.body),o){case"NoSuchKey":case"com.amazonaws.s3#NoSuchKey":return[3,2]}return[3,4];case 2:return a=[{}],[4,dw(n)];case 3:return i=Bs.apply(void 0,[Bs.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:CE(e)}]),[3,5];case 4:s=n.body,o=s.code||s.Code||o,i=Bs(Bs({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:CE(e)}),d.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},Hy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},$y=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Vy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Gy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Wy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Yy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return js(this,(function(d){switch(d.label){case 0:return r=[Bs({},e)],c={},[4,OE(e.body,t)];case 1:switch(n=Bs.apply(void 0,r.concat([(c.body=d.sent(),c)])),o="UnknownError",o=_E(e,n.body),o){case"ObjectAlreadyInActiveTierError":case"com.amazonaws.s3#ObjectAlreadyInActiveTierError":return[3,2]}return[3,4];case 2:return a=[{}],[4,pw(n)];case 3:return i=Bs.apply(void 0,[Bs.apply(void 0,a.concat([d.sent()])),{name:o,$metadata:CE(e)}]),[3,5];case 4:s=n.body,o=s.code||s.Code||o,i=Bs(Bs({},s),{name:""+o,message:s.message||s.Message||o,$fault:"client",$metadata:CE(e)}),d.label=5;case 5:return u=i.message||i.Message||o,i.message=u,delete i.Message,[2,Promise.reject(Object.assign(new Error(u),i))]}}))}))},Qy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Jy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Xy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},Zy=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return r=[Bs({},e)],u={},[4,OE(e.body,t)];case 1:return n=Bs.apply(void 0,r.concat([(u.body=c.sent(),u)])),o="UnknownError",o=_E(e,n.body),a=n.body,o=a.code||a.Code||o,i=Bs(Bs({},a),{name:""+o,message:a.message||a.Message||o,$fault:"client",$metadata:CE(e)}),s=i.message||i.Message||o,i.message=s,delete i.Message,[2,Promise.reject(Object.assign(new Error(s),i))]}}))}))},ew=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a;return js(this,(function(s){switch(s.label){case 0:return void 0===e.Records?[3,2]:(n={},[4,iw(e.Records)]);case 1:return[2,(n.Records=s.sent(),n)];case 2:return void 0===e.Stats?[3,4]:(r={},[4,ow(e.Stats,t)]);case 3:return[2,(r.Stats=s.sent(),r)];case 4:return void 0===e.Progress?[3,6]:(i={},[4,rw(e.Progress,t)]);case 5:return[2,(i.Progress=s.sent(),i)];case 6:return void 0===e.Cont?[3,8]:(o={},[4,tw(e.Cont)]);case 7:return[2,(o.Cont=s.sent(),o)];case 8:return void 0===e.End?[3,10]:(a={},[4,nw(e.End)]);case 9:return[2,(a.End=s.sent(),a)];case 10:return[2,{$unknown:e}]}}))}))},tw=function(e,t){return Ds(void 0,void 0,void 0,(function(){return js(this,(function(e){return[2,{}]}))}))},nw=function(e,t){return Ds(void 0,void 0,void 0,(function(){return js(this,(function(e){return[2,{}]}))}))},rw=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return r=n={},[4,OE(e.body,t)];case 1:return r.Details=i.sent(),[2,n]}}))}))},iw=function(e,t){return Ds(void 0,void 0,void 0,(function(){var t;return js(this,(function(n){return(t={}).Payload=e.body,[2,t]}))}))},ow=function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return r=n={},[4,OE(e.body,t)];case 1:return r.Details=i.sent(),[2,n]}}))}))},aw=function(e,t){return Ds(void 0,void 0,void 0,(function(){var t;return js(this,(function(n){return t={name:"BucketAlreadyExists",$fault:"client",$metadata:CE(e)},e.body,[2,t]}))}))},sw=function(e,t){return Ds(void 0,void 0,void 0,(function(){var t;return js(this,(function(n){return t={name:"BucketAlreadyOwnedByYou",$fault:"client",$metadata:CE(e)},e.body,[2,t]}))}))},uw=function(e,t){return Ds(void 0,void 0,void 0,(function(){var t,n;return js(this,(function(r){return t={name:"InvalidObjectState",$fault:"client",$metadata:CE(e),AccessTier:void 0,StorageClass:void 0},void 0!==(n=e.body).AccessTier&&(t.AccessTier=n.AccessTier),void 0!==n.StorageClass&&(t.StorageClass=n.StorageClass),[2,t]}))}))},cw=function(e,t){return Ds(void 0,void 0,void 0,(function(){var t;return js(this,(function(n){return t={name:"NoSuchBucket",$fault:"client",$metadata:CE(e)},e.body,[2,t]}))}))},dw=function(e,t){return Ds(void 0,void 0,void 0,(function(){var t;return js(this,(function(n){return t={name:"NoSuchKey",$fault:"client",$metadata:CE(e)},e.body,[2,t]}))}))},lw=function(e,t){return Ds(void 0,void 0,void 0,(function(){var t;return js(this,(function(n){return t={name:"NoSuchUpload",$fault:"client",$metadata:CE(e)},e.body,[2,t]}))}))},fw=function(e,t){return Ds(void 0,void 0,void 0,(function(){var t;return js(this,(function(n){return t={name:"NotFound",$fault:"client",$metadata:CE(e)},e.body,[2,t]}))}))},pw=function(e,t){return Ds(void 0,void 0,void 0,(function(){var t;return js(this,(function(n){return t={name:"ObjectAlreadyInActiveTierError",$fault:"client",$metadata:CE(e)},e.body,[2,t]}))}))},hw=function(e,t){return Ds(void 0,void 0,void 0,(function(){var t;return js(this,(function(n){return t={name:"ObjectNotInActiveTierError",$fault:"client",$metadata:CE(e)},e.body,[2,t]}))}))},vw=function(e,t){var n=new lm("AccelerateConfiguration");if(void 0!==e.Status&&null!==e.Status){var r=new lm("BucketAccelerateStatus").addChildNode(new fm(e.Status)).withName("Status");n.addChildNode(r)}return n},mw=function(e,t){var n=new lm("AccessControlPolicy");if(void 0!==e.Grants&&null!==e.Grants){var r=Bw(e.Grants),i=new lm("AccessControlList");r.map((function(e){i.addChildNode(e)})),n.addChildNode(i)}if(void 0!==e.Owner&&null!==e.Owner){var o=db(e.Owner).withName("Owner");n.addChildNode(o)}return n},gw=function(e,t){var n=new lm("AnalyticsConfiguration");if(void 0!==e.Id&&null!==e.Id){var r=new lm("AnalyticsId").addChildNode(new fm(e.Id)).withName("Id");n.addChildNode(r)}if(void 0!==e.Filter&&null!==e.Filter){r=yw(e.Filter).withName("Filter");n.addChildNode(r)}if(void 0!==e.StorageClassAnalysis&&null!==e.StorageClassAnalysis){r=Db(e.StorageClassAnalysis).withName("StorageClassAnalysis");n.addChildNode(r)}return n},yw=function(e,t){var n=new lm("AnalyticsFilter");return _f.visit(e,{Prefix:function(e){var t=new lm("Prefix").addChildNode(new fm(e)).withName("Prefix");n.addChildNode(t)},Tag:function(e){var t=zb(e).withName("Tag");n.addChildNode(t)},And:function(e){var t=function(e,t){var n=new lm("AnalyticsAndOperator");if(void 0!==e.Prefix&&null!==e.Prefix){var r=new lm("Prefix").addChildNode(new fm(e.Prefix)).withName("Prefix");n.addChildNode(r)}return void 0!==e.Tags&&null!==e.Tags&&Fb(e.Tags).map((function(e){e=e.withName("Tag"),n.addChildNode(e)})),n}(e).withName("And");n.addChildNode(t)},_:function(e,t){if(!(t instanceof lm||t instanceof fm))throw new Error("Unable to serialize unknown union members in XML.");n.addChildNode(new lm(e).addChildNode(t))}}),n},ww=function(e,t){var n=new lm("AnalyticsS3BucketDestination");if(void 0!==e.Format&&null!==e.Format){var r=new lm("AnalyticsS3ExportFileFormat").addChildNode(new fm(e.Format)).withName("Format");n.addChildNode(r)}if(void 0!==e.BucketAccountId&&null!==e.BucketAccountId){r=new lm("AccountId").addChildNode(new fm(e.BucketAccountId)).withName("BucketAccountId");n.addChildNode(r)}if(void 0!==e.Bucket&&null!==e.Bucket){r=new lm("BucketName").addChildNode(new fm(e.Bucket)).withName("Bucket");n.addChildNode(r)}if(void 0!==e.Prefix&&null!==e.Prefix){r=new lm("Prefix").addChildNode(new fm(e.Prefix)).withName("Prefix");n.addChildNode(r)}return n},bw=function(e,t){var n=new lm("BucketLifecycleConfiguration");void 0!==e.Rules&&null!==e.Rules&&Yw(e.Rules).map((function(e){e=e.withName("Rule"),n.addChildNode(e)}));return n},Sw=function(e,t){var n=new lm("BucketLoggingStatus");if(void 0!==e.LoggingEnabled&&null!==e.LoggingEnabled){var r=Qw(e.LoggingEnabled).withName("LoggingEnabled");n.addChildNode(r)}return n},Ew=function(e,t){var n=new lm("CompletedMultipartUpload");void 0!==e.Parts&&null!==e.Parts&&kw(e.Parts).map((function(e){e=e.withName("Part"),n.addChildNode(e)}));return n},kw=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new lm("CompletedPart");if(void 0!==e.ETag&&null!==e.ETag){var r=new lm("ETag").addChildNode(new fm(e.ETag)).withName("ETag");n.addChildNode(r)}void 0!==e.PartNumber&&null!==e.PartNumber&&(r=new lm("PartNumber").addChildNode(new fm(String(e.PartNumber))).withName("PartNumber"),n.addChildNode(r));return n}(e).withName("member")}))},Cw=function(e,t){var n=new lm("CORSConfiguration");void 0!==e.CORSRules&&null!==e.CORSRules&&Tw(e.CORSRules).map((function(e){e=e.withName("CORSRule"),n.addChildNode(e)}));return n},xw=function(e,t){var n=new lm("CORSRule");if(void 0!==e.ID&&null!==e.ID){var r=new lm("ID").addChildNode(new fm(e.ID)).withName("ID");n.addChildNode(r)}void 0!==e.AllowedHeaders&&null!==e.AllowedHeaders&&function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:new lm("AllowedHeader").addChildNode(new fm(e)).withName("member")}))}(e.AllowedHeaders).map((function(e){e=e.withName("AllowedHeader"),n.addChildNode(e)}));void 0!==e.AllowedMethods&&null!==e.AllowedMethods&&function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:new lm("AllowedMethod").addChildNode(new fm(e)).withName("member")}))}(e.AllowedMethods).map((function(e){e=e.withName("AllowedMethod"),n.addChildNode(e)}));void 0!==e.AllowedOrigins&&null!==e.AllowedOrigins&&function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:new lm("AllowedOrigin").addChildNode(new fm(e)).withName("member")}))}(e.AllowedOrigins).map((function(e){e=e.withName("AllowedOrigin"),n.addChildNode(e)}));void 0!==e.ExposeHeaders&&null!==e.ExposeHeaders&&Iw(e.ExposeHeaders).map((function(e){e=e.withName("ExposeHeader"),n.addChildNode(e)}));if(void 0!==e.MaxAgeSeconds&&null!==e.MaxAgeSeconds){r=new lm("MaxAgeSeconds").addChildNode(new fm(String(e.MaxAgeSeconds))).withName("MaxAgeSeconds");n.addChildNode(r)}return n},Tw=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:xw(e).withName("member")}))},Nw=function(e,t){var n=new lm("CreateBucketConfiguration");if(void 0!==e.LocationConstraint&&null!==e.LocationConstraint){var r=new lm("BucketLocationConstraint").addChildNode(new fm(e.LocationConstraint)).withName("LocationConstraint");n.addChildNode(r)}return n},Ow=function(e,t){var n=new lm("Delete");void 0!==e.Objects&&null!==e.Objects&&ib(e.Objects).map((function(e){e=e.withName("Object"),n.addChildNode(e)}));if(void 0!==e.Quiet&&null!==e.Quiet){var r=new lm("Quiet").addChildNode(new fm(String(e.Quiet))).withName("Quiet");n.addChildNode(r)}return n},_w=function(e,t){var n=new lm("Destination");if(void 0!==e.Bucket&&null!==e.Bucket){var r=new lm("BucketName").addChildNode(new fm(e.Bucket)).withName("Bucket");n.addChildNode(r)}if(void 0!==e.Account&&null!==e.Account){r=new lm("AccountId").addChildNode(new fm(e.Account)).withName("Account");n.addChildNode(r)}if(void 0!==e.StorageClass&&null!==e.StorageClass){r=new lm("StorageClass").addChildNode(new fm(e.StorageClass)).withName("StorageClass");n.addChildNode(r)}if(void 0!==e.AccessControlTranslation&&null!==e.AccessControlTranslation){r=function(e,t){var n=new lm("AccessControlTranslation");if(void 0!==e.Owner&&null!==e.Owner){var r=new lm("OwnerOverride").addChildNode(new fm(e.Owner)).withName("Owner");n.addChildNode(r)}return n}(e.AccessControlTranslation).withName("AccessControlTranslation");n.addChildNode(r)}if(void 0!==e.EncryptionConfiguration&&null!==e.EncryptionConfiguration){r=Pw(e.EncryptionConfiguration).withName("EncryptionConfiguration");n.addChildNode(r)}if(void 0!==e.ReplicationTime&&null!==e.ReplicationTime){r=bb(e.ReplicationTime).withName("ReplicationTime");n.addChildNode(r)}if(void 0!==e.Metrics&&null!==e.Metrics){r=Jw(e.Metrics).withName("Metrics");n.addChildNode(r)}return n},Pw=function(e,t){var n=new lm("EncryptionConfiguration");if(void 0!==e.ReplicaKmsKeyID&&null!==e.ReplicaKmsKeyID){var r=new lm("ReplicaKmsKeyID").addChildNode(new fm(e.ReplicaKmsKeyID)).withName("ReplicaKmsKeyID");n.addChildNode(r)}return n},Aw=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:new lm("Event").addChildNode(new fm(e)).withName("member")}))},Iw=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:new lm("ExposeHeader").addChildNode(new fm(e)).withName("member")}))},Mw=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new lm("FilterRule");if(void 0!==e.Name&&null!==e.Name){var r=new lm("FilterRuleName").addChildNode(new fm(e.Name)).withName("Name");n.addChildNode(r)}void 0!==e.Value&&null!==e.Value&&(r=new lm("FilterRuleValue").addChildNode(new fm(e.Value)).withName("Value"),n.addChildNode(r));return n}(e).withName("member")}))},Rw=function(e,t){var n=new lm("Grantee");if(void 0!==e.DisplayName&&null!==e.DisplayName){var r=new lm("DisplayName").addChildNode(new fm(e.DisplayName)).withName("DisplayName");n.addChildNode(r)}if(void 0!==e.EmailAddress&&null!==e.EmailAddress){r=new lm("EmailAddress").addChildNode(new fm(e.EmailAddress)).withName("EmailAddress");n.addChildNode(r)}if(void 0!==e.ID&&null!==e.ID){r=new lm("ID").addChildNode(new fm(e.ID)).withName("ID");n.addChildNode(r)}if(void 0!==e.URI&&null!==e.URI){r=new lm("URI").addChildNode(new fm(e.URI)).withName("URI");n.addChildNode(r)}return void 0!==e.Type&&null!==e.Type&&n.addAttribute("xsi:type",e.Type),n},Bw=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new lm("Grant");if(void 0!==e.Grantee&&null!==e.Grantee){var r=Rw(e.Grantee).withName("Grantee");n.addChildNode(r)}void 0!==e.Permission&&null!==e.Permission&&(r=new lm("Permission").addChildNode(new fm(e.Permission)).withName("Permission"),n.addChildNode(r));return n}(e).withName("Grant")}))},Lw=function(e,t){var n=new lm("InputSerialization");if(void 0!==e.CSV&&null!==e.CSV){var r=function(e,t){var n=new lm("CSVInput");if(void 0!==e.FileHeaderInfo&&null!==e.FileHeaderInfo){var r=new lm("FileHeaderInfo").addChildNode(new fm(e.FileHeaderInfo)).withName("FileHeaderInfo");n.addChildNode(r)}void 0!==e.Comments&&null!==e.Comments&&(r=new lm("Comments").addChildNode(new fm(e.Comments)).withName("Comments"),n.addChildNode(r));void 0!==e.QuoteEscapeCharacter&&null!==e.QuoteEscapeCharacter&&(r=new lm("QuoteEscapeCharacter").addChildNode(new fm(e.QuoteEscapeCharacter)).withName("QuoteEscapeCharacter"),n.addChildNode(r));void 0!==e.RecordDelimiter&&null!==e.RecordDelimiter&&(r=new lm("RecordDelimiter").addChildNode(new fm(e.RecordDelimiter)).withName("RecordDelimiter"),n.addChildNode(r));void 0!==e.FieldDelimiter&&null!==e.FieldDelimiter&&(r=new lm("FieldDelimiter").addChildNode(new fm(e.FieldDelimiter)).withName("FieldDelimiter"),n.addChildNode(r));void 0!==e.QuoteCharacter&&null!==e.QuoteCharacter&&(r=new lm("QuoteCharacter").addChildNode(new fm(e.QuoteCharacter)).withName("QuoteCharacter"),n.addChildNode(r));void 0!==e.AllowQuotedRecordDelimiter&&null!==e.AllowQuotedRecordDelimiter&&(r=new lm("AllowQuotedRecordDelimiter").addChildNode(new fm(String(e.AllowQuotedRecordDelimiter))).withName("AllowQuotedRecordDelimiter"),n.addChildNode(r));return n}(e.CSV).withName("CSV");n.addChildNode(r)}if(void 0!==e.CompressionType&&null!==e.CompressionType){r=new lm("CompressionType").addChildNode(new fm(e.CompressionType)).withName("CompressionType");n.addChildNode(r)}if(void 0!==e.JSON&&null!==e.JSON){r=$w(e.JSON).withName("JSON");n.addChildNode(r)}if(void 0!==e.Parquet&&null!==e.Parquet){r=pb(e.Parquet).withName("Parquet");n.addChildNode(r)}return n},Dw=function(e,t){var n=new lm("IntelligentTieringConfiguration");if(void 0!==e.Id&&null!==e.Id){var r=new lm("IntelligentTieringId").addChildNode(new fm(e.Id)).withName("Id");n.addChildNode(r)}if(void 0!==e.Filter&&null!==e.Filter){r=jw(e.Filter).withName("Filter");n.addChildNode(r)}if(void 0!==e.Status&&null!==e.Status){r=new lm("IntelligentTieringStatus").addChildNode(new fm(e.Status)).withName("Status");n.addChildNode(r)}void 0!==e.Tierings&&null!==e.Tierings&&Kb(e.Tierings).map((function(e){e=e.withName("Tiering"),n.addChildNode(e)}));return n},jw=function(e,t){var n=new lm("IntelligentTieringFilter");if(void 0!==e.Prefix&&null!==e.Prefix){var r=new lm("Prefix").addChildNode(new fm(e.Prefix)).withName("Prefix");n.addChildNode(r)}if(void 0!==e.Tag&&null!==e.Tag){r=zb(e.Tag).withName("Tag");n.addChildNode(r)}if(void 0!==e.And&&null!==e.And){r=function(e,t){var n=new lm("IntelligentTieringAndOperator");if(void 0!==e.Prefix&&null!==e.Prefix){var r=new lm("Prefix").addChildNode(new fm(e.Prefix)).withName("Prefix");n.addChildNode(r)}return void 0!==e.Tags&&null!==e.Tags&&Fb(e.Tags).map((function(e){e=e.withName("Tag"),n.addChildNode(e)})),n}(e.And).withName("And");n.addChildNode(r)}return n},zw=function(e,t){var n=new lm("InventoryConfiguration");if(void 0!==e.Destination&&null!==e.Destination){var r=Uw(e.Destination).withName("Destination");n.addChildNode(r)}if(void 0!==e.IsEnabled&&null!==e.IsEnabled){r=new lm("IsEnabled").addChildNode(new fm(String(e.IsEnabled))).withName("IsEnabled");n.addChildNode(r)}if(void 0!==e.Filter&&null!==e.Filter){r=Fw(e.Filter).withName("Filter");n.addChildNode(r)}if(void 0!==e.Id&&null!==e.Id){r=new lm("InventoryId").addChildNode(new fm(e.Id)).withName("Id");n.addChildNode(r)}if(void 0!==e.IncludedObjectVersions&&null!==e.IncludedObjectVersions){r=new lm("InventoryIncludedObjectVersions").addChildNode(new fm(e.IncludedObjectVersions)).withName("IncludedObjectVersions");n.addChildNode(r)}if(void 0!==e.OptionalFields&&null!==e.OptionalFields){var i=qw(e.OptionalFields),o=new lm("OptionalFields");i.map((function(e){o.addChildNode(e)})),n.addChildNode(o)}if(void 0!==e.Schedule&&null!==e.Schedule){r=Hw(e.Schedule).withName("Schedule");n.addChildNode(r)}return n},Uw=function(e,t){var n=new lm("InventoryDestination");if(void 0!==e.S3BucketDestination&&null!==e.S3BucketDestination){var r=Kw(e.S3BucketDestination).withName("S3BucketDestination");n.addChildNode(r)}return n},Fw=function(e,t){var n=new lm("InventoryFilter");if(void 0!==e.Prefix&&null!==e.Prefix){var r=new lm("Prefix").addChildNode(new fm(e.Prefix)).withName("Prefix");n.addChildNode(r)}return n},qw=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:new lm("InventoryOptionalField").addChildNode(new fm(e)).withName("Field")}))},Kw=function(e,t){var n=new lm("InventoryS3BucketDestination");if(void 0!==e.AccountId&&null!==e.AccountId){var r=new lm("AccountId").addChildNode(new fm(e.AccountId)).withName("AccountId");n.addChildNode(r)}if(void 0!==e.Bucket&&null!==e.Bucket){r=new lm("BucketName").addChildNode(new fm(e.Bucket)).withName("Bucket");n.addChildNode(r)}if(void 0!==e.Format&&null!==e.Format){r=new lm("InventoryFormat").addChildNode(new fm(e.Format)).withName("Format");n.addChildNode(r)}if(void 0!==e.Prefix&&null!==e.Prefix){r=new lm("Prefix").addChildNode(new fm(e.Prefix)).withName("Prefix");n.addChildNode(r)}if(void 0!==e.Encryption&&null!==e.Encryption){r=function(e,t){var n=new lm("InventoryEncryption");if(void 0!==e.SSES3&&null!==e.SSES3){var r=Lb(e.SSES3).withName("SSE-S3");n.addChildNode(r)}void 0!==e.SSEKMS&&null!==e.SSEKMS&&(r=Rb(e.SSEKMS).withName("SSE-KMS"),n.addChildNode(r));return n}(e.Encryption).withName("Encryption");n.addChildNode(r)}return n},Hw=function(e,t){var n=new lm("InventorySchedule");if(void 0!==e.Frequency&&null!==e.Frequency){var r=new lm("InventoryFrequency").addChildNode(new fm(e.Frequency)).withName("Frequency");n.addChildNode(r)}return n},$w=function(e,t){var n=new lm("JSONInput");if(void 0!==e.Type&&null!==e.Type){var r=new lm("JSONType").addChildNode(new fm(e.Type)).withName("Type");n.addChildNode(r)}return n},Vw=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new lm("LambdaFunctionConfiguration");if(void 0!==e.Id&&null!==e.Id){var r=new lm("NotificationId").addChildNode(new fm(e.Id)).withName("Id");n.addChildNode(r)}void 0!==e.LambdaFunctionArn&&null!==e.LambdaFunctionArn&&(r=new lm("LambdaFunctionArn").addChildNode(new fm(e.LambdaFunctionArn)).withName("CloudFunction"),n.addChildNode(r));void 0!==e.Events&&null!==e.Events&&Aw(e.Events).map((function(e){e=e.withName("Event"),n.addChildNode(e)})),void 0!==e.Filter&&null!==e.Filter&&(r=rb(e.Filter).withName("Filter"),n.addChildNode(r));return n}(e).withName("member")}))},Gw=function(e,t){var n=new lm("LifecycleRule");if(void 0!==e.Expiration&&null!==e.Expiration){var r=function(e,t){var n=new lm("LifecycleExpiration");if(void 0!==e.Date&&null!==e.Date){var r=new lm("Date").addChildNode(new fm(e.Date.toISOString().split(".")[0]+"Z")).withName("Date");n.addChildNode(r)}void 0!==e.Days&&null!==e.Days&&(r=new lm("Days").addChildNode(new fm(String(e.Days))).withName("Days"),n.addChildNode(r));void 0!==e.ExpiredObjectDeleteMarker&&null!==e.ExpiredObjectDeleteMarker&&(r=new lm("ExpiredObjectDeleteMarker").addChildNode(new fm(String(e.ExpiredObjectDeleteMarker))).withName("ExpiredObjectDeleteMarker"),n.addChildNode(r));return n}(e.Expiration).withName("Expiration");n.addChildNode(r)}if(void 0!==e.ID&&null!==e.ID){r=new lm("ID").addChildNode(new fm(e.ID)).withName("ID");n.addChildNode(r)}if(void 0!==e.Prefix&&null!==e.Prefix){r=new lm("Prefix").addChildNode(new fm(e.Prefix)).withName("Prefix");n.addChildNode(r)}if(void 0!==e.Filter&&null!==e.Filter){r=Ww(e.Filter).withName("Filter");n.addChildNode(r)}if(void 0!==e.Status&&null!==e.Status){r=new lm("ExpirationStatus").addChildNode(new fm(e.Status)).withName("Status");n.addChildNode(r)}void 0!==e.Transitions&&null!==e.Transitions&&$b(e.Transitions).map((function(e){e=e.withName("Transition"),n.addChildNode(e)}));void 0!==e.NoncurrentVersionTransitions&&null!==e.NoncurrentVersionTransitions&&tb(e.NoncurrentVersionTransitions).map((function(e){e=e.withName("NoncurrentVersionTransition"),n.addChildNode(e)}));if(void 0!==e.NoncurrentVersionExpiration&&null!==e.NoncurrentVersionExpiration){r=eb(e.NoncurrentVersionExpiration).withName("NoncurrentVersionExpiration");n.addChildNode(r)}if(void 0!==e.AbortIncompleteMultipartUpload&&null!==e.AbortIncompleteMultipartUpload){r=function(e,t){var n=new lm("AbortIncompleteMultipartUpload");if(void 0!==e.DaysAfterInitiation&&null!==e.DaysAfterInitiation){var r=new lm("DaysAfterInitiation").addChildNode(new fm(String(e.DaysAfterInitiation))).withName("DaysAfterInitiation");n.addChildNode(r)}return n}(e.AbortIncompleteMultipartUpload).withName("AbortIncompleteMultipartUpload");n.addChildNode(r)}return n},Ww=function(e,t){var n=new lm("LifecycleRuleFilter");return cp.visit(e,{Prefix:function(e){var t=new lm("Prefix").addChildNode(new fm(e)).withName("Prefix");n.addChildNode(t)},Tag:function(e){var t=zb(e).withName("Tag");n.addChildNode(t)},And:function(e){var t=function(e,t){var n=new lm("LifecycleRuleAndOperator");if(void 0!==e.Prefix&&null!==e.Prefix){var r=new lm("Prefix").addChildNode(new fm(e.Prefix)).withName("Prefix");n.addChildNode(r)}return void 0!==e.Tags&&null!==e.Tags&&Fb(e.Tags).map((function(e){e=e.withName("Tag"),n.addChildNode(e)})),n}(e).withName("And");n.addChildNode(t)},_:function(e,t){if(!(t instanceof lm||t instanceof fm))throw new Error("Unable to serialize unknown union members in XML.");n.addChildNode(new lm(e).addChildNode(t))}}),n},Yw=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:Gw(e).withName("member")}))},Qw=function(e,t){var n=new lm("LoggingEnabled");if(void 0!==e.TargetBucket&&null!==e.TargetBucket){var r=new lm("TargetBucket").addChildNode(new fm(e.TargetBucket)).withName("TargetBucket");n.addChildNode(r)}if(void 0!==e.TargetGrants&&null!==e.TargetGrants){var i=qb(e.TargetGrants),o=new lm("TargetGrants");i.map((function(e){o.addChildNode(e)})),n.addChildNode(o)}if(void 0!==e.TargetPrefix&&null!==e.TargetPrefix){r=new lm("TargetPrefix").addChildNode(new fm(e.TargetPrefix)).withName("TargetPrefix");n.addChildNode(r)}return n},Jw=function(e,t){var n=new lm("Metrics");if(void 0!==e.Status&&null!==e.Status){var r=new lm("MetricsStatus").addChildNode(new fm(e.Status)).withName("Status");n.addChildNode(r)}if(void 0!==e.EventThreshold&&null!==e.EventThreshold){r=Sb(e.EventThreshold).withName("EventThreshold");n.addChildNode(r)}return n},Xw=function(e,t){var n=new lm("MetricsConfiguration");if(void 0!==e.Id&&null!==e.Id){var r=new lm("MetricsId").addChildNode(new fm(e.Id)).withName("Id");n.addChildNode(r)}if(void 0!==e.Filter&&null!==e.Filter){r=Zw(e.Filter).withName("Filter");n.addChildNode(r)}return n},Zw=function(e,t){var n=new lm("MetricsFilter");return kp.visit(e,{Prefix:function(e){var t=new lm("Prefix").addChildNode(new fm(e)).withName("Prefix");n.addChildNode(t)},Tag:function(e){var t=zb(e).withName("Tag");n.addChildNode(t)},And:function(e){var t=function(e,t){var n=new lm("MetricsAndOperator");if(void 0!==e.Prefix&&null!==e.Prefix){var r=new lm("Prefix").addChildNode(new fm(e.Prefix)).withName("Prefix");n.addChildNode(r)}return void 0!==e.Tags&&null!==e.Tags&&Fb(e.Tags).map((function(e){e=e.withName("Tag"),n.addChildNode(e)})),n}(e).withName("And");n.addChildNode(t)},_:function(e,t){if(!(t instanceof lm||t instanceof fm))throw new Error("Unable to serialize unknown union members in XML.");n.addChildNode(new lm(e).addChildNode(t))}}),n},eb=function(e,t){var n=new lm("NoncurrentVersionExpiration");if(void 0!==e.NoncurrentDays&&null!==e.NoncurrentDays){var r=new lm("Days").addChildNode(new fm(String(e.NoncurrentDays))).withName("NoncurrentDays");n.addChildNode(r)}return n},tb=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new lm("NoncurrentVersionTransition");if(void 0!==e.NoncurrentDays&&null!==e.NoncurrentDays){var r=new lm("Days").addChildNode(new fm(String(e.NoncurrentDays))).withName("NoncurrentDays");n.addChildNode(r)}void 0!==e.StorageClass&&null!==e.StorageClass&&(r=new lm("TransitionStorageClass").addChildNode(new fm(e.StorageClass)).withName("StorageClass"),n.addChildNode(r));return n}(e).withName("member")}))},nb=function(e,t){var n=new lm("NotificationConfiguration");void 0!==e.TopicConfigurations&&null!==e.TopicConfigurations&&Hb(e.TopicConfigurations).map((function(e){e=e.withName("TopicConfiguration"),n.addChildNode(e)}));void 0!==e.QueueConfigurations&&null!==e.QueueConfigurations&&vb(e.QueueConfigurations).map((function(e){e=e.withName("QueueConfiguration"),n.addChildNode(e)}));void 0!==e.LambdaFunctionConfigurations&&null!==e.LambdaFunctionConfigurations&&Vw(e.LambdaFunctionConfigurations).map((function(e){e=e.withName("CloudFunctionConfiguration"),n.addChildNode(e)}));return n},rb=function(e,t){var n=new lm("NotificationConfigurationFilter");if(void 0!==e.Key&&null!==e.Key){var r=Tb(e.Key).withName("S3Key");n.addChildNode(r)}return n},ib=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new lm("ObjectIdentifier");if(void 0!==e.Key&&null!==e.Key){var r=new lm("ObjectKey").addChildNode(new fm(e.Key)).withName("Key");n.addChildNode(r)}void 0!==e.VersionId&&null!==e.VersionId&&(r=new lm("ObjectVersionId").addChildNode(new fm(e.VersionId)).withName("VersionId"),n.addChildNode(r));return n}(e).withName("member")}))},ob=function(e,t){var n=new lm("ObjectLockConfiguration");if(void 0!==e.ObjectLockEnabled&&null!==e.ObjectLockEnabled){var r=new lm("ObjectLockEnabled").addChildNode(new fm(e.ObjectLockEnabled)).withName("ObjectLockEnabled");n.addChildNode(r)}if(void 0!==e.Rule&&null!==e.Rule){r=ub(e.Rule).withName("Rule");n.addChildNode(r)}return n},ab=function(e,t){var n=new lm("ObjectLockLegalHold");if(void 0!==e.Status&&null!==e.Status){var r=new lm("ObjectLockLegalHoldStatus").addChildNode(new fm(e.Status)).withName("Status");n.addChildNode(r)}return n},sb=function(e,t){var n=new lm("ObjectLockRetention");if(void 0!==e.Mode&&null!==e.Mode){var r=new lm("ObjectLockRetentionMode").addChildNode(new fm(e.Mode)).withName("Mode");n.addChildNode(r)}if(void 0!==e.RetainUntilDate&&null!==e.RetainUntilDate){r=new lm("Date").addChildNode(new fm(e.RetainUntilDate.toISOString().split(".")[0]+"Z")).withName("RetainUntilDate");n.addChildNode(r)}return n},ub=function(e,t){var n=new lm("ObjectLockRule");if(void 0!==e.DefaultRetention&&null!==e.DefaultRetention){var r=function(e,t){var n=new lm("DefaultRetention");if(void 0!==e.Mode&&null!==e.Mode){var r=new lm("ObjectLockRetentionMode").addChildNode(new fm(e.Mode)).withName("Mode");n.addChildNode(r)}void 0!==e.Days&&null!==e.Days&&(r=new lm("Days").addChildNode(new fm(String(e.Days))).withName("Days"),n.addChildNode(r));void 0!==e.Years&&null!==e.Years&&(r=new lm("Years").addChildNode(new fm(String(e.Years))).withName("Years"),n.addChildNode(r));return n}(e.DefaultRetention).withName("DefaultRetention");n.addChildNode(r)}return n},cb=function(e,t){var n=new lm("OutputSerialization");if(void 0!==e.CSV&&null!==e.CSV){var r=function(e,t){var n=new lm("CSVOutput");if(void 0!==e.QuoteFields&&null!==e.QuoteFields){var r=new lm("QuoteFields").addChildNode(new fm(e.QuoteFields)).withName("QuoteFields");n.addChildNode(r)}void 0!==e.QuoteEscapeCharacter&&null!==e.QuoteEscapeCharacter&&(r=new lm("QuoteEscapeCharacter").addChildNode(new fm(e.QuoteEscapeCharacter)).withName("QuoteEscapeCharacter"),n.addChildNode(r));void 0!==e.RecordDelimiter&&null!==e.RecordDelimiter&&(r=new lm("RecordDelimiter").addChildNode(new fm(e.RecordDelimiter)).withName("RecordDelimiter"),n.addChildNode(r));void 0!==e.FieldDelimiter&&null!==e.FieldDelimiter&&(r=new lm("FieldDelimiter").addChildNode(new fm(e.FieldDelimiter)).withName("FieldDelimiter"),n.addChildNode(r));void 0!==e.QuoteCharacter&&null!==e.QuoteCharacter&&(r=new lm("QuoteCharacter").addChildNode(new fm(e.QuoteCharacter)).withName("QuoteCharacter"),n.addChildNode(r));return n}(e.CSV).withName("CSV");n.addChildNode(r)}if(void 0!==e.JSON&&null!==e.JSON){r=function(e,t){var n=new lm("JSONOutput");if(void 0!==e.RecordDelimiter&&null!==e.RecordDelimiter){var r=new lm("RecordDelimiter").addChildNode(new fm(e.RecordDelimiter)).withName("RecordDelimiter");n.addChildNode(r)}return n}(e.JSON).withName("JSON");n.addChildNode(r)}return n},db=function(e,t){var n=new lm("Owner");if(void 0!==e.DisplayName&&null!==e.DisplayName){var r=new lm("DisplayName").addChildNode(new fm(e.DisplayName)).withName("DisplayName");n.addChildNode(r)}if(void 0!==e.ID&&null!==e.ID){r=new lm("ID").addChildNode(new fm(e.ID)).withName("ID");n.addChildNode(r)}return n},lb=function(e,t){var n=new lm("OwnershipControls");void 0!==e.Rules&&null!==e.Rules&&fb(e.Rules).map((function(e){e=e.withName("Rule"),n.addChildNode(e)}));return n},fb=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new lm("OwnershipControlsRule");if(void 0!==e.ObjectOwnership&&null!==e.ObjectOwnership){var r=new lm("ObjectOwnership").addChildNode(new fm(e.ObjectOwnership)).withName("ObjectOwnership");n.addChildNode(r)}return n}(e).withName("member")}))},pb=function(e,t){return new lm("ParquetInput")},hb=function(e,t){var n=new lm("PublicAccessBlockConfiguration");if(void 0!==e.BlockPublicAcls&&null!==e.BlockPublicAcls){var r=new lm("Setting").addChildNode(new fm(String(e.BlockPublicAcls))).withName("BlockPublicAcls");n.addChildNode(r)}if(void 0!==e.IgnorePublicAcls&&null!==e.IgnorePublicAcls){r=new lm("Setting").addChildNode(new fm(String(e.IgnorePublicAcls))).withName("IgnorePublicAcls");n.addChildNode(r)}if(void 0!==e.BlockPublicPolicy&&null!==e.BlockPublicPolicy){r=new lm("Setting").addChildNode(new fm(String(e.BlockPublicPolicy))).withName("BlockPublicPolicy");n.addChildNode(r)}if(void 0!==e.RestrictPublicBuckets&&null!==e.RestrictPublicBuckets){r=new lm("Setting").addChildNode(new fm(String(e.RestrictPublicBuckets))).withName("RestrictPublicBuckets");n.addChildNode(r)}return n},vb=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new lm("QueueConfiguration");if(void 0!==e.Id&&null!==e.Id){var r=new lm("NotificationId").addChildNode(new fm(e.Id)).withName("Id");n.addChildNode(r)}void 0!==e.QueueArn&&null!==e.QueueArn&&(r=new lm("QueueArn").addChildNode(new fm(e.QueueArn)).withName("Queue"),n.addChildNode(r));void 0!==e.Events&&null!==e.Events&&Aw(e.Events).map((function(e){e=e.withName("Event"),n.addChildNode(e)})),void 0!==e.Filter&&null!==e.Filter&&(r=rb(e.Filter).withName("Filter"),n.addChildNode(r));return n}(e).withName("member")}))},mb=function(e,t){var n=new lm("ReplicationConfiguration");if(void 0!==e.Role&&null!==e.Role){var r=new lm("Role").addChildNode(new fm(e.Role)).withName("Role");n.addChildNode(r)}void 0!==e.Rules&&null!==e.Rules&&wb(e.Rules).map((function(e){e=e.withName("Rule"),n.addChildNode(e)}));return n},gb=function(e,t){var n=new lm("ReplicationRule");if(void 0!==e.ID&&null!==e.ID){var r=new lm("ID").addChildNode(new fm(e.ID)).withName("ID");n.addChildNode(r)}if(void 0!==e.Priority&&null!==e.Priority){r=new lm("Priority").addChildNode(new fm(String(e.Priority))).withName("Priority");n.addChildNode(r)}if(void 0!==e.Prefix&&null!==e.Prefix){r=new lm("Prefix").addChildNode(new fm(e.Prefix)).withName("Prefix");n.addChildNode(r)}if(void 0!==e.Filter&&null!==e.Filter){r=yb(e.Filter).withName("Filter");n.addChildNode(r)}if(void 0!==e.Status&&null!==e.Status){r=new lm("ReplicationRuleStatus").addChildNode(new fm(e.Status)).withName("Status");n.addChildNode(r)}if(void 0!==e.SourceSelectionCriteria&&null!==e.SourceSelectionCriteria){r=Mb(e.SourceSelectionCriteria).withName("SourceSelectionCriteria");n.addChildNode(r)}if(void 0!==e.ExistingObjectReplication&&null!==e.ExistingObjectReplication){r=function(e,t){var n=new lm("ExistingObjectReplication");if(void 0!==e.Status&&null!==e.Status){var r=new lm("ExistingObjectReplicationStatus").addChildNode(new fm(e.Status)).withName("Status");n.addChildNode(r)}return n}(e.ExistingObjectReplication).withName("ExistingObjectReplication");n.addChildNode(r)}if(void 0!==e.Destination&&null!==e.Destination){r=_w(e.Destination).withName("Destination");n.addChildNode(r)}if(void 0!==e.DeleteMarkerReplication&&null!==e.DeleteMarkerReplication){r=function(e,t){var n=new lm("DeleteMarkerReplication");if(void 0!==e.Status&&null!==e.Status){var r=new lm("DeleteMarkerReplicationStatus").addChildNode(new fm(e.Status)).withName("Status");n.addChildNode(r)}return n}(e.DeleteMarkerReplication).withName("DeleteMarkerReplication");n.addChildNode(r)}return n},yb=function(e,t){var n=new lm("ReplicationRuleFilter");return Xp.visit(e,{Prefix:function(e){var t=new lm("Prefix").addChildNode(new fm(e)).withName("Prefix");n.addChildNode(t)},Tag:function(e){var t=zb(e).withName("Tag");n.addChildNode(t)},And:function(e){var t=function(e,t){var n=new lm("ReplicationRuleAndOperator");if(void 0!==e.Prefix&&null!==e.Prefix){var r=new lm("Prefix").addChildNode(new fm(e.Prefix)).withName("Prefix");n.addChildNode(r)}return void 0!==e.Tags&&null!==e.Tags&&Fb(e.Tags).map((function(e){e=e.withName("Tag"),n.addChildNode(e)})),n}(e).withName("And");n.addChildNode(t)},_:function(e,t){if(!(t instanceof lm||t instanceof fm))throw new Error("Unable to serialize unknown union members in XML.");n.addChildNode(new lm(e).addChildNode(t))}}),n},wb=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:gb(e).withName("member")}))},bb=function(e,t){var n=new lm("ReplicationTime");if(void 0!==e.Status&&null!==e.Status){var r=new lm("ReplicationTimeStatus").addChildNode(new fm(e.Status)).withName("Status");n.addChildNode(r)}if(void 0!==e.Time&&null!==e.Time){r=Sb(e.Time).withName("Time");n.addChildNode(r)}return n},Sb=function(e,t){var n=new lm("ReplicationTimeValue");if(void 0!==e.Minutes&&null!==e.Minutes){var r=new lm("Minutes").addChildNode(new fm(String(e.Minutes))).withName("Minutes");n.addChildNode(r)}return n},Eb=function(e,t){var n=new lm("RequestPaymentConfiguration");if(void 0!==e.Payer&&null!==e.Payer){var r=new lm("Payer").addChildNode(new fm(e.Payer)).withName("Payer");n.addChildNode(r)}return n},kb=function(e,t){var n=new lm("RequestProgress");if(void 0!==e.Enabled&&null!==e.Enabled){var r=new lm("EnableRequestProgress").addChildNode(new fm(String(e.Enabled))).withName("Enabled");n.addChildNode(r)}return n},Cb=function(e,t){var n=new lm("RestoreRequest");if(void 0!==e.Days&&null!==e.Days){var r=new lm("Days").addChildNode(new fm(String(e.Days))).withName("Days");n.addChildNode(r)}if(void 0!==e.GlacierJobParameters&&null!==e.GlacierJobParameters){r=function(e,t){var n=new lm("GlacierJobParameters");if(void 0!==e.Tier&&null!==e.Tier){var r=new lm("Tier").addChildNode(new fm(e.Tier)).withName("Tier");n.addChildNode(r)}return n}(e.GlacierJobParameters).withName("GlacierJobParameters");n.addChildNode(r)}if(void 0!==e.Type&&null!==e.Type){r=new lm("RestoreRequestType").addChildNode(new fm(e.Type)).withName("Type");n.addChildNode(r)}if(void 0!==e.Tier&&null!==e.Tier){r=new lm("Tier").addChildNode(new fm(e.Tier)).withName("Tier");n.addChildNode(r)}if(void 0!==e.Description&&null!==e.Description){r=new lm("Description").addChildNode(new fm(e.Description)).withName("Description");n.addChildNode(r)}if(void 0!==e.SelectParameters&&null!==e.SelectParameters){r=_b(e.SelectParameters).withName("SelectParameters");n.addChildNode(r)}if(void 0!==e.OutputLocation&&null!==e.OutputLocation){r=function(e,t){var n=new lm("OutputLocation");if(void 0!==e.S3&&null!==e.S3){var r=Nb(e.S3).withName("S3");n.addChildNode(r)}return n}(e.OutputLocation).withName("OutputLocation");n.addChildNode(r)}return n},xb=function(e,t){var n=new lm("RoutingRule");if(void 0!==e.Condition&&null!==e.Condition){var r=function(e,t){var n=new lm("Condition");if(void 0!==e.HttpErrorCodeReturnedEquals&&null!==e.HttpErrorCodeReturnedEquals){var r=new lm("HttpErrorCodeReturnedEquals").addChildNode(new fm(e.HttpErrorCodeReturnedEquals)).withName("HttpErrorCodeReturnedEquals");n.addChildNode(r)}void 0!==e.KeyPrefixEquals&&null!==e.KeyPrefixEquals&&(r=new lm("KeyPrefixEquals").addChildNode(new fm(e.KeyPrefixEquals)).withName("KeyPrefixEquals"),n.addChildNode(r));return n}(e.Condition).withName("Condition");n.addChildNode(r)}if(void 0!==e.Redirect&&null!==e.Redirect){r=function(e,t){var n=new lm("Redirect");if(void 0!==e.HostName&&null!==e.HostName){var r=new lm("HostName").addChildNode(new fm(e.HostName)).withName("HostName");n.addChildNode(r)}void 0!==e.HttpRedirectCode&&null!==e.HttpRedirectCode&&(r=new lm("HttpRedirectCode").addChildNode(new fm(e.HttpRedirectCode)).withName("HttpRedirectCode"),n.addChildNode(r));void 0!==e.Protocol&&null!==e.Protocol&&(r=new lm("Protocol").addChildNode(new fm(e.Protocol)).withName("Protocol"),n.addChildNode(r));void 0!==e.ReplaceKeyPrefixWith&&null!==e.ReplaceKeyPrefixWith&&(r=new lm("ReplaceKeyPrefixWith").addChildNode(new fm(e.ReplaceKeyPrefixWith)).withName("ReplaceKeyPrefixWith"),n.addChildNode(r));void 0!==e.ReplaceKeyWith&&null!==e.ReplaceKeyWith&&(r=new lm("ReplaceKeyWith").addChildNode(new fm(e.ReplaceKeyWith)).withName("ReplaceKeyWith"),n.addChildNode(r));return n}(e.Redirect).withName("Redirect");n.addChildNode(r)}return n},Tb=function(e,t){var n=new lm("S3KeyFilter");void 0!==e.FilterRules&&null!==e.FilterRules&&Mw(e.FilterRules).map((function(e){e=e.withName("FilterRule"),n.addChildNode(e)}));return n},Nb=function(e,t){var n=new lm("S3Location");if(void 0!==e.BucketName&&null!==e.BucketName){var r=new lm("BucketName").addChildNode(new fm(e.BucketName)).withName("BucketName");n.addChildNode(r)}if(void 0!==e.Prefix&&null!==e.Prefix){r=new lm("LocationPrefix").addChildNode(new fm(e.Prefix)).withName("Prefix");n.addChildNode(r)}if(void 0!==e.Encryption&&null!==e.Encryption){r=function(e,t){var n=new lm("Encryption");if(void 0!==e.EncryptionType&&null!==e.EncryptionType){var r=new lm("ServerSideEncryption").addChildNode(new fm(e.EncryptionType)).withName("EncryptionType");n.addChildNode(r)}void 0!==e.KMSKeyId&&null!==e.KMSKeyId&&(r=new lm("SSEKMSKeyId").addChildNode(new fm(e.KMSKeyId)).withName("KMSKeyId"),n.addChildNode(r));void 0!==e.KMSContext&&null!==e.KMSContext&&(r=new lm("KMSContext").addChildNode(new fm(e.KMSContext)).withName("KMSContext"),n.addChildNode(r));return n}(e.Encryption).withName("Encryption");n.addChildNode(r)}if(void 0!==e.CannedACL&&null!==e.CannedACL){r=new lm("ObjectCannedACL").addChildNode(new fm(e.CannedACL)).withName("CannedACL");n.addChildNode(r)}if(void 0!==e.AccessControlList&&null!==e.AccessControlList){var i=Bw(e.AccessControlList),o=new lm("AccessControlList");i.map((function(e){o.addChildNode(e)})),n.addChildNode(o)}if(void 0!==e.Tagging&&null!==e.Tagging){r=Ub(e.Tagging).withName("Tagging");n.addChildNode(r)}if(void 0!==e.UserMetadata&&null!==e.UserMetadata){i=Vb(e.UserMetadata);var a=new lm("UserMetadata");i.map((function(e){a.addChildNode(e)})),n.addChildNode(a)}if(void 0!==e.StorageClass&&null!==e.StorageClass){r=new lm("StorageClass").addChildNode(new fm(e.StorageClass)).withName("StorageClass");n.addChildNode(r)}return n},Ob=function(e,t){var n=new lm("ScanRange");if(void 0!==e.Start&&null!==e.Start){var r=new lm("Start").addChildNode(new fm(String(e.Start))).withName("Start");n.addChildNode(r)}if(void 0!==e.End&&null!==e.End){r=new lm("End").addChildNode(new fm(String(e.End))).withName("End");n.addChildNode(r)}return n},_b=function(e,t){var n=new lm("SelectParameters");if(void 0!==e.InputSerialization&&null!==e.InputSerialization){var r=Lw(e.InputSerialization).withName("InputSerialization");n.addChildNode(r)}if(void 0!==e.ExpressionType&&null!==e.ExpressionType){r=new lm("ExpressionType").addChildNode(new fm(e.ExpressionType)).withName("ExpressionType");n.addChildNode(r)}if(void 0!==e.Expression&&null!==e.Expression){r=new lm("Expression").addChildNode(new fm(e.Expression)).withName("Expression");n.addChildNode(r)}if(void 0!==e.OutputSerialization&&null!==e.OutputSerialization){r=cb(e.OutputSerialization).withName("OutputSerialization");n.addChildNode(r)}return n},Pb=function(e,t){var n=new lm("ServerSideEncryptionConfiguration");void 0!==e.Rules&&null!==e.Rules&&Ib(e.Rules).map((function(e){e=e.withName("Rule"),n.addChildNode(e)}));return n},Ab=function(e,t){var n=new lm("ServerSideEncryptionRule");if(void 0!==e.ApplyServerSideEncryptionByDefault&&null!==e.ApplyServerSideEncryptionByDefault){var r=function(e,t){var n=new lm("ServerSideEncryptionByDefault");if(void 0!==e.SSEAlgorithm&&null!==e.SSEAlgorithm){var r=new lm("ServerSideEncryption").addChildNode(new fm(e.SSEAlgorithm)).withName("SSEAlgorithm");n.addChildNode(r)}void 0!==e.KMSMasterKeyID&&null!==e.KMSMasterKeyID&&(r=new lm("SSEKMSKeyId").addChildNode(new fm(e.KMSMasterKeyID)).withName("KMSMasterKeyID"),n.addChildNode(r));return n}(e.ApplyServerSideEncryptionByDefault).withName("ApplyServerSideEncryptionByDefault");n.addChildNode(r)}if(void 0!==e.BucketKeyEnabled&&null!==e.BucketKeyEnabled){r=new lm("BucketKeyEnabled").addChildNode(new fm(String(e.BucketKeyEnabled))).withName("BucketKeyEnabled");n.addChildNode(r)}return n},Ib=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:Ab(e).withName("member")}))},Mb=function(e,t){var n=new lm("SourceSelectionCriteria");if(void 0!==e.SseKmsEncryptedObjects&&null!==e.SseKmsEncryptedObjects){var r=Bb(e.SseKmsEncryptedObjects).withName("SseKmsEncryptedObjects");n.addChildNode(r)}if(void 0!==e.ReplicaModifications&&null!==e.ReplicaModifications){r=function(e,t){var n=new lm("ReplicaModifications");if(void 0!==e.Status&&null!==e.Status){var r=new lm("ReplicaModificationsStatus").addChildNode(new fm(e.Status)).withName("Status");n.addChildNode(r)}return n}(e.ReplicaModifications).withName("ReplicaModifications");n.addChildNode(r)}return n},Rb=function(e,t){var n=new lm("SSE-KMS");if(void 0!==e.KeyId&&null!==e.KeyId){var r=new lm("SSEKMSKeyId").addChildNode(new fm(e.KeyId)).withName("KeyId");n.addChildNode(r)}return n},Bb=function(e,t){var n=new lm("SseKmsEncryptedObjects");if(void 0!==e.Status&&null!==e.Status){var r=new lm("SseKmsEncryptedObjectsStatus").addChildNode(new fm(e.Status)).withName("Status");n.addChildNode(r)}return n},Lb=function(e,t){return new lm("SSE-S3")},Db=function(e,t){var n=new lm("StorageClassAnalysis");if(void 0!==e.DataExport&&null!==e.DataExport){var r=jb(e.DataExport).withName("DataExport");n.addChildNode(r)}return n},jb=function(e,t){var n=new lm("StorageClassAnalysisDataExport");if(void 0!==e.OutputSchemaVersion&&null!==e.OutputSchemaVersion){var r=new lm("StorageClassAnalysisSchemaVersion").addChildNode(new fm(e.OutputSchemaVersion)).withName("OutputSchemaVersion");n.addChildNode(r)}if(void 0!==e.Destination&&null!==e.Destination){r=function(e,t){var n=new lm("AnalyticsExportDestination");if(void 0!==e.S3BucketDestination&&null!==e.S3BucketDestination){var r=ww(e.S3BucketDestination).withName("S3BucketDestination");n.addChildNode(r)}return n}(e.Destination).withName("Destination");n.addChildNode(r)}return n},zb=function(e,t){var n=new lm("Tag");if(void 0!==e.Key&&null!==e.Key){var r=new lm("ObjectKey").addChildNode(new fm(e.Key)).withName("Key");n.addChildNode(r)}if(void 0!==e.Value&&null!==e.Value){r=new lm("Value").addChildNode(new fm(e.Value)).withName("Value");n.addChildNode(r)}return n},Ub=function(e,t){var n=new lm("Tagging");if(void 0!==e.TagSet&&null!==e.TagSet){var r=Fb(e.TagSet),i=new lm("TagSet");r.map((function(e){i.addChildNode(e)})),n.addChildNode(i)}return n},Fb=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:zb(e).withName("Tag")}))},qb=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new lm("TargetGrant");if(void 0!==e.Grantee&&null!==e.Grantee){var r=Rw(e.Grantee).withName("Grantee");n.addChildNode(r)}void 0!==e.Permission&&null!==e.Permission&&(r=new lm("BucketLogsPermission").addChildNode(new fm(e.Permission)).withName("Permission"),n.addChildNode(r));return n}(e).withName("Grant")}))},Kb=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new lm("Tiering");if(void 0!==e.Days&&null!==e.Days){var r=new lm("IntelligentTieringDays").addChildNode(new fm(String(e.Days))).withName("Days");n.addChildNode(r)}void 0!==e.AccessTier&&null!==e.AccessTier&&(r=new lm("IntelligentTieringAccessTier").addChildNode(new fm(e.AccessTier)).withName("AccessTier"),n.addChildNode(r));return n}(e).withName("member")}))},Hb=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new lm("TopicConfiguration");if(void 0!==e.Id&&null!==e.Id){var r=new lm("NotificationId").addChildNode(new fm(e.Id)).withName("Id");n.addChildNode(r)}void 0!==e.TopicArn&&null!==e.TopicArn&&(r=new lm("TopicArn").addChildNode(new fm(e.TopicArn)).withName("Topic"),n.addChildNode(r));void 0!==e.Events&&null!==e.Events&&Aw(e.Events).map((function(e){e=e.withName("Event"),n.addChildNode(e)})),void 0!==e.Filter&&null!==e.Filter&&(r=rb(e.Filter).withName("Filter"),n.addChildNode(r));return n}(e).withName("member")}))},$b=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new lm("Transition");if(void 0!==e.Date&&null!==e.Date){var r=new lm("Date").addChildNode(new fm(e.Date.toISOString().split(".")[0]+"Z")).withName("Date");n.addChildNode(r)}void 0!==e.Days&&null!==e.Days&&(r=new lm("Days").addChildNode(new fm(String(e.Days))).withName("Days"),n.addChildNode(r));void 0!==e.StorageClass&&null!==e.StorageClass&&(r=new lm("TransitionStorageClass").addChildNode(new fm(e.StorageClass)).withName("StorageClass"),n.addChildNode(r));return n}(e).withName("member")}))},Vb=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n=new lm("MetadataEntry");if(void 0!==e.Name&&null!==e.Name){var r=new lm("MetadataKey").addChildNode(new fm(e.Name)).withName("Name");n.addChildNode(r)}void 0!==e.Value&&null!==e.Value&&(r=new lm("MetadataValue").addChildNode(new fm(e.Value)).withName("Value"),n.addChildNode(r));return n}(e).withName("MetadataEntry")}))},Gb=function(e,t){var n=new lm("VersioningConfiguration");if(void 0!==e.MFADelete&&null!==e.MFADelete){var r=new lm("MFADelete").addChildNode(new fm(e.MFADelete)).withName("MfaDelete");n.addChildNode(r)}if(void 0!==e.Status&&null!==e.Status){r=new lm("BucketVersioningStatus").addChildNode(new fm(e.Status)).withName("Status");n.addChildNode(r)}return n},Wb=function(e,t){var n=new lm("WebsiteConfiguration");if(void 0!==e.ErrorDocument&&null!==e.ErrorDocument){var r=function(e,t){var n=new lm("ErrorDocument");if(void 0!==e.Key&&null!==e.Key){var r=new lm("ObjectKey").addChildNode(new fm(e.Key)).withName("Key");n.addChildNode(r)}return n}(e.ErrorDocument).withName("ErrorDocument");n.addChildNode(r)}if(void 0!==e.IndexDocument&&null!==e.IndexDocument){r=function(e,t){var n=new lm("IndexDocument");if(void 0!==e.Suffix&&null!==e.Suffix){var r=new lm("Suffix").addChildNode(new fm(e.Suffix)).withName("Suffix");n.addChildNode(r)}return n}(e.IndexDocument).withName("IndexDocument");n.addChildNode(r)}if(void 0!==e.RedirectAllRequestsTo&&null!==e.RedirectAllRequestsTo){r=function(e,t){var n=new lm("RedirectAllRequestsTo");if(void 0!==e.HostName&&null!==e.HostName){var r=new lm("HostName").addChildNode(new fm(e.HostName)).withName("HostName");n.addChildNode(r)}void 0!==e.Protocol&&null!==e.Protocol&&(r=new lm("Protocol").addChildNode(new fm(e.Protocol)).withName("Protocol"),n.addChildNode(r));return n}(e.RedirectAllRequestsTo).withName("RedirectAllRequestsTo");n.addChildNode(r)}if(void 0!==e.RoutingRules&&null!==e.RoutingRules){var i=function(e,t){return e.filter((function(e){return null!=e})).map((function(e){return null===e?null:xb(e).withName("RoutingRule")}))}(e.RoutingRules),o=new lm("RoutingRules");i.map((function(e){o.addChildNode(e)})),n.addChildNode(o)}return n},Yb=function(e,t){var n={Prefix:void 0,Tags:void 0};return void 0!==e.Prefix&&(n.Prefix=e.Prefix),""===e.Tag&&(n.Tags=[]),void 0!==e.Tag&&(n.Tags=wE(Sl(e.Tag))),n},Qb=function(e,t){var n={Id:void 0,Filter:void 0,StorageClassAnalysis:void 0};return void 0!==e.Id&&(n.Id=e.Id),void 0!==e.Filter&&(n.Filter=Xb(e.Filter)),void 0!==e.StorageClassAnalysis&&(n.StorageClassAnalysis=mE(e.StorageClassAnalysis)),n},Jb=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:Qb(e)}))},Xb=function(e,t){return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:yE(e.Tag)}:void 0!==e.And?{And:Yb(e.And)}:{$unknown:Object.entries(e)[0]}},Zb=function(e,t){var n={Format:void 0,BucketAccountId:void 0,Bucket:void 0,Prefix:void 0};return void 0!==e.Format&&(n.Format=e.Format),void 0!==e.BucketAccountId&&(n.BucketAccountId=e.BucketAccountId),void 0!==e.Bucket&&(n.Bucket=e.Bucket),void 0!==e.Prefix&&(n.Prefix=e.Prefix),n},eS=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Name:void 0,CreationDate:void 0};return void 0!==e.Name&&(n.Name=e.Name),void 0!==e.CreationDate&&(n.CreationDate=new Date(e.CreationDate)),n}(e)}))},tS=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Prefix:void 0};return void 0!==e.Prefix&&(n.Prefix=e.Prefix),n}(e)}))},nS=function(e,t){var n={ETag:void 0,LastModified:void 0};return void 0!==e.ETag&&(n.ETag=e.ETag),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),n},rS=function(e,t){var n={ETag:void 0,LastModified:void 0};return void 0!==e.ETag&&(n.ETag=e.ETag),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),n},iS=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={ID:void 0,AllowedHeaders:void 0,AllowedMethods:void 0,AllowedOrigins:void 0,ExposeHeaders:void 0,MaxAgeSeconds:void 0};return void 0!==e.ID&&(n.ID=e.ID),""===e.AllowedHeader&&(n.AllowedHeaders=[]),void 0!==e.AllowedHeader&&(n.AllowedHeaders=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:e}))}(Sl(e.AllowedHeader))),""===e.AllowedMethod&&(n.AllowedMethods=[]),void 0!==e.AllowedMethod&&(n.AllowedMethods=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:e}))}(Sl(e.AllowedMethod))),""===e.AllowedOrigin&&(n.AllowedOrigins=[]),void 0!==e.AllowedOrigin&&(n.AllowedOrigins=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:e}))}(Sl(e.AllowedOrigin))),""===e.ExposeHeader&&(n.ExposeHeaders=[]),void 0!==e.ExposeHeader&&(n.ExposeHeaders=lS(Sl(e.ExposeHeader))),void 0!==e.MaxAgeSeconds&&(n.MaxAgeSeconds=parseInt(e.MaxAgeSeconds)),n}(e)}))},oS=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Key:void 0,VersionId:void 0,DeleteMarker:void 0,DeleteMarkerVersionId:void 0};return void 0!==e.Key&&(n.Key=e.Key),void 0!==e.VersionId&&(n.VersionId=e.VersionId),void 0!==e.DeleteMarker&&(n.DeleteMarker="true"==e.DeleteMarker),void 0!==e.DeleteMarkerVersionId&&(n.DeleteMarkerVersionId=e.DeleteMarkerVersionId),n}(e)}))},aS=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Owner:void 0,Key:void 0,VersionId:void 0,IsLatest:void 0,LastModified:void 0};return void 0!==e.Owner&&(n.Owner=GS(e.Owner)),void 0!==e.Key&&(n.Key=e.Key),void 0!==e.VersionId&&(n.VersionId=e.VersionId),void 0!==e.IsLatest&&(n.IsLatest="true"==e.IsLatest),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),n}(e)}))},sS=function(e,t){var n={ReplicaKmsKeyID:void 0};return void 0!==e.ReplicaKmsKeyID&&(n.ReplicaKmsKeyID=e.ReplicaKmsKeyID),n},uS=function(e,t){var n={Key:void 0};return void 0!==e.Key&&(n.Key=e.Key),n},cS=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Key:void 0,VersionId:void 0,Code:void 0,Message:void 0};return void 0!==e.Key&&(n.Key=e.Key),void 0!==e.VersionId&&(n.VersionId=e.VersionId),void 0!==e.Code&&(n.Code=e.Code),void 0!==e.Message&&(n.Message=e.Message),n}(e)}))},dS=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:e}))},lS=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:e}))},fS=function(e,t){var n={DisplayName:void 0,EmailAddress:void 0,ID:void 0,URI:void 0,Type:void 0};return void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),void 0!==e.EmailAddress&&(n.EmailAddress=e.EmailAddress),void 0!==e.ID&&(n.ID=e.ID),void 0!==e.URI&&(n.URI=e.URI),void 0!==e["xsi:type"]&&(n.Type=e["xsi:type"]),n},pS=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Grantee:void 0,Permission:void 0};return void 0!==e.Grantee&&(n.Grantee=fS(e.Grantee)),void 0!==e.Permission&&(n.Permission=e.Permission),n}(e)}))},hS=function(e,t){var n={Suffix:void 0};return void 0!==e.Suffix&&(n.Suffix=e.Suffix),n},vS=function(e,t){var n={ID:void 0,DisplayName:void 0};return void 0!==e.ID&&(n.ID=e.ID),void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),n},mS=function(e,t){var n={Id:void 0,Filter:void 0,Status:void 0,Tierings:void 0};return void 0!==e.Id&&(n.Id=e.Id),void 0!==e.Filter&&(n.Filter=yS(e.Filter)),void 0!==e.Status&&(n.Status=e.Status),""===e.Tiering&&(n.Tierings=[]),void 0!==e.Tiering&&(n.Tierings=SE(Sl(e.Tiering))),n},gS=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:mS(e)}))},yS=function(e,t){var n={Prefix:void 0,Tag:void 0,And:void 0};return void 0!==e.Prefix&&(n.Prefix=e.Prefix),void 0!==e.Tag&&(n.Tag=yE(e.Tag)),void 0!==e.And&&(n.And=function(e,t){var n={Prefix:void 0,Tags:void 0};return void 0!==e.Prefix&&(n.Prefix=e.Prefix),""===e.Tag&&(n.Tags=[]),void 0!==e.Tag&&(n.Tags=wE(Sl(e.Tag))),n}(e.And)),n},wS=function(e,t){var n={Destination:void 0,IsEnabled:void 0,Filter:void 0,Id:void 0,IncludedObjectVersions:void 0,OptionalFields:void 0,Schedule:void 0};return void 0!==e.Destination&&(n.Destination=SS(e.Destination)),void 0!==e.IsEnabled&&(n.IsEnabled="true"==e.IsEnabled),void 0!==e.Filter&&(n.Filter=ES(e.Filter)),void 0!==e.Id&&(n.Id=e.Id),void 0!==e.IncludedObjectVersions&&(n.IncludedObjectVersions=e.IncludedObjectVersions),""===e.OptionalFields&&(n.OptionalFields=[]),void 0!==e.OptionalFields&&void 0!==e.OptionalFields.Field&&(n.OptionalFields=kS(Sl(e.OptionalFields.Field))),void 0!==e.Schedule&&(n.Schedule=xS(e.Schedule)),n},bS=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:wS(e)}))},SS=function(e,t){var n={S3BucketDestination:void 0};return void 0!==e.S3BucketDestination&&(n.S3BucketDestination=CS(e.S3BucketDestination)),n},ES=function(e,t){var n={Prefix:void 0};return void 0!==e.Prefix&&(n.Prefix=e.Prefix),n},kS=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:e}))},CS=function(e,t){var n={AccountId:void 0,Bucket:void 0,Format:void 0,Prefix:void 0,Encryption:void 0};return void 0!==e.AccountId&&(n.AccountId=e.AccountId),void 0!==e.Bucket&&(n.Bucket=e.Bucket),void 0!==e.Format&&(n.Format=e.Format),void 0!==e.Prefix&&(n.Prefix=e.Prefix),void 0!==e.Encryption&&(n.Encryption=function(e,t){var n={SSES3:void 0,SSEKMS:void 0};return void 0!==e["SSE-S3"]&&(n.SSES3=vE(e["SSE-S3"])),void 0!==e["SSE-KMS"]&&(n.SSEKMS=pE(e["SSE-KMS"])),n}(e.Encryption)),n},xS=function(e,t){var n={Frequency:void 0};return void 0!==e.Frequency&&(n.Frequency=e.Frequency),n},TS=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Id:void 0,LambdaFunctionArn:void 0,Events:void 0,Filter:void 0};return void 0!==e.Id&&(n.Id=e.Id),void 0!==e.CloudFunction&&(n.LambdaFunctionArn=e.CloudFunction),""===e.Event&&(n.Events=[]),void 0!==e.Event&&(n.Events=dS(Sl(e.Event))),void 0!==e.Filter&&(n.Filter=US(e.Filter)),n}(e)}))},NS=function(e,t){var n={Expiration:void 0,ID:void 0,Prefix:void 0,Filter:void 0,Status:void 0,Transitions:void 0,NoncurrentVersionTransitions:void 0,NoncurrentVersionExpiration:void 0,AbortIncompleteMultipartUpload:void 0};return void 0!==e.Expiration&&(n.Expiration=function(e,t){var n={Date:void 0,Days:void 0,ExpiredObjectDeleteMarker:void 0};return void 0!==e.Date&&(n.Date=new Date(e.Date)),void 0!==e.Days&&(n.Days=parseInt(e.Days)),void 0!==e.ExpiredObjectDeleteMarker&&(n.ExpiredObjectDeleteMarker="true"==e.ExpiredObjectDeleteMarker),n}(e.Expiration)),void 0!==e.ID&&(n.ID=e.ID),void 0!==e.Prefix&&(n.Prefix=e.Prefix),void 0!==e.Filter&&(n.Filter=_S(e.Filter)),void 0!==e.Status&&(n.Status=e.Status),""===e.Transition&&(n.Transitions=[]),void 0!==e.Transition&&(n.Transitions=kE(Sl(e.Transition))),""===e.NoncurrentVersionTransition&&(n.NoncurrentVersionTransitions=[]),void 0!==e.NoncurrentVersionTransition&&(n.NoncurrentVersionTransitions=zS(Sl(e.NoncurrentVersionTransition))),void 0!==e.NoncurrentVersionExpiration&&(n.NoncurrentVersionExpiration=jS(e.NoncurrentVersionExpiration)),void 0!==e.AbortIncompleteMultipartUpload&&(n.AbortIncompleteMultipartUpload=function(e,t){var n={DaysAfterInitiation:void 0};return void 0!==e.DaysAfterInitiation&&(n.DaysAfterInitiation=parseInt(e.DaysAfterInitiation)),n}(e.AbortIncompleteMultipartUpload)),n},OS=function(e,t){var n={Prefix:void 0,Tags:void 0};return void 0!==e.Prefix&&(n.Prefix=e.Prefix),""===e.Tag&&(n.Tags=[]),void 0!==e.Tag&&(n.Tags=wE(Sl(e.Tag))),n},_S=function(e,t){return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:yE(e.Tag)}:void 0!==e.And?{And:OS(e.And)}:{$unknown:Object.entries(e)[0]}},PS=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:NS(e)}))},AS=function(e,t){var n={TargetBucket:void 0,TargetGrants:void 0,TargetPrefix:void 0};return void 0!==e.TargetBucket&&(n.TargetBucket=e.TargetBucket),""===e.TargetGrants&&(n.TargetGrants=[]),void 0!==e.TargetGrants&&void 0!==e.TargetGrants.Grant&&(n.TargetGrants=bE(Sl(e.TargetGrants.Grant))),void 0!==e.TargetPrefix&&(n.TargetPrefix=e.TargetPrefix),n},IS=function(e,t){var n={Status:void 0,EventThreshold:void 0};return void 0!==e.Status&&(n.Status=e.Status),void 0!==e.EventThreshold&&(n.EventThreshold=sE(e.EventThreshold)),n},MS=function(e,t){var n={Prefix:void 0,Tags:void 0};return void 0!==e.Prefix&&(n.Prefix=e.Prefix),""===e.Tag&&(n.Tags=[]),void 0!==e.Tag&&(n.Tags=wE(Sl(e.Tag))),n},RS=function(e,t){var n={Id:void 0,Filter:void 0};return void 0!==e.Id&&(n.Id=e.Id),void 0!==e.Filter&&(n.Filter=LS(e.Filter)),n},BS=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:RS(e)}))},LS=function(e,t){return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:yE(e.Tag)}:void 0!==e.And?{And:MS(e.And)}:{$unknown:Object.entries(e)[0]}},DS=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={UploadId:void 0,Key:void 0,Initiated:void 0,StorageClass:void 0,Owner:void 0,Initiator:void 0};return void 0!==e.UploadId&&(n.UploadId=e.UploadId),void 0!==e.Key&&(n.Key=e.Key),void 0!==e.Initiated&&(n.Initiated=new Date(e.Initiated)),void 0!==e.StorageClass&&(n.StorageClass=e.StorageClass),void 0!==e.Owner&&(n.Owner=GS(e.Owner)),void 0!==e.Initiator&&(n.Initiator=vS(e.Initiator)),n}(e)}))},jS=function(e,t){var n={NoncurrentDays:void 0};return void 0!==e.NoncurrentDays&&(n.NoncurrentDays=parseInt(e.NoncurrentDays)),n},zS=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={NoncurrentDays:void 0,StorageClass:void 0};return void 0!==e.NoncurrentDays&&(n.NoncurrentDays=parseInt(e.NoncurrentDays)),void 0!==e.StorageClass&&(n.StorageClass=e.StorageClass),n}(e)}))},US=function(e,t){var n={Key:void 0};return void 0!==e.S3Key&&(n.Key=cE(e.S3Key)),n},FS=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Key:void 0,LastModified:void 0,ETag:void 0,Size:void 0,StorageClass:void 0,Owner:void 0};return void 0!==e.Key&&(n.Key=e.Key),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(n.ETag=e.ETag),void 0!==e.Size&&(n.Size=parseInt(e.Size)),void 0!==e.StorageClass&&(n.StorageClass=e.StorageClass),void 0!==e.Owner&&(n.Owner=GS(e.Owner)),n}(e)}))},qS=function(e,t){var n={ObjectLockEnabled:void 0,Rule:void 0};return void 0!==e.ObjectLockEnabled&&(n.ObjectLockEnabled=e.ObjectLockEnabled),void 0!==e.Rule&&(n.Rule=$S(e.Rule)),n},KS=function(e,t){var n={Status:void 0};return void 0!==e.Status&&(n.Status=e.Status),n},HS=function(e,t){var n={Mode:void 0,RetainUntilDate:void 0};return void 0!==e.Mode&&(n.Mode=e.Mode),void 0!==e.RetainUntilDate&&(n.RetainUntilDate=new Date(e.RetainUntilDate)),n},$S=function(e,t){var n={DefaultRetention:void 0};return void 0!==e.DefaultRetention&&(n.DefaultRetention=function(e,t){var n={Mode:void 0,Days:void 0,Years:void 0};return void 0!==e.Mode&&(n.Mode=e.Mode),void 0!==e.Days&&(n.Days=parseInt(e.Days)),void 0!==e.Years&&(n.Years=parseInt(e.Years)),n}(e.DefaultRetention)),n},VS=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={ETag:void 0,Size:void 0,StorageClass:void 0,Key:void 0,VersionId:void 0,IsLatest:void 0,LastModified:void 0,Owner:void 0};return void 0!==e.ETag&&(n.ETag=e.ETag),void 0!==e.Size&&(n.Size=parseInt(e.Size)),void 0!==e.StorageClass&&(n.StorageClass=e.StorageClass),void 0!==e.Key&&(n.Key=e.Key),void 0!==e.VersionId&&(n.VersionId=e.VersionId),void 0!==e.IsLatest&&(n.IsLatest="true"==e.IsLatest),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),void 0!==e.Owner&&(n.Owner=GS(e.Owner)),n}(e)}))},GS=function(e,t){var n={DisplayName:void 0,ID:void 0};return void 0!==e.DisplayName&&(n.DisplayName=e.DisplayName),void 0!==e.ID&&(n.ID=e.ID),n},WS=function(e,t){var n={Rules:void 0};return""===e.Rule&&(n.Rules=[]),void 0!==e.Rule&&(n.Rules=YS(Sl(e.Rule))),n},YS=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={ObjectOwnership:void 0};return void 0!==e.ObjectOwnership&&(n.ObjectOwnership=e.ObjectOwnership),n}(e)}))},QS=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={PartNumber:void 0,LastModified:void 0,ETag:void 0,Size:void 0};return void 0!==e.PartNumber&&(n.PartNumber=parseInt(e.PartNumber)),void 0!==e.LastModified&&(n.LastModified=new Date(e.LastModified)),void 0!==e.ETag&&(n.ETag=e.ETag),void 0!==e.Size&&(n.Size=parseInt(e.Size)),n}(e)}))},JS=function(e,t){var n={IsPublic:void 0};return void 0!==e.IsPublic&&(n.IsPublic="true"==e.IsPublic),n},XS=function(e,t){var n={BlockPublicAcls:void 0,IgnorePublicAcls:void 0,BlockPublicPolicy:void 0,RestrictPublicBuckets:void 0};return void 0!==e.BlockPublicAcls&&(n.BlockPublicAcls="true"==e.BlockPublicAcls),void 0!==e.IgnorePublicAcls&&(n.IgnorePublicAcls="true"==e.IgnorePublicAcls),void 0!==e.BlockPublicPolicy&&(n.BlockPublicPolicy="true"==e.BlockPublicPolicy),void 0!==e.RestrictPublicBuckets&&(n.RestrictPublicBuckets="true"==e.RestrictPublicBuckets),n},ZS=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Id:void 0,QueueArn:void 0,Events:void 0,Filter:void 0};return void 0!==e.Id&&(n.Id=e.Id),void 0!==e.Queue&&(n.QueueArn=e.Queue),""===e.Event&&(n.Events=[]),void 0!==e.Event&&(n.Events=dS(Sl(e.Event))),void 0!==e.Filter&&(n.Filter=US(e.Filter)),n}(e)}))},eE=function(e,t){var n={HostName:void 0,Protocol:void 0};return void 0!==e.HostName&&(n.HostName=e.HostName),void 0!==e.Protocol&&(n.Protocol=e.Protocol),n},tE=function(e,t){var n={Role:void 0,Rules:void 0};return void 0!==e.Role&&(n.Role=e.Role),""===e.Rule&&(n.Rules=[]),void 0!==e.Rule&&(n.Rules=oE(Sl(e.Rule))),n},nE=function(e,t){var n={ID:void 0,Priority:void 0,Prefix:void 0,Filter:void 0,Status:void 0,SourceSelectionCriteria:void 0,ExistingObjectReplication:void 0,Destination:void 0,DeleteMarkerReplication:void 0};return void 0!==e.ID&&(n.ID=e.ID),void 0!==e.Priority&&(n.Priority=parseInt(e.Priority)),void 0!==e.Prefix&&(n.Prefix=e.Prefix),void 0!==e.Filter&&(n.Filter=iE(e.Filter)),void 0!==e.Status&&(n.Status=e.Status),void 0!==e.SourceSelectionCriteria&&(n.SourceSelectionCriteria=fE(e.SourceSelectionCriteria)),void 0!==e.ExistingObjectReplication&&(n.ExistingObjectReplication=function(e,t){var n={Status:void 0};return void 0!==e.Status&&(n.Status=e.Status),n}(e.ExistingObjectReplication)),void 0!==e.Destination&&(n.Destination=function(e,t){var n={Bucket:void 0,Account:void 0,StorageClass:void 0,AccessControlTranslation:void 0,EncryptionConfiguration:void 0,ReplicationTime:void 0,Metrics:void 0};return void 0!==e.Bucket&&(n.Bucket=e.Bucket),void 0!==e.Account&&(n.Account=e.Account),void 0!==e.StorageClass&&(n.StorageClass=e.StorageClass),void 0!==e.AccessControlTranslation&&(n.AccessControlTranslation=function(e,t){var n={Owner:void 0};return void 0!==e.Owner&&(n.Owner=e.Owner),n}(e.AccessControlTranslation)),void 0!==e.EncryptionConfiguration&&(n.EncryptionConfiguration=sS(e.EncryptionConfiguration)),void 0!==e.ReplicationTime&&(n.ReplicationTime=aE(e.ReplicationTime)),void 0!==e.Metrics&&(n.Metrics=IS(e.Metrics)),n}(e.Destination)),void 0!==e.DeleteMarkerReplication&&(n.DeleteMarkerReplication=function(e,t){var n={Status:void 0};return void 0!==e.Status&&(n.Status=e.Status),n}(e.DeleteMarkerReplication)),n},rE=function(e,t){var n={Prefix:void 0,Tags:void 0};return void 0!==e.Prefix&&(n.Prefix=e.Prefix),""===e.Tag&&(n.Tags=[]),void 0!==e.Tag&&(n.Tags=wE(Sl(e.Tag))),n},iE=function(e,t){return void 0!==e.Prefix?{Prefix:e.Prefix}:void 0!==e.Tag?{Tag:yE(e.Tag)}:void 0!==e.And?{And:rE(e.And)}:{$unknown:Object.entries(e)[0]}},oE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:nE(e)}))},aE=function(e,t){var n={Status:void 0,Time:void 0};return void 0!==e.Status&&(n.Status=e.Status),void 0!==e.Time&&(n.Time=sE(e.Time)),n},sE=function(e,t){var n={Minutes:void 0};return void 0!==e.Minutes&&(n.Minutes=parseInt(e.Minutes)),n},uE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Condition:void 0,Redirect:void 0};return void 0!==e.Condition&&(n.Condition=function(e,t){var n={HttpErrorCodeReturnedEquals:void 0,KeyPrefixEquals:void 0};return void 0!==e.HttpErrorCodeReturnedEquals&&(n.HttpErrorCodeReturnedEquals=e.HttpErrorCodeReturnedEquals),void 0!==e.KeyPrefixEquals&&(n.KeyPrefixEquals=e.KeyPrefixEquals),n}(e.Condition)),void 0!==e.Redirect&&(n.Redirect=function(e,t){var n={HostName:void 0,HttpRedirectCode:void 0,Protocol:void 0,ReplaceKeyPrefixWith:void 0,ReplaceKeyWith:void 0};return void 0!==e.HostName&&(n.HostName=e.HostName),void 0!==e.HttpRedirectCode&&(n.HttpRedirectCode=e.HttpRedirectCode),void 0!==e.Protocol&&(n.Protocol=e.Protocol),void 0!==e.ReplaceKeyPrefixWith&&(n.ReplaceKeyPrefixWith=e.ReplaceKeyPrefixWith),void 0!==e.ReplaceKeyWith&&(n.ReplaceKeyWith=e.ReplaceKeyWith),n}(e.Redirect)),n}(e)}))},cE=function(e,t){var n={FilterRules:void 0};return""===e.FilterRule&&(n.FilterRules=[]),void 0!==e.FilterRule&&(n.FilterRules=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Name:void 0,Value:void 0};return void 0!==e.Name&&(n.Name=e.Name),void 0!==e.Value&&(n.Value=e.Value),n}(e)}))}(Sl(e.FilterRule))),n},dE=function(e,t){var n={Rules:void 0};return""===e.Rule&&(n.Rules=[]),void 0!==e.Rule&&(n.Rules=lE(Sl(e.Rule))),n},lE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={ApplyServerSideEncryptionByDefault:void 0,BucketKeyEnabled:void 0};return void 0!==e.ApplyServerSideEncryptionByDefault&&(n.ApplyServerSideEncryptionByDefault=function(e,t){var n={SSEAlgorithm:void 0,KMSMasterKeyID:void 0};return void 0!==e.SSEAlgorithm&&(n.SSEAlgorithm=e.SSEAlgorithm),void 0!==e.KMSMasterKeyID&&(n.KMSMasterKeyID=e.KMSMasterKeyID),n}(e.ApplyServerSideEncryptionByDefault)),void 0!==e.BucketKeyEnabled&&(n.BucketKeyEnabled="true"==e.BucketKeyEnabled),n}(e)}))},fE=function(e,t){var n={SseKmsEncryptedObjects:void 0,ReplicaModifications:void 0};return void 0!==e.SseKmsEncryptedObjects&&(n.SseKmsEncryptedObjects=hE(e.SseKmsEncryptedObjects)),void 0!==e.ReplicaModifications&&(n.ReplicaModifications=function(e,t){var n={Status:void 0};return void 0!==e.Status&&(n.Status=e.Status),n}(e.ReplicaModifications)),n},pE=function(e,t){var n={KeyId:void 0};return void 0!==e.KeyId&&(n.KeyId=e.KeyId),n},hE=function(e,t){var n={Status:void 0};return void 0!==e.Status&&(n.Status=e.Status),n},vE=function(e,t){return{}},mE=function(e,t){var n={DataExport:void 0};return void 0!==e.DataExport&&(n.DataExport=gE(e.DataExport)),n},gE=function(e,t){var n={OutputSchemaVersion:void 0,Destination:void 0};return void 0!==e.OutputSchemaVersion&&(n.OutputSchemaVersion=e.OutputSchemaVersion),void 0!==e.Destination&&(n.Destination=function(e,t){var n={S3BucketDestination:void 0};return void 0!==e.S3BucketDestination&&(n.S3BucketDestination=Zb(e.S3BucketDestination)),n}(e.Destination)),n},yE=function(e,t){var n={Key:void 0,Value:void 0};return void 0!==e.Key&&(n.Key=e.Key),void 0!==e.Value&&(n.Value=e.Value),n},wE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:yE(e)}))},bE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Grantee:void 0,Permission:void 0};return void 0!==e.Grantee&&(n.Grantee=fS(e.Grantee)),void 0!==e.Permission&&(n.Permission=e.Permission),n}(e)}))},SE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Days:void 0,AccessTier:void 0};return void 0!==e.Days&&(n.Days=parseInt(e.Days)),void 0!==e.AccessTier&&(n.AccessTier=e.AccessTier),n}(e)}))},EE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Id:void 0,TopicArn:void 0,Events:void 0,Filter:void 0};return void 0!==e.Id&&(n.Id=e.Id),void 0!==e.Topic&&(n.TopicArn=e.Topic),""===e.Event&&(n.Events=[]),void 0!==e.Event&&(n.Events=dS(Sl(e.Event))),void 0!==e.Filter&&(n.Filter=US(e.Filter)),n}(e)}))},kE=function(e,t){return(e||[]).filter((function(e){return null!=e})).map((function(e){return null===e?null:function(e,t){var n={Date:void 0,Days:void 0,StorageClass:void 0};return void 0!==e.Date&&(n.Date=new Date(e.Date)),void 0!==e.Days&&(n.Days=parseInt(e.Days)),void 0!==e.StorageClass&&(n.StorageClass=e.StorageClass),n}(e)}))},CE=function(e){var t;return{httpStatusCode:e.statusCode,requestId:null!==(t=e.headers["x-amzn-requestid"])&&void 0!==t?t:e.headers["x-amzn-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},xE=function(e,t){return void 0===e&&(e=new Uint8Array),e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array)},TE=function(e,t){return xE(e,t).then((function(e){return t.utf8Encoder(e)}))},NE=function(e){return!(null==e||""===e||Object.getOwnPropertyNames(e).includes("length")&&0==e.length||Object.getOwnPropertyNames(e).includes("size")&&0==e.size)},OE=function(e,t){return TE(e,t).then((function(e){if(e.length){var t=vg.parse(e,{attributeNamePrefix:"",ignoreAttributes:!1,parseNodeValue:!1,trimValues:!1,tagValueProcessor:function(e,t){return""===e.trim()?"":e.replace(/&amp;/g,"&").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<")}}),n=Object.keys(t)[0],r=t[n];return r["#text"]&&(r[n]=r["#text"],delete r["#text"]),El(r)}return{}}))},_E=function(e,t){return void 0!==t.Code?t.Code:404==e.statusCode?"NotFound":""},PE={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},AE={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function IE(e,t,n){return{applyToStack:function(r){r.add(function(e,t){return function(n,r){return function(r){return Ds(void 0,void 0,void 0,(function(){var i,o;return js(this,(function(a){switch(a.label){case 0:return[4,n(r)];case 1:return i=a.sent().response,[4,t(i,e)];case 2:return o=a.sent(),[2,{response:i,output:o}]}}))}))}}}(e,n),PE),r.add(function(e,t){return function(n,r){return function(r){return Ds(void 0,void 0,void 0,(function(){var i;return js(this,(function(o){switch(o.label){case 0:return[4,t(r.input,e)];case 1:return i=o.sent(),[2,n(Bs(Bs({},r),{request:i}))]}}))}))}}}(e,t),AE)}}}var ME=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"AbortMultipartUploadCommand",inputFilterSensitiveLog:_l.filterSensitiveLog,outputFilterSensitiveLog:Ol.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs(Bs({},NE(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",bl(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return bl(e)})).join("/")),o=Bs({"x-id":"AbortMultipartUpload"},void 0!==e.UploadId&&{uploadId:e.UploadId}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"DELETE",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,mg(e,t)]:(n={$metadata:CE(e),RequestCharged:void 0},void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),RE=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(Bd(t)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"CompleteMultipartUploadCommand",inputFilterSensitiveLog:Ul.filterSensitiveLog,outputFilterSensitiveLog:Dl.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs(Bs({"content-type":"application/xml"},NE(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",bl(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return bl(e)})).join("/")),o=Bs({"x-id":"CompleteMultipartUpload"},void 0!==e.UploadId&&{uploadId:e.UploadId}),void 0!==e.MultipartUpload&&(s=Ew(e.MultipartUpload),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"POST",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,gg(e,t)]:(n={$metadata:CE(e),Bucket:void 0,BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,Key:void 0,Location:void 0,RequestCharged:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,OE(e.body,t)]);case 1:return void 0!==(r=i.sent()).Bucket&&(n.Bucket=r.Bucket),void 0!==r.ETag&&(n.ETag=r.ETag),void 0!==r.Key&&(n.Key=r.Key),void 0!==r.Location&&(n.Location=r.Location),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl);var BE={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},LE=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(r){return Ds(t,void 0,void 0,(function(){var t,i,o,a,s,u,c,d,l,f,p,h,v,m,g,y,w;return js(this,(function(b){switch(b.label){case 0:t=Bs({},r.input),i=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}],b.label=1;case 1:b.trys.push([1,6,7,8]),o=zs(i),a=o.next(),b.label=2;case 2:return a.done?[3,5]:(s=a.value,(u=t[s.target])?(c=ArrayBuffer.isView(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):"string"==typeof u?e.utf8Decoder(u):new Uint8Array(u),d=e.base64Encoder(c),(l=new e.md5).update(c),f=[Bs({},t)],(w={})[s.target]=d,p=s.hash,v=(h=e).base64Encoder,[4,l.digest()]):[3,4]);case 3:t=Bs.apply(void 0,f.concat([(w[p]=v.apply(h,[b.sent()]),w)])),b.label=4;case 4:return a=o.next(),[3,2];case 5:return[3,8];case 6:return m=b.sent(),g={error:m},[3,8];case 7:try{a&&!a.done&&(y=o.return)&&y.call(o)}finally{if(g)throw g.error}return[7];case 8:return[2,n(Bs(Bs({},r),{input:t}))]}}))}))}}}(e),BE)}}},DE=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(Bd(t)),this.middlewareStack.use(LE(t)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"CopyObjectCommand",inputFilterSensitiveLog:Kl.filterSensitiveLog,outputFilterSensitiveLog:ql.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs({},NE(e.ACL)&&{"x-amz-acl":e.ACL}),NE(e.CacheControl)&&{"cache-control":e.CacheControl}),NE(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),NE(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),NE(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),NE(e.ContentType)&&{"content-type":e.ContentType}),NE(e.CopySource)&&{"x-amz-copy-source":e.CopySource}),NE(e.CopySourceIfMatch)&&{"x-amz-copy-source-if-match":e.CopySourceIfMatch}),NE(e.CopySourceIfModifiedSince)&&{"x-amz-copy-source-if-modified-since":Tl(e.CopySourceIfModifiedSince).toString()}),NE(e.CopySourceIfNoneMatch)&&{"x-amz-copy-source-if-none-match":e.CopySourceIfNoneMatch}),NE(e.CopySourceIfUnmodifiedSince)&&{"x-amz-copy-source-if-unmodified-since":Tl(e.CopySourceIfUnmodifiedSince).toString()}),NE(e.Expires)&&{expires:Tl(e.Expires).toString()}),NE(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),NE(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),NE(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),NE(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),NE(e.MetadataDirective)&&{"x-amz-metadata-directive":e.MetadataDirective}),NE(e.TaggingDirective)&&{"x-amz-tagging-directive":e.TaggingDirective}),NE(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),NE(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),NE(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),NE(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),NE(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),NE(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),NE(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),NE(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),NE(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),NE(e.CopySourceSSECustomerAlgorithm)&&{"x-amz-copy-source-server-side-encryption-customer-algorithm":e.CopySourceSSECustomerAlgorithm}),NE(e.CopySourceSSECustomerKey)&&{"x-amz-copy-source-server-side-encryption-customer-key":e.CopySourceSSECustomerKey}),NE(e.CopySourceSSECustomerKeyMD5)&&{"x-amz-copy-source-server-side-encryption-customer-key-md5":e.CopySourceSSECustomerKeyMD5}),NE(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),NE(e.Tagging)&&{"x-amz-tagging":e.Tagging}),NE(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),NE(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),NE(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),NE(e.ExpectedSourceBucketOwner)&&{"x-amz-source-expected-bucket-owner":e.ExpectedSourceBucketOwner}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce((function(t,n){var r;return Bs(Bs({},t),((r={})["x-amz-meta-"+n.toLowerCase()]=e.Metadata[n],r))}),{})),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",bl(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return bl(e)})).join("/")),o={"x-id":"CopyObject"},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"PUT",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,yg(e,t)]:(n={$metadata:CE(e),BucketKeyEnabled:void 0,CopyObjectResult:void 0,CopySourceVersionId:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-copy-source-version-id"]&&(n.CopySourceVersionId=e.headers["x-amz-copy-source-version-id"]),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-context"]&&(n.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,OE(e.body,t)]);case 1:return r=i.sent(),n.CopyObjectResult=nS(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl);var jE={step:"initialize",tags:["LOCATION_CONSTRAINT","CREATE_BUCKET_CONFIGURATION"],name:"locationConstraintMiddleware",override:!0},zE=function(e){return{applyToStack:function(t){t.add(function(e){var t=this;return function(n){return function(r){return Ds(t,void 0,void 0,(function(){var t,i;return js(this,(function(o){switch(o.label){case 0:return t=r.input.CreateBucketConfiguration,[4,e.region()];case 1:return i=o.sent(),t&&t.LocationConstraint||(r=Bs(Bs({},r),{input:Bs(Bs({},r.input),{CreateBucketConfiguration:"us-east-1"===i?void 0:{LocationConstraint:i}})})),[2,n(r)]}}))}))}}}(e),jE)}}},UE=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(zE(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"CreateBucketCommand",inputFilterSensitiveLog:Yl.filterSensitiveLog,outputFilterSensitiveLog:Gl.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return js(this,(function(f){switch(f.label){case 0:if(n=Bs(Bs(Bs(Bs(Bs(Bs(Bs({"content-type":"application/xml"},NE(e.ACL)&&{"x-amz-acl":e.ACL}),NE(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),NE(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),NE(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),NE(e.GrantWrite)&&{"x-amz-grant-write":e.GrantWrite}),NE(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),NE(e.ObjectLockEnabledForBucket)&&{"x-amz-bucket-object-lock-enabled":e.ObjectLockEnabledForBucket.toString()}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),void 0!==e.CreateBucketConfiguration&&(a=Nw(e.CreateBucketConfiguration),o='<?xml version="1.0" encoding="UTF-8"?>',a.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),o+=a.toString()),[4,t.endpoint()];case 1:return s=f.sent(),u=s.hostname,c=s.protocol,d=void 0===c?"https":c,l=s.port,[2,new nc({protocol:d,hostname:u,port:l,method:"PUT",headers:n,path:r,body:o})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,wg(e,t)]:(n={$metadata:CE(e),Location:void 0},void 0!==e.headers.location&&(n.Location=e.headers.location),[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),FE=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(LE(t)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"CreateMultipartUploadCommand",inputFilterSensitiveLog:Jl.filterSensitiveLog,outputFilterSensitiveLog:Ql.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs({},NE(e.ACL)&&{"x-amz-acl":e.ACL}),NE(e.CacheControl)&&{"cache-control":e.CacheControl}),NE(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),NE(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),NE(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),NE(e.ContentType)&&{"content-type":e.ContentType}),NE(e.Expires)&&{expires:Tl(e.Expires).toString()}),NE(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),NE(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),NE(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),NE(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),NE(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),NE(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),NE(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),NE(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),NE(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),NE(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),NE(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),NE(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),NE(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),NE(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),NE(e.Tagging)&&{"x-amz-tagging":e.Tagging}),NE(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),NE(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),NE(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce((function(t,n){var r;return Bs(Bs({},t),((r={})["x-amz-meta-"+n.toLowerCase()]=e.Metadata[n],r))}),{})),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",bl(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return bl(e)})).join("/")),o={uploads:"","x-id":"CreateMultipartUpload"},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"POST",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,bg(e,t)]:(n={$metadata:CE(e),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,BucketKeyEnabled:void 0,Key:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,UploadId:void 0},void 0!==e.headers["x-amz-abort-date"]&&(n.AbortDate=new Date(e.headers["x-amz-abort-date"])),void 0!==e.headers["x-amz-abort-rule-id"]&&(n.AbortRuleId=e.headers["x-amz-abort-rule-id"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-context"]&&(n.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,OE(e.body,t)]);case 1:return void 0!==(r=i.sent()).Bucket&&(n.Bucket=r.Bucket),void 0!==r.Key&&(n.Key=r.Key),void 0!==r.UploadId&&(n.UploadId=r.UploadId),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),qE=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketAnalyticsConfigurationCommand",inputFilterSensitiveLog:Zl.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o=Bs({analytics:""},void 0!==e.Id&&{id:e.Id}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"DELETE",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,Eg(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),KE=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketCommand",inputFilterSensitiveLog:Xl.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return js(this,(function(d){switch(d.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),[4,t.endpoint()];case 1:return o=d.sent(),a=o.hostname,s=o.protocol,u=void 0===s?"https":s,c=o.port,[2,new nc({protocol:u,hostname:a,port:c,method:"DELETE",headers:n,path:r,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,Sg(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),HE=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketCorsCommand",inputFilterSensitiveLog:ef.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={cors:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"DELETE",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,kg(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),$E=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketEncryptionCommand",inputFilterSensitiveLog:tf.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={encryption:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"DELETE",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,Cg(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),VE=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketIntelligentTieringConfigurationCommand",inputFilterSensitiveLog:nf.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n={},r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o=Bs({"intelligent-tiering":""},void 0!==e.Id&&{id:e.Id}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"DELETE",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,xg(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),GE=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketInventoryConfigurationCommand",inputFilterSensitiveLog:rf.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o=Bs({inventory:""},void 0!==e.Id&&{id:e.Id}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"DELETE",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,Tg(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),WE=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketLifecycleCommand",inputFilterSensitiveLog:of.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={lifecycle:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"DELETE",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,Ng(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),YE=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketMetricsConfigurationCommand",inputFilterSensitiveLog:af.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o=Bs({metrics:""},void 0!==e.Id&&{id:e.Id}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"DELETE",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,Og(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),QE=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketOwnershipControlsCommand",inputFilterSensitiveLog:sf.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={ownershipControls:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"DELETE",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,_g(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),JE=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketPolicyCommand",inputFilterSensitiveLog:uf.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={policy:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"DELETE",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,Pg(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),XE=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketReplicationCommand",inputFilterSensitiveLog:cf.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={replication:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"DELETE",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,Ag(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),ZE=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketTaggingCommand",inputFilterSensitiveLog:df.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={tagging:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"DELETE",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,Ig(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),ek=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteBucketWebsiteCommand",inputFilterSensitiveLog:lf.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={website:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"DELETE",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,Mg(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),tk=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteObjectCommand",inputFilterSensitiveLog:pf.filterSensitiveLog,outputFilterSensitiveLog:ff.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs(Bs(Bs(Bs({},NE(e.MFA)&&{"x-amz-mfa":e.MFA}),NE(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),NE(e.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":e.BypassGovernanceRetention.toString()}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",bl(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return bl(e)})).join("/")),o=Bs({"x-id":"DeleteObject"},void 0!==e.VersionId&&{versionId:e.VersionId}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"DELETE",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,Rg(e,t)]:(n={$metadata:CE(e),DeleteMarker:void 0,RequestCharged:void 0,VersionId:void 0},void 0!==e.headers["x-amz-delete-marker"]&&(n.DeleteMarker="true"===e.headers["x-amz-delete-marker"]),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),nk=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteObjectTaggingCommand",inputFilterSensitiveLog:Sf.filterSensitiveLog,outputFilterSensitiveLog:bf.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",bl(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return bl(e)})).join("/")),o=Bs({tagging:""},void 0!==e.VersionId&&{versionId:e.VersionId}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"DELETE",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,Lg(e,t)]:(n={$metadata:CE(e),VersionId:void 0},void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl);function rk(e){var t=this;return function(n){return function(r){return Ds(t,void 0,void 0,(function(){var t,i,o,a,s,u,c,d,l,f,p,h;return js(this,(function(v){switch(v.label){case 0:return t=r.request,nc.isInstance(t)?(i=t.body,function(e,t){var n,r;e=e.toLowerCase();try{for(var i=zs(Object.keys(t)),o=i.next();!o.done;o=i.next()){if(e===o.value.toLowerCase())return!0}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return!1}("Content-MD5",o=t.headers)?[3,2]:(a=void 0,void 0===i||"string"==typeof i||ArrayBuffer.isView(i)||Yd(i)?((s=new e.md5).update(i||""),a=s.digest()):a=e.streamHasher(e.md5,i),u=[Bs({},t)],p={},c=[Bs({},o)],h={},d="Content-MD5",f=(l=e).base64Encoder,[4,a])):[3,2];case 1:t=Bs.apply(void 0,u.concat([(p.headers=Bs.apply(void 0,c.concat([(h[d]=f.apply(l,[v.sent()]),h)])),p)])),v.label=2;case 2:return[2,n(Bs(Bs({},r),{request:t}))]}}))}))}}}var ik={name:"applyMd5BodyChecksumMiddleware",step:"build",tags:["SET_CONTENT_MD5","BODY_CHECKSUM"],override:!0},ok=function(e){return{applyToStack:function(t){t.add(rk(e),ik)}}};var ak,sk,uk,ck,dk,lk,fk,pk,hk,vk,mk,gk,yk,wk,bk,Sk,Ek,kk,Ck,xk,Tk,Nk,Ok,_k,Pk,Ak,Ik,Mk,Rk,Bk,Lk,Dk,jk,zk,Uk,Fk,qk=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t)),this.middlewareStack.use(ok(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeleteObjectsCommand",inputFilterSensitiveLog:wf.filterSensitiveLog,outputFilterSensitiveLog:mf.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs(Bs(Bs(Bs({"content-type":"application/xml"},NE(e.MFA)&&{"x-amz-mfa":e.MFA}),NE(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),NE(e.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":e.BypassGovernanceRetention.toString()}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={delete:"","x-id":"DeleteObjects"},void 0!==e.Delete&&(s=Ow(e.Delete),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"POST",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Bg(e,t)]:(n={$metadata:CE(e),Deleted:void 0,Errors:void 0,RequestCharged:void 0},void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,OE(e.body,t)]);case 1:return""===(r=i.sent()).Deleted&&(n.Deleted=[]),void 0!==r.Deleted&&(n.Deleted=oS(Sl(r.Deleted))),""===r.Error&&(n.Errors=[]),void 0!==r.Error&&(n.Errors=cS(Sl(r.Error))),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),Kk=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"DeletePublicAccessBlockCommand",inputFilterSensitiveLog:Ef.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={publicAccessBlock:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"DELETE",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 204!==e.statusCode&&e.statusCode>=300?[2,Dg(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),Hk=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketAccelerateConfigurationCommand",inputFilterSensitiveLog:Cf.filterSensitiveLog,outputFilterSensitiveLog:kf.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={accelerate:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,jg(e,t)]:(n={$metadata:CE(e),Status:void 0},[4,OE(e.body,t)]);case 1:return void 0!==(r=i.sent()).Status&&(n.Status=r.Status),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),$k=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketAclCommand",inputFilterSensitiveLog:Tf.filterSensitiveLog,outputFilterSensitiveLog:xf.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={acl:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,zg(e,t)]:(n={$metadata:CE(e),Grants:void 0,Owner:void 0},[4,OE(e.body,t)]);case 1:return""===(r=i.sent()).AccessControlList&&(n.Grants=[]),void 0!==r.AccessControlList&&void 0!==r.AccessControlList.Grant&&(n.Grants=pS(Sl(r.AccessControlList.Grant))),void 0!==r.Owner&&(n.Owner=GS(r.Owner)),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),Vk=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketAnalyticsConfigurationCommand",inputFilterSensitiveLog:Lf.filterSensitiveLog,outputFilterSensitiveLog:Bf.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o=Bs({analytics:"","x-id":"GetBucketAnalyticsConfiguration"},void 0!==e.Id&&{id:e.Id}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Ug(e,t)]:(n={$metadata:CE(e),AnalyticsConfiguration:void 0},[4,OE(e.body,t)]);case 1:return r=i.sent(),n.AnalyticsConfiguration=Qb(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),Gk=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketCorsCommand",inputFilterSensitiveLog:zf.filterSensitiveLog,outputFilterSensitiveLog:jf.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={cors:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Fg(e,t)]:(n={$metadata:CE(e),CORSRules:void 0},[4,OE(e.body,t)]);case 1:return""===(r=i.sent()).CORSRule&&(n.CORSRules=[]),void 0!==r.CORSRule&&(n.CORSRules=iS(Sl(r.CORSRule))),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),Wk=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketEncryptionCommand",inputFilterSensitiveLog:Hf.filterSensitiveLog,outputFilterSensitiveLog:Kf.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={encryption:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,qg(e,t)]:(n={$metadata:CE(e),ServerSideEncryptionConfiguration:void 0},[4,OE(e.body,t)]);case 1:return r=i.sent(),n.ServerSideEncryptionConfiguration=dE(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),Yk=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketIntelligentTieringConfigurationCommand",inputFilterSensitiveLog:Qf.filterSensitiveLog,outputFilterSensitiveLog:Yf.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n={},r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o=Bs({"intelligent-tiering":"","x-id":"GetBucketIntelligentTieringConfiguration"},void 0!==e.Id&&{id:e.Id}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Kg(e,t)]:(n={$metadata:CE(e),IntelligentTieringConfiguration:void 0},[4,OE(e.body,t)]);case 1:return r=i.sent(),n.IntelligentTieringConfiguration=mS(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),Qk=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketInventoryConfigurationCommand",inputFilterSensitiveLog:ap.filterSensitiveLog,outputFilterSensitiveLog:op.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o=Bs({inventory:"","x-id":"GetBucketInventoryConfiguration"},void 0!==e.Id&&{id:e.Id}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Hg(e,t)]:(n={$metadata:CE(e),InventoryConfiguration:void 0},[4,OE(e.body,t)]);case 1:return r=i.sent(),n.InventoryConfiguration=wS(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),Jk=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketLifecycleConfigurationCommand",inputFilterSensitiveLog:vp.filterSensitiveLog,outputFilterSensitiveLog:hp.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={lifecycle:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,$g(e,t)]:(n={$metadata:CE(e),Rules:void 0},[4,OE(e.body,t)]);case 1:return""===(r=i.sent()).Rule&&(n.Rules=[]),void 0!==r.Rule&&(n.Rules=PS(Sl(r.Rule))),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),Xk=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketLocationCommand",inputFilterSensitiveLog:gp.filterSensitiveLog,outputFilterSensitiveLog:mp.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={location:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Vg(e,t)]:(n={$metadata:CE(e),LocationConstraint:void 0},[4,OE(e.body,t)]);case 1:return void 0!==(r=i.sent()).LocationConstraint&&(n.LocationConstraint=r.LocationConstraint),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),Zk=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketLoggingCommand",inputFilterSensitiveLog:Sp.filterSensitiveLog,outputFilterSensitiveLog:bp.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={logging:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Gg(e,t)]:(n={$metadata:CE(e),LoggingEnabled:void 0},[4,OE(e.body,t)]);case 1:return void 0!==(r=i.sent()).LoggingEnabled&&(n.LoggingEnabled=AS(r.LoggingEnabled)),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),eC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketMetricsConfigurationCommand",inputFilterSensitiveLog:Tp.filterSensitiveLog,outputFilterSensitiveLog:xp.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o=Bs({metrics:"","x-id":"GetBucketMetricsConfiguration"},void 0!==e.Id&&{id:e.Id}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Wg(e,t)]:(n={$metadata:CE(e),MetricsConfiguration:void 0},[4,OE(e.body,t)]);case 1:return r=i.sent(),n.MetricsConfiguration=RS(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),tC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketNotificationConfigurationCommand",inputFilterSensitiveLog:Np.filterSensitiveLog,outputFilterSensitiveLog:Rp.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={notification:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Yg(e,t)]:(n={$metadata:CE(e),LambdaFunctionConfigurations:void 0,QueueConfigurations:void 0,TopicConfigurations:void 0},[4,OE(e.body,t)]);case 1:return""===(r=i.sent()).CloudFunctionConfiguration&&(n.LambdaFunctionConfigurations=[]),void 0!==r.CloudFunctionConfiguration&&(n.LambdaFunctionConfigurations=TS(Sl(r.CloudFunctionConfiguration))),""===r.QueueConfiguration&&(n.QueueConfigurations=[]),void 0!==r.QueueConfiguration&&(n.QueueConfigurations=ZS(Sl(r.QueueConfiguration))),""===r.TopicConfiguration&&(n.TopicConfigurations=[]),void 0!==r.TopicConfiguration&&(n.TopicConfigurations=EE(Sl(r.TopicConfiguration))),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),nC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketOwnershipControlsCommand",inputFilterSensitiveLog:jp.filterSensitiveLog,outputFilterSensitiveLog:Dp.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={ownershipControls:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Qg(e,t)]:(n={$metadata:CE(e),OwnershipControls:void 0},[4,OE(e.body,t)]);case 1:return r=i.sent(),n.OwnershipControls=WS(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),rC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketPolicyCommand",inputFilterSensitiveLog:Up.filterSensitiveLog,outputFilterSensitiveLog:zp.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={policy:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Jg(e,t)]:(n={$metadata:CE(e),Policy:void 0},[4,TE(e.body,t)]);case 1:return r=i.sent(),n.Policy=r,[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),iC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketPolicyStatusCommand",inputFilterSensitiveLog:Kp.filterSensitiveLog,outputFilterSensitiveLog:qp.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={policyStatus:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Xg(e,t)]:(n={$metadata:CE(e),PolicyStatus:void 0},[4,OE(e.body,t)]);case 1:return r=i.sent(),n.PolicyStatus=JS(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),oC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketReplicationCommand",inputFilterSensitiveLog:oh.filterSensitiveLog,outputFilterSensitiveLog:ih.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={replication:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Zg(e,t)]:(n={$metadata:CE(e),ReplicationConfiguration:void 0},[4,OE(e.body,t)]);case 1:return r=i.sent(),n.ReplicationConfiguration=tE(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),aC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketRequestPaymentCommand",inputFilterSensitiveLog:sh.filterSensitiveLog,outputFilterSensitiveLog:ah.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={requestPayment:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,ey(e,t)]:(n={$metadata:CE(e),Payer:void 0},[4,OE(e.body,t)]);case 1:return void 0!==(r=i.sent()).Payer&&(n.Payer=r.Payer),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),sC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketTaggingCommand",inputFilterSensitiveLog:ch.filterSensitiveLog,outputFilterSensitiveLog:uh.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={tagging:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,ty(e,t)]:(n={$metadata:CE(e),TagSet:void 0},[4,OE(e.body,t)]);case 1:return""===(r=i.sent()).TagSet&&(n.TagSet=[]),void 0!==r.TagSet&&void 0!==r.TagSet.Tag&&(n.TagSet=wE(Sl(r.TagSet.Tag))),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),uC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketVersioningCommand",inputFilterSensitiveLog:lh.filterSensitiveLog,outputFilterSensitiveLog:dh.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={versioning:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,ny(e,t)]:(n={$metadata:CE(e),MFADelete:void 0,Status:void 0},[4,OE(e.body,t)]);case 1:return void 0!==(r=i.sent()).MfaDelete&&(n.MFADelete=r.MfaDelete),void 0!==r.Status&&(n.Status=r.Status),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),cC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetBucketWebsiteCommand",inputFilterSensitiveLog:wh.filterSensitiveLog,outputFilterSensitiveLog:yh.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={website:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,ry(e,t)]:(n={$metadata:CE(e),ErrorDocument:void 0,IndexDocument:void 0,RedirectAllRequestsTo:void 0,RoutingRules:void 0},[4,OE(e.body,t)]);case 1:return void 0!==(r=i.sent()).ErrorDocument&&(n.ErrorDocument=uS(r.ErrorDocument)),void 0!==r.IndexDocument&&(n.IndexDocument=hS(r.IndexDocument)),void 0!==r.RedirectAllRequestsTo&&(n.RedirectAllRequestsTo=eE(r.RedirectAllRequestsTo)),""===r.RoutingRules&&(n.RoutingRules=[]),void 0!==r.RoutingRules&&void 0!==r.RoutingRules.RoutingRule&&(n.RoutingRules=uE(Sl(r.RoutingRules.RoutingRule))),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),dC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetObjectAclCommand",inputFilterSensitiveLog:xh.filterSensitiveLog,outputFilterSensitiveLog:Ch.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs(Bs({},NE(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",bl(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return bl(e)})).join("/")),o=Bs({acl:""},void 0!==e.VersionId&&{versionId:e.VersionId}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,oy(e,t)]:(n={$metadata:CE(e),Grants:void 0,Owner:void 0,RequestCharged:void 0},void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,OE(e.body,t)]);case 1:return""===(r=i.sent()).AccessControlList&&(n.Grants=[]),void 0!==r.AccessControlList&&void 0!==r.AccessControlList.Grant&&(n.Grants=pS(Sl(r.AccessControlList.Grant))),void 0!==r.Owner&&(n.Owner=GS(r.Owner)),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),lC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(LE(t)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetObjectCommand",inputFilterSensitiveLog:Sh.filterSensitiveLog,outputFilterSensitiveLog:bh.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs({},NE(e.IfMatch)&&{"if-match":e.IfMatch}),NE(e.IfModifiedSince)&&{"if-modified-since":Tl(e.IfModifiedSince).toString()}),NE(e.IfNoneMatch)&&{"if-none-match":e.IfNoneMatch}),NE(e.IfUnmodifiedSince)&&{"if-unmodified-since":Tl(e.IfUnmodifiedSince).toString()}),NE(e.Range)&&{range:e.Range}),NE(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),NE(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),NE(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),NE(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",bl(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return bl(e)})).join("/")),o=Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs({"x-id":"GetObject"},void 0!==e.ResponseCacheControl&&{"response-cache-control":e.ResponseCacheControl}),void 0!==e.ResponseContentDisposition&&{"response-content-disposition":e.ResponseContentDisposition}),void 0!==e.ResponseContentEncoding&&{"response-content-encoding":e.ResponseContentEncoding}),void 0!==e.ResponseContentLanguage&&{"response-content-language":e.ResponseContentLanguage}),void 0!==e.ResponseContentType&&{"response-content-type":e.ResponseContentType}),void 0!==e.ResponseExpires&&{"response-expires":Tl(e.ResponseExpires).toString()}),void 0!==e.VersionId&&{versionId:e.VersionId}),void 0!==e.PartNumber&&{partNumber:e.PartNumber.toString()}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){return 200!==e.statusCode&&e.statusCode>=300?[2,iy(e,t)]:(n={$metadata:CE(e),AcceptRanges:void 0,Body:void 0,BucketKeyEnabled:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentRange:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,TagCount:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},void 0!==e.headers["x-amz-delete-marker"]&&(n.DeleteMarker="true"===e.headers["x-amz-delete-marker"]),void 0!==e.headers["accept-ranges"]&&(n.AcceptRanges=e.headers["accept-ranges"]),void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-restore"]&&(n.Restore=e.headers["x-amz-restore"]),void 0!==e.headers["last-modified"]&&(n.LastModified=new Date(e.headers["last-modified"])),void 0!==e.headers["content-length"]&&(n.ContentLength=parseInt(e.headers["content-length"],10)),void 0!==e.headers.etag&&(n.ETag=e.headers.etag),void 0!==e.headers["x-amz-missing-meta"]&&(n.MissingMeta=parseInt(e.headers["x-amz-missing-meta"],10)),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["cache-control"]&&(n.CacheControl=e.headers["cache-control"]),void 0!==e.headers["content-disposition"]&&(n.ContentDisposition=e.headers["content-disposition"]),void 0!==e.headers["content-encoding"]&&(n.ContentEncoding=e.headers["content-encoding"]),void 0!==e.headers["content-language"]&&(n.ContentLanguage=e.headers["content-language"]),void 0!==e.headers["content-range"]&&(n.ContentRange=e.headers["content-range"]),void 0!==e.headers["content-type"]&&(n.ContentType=e.headers["content-type"]),void 0!==e.headers.expires&&(n.Expires=new Date(e.headers.expires)),void 0!==e.headers["x-amz-website-redirect-location"]&&(n.WebsiteRedirectLocation=e.headers["x-amz-website-redirect-location"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-storage-class"]&&(n.StorageClass=e.headers["x-amz-storage-class"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-replication-status"]&&(n.ReplicationStatus=e.headers["x-amz-replication-status"]),void 0!==e.headers["x-amz-mp-parts-count"]&&(n.PartsCount=parseInt(e.headers["x-amz-mp-parts-count"],10)),void 0!==e.headers["x-amz-tagging-count"]&&(n.TagCount=parseInt(e.headers["x-amz-tagging-count"],10)),void 0!==e.headers["x-amz-object-lock-mode"]&&(n.ObjectLockMode=e.headers["x-amz-object-lock-mode"]),void 0!==e.headers["x-amz-object-lock-retain-until-date"]&&(n.ObjectLockRetainUntilDate=new Date(e.headers["x-amz-object-lock-retain-until-date"])),void 0!==e.headers["x-amz-object-lock-legal-hold"]&&(n.ObjectLockLegalHoldStatus=e.headers["x-amz-object-lock-legal-hold"]),Object.keys(e.headers).forEach((function(t){void 0===n.Metadata&&(n.Metadata={}),t.startsWith("x-amz-meta-")&&(n.Metadata[t.substring(11)]=e.headers[t])})),r=e.body,n.Body=r,[2,Promise.resolve(n)])}))}))}(e,t)},t}(wl),fC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetObjectLegalHoldCommand",inputFilterSensitiveLog:Oh.filterSensitiveLog,outputFilterSensitiveLog:Nh.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs(Bs({},NE(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",bl(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return bl(e)})).join("/")),o=Bs({"legal-hold":""},void 0!==e.VersionId&&{versionId:e.VersionId}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,ay(e,t)]:(n={$metadata:CE(e),LegalHold:void 0},[4,OE(e.body,t)]);case 1:return r=i.sent(),n.LegalHold=KS(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),pC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetObjectLockConfigurationCommand",inputFilterSensitiveLog:Mh.filterSensitiveLog,outputFilterSensitiveLog:Ih.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={"object-lock":""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,sy(e,t)]:(n={$metadata:CE(e),ObjectLockConfiguration:void 0},[4,OE(e.body,t)]);case 1:return r=i.sent(),n.ObjectLockConfiguration=qS(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),hC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetObjectRetentionCommand",inputFilterSensitiveLog:Lh.filterSensitiveLog,outputFilterSensitiveLog:Bh.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs(Bs({},NE(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",bl(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return bl(e)})).join("/")),o=Bs({retention:""},void 0!==e.VersionId&&{versionId:e.VersionId}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,uy(e,t)]:(n={$metadata:CE(e),Retention:void 0},[4,OE(e.body,t)]);case 1:return r=i.sent(),n.Retention=HS(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),vC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetObjectTaggingCommand",inputFilterSensitiveLog:jh.filterSensitiveLog,outputFilterSensitiveLog:Dh.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs(Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),NE(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",bl(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return bl(e)})).join("/")),o=Bs({tagging:""},void 0!==e.VersionId&&{versionId:e.VersionId}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,cy(e,t)]:(n={$metadata:CE(e),TagSet:void 0,VersionId:void 0},void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),[4,OE(e.body,t)]);case 1:return""===(r=i.sent()).TagSet&&(n.TagSet=[]),void 0!==r.TagSet&&void 0!==r.TagSet.Tag&&(n.TagSet=wE(Sl(r.TagSet.Tag))),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),mC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetObjectTorrentCommand",inputFilterSensitiveLog:Uh.filterSensitiveLog,outputFilterSensitiveLog:zh.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs(Bs({},NE(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",bl(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return bl(e)})).join("/")),o={torrent:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){return 200!==e.statusCode&&e.statusCode>=300?[2,dy(e,t)]:(n={$metadata:CE(e),Body:void 0,RequestCharged:void 0},void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),r=e.body,n.Body=r,[2,Promise.resolve(n)])}))}))}(e,t)},t}(wl),gC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"GetPublicAccessBlockCommand",inputFilterSensitiveLog:Kh.filterSensitiveLog,outputFilterSensitiveLog:qh.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={publicAccessBlock:""},[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,ly(e,t)]:(n={$metadata:CE(e),PublicAccessBlockConfiguration:void 0},[4,OE(e.body,t)]);case 1:return r=i.sent(),n.PublicAccessBlockConfiguration=XS(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),yC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"HeadBucketCommand",inputFilterSensitiveLog:Hh.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return js(this,(function(d){switch(d.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),[4,t.endpoint()];case 1:return o=d.sent(),a=o.hostname,s=o.protocol,u=void 0===s?"https":s,c=o.port,[2,new nc({protocol:u,hostname:a,port:c,method:"HEAD",headers:n,path:r,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,fy(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),wC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(LE(t)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"HeadObjectCommand",inputFilterSensitiveLog:Gh.filterSensitiveLog,outputFilterSensitiveLog:Vh.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs({},NE(e.IfMatch)&&{"if-match":e.IfMatch}),NE(e.IfModifiedSince)&&{"if-modified-since":Tl(e.IfModifiedSince).toString()}),NE(e.IfNoneMatch)&&{"if-none-match":e.IfNoneMatch}),NE(e.IfUnmodifiedSince)&&{"if-unmodified-since":Tl(e.IfUnmodifiedSince).toString()}),NE(e.Range)&&{range:e.Range}),NE(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),NE(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),NE(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),NE(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",bl(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return bl(e)})).join("/")),o=Bs(Bs({},void 0!==e.VersionId&&{versionId:e.VersionId}),void 0!==e.PartNumber&&{partNumber:e.PartNumber.toString()}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"HEAD",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,py(e,t)]:(n={$metadata:CE(e),AcceptRanges:void 0,ArchiveStatus:void 0,BucketKeyEnabled:void 0,CacheControl:void 0,ContentDisposition:void 0,ContentEncoding:void 0,ContentLanguage:void 0,ContentLength:void 0,ContentType:void 0,DeleteMarker:void 0,ETag:void 0,Expiration:void 0,Expires:void 0,LastModified:void 0,Metadata:void 0,MissingMeta:void 0,ObjectLockLegalHoldStatus:void 0,ObjectLockMode:void 0,ObjectLockRetainUntilDate:void 0,PartsCount:void 0,ReplicationStatus:void 0,RequestCharged:void 0,Restore:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,StorageClass:void 0,VersionId:void 0,WebsiteRedirectLocation:void 0},void 0!==e.headers["x-amz-delete-marker"]&&(n.DeleteMarker="true"===e.headers["x-amz-delete-marker"]),void 0!==e.headers["accept-ranges"]&&(n.AcceptRanges=e.headers["accept-ranges"]),void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers["x-amz-restore"]&&(n.Restore=e.headers["x-amz-restore"]),void 0!==e.headers["x-amz-archive-status"]&&(n.ArchiveStatus=e.headers["x-amz-archive-status"]),void 0!==e.headers["last-modified"]&&(n.LastModified=new Date(e.headers["last-modified"])),void 0!==e.headers["content-length"]&&(n.ContentLength=parseInt(e.headers["content-length"],10)),void 0!==e.headers.etag&&(n.ETag=e.headers.etag),void 0!==e.headers["x-amz-missing-meta"]&&(n.MissingMeta=parseInt(e.headers["x-amz-missing-meta"],10)),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["cache-control"]&&(n.CacheControl=e.headers["cache-control"]),void 0!==e.headers["content-disposition"]&&(n.ContentDisposition=e.headers["content-disposition"]),void 0!==e.headers["content-encoding"]&&(n.ContentEncoding=e.headers["content-encoding"]),void 0!==e.headers["content-language"]&&(n.ContentLanguage=e.headers["content-language"]),void 0!==e.headers["content-type"]&&(n.ContentType=e.headers["content-type"]),void 0!==e.headers.expires&&(n.Expires=new Date(e.headers.expires)),void 0!==e.headers["x-amz-website-redirect-location"]&&(n.WebsiteRedirectLocation=e.headers["x-amz-website-redirect-location"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-storage-class"]&&(n.StorageClass=e.headers["x-amz-storage-class"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-replication-status"]&&(n.ReplicationStatus=e.headers["x-amz-replication-status"]),void 0!==e.headers["x-amz-mp-parts-count"]&&(n.PartsCount=parseInt(e.headers["x-amz-mp-parts-count"],10)),void 0!==e.headers["x-amz-object-lock-mode"]&&(n.ObjectLockMode=e.headers["x-amz-object-lock-mode"]),void 0!==e.headers["x-amz-object-lock-retain-until-date"]&&(n.ObjectLockRetainUntilDate=new Date(e.headers["x-amz-object-lock-retain-until-date"])),void 0!==e.headers["x-amz-object-lock-legal-hold"]&&(n.ObjectLockLegalHoldStatus=e.headers["x-amz-object-lock-legal-hold"]),Object.keys(e.headers).forEach((function(t){void 0===n.Metadata&&(n.Metadata={}),t.startsWith("x-amz-meta-")&&(n.Metadata[t.substring(11)]=e.headers[t])})),[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),bC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListBucketAnalyticsConfigurationsCommand",inputFilterSensitiveLog:Yh.filterSensitiveLog,outputFilterSensitiveLog:Wh.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o=Bs({analytics:"","x-id":"ListBucketAnalyticsConfigurations"},void 0!==e.ContinuationToken&&{"continuation-token":e.ContinuationToken}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,hy(e,t)]:(n={$metadata:CE(e),AnalyticsConfigurationList:void 0,ContinuationToken:void 0,IsTruncated:void 0,NextContinuationToken:void 0},[4,OE(e.body,t)]);case 1:return""===(r=i.sent()).AnalyticsConfiguration&&(n.AnalyticsConfigurationList=[]),void 0!==r.AnalyticsConfiguration&&(n.AnalyticsConfigurationList=Jb(Sl(r.AnalyticsConfiguration))),void 0!==r.ContinuationToken&&(n.ContinuationToken=r.ContinuationToken),void 0!==r.IsTruncated&&(n.IsTruncated="true"==r.IsTruncated),void 0!==r.NextContinuationToken&&(n.NextContinuationToken=r.NextContinuationToken),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),SC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListBucketIntelligentTieringConfigurationsCommand",inputFilterSensitiveLog:Jh.filterSensitiveLog,outputFilterSensitiveLog:Qh.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n={},r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o=Bs({"intelligent-tiering":"","x-id":"ListBucketIntelligentTieringConfigurations"},void 0!==e.ContinuationToken&&{"continuation-token":e.ContinuationToken}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,vy(e,t)]:(n={$metadata:CE(e),ContinuationToken:void 0,IntelligentTieringConfigurationList:void 0,IsTruncated:void 0,NextContinuationToken:void 0},[4,OE(e.body,t)]);case 1:return void 0!==(r=i.sent()).ContinuationToken&&(n.ContinuationToken=r.ContinuationToken),""===r.IntelligentTieringConfiguration&&(n.IntelligentTieringConfigurationList=[]),void 0!==r.IntelligentTieringConfiguration&&(n.IntelligentTieringConfigurationList=gS(Sl(r.IntelligentTieringConfiguration))),void 0!==r.IsTruncated&&(n.IsTruncated="true"==r.IsTruncated),void 0!==r.NextContinuationToken&&(n.NextContinuationToken=r.NextContinuationToken),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),EC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListBucketInventoryConfigurationsCommand",inputFilterSensitiveLog:Zh.filterSensitiveLog,outputFilterSensitiveLog:Xh.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o=Bs({inventory:"","x-id":"ListBucketInventoryConfigurations"},void 0!==e.ContinuationToken&&{"continuation-token":e.ContinuationToken}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,my(e,t)]:(n={$metadata:CE(e),ContinuationToken:void 0,InventoryConfigurationList:void 0,IsTruncated:void 0,NextContinuationToken:void 0},[4,OE(e.body,t)]);case 1:return void 0!==(r=i.sent()).ContinuationToken&&(n.ContinuationToken=r.ContinuationToken),""===r.InventoryConfiguration&&(n.InventoryConfigurationList=[]),void 0!==r.InventoryConfiguration&&(n.InventoryConfigurationList=bS(Sl(r.InventoryConfiguration))),void 0!==r.IsTruncated&&(n.IsTruncated="true"==r.IsTruncated),void 0!==r.NextContinuationToken&&(n.NextContinuationToken=r.NextContinuationToken),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),kC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListBucketMetricsConfigurationsCommand",inputFilterSensitiveLog:tv.filterSensitiveLog,outputFilterSensitiveLog:ev.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o=Bs({metrics:"","x-id":"ListBucketMetricsConfigurations"},void 0!==e.ContinuationToken&&{"continuation-token":e.ContinuationToken}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,gy(e,t)]:(n={$metadata:CE(e),ContinuationToken:void 0,IsTruncated:void 0,MetricsConfigurationList:void 0,NextContinuationToken:void 0},[4,OE(e.body,t)]);case 1:return void 0!==(r=i.sent()).ContinuationToken&&(n.ContinuationToken=r.ContinuationToken),void 0!==r.IsTruncated&&(n.IsTruncated="true"==r.IsTruncated),""===r.MetricsConfiguration&&(n.MetricsConfigurationList=[]),void 0!==r.MetricsConfiguration&&(n.MetricsConfigurationList=BS(Sl(r.MetricsConfiguration))),void 0!==r.NextContinuationToken&&(n.NextContinuationToken=r.NextContinuationToken),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),CC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListBucketsCommand",inputFilterSensitiveLog:function(e){return e},outputFilterSensitiveLog:rv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var e,n,r,i,o,a,s,u;return js(this,(function(c){switch(c.label){case 0:return e={},n="/",r="",[4,t.endpoint()];case 1:return i=c.sent(),o=i.hostname,a=i.protocol,s=void 0===a?"https":a,u=i.port,[2,new nc({protocol:s,hostname:o,port:u,method:"GET",headers:e,path:n,body:r})]}}))}))}(0,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,yy(e,t)]:(n={$metadata:CE(e),Buckets:void 0,Owner:void 0},[4,OE(e.body,t)]);case 1:return""===(r=i.sent()).Buckets&&(n.Buckets=[]),void 0!==r.Buckets&&void 0!==r.Buckets.Bucket&&(n.Buckets=eS(Sl(r.Buckets.Bucket))),void 0!==r.Owner&&(n.Owner=GS(r.Owner)),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),xC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListMultipartUploadsCommand",inputFilterSensitiveLog:uv.filterSensitiveLog,outputFilterSensitiveLog:sv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o=Bs(Bs(Bs(Bs(Bs(Bs({uploads:""},void 0!==e.Delimiter&&{delimiter:e.Delimiter}),void 0!==e.EncodingType&&{"encoding-type":e.EncodingType}),void 0!==e.KeyMarker&&{"key-marker":e.KeyMarker}),void 0!==e.MaxUploads&&{"max-uploads":e.MaxUploads.toString()}),void 0!==e.Prefix&&{prefix:e.Prefix}),void 0!==e.UploadIdMarker&&{"upload-id-marker":e.UploadIdMarker}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,wy(e,t)]:(n={$metadata:CE(e),Bucket:void 0,CommonPrefixes:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,KeyMarker:void 0,MaxUploads:void 0,NextKeyMarker:void 0,NextUploadIdMarker:void 0,Prefix:void 0,UploadIdMarker:void 0,Uploads:void 0},[4,OE(e.body,t)]);case 1:return void 0!==(r=i.sent()).Bucket&&(n.Bucket=r.Bucket),""===r.CommonPrefixes&&(n.CommonPrefixes=[]),void 0!==r.CommonPrefixes&&(n.CommonPrefixes=tS(Sl(r.CommonPrefixes))),void 0!==r.Delimiter&&(n.Delimiter=r.Delimiter),void 0!==r.EncodingType&&(n.EncodingType=r.EncodingType),void 0!==r.IsTruncated&&(n.IsTruncated="true"==r.IsTruncated),void 0!==r.KeyMarker&&(n.KeyMarker=r.KeyMarker),void 0!==r.MaxUploads&&(n.MaxUploads=parseInt(r.MaxUploads)),void 0!==r.NextKeyMarker&&(n.NextKeyMarker=r.NextKeyMarker),void 0!==r.NextUploadIdMarker&&(n.NextUploadIdMarker=r.NextUploadIdMarker),void 0!==r.Prefix&&(n.Prefix=r.Prefix),void 0!==r.UploadIdMarker&&(n.UploadIdMarker=r.UploadIdMarker),""===r.Upload&&(n.Uploads=[]),void 0!==r.Upload&&(n.Uploads=DS(Sl(r.Upload))),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),TC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListObjectVersionsCommand",inputFilterSensitiveLog:yv.filterSensitiveLog,outputFilterSensitiveLog:gv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs({},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o=Bs(Bs(Bs(Bs(Bs(Bs({versions:""},void 0!==e.Delimiter&&{delimiter:e.Delimiter}),void 0!==e.EncodingType&&{"encoding-type":e.EncodingType}),void 0!==e.KeyMarker&&{"key-marker":e.KeyMarker}),void 0!==e.MaxKeys&&{"max-keys":e.MaxKeys.toString()}),void 0!==e.Prefix&&{prefix:e.Prefix}),void 0!==e.VersionIdMarker&&{"version-id-marker":e.VersionIdMarker}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Ey(e,t)]:(n={$metadata:CE(e),CommonPrefixes:void 0,DeleteMarkers:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,KeyMarker:void 0,MaxKeys:void 0,Name:void 0,NextKeyMarker:void 0,NextVersionIdMarker:void 0,Prefix:void 0,VersionIdMarker:void 0,Versions:void 0},[4,OE(e.body,t)]);case 1:return""===(r=i.sent()).CommonPrefixes&&(n.CommonPrefixes=[]),void 0!==r.CommonPrefixes&&(n.CommonPrefixes=tS(Sl(r.CommonPrefixes))),""===r.DeleteMarker&&(n.DeleteMarkers=[]),void 0!==r.DeleteMarker&&(n.DeleteMarkers=aS(Sl(r.DeleteMarker))),void 0!==r.Delimiter&&(n.Delimiter=r.Delimiter),void 0!==r.EncodingType&&(n.EncodingType=r.EncodingType),void 0!==r.IsTruncated&&(n.IsTruncated="true"==r.IsTruncated),void 0!==r.KeyMarker&&(n.KeyMarker=r.KeyMarker),void 0!==r.MaxKeys&&(n.MaxKeys=parseInt(r.MaxKeys)),void 0!==r.Name&&(n.Name=r.Name),void 0!==r.NextKeyMarker&&(n.NextKeyMarker=r.NextKeyMarker),void 0!==r.NextVersionIdMarker&&(n.NextVersionIdMarker=r.NextVersionIdMarker),void 0!==r.Prefix&&(n.Prefix=r.Prefix),void 0!==r.VersionIdMarker&&(n.VersionIdMarker=r.VersionIdMarker),""===r.Version&&(n.Versions=[]),void 0!==r.Version&&(n.Versions=VS(Sl(r.Version))),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),NC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListObjectsCommand",inputFilterSensitiveLog:lv.filterSensitiveLog,outputFilterSensitiveLog:dv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs(Bs({},NE(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o=Bs(Bs(Bs(Bs(Bs({},void 0!==e.Delimiter&&{delimiter:e.Delimiter}),void 0!==e.EncodingType&&{"encoding-type":e.EncodingType}),void 0!==e.Marker&&{marker:e.Marker}),void 0!==e.MaxKeys&&{"max-keys":e.MaxKeys.toString()}),void 0!==e.Prefix&&{prefix:e.Prefix}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,by(e,t)]:(n={$metadata:CE(e),CommonPrefixes:void 0,Contents:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,Marker:void 0,MaxKeys:void 0,Name:void 0,NextMarker:void 0,Prefix:void 0},[4,OE(e.body,t)]);case 1:return""===(r=i.sent()).CommonPrefixes&&(n.CommonPrefixes=[]),void 0!==r.CommonPrefixes&&(n.CommonPrefixes=tS(Sl(r.CommonPrefixes))),""===r.Contents&&(n.Contents=[]),void 0!==r.Contents&&(n.Contents=FS(Sl(r.Contents))),void 0!==r.Delimiter&&(n.Delimiter=r.Delimiter),void 0!==r.EncodingType&&(n.EncodingType=r.EncodingType),void 0!==r.IsTruncated&&(n.IsTruncated="true"==r.IsTruncated),void 0!==r.Marker&&(n.Marker=r.Marker),void 0!==r.MaxKeys&&(n.MaxKeys=parseInt(r.MaxKeys)),void 0!==r.Name&&(n.Name=r.Name),void 0!==r.NextMarker&&(n.NextMarker=r.NextMarker),void 0!==r.Prefix&&(n.Prefix=r.Prefix),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),OC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListObjectsV2Command",inputFilterSensitiveLog:hv.filterSensitiveLog,outputFilterSensitiveLog:pv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs(Bs({},NE(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o=Bs(Bs(Bs(Bs(Bs(Bs(Bs({"list-type":"2"},void 0!==e.Delimiter&&{delimiter:e.Delimiter}),void 0!==e.EncodingType&&{"encoding-type":e.EncodingType}),void 0!==e.MaxKeys&&{"max-keys":e.MaxKeys.toString()}),void 0!==e.Prefix&&{prefix:e.Prefix}),void 0!==e.ContinuationToken&&{"continuation-token":e.ContinuationToken}),void 0!==e.FetchOwner&&{"fetch-owner":e.FetchOwner.toString()}),void 0!==e.StartAfter&&{"start-after":e.StartAfter}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Sy(e,t)]:(n={$metadata:CE(e),CommonPrefixes:void 0,Contents:void 0,ContinuationToken:void 0,Delimiter:void 0,EncodingType:void 0,IsTruncated:void 0,KeyCount:void 0,MaxKeys:void 0,Name:void 0,NextContinuationToken:void 0,Prefix:void 0,StartAfter:void 0},[4,OE(e.body,t)]);case 1:return""===(r=i.sent()).CommonPrefixes&&(n.CommonPrefixes=[]),void 0!==r.CommonPrefixes&&(n.CommonPrefixes=tS(Sl(r.CommonPrefixes))),""===r.Contents&&(n.Contents=[]),void 0!==r.Contents&&(n.Contents=FS(Sl(r.Contents))),void 0!==r.ContinuationToken&&(n.ContinuationToken=r.ContinuationToken),void 0!==r.Delimiter&&(n.Delimiter=r.Delimiter),void 0!==r.EncodingType&&(n.EncodingType=r.EncodingType),void 0!==r.IsTruncated&&(n.IsTruncated="true"==r.IsTruncated),void 0!==r.KeyCount&&(n.KeyCount=parseInt(r.KeyCount)),void 0!==r.MaxKeys&&(n.MaxKeys=parseInt(r.MaxKeys)),void 0!==r.Name&&(n.Name=r.Name),void 0!==r.NextContinuationToken&&(n.NextContinuationToken=r.NextContinuationToken),void 0!==r.Prefix&&(n.Prefix=r.Prefix),void 0!==r.StartAfter&&(n.StartAfter=r.StartAfter),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),_C=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"ListPartsCommand",inputFilterSensitiveLog:Sv.filterSensitiveLog,outputFilterSensitiveLog:bv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs(Bs({},NE(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",bl(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return bl(e)})).join("/")),o=Bs(Bs(Bs({"x-id":"ListParts"},void 0!==e.MaxParts&&{"max-parts":e.MaxParts.toString()}),void 0!==e.PartNumberMarker&&{"part-number-marker":e.PartNumberMarker}),void 0!==e.UploadId&&{uploadId:e.UploadId}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"GET",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,ky(e,t)]:(n={$metadata:CE(e),AbortDate:void 0,AbortRuleId:void 0,Bucket:void 0,Initiator:void 0,IsTruncated:void 0,Key:void 0,MaxParts:void 0,NextPartNumberMarker:void 0,Owner:void 0,PartNumberMarker:void 0,Parts:void 0,RequestCharged:void 0,StorageClass:void 0,UploadId:void 0},void 0!==e.headers["x-amz-abort-date"]&&(n.AbortDate=new Date(e.headers["x-amz-abort-date"])),void 0!==e.headers["x-amz-abort-rule-id"]&&(n.AbortRuleId=e.headers["x-amz-abort-rule-id"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,OE(e.body,t)]);case 1:return void 0!==(r=i.sent()).Bucket&&(n.Bucket=r.Bucket),void 0!==r.Initiator&&(n.Initiator=vS(r.Initiator)),void 0!==r.IsTruncated&&(n.IsTruncated="true"==r.IsTruncated),void 0!==r.Key&&(n.Key=r.Key),void 0!==r.MaxParts&&(n.MaxParts=parseInt(r.MaxParts)),void 0!==r.NextPartNumberMarker&&(n.NextPartNumberMarker=r.NextPartNumberMarker),void 0!==r.Owner&&(n.Owner=GS(r.Owner)),void 0!==r.PartNumberMarker&&(n.PartNumberMarker=r.PartNumberMarker),""===r.Part&&(n.Parts=[]),void 0!==r.Part&&(n.Parts=QS(Sl(r.Part))),void 0!==r.StorageClass&&(n.StorageClass=r.StorageClass),void 0!==r.UploadId&&(n.UploadId=r.UploadId),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),PC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketAccelerateConfigurationCommand",inputFilterSensitiveLog:Ev.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs({"content-type":"application/xml"},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={accelerate:""},void 0!==e.AccelerateConfiguration&&(s=vw(e.AccelerateConfiguration),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Cy(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),AC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketAclCommand",inputFilterSensitiveLog:kv.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs({"content-type":"application/xml"},NE(e.ACL)&&{"x-amz-acl":e.ACL}),NE(e.ContentMD5)&&{"content-md5":e.ContentMD5}),NE(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),NE(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),NE(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),NE(e.GrantWrite)&&{"x-amz-grant-write":e.GrantWrite}),NE(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={acl:""},void 0!==e.AccessControlPolicy&&(s=mw(e.AccessControlPolicy),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,xy(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),IC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketAnalyticsConfigurationCommand",inputFilterSensitiveLog:Cv.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs({"content-type":"application/xml"},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o=Bs({analytics:""},void 0!==e.Id&&{id:e.Id}),void 0!==e.AnalyticsConfiguration&&(s=gw(e.AnalyticsConfiguration),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Ty(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),MC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t)),this.middlewareStack.use(ok(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketCorsCommand",inputFilterSensitiveLog:Tv.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs(Bs({"content-type":"application/xml"},NE(e.ContentMD5)&&{"content-md5":e.ContentMD5}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={cors:""},void 0!==e.CORSConfiguration&&(s=Cw(e.CORSConfiguration),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Ny(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),RC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketEncryptionCommand",inputFilterSensitiveLog:Nv.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs(Bs({"content-type":"application/xml"},NE(e.ContentMD5)&&{"content-md5":e.ContentMD5}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={encryption:""},void 0!==e.ServerSideEncryptionConfiguration&&(s=Pb(e.ServerSideEncryptionConfiguration),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Oy(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),BC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketIntelligentTieringConfigurationCommand",inputFilterSensitiveLog:Ov.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n={"content-type":"application/xml"},r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o=Bs({"intelligent-tiering":""},void 0!==e.Id&&{id:e.Id}),void 0!==e.IntelligentTieringConfiguration&&(s=Dw(e.IntelligentTieringConfiguration),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,_y(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),LC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketInventoryConfigurationCommand",inputFilterSensitiveLog:_v.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs({"content-type":"application/xml"},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o=Bs({inventory:""},void 0!==e.Id&&{id:e.Id}),void 0!==e.InventoryConfiguration&&(s=zw(e.InventoryConfiguration),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Py(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),DC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t)),this.middlewareStack.use(ok(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketLifecycleConfigurationCommand",inputFilterSensitiveLog:Av.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs({"content-type":"application/xml"},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={lifecycle:""},void 0!==e.LifecycleConfiguration&&(s=bw(e.LifecycleConfiguration),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Ay(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),jC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketLoggingCommand",inputFilterSensitiveLog:Mv.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs(Bs({"content-type":"application/xml"},NE(e.ContentMD5)&&{"content-md5":e.ContentMD5}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={logging:""},void 0!==e.BucketLoggingStatus&&(s=Sw(e.BucketLoggingStatus),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Iy(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),zC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketMetricsConfigurationCommand",inputFilterSensitiveLog:Rv.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs({"content-type":"application/xml"},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o=Bs({metrics:""},void 0!==e.Id&&{id:e.Id}),void 0!==e.MetricsConfiguration&&(s=Xw(e.MetricsConfiguration),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,My(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),UC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketNotificationConfigurationCommand",inputFilterSensitiveLog:Bv.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs({"content-type":"application/xml"},NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={notification:""},void 0!==e.NotificationConfiguration&&(s=nb(e.NotificationConfiguration),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Ry(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),FC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketOwnershipControlsCommand",inputFilterSensitiveLog:Lv.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs(Bs({"content-type":"application/xml"},NE(e.ContentMD5)&&{"content-md5":e.ContentMD5}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={ownershipControls:""},void 0!==e.OwnershipControls&&(s=lb(e.OwnershipControls),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,By(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),qC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t)),this.middlewareStack.use(ok(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketPolicyCommand",inputFilterSensitiveLog:Dv.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs(Bs(Bs({"content-type":"text/plain"},NE(e.ContentMD5)&&{"content-md5":e.ContentMD5}),NE(e.ConfirmRemoveSelfBucketAccess)&&{"x-amz-confirm-remove-self-bucket-access":e.ConfirmRemoveSelfBucketAccess.toString()}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={policy:""},void 0!==e.Policy&&(s=e.Policy,a=s),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Ly(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),KC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t)),this.middlewareStack.use(ok(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketReplicationCommand",inputFilterSensitiveLog:jv.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs(Bs(Bs({"content-type":"application/xml"},NE(e.ContentMD5)&&{"content-md5":e.ContentMD5}),NE(e.Token)&&{"x-amz-bucket-object-lock-token":e.Token}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={replication:""},void 0!==e.ReplicationConfiguration&&(s=mb(e.ReplicationConfiguration),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Dy(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),HC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketRequestPaymentCommand",inputFilterSensitiveLog:Uv.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs(Bs({"content-type":"application/xml"},NE(e.ContentMD5)&&{"content-md5":e.ContentMD5}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={requestPayment:""},void 0!==e.RequestPaymentConfiguration&&(s=Eb(e.RequestPaymentConfiguration),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,jy(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),$C=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t)),this.middlewareStack.use(ok(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketTaggingCommand",inputFilterSensitiveLog:qv.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs(Bs({"content-type":"application/xml"},NE(e.ContentMD5)&&{"content-md5":e.ContentMD5}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={tagging:""},void 0!==e.Tagging&&(s=Ub(e.Tagging),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,zy(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),VC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketVersioningCommand",inputFilterSensitiveLog:Hv.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs(Bs(Bs({"content-type":"application/xml"},NE(e.ContentMD5)&&{"content-md5":e.ContentMD5}),NE(e.MFA)&&{"x-amz-mfa":e.MFA}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={versioning:""},void 0!==e.VersioningConfiguration&&(s=Gb(e.VersioningConfiguration),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Uy(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),GC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutBucketWebsiteCommand",inputFilterSensitiveLog:Vv.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs(Bs({"content-type":"application/xml"},NE(e.ContentMD5)&&{"content-md5":e.ContentMD5}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={website:""},void 0!==e.WebsiteConfiguration&&(s=Wb(e.WebsiteConfiguration),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Fy(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),WC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutObjectAclCommand",inputFilterSensitiveLog:Qv.filterSensitiveLog,outputFilterSensitiveLog:Yv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs({"content-type":"application/xml"},NE(e.ACL)&&{"x-amz-acl":e.ACL}),NE(e.ContentMD5)&&{"content-md5":e.ContentMD5}),NE(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),NE(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),NE(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),NE(e.GrantWrite)&&{"x-amz-grant-write":e.GrantWrite}),NE(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),NE(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",bl(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return bl(e)})).join("/")),o=Bs({acl:""},void 0!==e.VersionId&&{versionId:e.VersionId}),void 0!==e.AccessControlPolicy&&(s=mw(e.AccessControlPolicy),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Ky(e,t)]:(n={$metadata:CE(e),RequestCharged:void 0},void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),YC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(LE(t)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:Wv.filterSensitiveLog,outputFilterSensitiveLog:Gv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs({"content-type":"application/octet-stream"},NE(e.ACL)&&{"x-amz-acl":e.ACL}),NE(e.CacheControl)&&{"cache-control":e.CacheControl}),NE(e.ContentDisposition)&&{"content-disposition":e.ContentDisposition}),NE(e.ContentEncoding)&&{"content-encoding":e.ContentEncoding}),NE(e.ContentLanguage)&&{"content-language":e.ContentLanguage}),NE(e.ContentLength)&&{"content-length":e.ContentLength.toString()}),NE(e.ContentMD5)&&{"content-md5":e.ContentMD5}),NE(e.ContentType)&&{"content-type":e.ContentType}),NE(e.Expires)&&{expires:Tl(e.Expires).toString()}),NE(e.GrantFullControl)&&{"x-amz-grant-full-control":e.GrantFullControl}),NE(e.GrantRead)&&{"x-amz-grant-read":e.GrantRead}),NE(e.GrantReadACP)&&{"x-amz-grant-read-acp":e.GrantReadACP}),NE(e.GrantWriteACP)&&{"x-amz-grant-write-acp":e.GrantWriteACP}),NE(e.ServerSideEncryption)&&{"x-amz-server-side-encryption":e.ServerSideEncryption}),NE(e.StorageClass)&&{"x-amz-storage-class":e.StorageClass}),NE(e.WebsiteRedirectLocation)&&{"x-amz-website-redirect-location":e.WebsiteRedirectLocation}),NE(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),NE(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),NE(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),NE(e.SSEKMSKeyId)&&{"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),NE(e.SSEKMSEncryptionContext)&&{"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext}),NE(e.BucketKeyEnabled)&&{"x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),NE(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),NE(e.Tagging)&&{"x-amz-tagging":e.Tagging}),NE(e.ObjectLockMode)&&{"x-amz-object-lock-mode":e.ObjectLockMode}),NE(e.ObjectLockRetainUntilDate)&&{"x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),NE(e.ObjectLockLegalHoldStatus)&&{"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce((function(t,n){var r;return Bs(Bs({},t),((r={})["x-amz-meta-"+n.toLowerCase()]=e.Metadata[n],r))}),{})),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",bl(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return bl(e)})).join("/")),o={"x-id":"PutObject"},void 0!==e.Body&&(s=e.Body,a=s),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,qy(e,t)]:(n={$metadata:CE(e),BucketKeyEnabled:void 0,ETag:void 0,Expiration:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSEncryptionContext:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0,VersionId:void 0},void 0!==e.headers["x-amz-expiration"]&&(n.Expiration=e.headers["x-amz-expiration"]),void 0!==e.headers.etag&&(n.ETag=e.headers.etag),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-context"]&&(n.SSEKMSEncryptionContext=e.headers["x-amz-server-side-encryption-context"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),QC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutObjectLegalHoldCommand",inputFilterSensitiveLog:Xv.filterSensitiveLog,outputFilterSensitiveLog:Jv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs(Bs(Bs({"content-type":"application/xml"},NE(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),NE(e.ContentMD5)&&{"content-md5":e.ContentMD5}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",bl(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return bl(e)})).join("/")),o=Bs({"legal-hold":""},void 0!==e.VersionId&&{versionId:e.VersionId}),void 0!==e.LegalHold&&(s=ab(e.LegalHold),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Hy(e,t)]:(n={$metadata:CE(e),RequestCharged:void 0},void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),JC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutObjectLockConfigurationCommand",inputFilterSensitiveLog:em.filterSensitiveLog,outputFilterSensitiveLog:Zv.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs(Bs(Bs(Bs({"content-type":"application/xml"},NE(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),NE(e.Token)&&{"x-amz-bucket-object-lock-token":e.Token}),NE(e.ContentMD5)&&{"content-md5":e.ContentMD5}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={"object-lock":""},void 0!==e.ObjectLockConfiguration&&(s=ob(e.ObjectLockConfiguration),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,$y(e,t)]:(n={$metadata:CE(e),RequestCharged:void 0},void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),XC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutObjectRetentionCommand",inputFilterSensitiveLog:nm.filterSensitiveLog,outputFilterSensitiveLog:tm.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs(Bs(Bs(Bs({"content-type":"application/xml"},NE(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),NE(e.BypassGovernanceRetention)&&{"x-amz-bypass-governance-retention":e.BypassGovernanceRetention.toString()}),NE(e.ContentMD5)&&{"content-md5":e.ContentMD5}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",bl(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return bl(e)})).join("/")),o=Bs({retention:""},void 0!==e.VersionId&&{versionId:e.VersionId}),void 0!==e.Retention&&(s=sb(e.Retention),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Vy(e,t)]:(n={$metadata:CE(e),RequestCharged:void 0},void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),ZC=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutObjectTaggingCommand",inputFilterSensitiveLog:im.filterSensitiveLog,outputFilterSensitiveLog:rm.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs(Bs(Bs({"content-type":"application/xml"},NE(e.ContentMD5)&&{"content-md5":e.ContentMD5}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),NE(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",bl(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return bl(e)})).join("/")),o=Bs({tagging:""},void 0!==e.VersionId&&{versionId:e.VersionId}),void 0!==e.Tagging&&(s=Ub(e.Tagging),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Gy(e,t)]:(n={$metadata:CE(e),VersionId:void 0},void 0!==e.headers["x-amz-version-id"]&&(n.VersionId=e.headers["x-amz-version-id"]),[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),ex=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"PutPublicAccessBlockCommand",inputFilterSensitiveLog:om.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs(Bs({"content-type":"application/xml"},NE(e.ContentMD5)&&{"content-md5":e.ContentMD5}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");return r=r.replace("{Bucket}",bl(i)),o={publicAccessBlock:""},void 0!==e.PublicAccessBlockConfiguration&&(s=hb(e.PublicAccessBlockConfiguration),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Wy(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl);!function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.KMSKeyId&&{KMSKeyId:cm})}}(ak||(ak={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(sk||(sk={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.Encryption&&{Encryption:ak.filterSensitiveLog(e.Encryption)})}}(uk||(uk={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.S3&&{S3:uk.filterSensitiveLog(e.S3)})}}(ck||(ck={})),function(e){e.IGNORE="IGNORE",e.NONE="NONE",e.USE="USE"}(dk||(dk={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(lk||(lk={})),function(e){e.DOCUMENT="DOCUMENT",e.LINES="LINES"}(fk||(fk={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(pk||(pk={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(hk||(hk={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(vk||(vk={})),function(e){e.ALWAYS="ALWAYS",e.ASNEEDED="ASNEEDED"}(mk||(mk={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(gk||(gk={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(yk||(yk={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(wk||(wk={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(bk||(bk={})),function(e){e.SELECT="SELECT"}(Sk||(Sk={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.OutputLocation&&{OutputLocation:ck.filterSensitiveLog(e.OutputLocation)})}}(Ek||(Ek={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.RestoreRequest&&{RestoreRequest:Ek.filterSensitiveLog(e.RestoreRequest)})}}(kk||(kk={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Ck||(Ck={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(xk||(xk={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Tk||(Tk={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Nk||(Nk={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Ok||(Ok={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(_k||(_k={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Pk||(Pk={})),function(e){e.visit=function(e,t){return void 0!==e.Records?t.Records(e.Records):void 0!==e.Stats?t.Stats(e.Stats):void 0!==e.Progress?t.Progress(e.Progress):void 0!==e.Cont?t.Cont(e.Cont):void 0!==e.End?t.End(e.End):t._(e.$unknown[0],e.$unknown[1])},e.filterSensitiveLog=function(e){var t;return void 0!==e.Records?{Records:Ok.filterSensitiveLog(e.Records)}:void 0!==e.Stats?{Stats:Pk.filterSensitiveLog(e.Stats)}:void 0!==e.Progress?{Progress:Nk.filterSensitiveLog(e.Progress)}:void 0!==e.Cont?{Cont:Ck.filterSensitiveLog(e.Cont)}:void 0!==e.End?{End:xk.filterSensitiveLog(e.End)}:void 0!==e.$unknown?((t={})[e.$unknown[0]]="UNKNOWN",t):void 0}}(Ak||(Ak={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.Payload&&{Payload:"STREAMING_CONTENT"})}}(Ik||(Ik={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Mk||(Mk={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(Rk||(Rk={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.SSECustomerKey&&{SSECustomerKey:cm})}}(Bk||(Bk={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:cm})}}(Lk||(Lk={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.SSECustomerKey&&{SSECustomerKey:cm})}}(Dk||(Dk={})),function(e){e.filterSensitiveLog=function(e){return Bs({},e)}}(jk||(jk={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:cm})}}(zk||(zk={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs(Bs({},e),e.SSECustomerKey&&{SSECustomerKey:cm}),e.CopySourceSSECustomerKey&&{CopySourceSSECustomerKey:cm})}}(Uk||(Uk={})),function(e){e.filterSensitiveLog=function(e){return Bs(Bs({},e),e.SSEKMSKeyId&&{SSEKMSKeyId:cm})}}(Fk||(Fk={}));var tx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"RestoreObjectCommand",inputFilterSensitiveLog:kk.filterSensitiveLog,outputFilterSensitiveLog:sm.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs(Bs({"content-type":"application/xml"},NE(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",bl(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return bl(e)})).join("/")),o=Bs({restore:"","x-id":"RestoreObject"},void 0!==e.VersionId&&{versionId:e.VersionId}),void 0!==e.RestoreRequest&&(s=Cb(e.RestoreRequest),a='<?xml version="1.0" encoding="UTF-8"?>',s.addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),a+=s.toString()),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"POST",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Yy(e,t)]:(n={$metadata:CE(e),RequestCharged:void 0,RestoreOutputPath:void 0},void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),void 0!==e.headers["x-amz-restore-output-path"]&&(n.RestoreOutputPath=e.headers["x-amz-restore-output-path"]),[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),nx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(LE(t)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"SelectObjectContentCommand",inputFilterSensitiveLog:Bk.filterSensitiveLog,outputFilterSensitiveLog:Ik.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f,p;return js(this,(function(h){switch(h.label){case 0:if(n=Bs(Bs(Bs(Bs({"content-type":"application/xml"},NE(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),NE(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),NE(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",bl(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return bl(e)})).join("/")),o={select:"","select-type":"2","x-id":"SelectObjectContent"},a='<?xml version="1.0" encoding="UTF-8"?>',(s=new lm("SelectObjectContentRequest")).addAttribute("xmlns","http://s3.amazonaws.com/doc/2006-03-01/"),void 0!==e.Expression&&(u=new lm("Expression").addChildNode(new fm(e.Expression)).withName("Expression"),s.addChildNode(u)),void 0!==e.ExpressionType&&(u=new lm("ExpressionType").addChildNode(new fm(e.ExpressionType)).withName("ExpressionType"),s.addChildNode(u)),void 0!==e.InputSerialization&&(u=Lw(e.InputSerialization).withName("InputSerialization"),s.addChildNode(u)),void 0!==e.OutputSerialization&&(u=cb(e.OutputSerialization).withName("OutputSerialization"),s.addChildNode(u)),void 0!==e.RequestProgress&&(u=kb(e.RequestProgress).withName("RequestProgress"),s.addChildNode(u)),void 0!==e.ScanRange&&(u=Ob(e.ScanRange).withName("ScanRange"),s.addChildNode(u)),a+=s.toString(),[4,t.endpoint()];case 1:return c=h.sent(),d=c.hostname,l=c.protocol,f=void 0===l?"https":l,p=c.port,[2,new nc({protocol:f,hostname:d,port:p,method:"POST",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){return 200!==e.statusCode&&e.statusCode>=300?[2,Qy(e,t)]:(n={$metadata:CE(e),Payload:void 0},r=t.eventStreamMarshaller.deserialize(e.body,(function(e){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o;return js(this,(function(a){switch(a.label){case 0:return n=Object.keys(e)[0],r=Object.entries(e[n].headers).reduce((function(e,t){return e[t[0]]=t[1].value,e}),{}),i={headers:r,body:e[n].body},(o={})[n]=i,[4,ew(o,t)];case 1:return[2,a.sent()]}}))}))})),n.Payload=r,[2,Promise.resolve(n)])}))}))}(e,t)},t}(wl),rx=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(LE(t)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"UploadPartCommand",inputFilterSensitiveLog:Dk.filterSensitiveLog,outputFilterSensitiveLog:Lk.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l,f;return js(this,(function(p){switch(p.label){case 0:if(n=Bs(Bs(Bs(Bs(Bs(Bs(Bs({"content-type":"application/octet-stream"},NE(e.ContentLength)&&{"content-length":e.ContentLength.toString()}),NE(e.ContentMD5)&&{"content-md5":e.ContentMD5}),NE(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),NE(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),NE(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),NE(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",bl(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return bl(e)})).join("/")),o=Bs(Bs({"x-id":"UploadPart"},void 0!==e.PartNumber&&{partNumber:e.PartNumber.toString()}),void 0!==e.UploadId&&{uploadId:e.UploadId}),void 0!==e.Body&&(s=e.Body,a=s),[4,t.endpoint()];case 1:return u=p.sent(),c=u.hostname,d=u.protocol,l=void 0===d?"https":d,f=u.port,[2,new nc({protocol:l,hostname:c,port:f,method:"PUT",headers:n,path:r,query:o,body:a})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Jy(e,t)]:(n={$metadata:CE(e),BucketKeyEnabled:void 0,ETag:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers.etag&&(n.ETag=e.headers.etag),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),ix=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(Bd(t)),this.middlewareStack.use(LE(t)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"UploadPartCopyCommand",inputFilterSensitiveLog:Uk.filterSensitiveLog,outputFilterSensitiveLog:zk.filterSensitiveLog},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d;return js(this,(function(l){switch(l.label){case 0:if(n=Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs({},NE(e.CopySource)&&{"x-amz-copy-source":e.CopySource}),NE(e.CopySourceIfMatch)&&{"x-amz-copy-source-if-match":e.CopySourceIfMatch}),NE(e.CopySourceIfModifiedSince)&&{"x-amz-copy-source-if-modified-since":Tl(e.CopySourceIfModifiedSince).toString()}),NE(e.CopySourceIfNoneMatch)&&{"x-amz-copy-source-if-none-match":e.CopySourceIfNoneMatch}),NE(e.CopySourceIfUnmodifiedSince)&&{"x-amz-copy-source-if-unmodified-since":Tl(e.CopySourceIfUnmodifiedSince).toString()}),NE(e.CopySourceRange)&&{"x-amz-copy-source-range":e.CopySourceRange}),NE(e.SSECustomerAlgorithm)&&{"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),NE(e.SSECustomerKey)&&{"x-amz-server-side-encryption-customer-key":e.SSECustomerKey}),NE(e.SSECustomerKeyMD5)&&{"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),NE(e.CopySourceSSECustomerAlgorithm)&&{"x-amz-copy-source-server-side-encryption-customer-algorithm":e.CopySourceSSECustomerAlgorithm}),NE(e.CopySourceSSECustomerKey)&&{"x-amz-copy-source-server-side-encryption-customer-key":e.CopySourceSSECustomerKey}),NE(e.CopySourceSSECustomerKeyMD5)&&{"x-amz-copy-source-server-side-encryption-customer-key-md5":e.CopySourceSSECustomerKeyMD5}),NE(e.RequestPayer)&&{"x-amz-request-payer":e.RequestPayer}),NE(e.ExpectedBucketOwner)&&{"x-amz-expected-bucket-owner":e.ExpectedBucketOwner}),NE(e.ExpectedSourceBucketOwner)&&{"x-amz-source-expected-bucket-owner":e.ExpectedSourceBucketOwner}),r="/{Bucket}/{Key+}",void 0===e.Bucket)throw new Error("No value provided for input HTTP label: Bucket.");if((i=e.Bucket).length<=0)throw new Error("Empty value provided for input HTTP label: Bucket.");if(r=r.replace("{Bucket}",bl(i)),void 0===e.Key)throw new Error("No value provided for input HTTP label: Key.");if((i=e.Key).length<=0)throw new Error("Empty value provided for input HTTP label: Key.");return r=r.replace("{Key+}",i.split("/").map((function(e){return bl(e)})).join("/")),o=Bs(Bs({"x-id":"UploadPartCopy"},void 0!==e.PartNumber&&{partNumber:e.PartNumber.toString()}),void 0!==e.UploadId&&{uploadId:e.UploadId}),[4,t.endpoint()];case 1:return a=l.sent(),s=a.hostname,u=a.protocol,c=void 0===u?"https":u,d=a.port,[2,new nc({protocol:c,hostname:s,port:d,method:"PUT",headers:n,path:r,query:o,body:void 0})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r;return js(this,(function(i){switch(i.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Xy(e,t)]:(n={$metadata:CE(e),BucketKeyEnabled:void 0,CopyPartResult:void 0,CopySourceVersionId:void 0,RequestCharged:void 0,SSECustomerAlgorithm:void 0,SSECustomerKeyMD5:void 0,SSEKMSKeyId:void 0,ServerSideEncryption:void 0},void 0!==e.headers["x-amz-copy-source-version-id"]&&(n.CopySourceVersionId=e.headers["x-amz-copy-source-version-id"]),void 0!==e.headers["x-amz-server-side-encryption"]&&(n.ServerSideEncryption=e.headers["x-amz-server-side-encryption"]),void 0!==e.headers["x-amz-server-side-encryption-customer-algorithm"]&&(n.SSECustomerAlgorithm=e.headers["x-amz-server-side-encryption-customer-algorithm"]),void 0!==e.headers["x-amz-server-side-encryption-customer-key-md5"]&&(n.SSECustomerKeyMD5=e.headers["x-amz-server-side-encryption-customer-key-md5"]),void 0!==e.headers["x-amz-server-side-encryption-aws-kms-key-id"]&&(n.SSEKMSKeyId=e.headers["x-amz-server-side-encryption-aws-kms-key-id"]),void 0!==e.headers["x-amz-server-side-encryption-bucket-key-enabled"]&&(n.BucketKeyEnabled="true"===e.headers["x-amz-server-side-encryption-bucket-key-enabled"]),void 0!==e.headers["x-amz-request-charged"]&&(n.RequestCharged=e.headers["x-amz-request-charged"]),[4,OE(e.body,t)]);case 1:return r=i.sent(),n.CopyPartResult=rS(r),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),ox=function(e){function t(t){var n=e.call(this)||this;return n.input=t,n}return Rs(t,e),t.prototype.resolveMiddleware=function(e,t,n){this.middlewareStack.use(IE(t,this.serialize,this.deserialize)),this.middlewareStack.use(wd(t));var r=e.concat(this.middlewareStack),i={logger:t.logger,clientName:"S3Client",commandName:"WriteGetObjectResponseCommand",inputFilterSensitiveLog:Fk.filterSensitiveLog,outputFilterSensitiveLog:function(e){return e}},o=t.requestHandler;return r.resolve((function(e){return o.handle(e.request,n||{})}),i)},t.prototype.serialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,d,l;return js(this,(function(f){switch(f.label){case 0:return n=Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs(Bs({"content-type":"application/octet-stream","x-amz-content-sha256":"UNSIGNED-PAYLOAD"},NE(e.RequestRoute)&&{"x-amz-request-route":e.RequestRoute}),NE(e.RequestToken)&&{"x-amz-request-token":e.RequestToken}),NE(e.StatusCode)&&{"x-amz-fwd-status":e.StatusCode.toString()}),NE(e.ErrorCode)&&{"x-amz-fwd-error-code":e.ErrorCode}),NE(e.ErrorMessage)&&{"x-amz-fwd-error-message":e.ErrorMessage}),NE(e.AcceptRanges)&&{"x-amz-fwd-header-accept-ranges":e.AcceptRanges}),NE(e.CacheControl)&&{"x-amz-fwd-header-cache-control":e.CacheControl}),NE(e.ContentDisposition)&&{"x-amz-fwd-header-content-disposition":e.ContentDisposition}),NE(e.ContentEncoding)&&{"x-amz-fwd-header-content-encoding":e.ContentEncoding}),NE(e.ContentLanguage)&&{"x-amz-fwd-header-content-language":e.ContentLanguage}),NE(e.ContentLength)&&{"content-length":e.ContentLength.toString()}),NE(e.ContentRange)&&{"x-amz-fwd-header-content-range":e.ContentRange}),NE(e.ContentType)&&{"x-amz-fwd-header-content-type":e.ContentType}),NE(e.DeleteMarker)&&{"x-amz-fwd-header-x-amz-delete-marker":e.DeleteMarker.toString()}),NE(e.ETag)&&{"x-amz-fwd-header-etag":e.ETag}),NE(e.Expires)&&{"x-amz-fwd-header-expires":Tl(e.Expires).toString()}),NE(e.Expiration)&&{"x-amz-fwd-header-x-amz-expiration":e.Expiration}),NE(e.LastModified)&&{"x-amz-fwd-header-last-modified":Tl(e.LastModified).toString()}),NE(e.MissingMeta)&&{"x-amz-fwd-header-x-amz-missing-meta":e.MissingMeta.toString()}),NE(e.ObjectLockMode)&&{"x-amz-fwd-header-x-amz-object-lock-mode":e.ObjectLockMode}),NE(e.ObjectLockLegalHoldStatus)&&{"x-amz-fwd-header-x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus}),NE(e.ObjectLockRetainUntilDate)&&{"x-amz-fwd-header-x-amz-object-lock-retain-until-date":(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()}),NE(e.PartsCount)&&{"x-amz-fwd-header-x-amz-mp-parts-count":e.PartsCount.toString()}),NE(e.ReplicationStatus)&&{"x-amz-fwd-header-x-amz-replication-status":e.ReplicationStatus}),NE(e.RequestCharged)&&{"x-amz-fwd-header-x-amz-request-charged":e.RequestCharged}),NE(e.Restore)&&{"x-amz-fwd-header-x-amz-restore":e.Restore}),NE(e.ServerSideEncryption)&&{"x-amz-fwd-header-x-amz-server-side-encryption":e.ServerSideEncryption}),NE(e.SSECustomerAlgorithm)&&{"x-amz-fwd-header-x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm}),NE(e.SSEKMSKeyId)&&{"x-amz-fwd-header-x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId}),NE(e.SSECustomerKeyMD5)&&{"x-amz-fwd-header-x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5}),NE(e.StorageClass)&&{"x-amz-fwd-header-x-amz-storage-class":e.StorageClass}),NE(e.TagCount)&&{"x-amz-fwd-header-x-amz-tagging-count":e.TagCount.toString()}),NE(e.VersionId)&&{"x-amz-fwd-header-x-amz-version-id":e.VersionId}),NE(e.BucketKeyEnabled)&&{"x-amz-fwd-header-x-amz-server-side-encryption-bucket-key-enabled":e.BucketKeyEnabled.toString()}),void 0!==e.Metadata&&Object.keys(e.Metadata).reduce((function(t,n){var r;return Bs(Bs({},t),((r={})["x-amz-meta-"+n.toLowerCase()]=e.Metadata[n],r))}),{})),r="/WriteGetObjectResponse",i={"x-id":"WriteGetObjectResponse"},void 0!==e.Body&&(a=e.Body,o=a),[4,t.endpoint()];case 1:if(s=f.sent().hostname,!0!==t.disableHostPrefix){if(s="{RequestRoute}."+s,void 0===e.RequestRoute)throw new Error("Empty value provided for input host prefix: RequestRoute.");if(s=s.replace("{RequestRoute}",e.RequestRoute),!/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(s))throw new Error("ValidationError: prefixed hostname must be hostname compatible.")}return[4,t.endpoint()];case 2:return(u=f.sent()).hostname,c=u.protocol,d=void 0===c?"https":c,l=u.port,[2,new nc({protocol:d,hostname:s,port:l,method:"POST",headers:n,path:r,query:i,body:o})]}}))}))}(e,t)},t.prototype.deserialize=function(e,t){return function(e,t){return Ds(void 0,void 0,void 0,(function(){var n;return js(this,(function(r){switch(r.label){case 0:return 200!==e.statusCode&&e.statusCode>=300?[2,Zy(e,t)]:(n={$metadata:CE(e)},[4,xE(e.body,t)]);case 1:return r.sent(),[2,Promise.resolve(n)]}}))}))}(e,t)},t}(wl),ax=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Rs(t,e),t.prototype.abortMultipartUpload=function(e,t,n){var r=new ME(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.completeMultipartUpload=function(e,t,n){var r=new RE(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.copyObject=function(e,t,n){var r=new DE(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.createBucket=function(e,t,n){var r=new UE(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.createMultipartUpload=function(e,t,n){var r=new FE(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucket=function(e,t,n){var r=new KE(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucketAnalyticsConfiguration=function(e,t,n){var r=new qE(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucketCors=function(e,t,n){var r=new HE(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucketEncryption=function(e,t,n){var r=new $E(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucketIntelligentTieringConfiguration=function(e,t,n){var r=new VE(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucketInventoryConfiguration=function(e,t,n){var r=new GE(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucketLifecycle=function(e,t,n){var r=new WE(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucketMetricsConfiguration=function(e,t,n){var r=new YE(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucketOwnershipControls=function(e,t,n){var r=new QE(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucketPolicy=function(e,t,n){var r=new JE(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucketReplication=function(e,t,n){var r=new XE(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucketTagging=function(e,t,n){var r=new ZE(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteBucketWebsite=function(e,t,n){var r=new ek(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteObject=function(e,t,n){var r=new tk(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteObjects=function(e,t,n){var r=new qk(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deleteObjectTagging=function(e,t,n){var r=new nk(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.deletePublicAccessBlock=function(e,t,n){var r=new Kk(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketAccelerateConfiguration=function(e,t,n){var r=new Hk(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketAcl=function(e,t,n){var r=new $k(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketAnalyticsConfiguration=function(e,t,n){var r=new Vk(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketCors=function(e,t,n){var r=new Gk(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketEncryption=function(e,t,n){var r=new Wk(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketIntelligentTieringConfiguration=function(e,t,n){var r=new Yk(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketInventoryConfiguration=function(e,t,n){var r=new Qk(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketLifecycleConfiguration=function(e,t,n){var r=new Jk(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketLocation=function(e,t,n){var r=new Xk(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketLogging=function(e,t,n){var r=new Zk(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketMetricsConfiguration=function(e,t,n){var r=new eC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketNotificationConfiguration=function(e,t,n){var r=new tC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketOwnershipControls=function(e,t,n){var r=new nC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketPolicy=function(e,t,n){var r=new rC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketPolicyStatus=function(e,t,n){var r=new iC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketReplication=function(e,t,n){var r=new oC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketRequestPayment=function(e,t,n){var r=new aC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketTagging=function(e,t,n){var r=new sC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketVersioning=function(e,t,n){var r=new uC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getBucketWebsite=function(e,t,n){var r=new cC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getObject=function(e,t,n){var r=new lC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getObjectAcl=function(e,t,n){var r=new dC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getObjectLegalHold=function(e,t,n){var r=new fC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getObjectLockConfiguration=function(e,t,n){var r=new pC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getObjectRetention=function(e,t,n){var r=new hC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getObjectTagging=function(e,t,n){var r=new vC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getObjectTorrent=function(e,t,n){var r=new mC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.getPublicAccessBlock=function(e,t,n){var r=new gC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.headBucket=function(e,t,n){var r=new yC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.headObject=function(e,t,n){var r=new wC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.listBucketAnalyticsConfigurations=function(e,t,n){var r=new bC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.listBucketIntelligentTieringConfigurations=function(e,t,n){var r=new SC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.listBucketInventoryConfigurations=function(e,t,n){var r=new EC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.listBucketMetricsConfigurations=function(e,t,n){var r=new kC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.listBuckets=function(e,t,n){var r=new CC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.listMultipartUploads=function(e,t,n){var r=new xC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.listObjects=function(e,t,n){var r=new NC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.listObjectsV2=function(e,t,n){var r=new OC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.listObjectVersions=function(e,t,n){var r=new TC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.listParts=function(e,t,n){var r=new _C(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketAccelerateConfiguration=function(e,t,n){var r=new PC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketAcl=function(e,t,n){var r=new AC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketAnalyticsConfiguration=function(e,t,n){var r=new IC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketCors=function(e,t,n){var r=new MC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketEncryption=function(e,t,n){var r=new RC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketIntelligentTieringConfiguration=function(e,t,n){var r=new BC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketInventoryConfiguration=function(e,t,n){var r=new LC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketLifecycleConfiguration=function(e,t,n){var r=new DC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketLogging=function(e,t,n){var r=new jC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketMetricsConfiguration=function(e,t,n){var r=new zC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketNotificationConfiguration=function(e,t,n){var r=new UC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketOwnershipControls=function(e,t,n){var r=new FC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketPolicy=function(e,t,n){var r=new qC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketReplication=function(e,t,n){var r=new KC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketRequestPayment=function(e,t,n){var r=new HC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketTagging=function(e,t,n){var r=new $C(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketVersioning=function(e,t,n){var r=new VC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putBucketWebsite=function(e,t,n){var r=new GC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putObject=function(e,t,n){var r=new YC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putObjectAcl=function(e,t,n){var r=new WC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putObjectLegalHold=function(e,t,n){var r=new QC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putObjectLockConfiguration=function(e,t,n){var r=new JC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putObjectRetention=function(e,t,n){var r=new XC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putObjectTagging=function(e,t,n){var r=new ZC(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.putPublicAccessBlock=function(e,t,n){var r=new ex(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.restoreObject=function(e,t,n){var r=new tx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.selectObjectContent=function(e,t,n){var r=new nx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.uploadPart=function(e,t,n){var r=new rx(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.uploadPartCopy=function(e,t,n){var r=new ix(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t.prototype.writeGetObjectResponse=function(e,t,n){var r=new ox(e);if("function"==typeof t)this.send(r,t);else{if("function"!=typeof n)return this.send(r,t);if("object"!=typeof t)throw new Error("Expect http options but get "+typeof t);this.send(r,t||{},n)}},t}(dm),sx=function(){function e(e){this.statusCode=e.statusCode,this.headers=e.headers||{},this.body=e.body}return e.isInstance=function(e){if(!e)return!1;var t=e;return"number"==typeof t.statusCode&&"object"==typeof t.headers},e}(),ux=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,cx)},cx=function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()};for(var dx=function(){function e(e){var t=(void 0===e?{}:e).requestTimeout;this.requestTimeout=t}return e.prototype.destroy=function(){},e.prototype.handle=function(e,t){var n=(void 0===t?{}:t).abortSignal,r=this.requestTimeout;if(null==n?void 0:n.aborted){var i=new Error("Request aborted");return i.name="AbortError",Promise.reject(i)}var o=e.path;if(e.query){var a=function(e){var t,n,r=[];try{for(var i=Qs(Object.keys(e).sort()),o=i.next();!o.done;o=i.next()){var a=o.value,s=e[a];if(a=ux(a),Array.isArray(s))for(var u=0,c=s.length;u<c;u++)r.push(a+"="+ux(s[u]));else{var d=a;(s||"string"==typeof s)&&(d+="="+ux(s)),r.push(d)}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r.join("&")}(e.query);a&&(o+="?"+a)}var s=e.port,u=e.method,c=e.protocol+"//"+e.hostname+(s?":"+s:"")+o,d={body:"GET"===u||"HEAD"===u?void 0:e.body,headers:new Headers(e.headers),method:u};"undefined"!=typeof AbortController&&(d.signal=n);var l,f=new Request(c,d),p=[fetch(f).then((function(e){var t,n,r=e.headers,i={};try{for(var o=Qs(r.entries()),a=o.next();!a.done;a=o.next()){var s=a.value;i[s[0]]=s[1]}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return void 0!==e.body?{response:new sx({headers:i,statusCode:e.status,body:e.body})}:e.blob().then((function(t){return{response:new sx({headers:i,statusCode:e.status,body:t})}}))})),(l=r,void 0===l&&(l=0),new Promise((function(e,t){l&&setTimeout((function(){var e=new Error("Request did not complete within "+l+" ms");e.name="TimeoutError",t(e)}),l)})))];return n&&p.push(new Promise((function(e,t){n.onabort=function(){var e=new Error("Request aborted");e.name="AbortError",t(e)}}))),Promise.race(p)},e}(),lx={},fx=new Array(64),px=0,hx="A".charCodeAt(0),vx="Z".charCodeAt(0);px+hx<=vx;px++){lx[gx=String.fromCharCode(px+hx)]=px,fx[px]=gx}for(px=0,hx="a".charCodeAt(0),vx="z".charCodeAt(0);px+hx<=vx;px++){var mx=px+26;lx[gx=String.fromCharCode(px+hx)]=mx,fx[mx]=gx}for(px=0;px<10;px++){lx[px.toString(10)]=px+52;var gx=px.toString(10);mx=px+52;lx[gx]=mx,fx[mx]=gx}lx["+"]=62,fx[62]="+",lx["/"]=63,fx[63]="/";var yx=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class wx{constructor(){this.queue=[],this.resolveEmptyQueue=()=>{},this.emptyQueuePromise=new Promise((e=>{e()})),this.resetEmptyQueuePromise()}push(e){this.queue.push(e)}shift(){const e=this.queue.shift();return void 0===e?null:(0===this.queue.length&&(this.resolveEmptyQueue(),this.resetEmptyQueuePromise()),e)}getSize(){return this.queue.length}clear(){this.queue=[],this.resolveEmptyQueue()}waitUntilEmpty(){return yx(this,void 0,void 0,(function*(){0!==this.getSize()&&(yield this.emptyQueuePromise)}))}resetEmptyQueuePromise(){this.emptyQueuePromise=new Promise((e=>{this.resolveEmptyQueue=e}))}}class bx{constructor(e,t,n){this.inProgress={},this.uploaderProgress={total:0,pending:0},this.queue=new wx,this.fileNamePrefix="",this.cancelled=!1,this.onDrained=new Is,this.onProgressUpdate=new Is,this.onFileUploaded=new Is,this.onError=new Is,this.logger=n,this.s3=e,this.options=t}static get maximumConcurrentUploads(){return 2}static createUploader(e,t,n,r){const i=Object.assign({},e),o=new ax(Object.assign(Object.assign({maxAttempts:10,requestHandler:new dx({requestTimeout:24e4}),forcePathStyle:!0},i),{credentials:n}));return new bx(o,t,r)}get Drained(){return this.onDrained.expose()}get ProgressUpdate(){return this.onProgressUpdate.expose()}get FileUploaded(){return this.onFileUploaded.expose()}get Error(){return this.onError.expose()}uploadFile(e,t){if(this.cancelled)return;const n={body:e,s3Key:`${this.fileNamePrefix}${t}`};this.canPerformUpload()?this.performUpload(n):this.queue.push(n),this.notifyNewPendingFile()}setFileNamePrefix(e){this.fileNamePrefix=e}cancel(){this.cancelled||(this.cancelled=!0,this.queue.clear(),this.uploaderProgress.pending=this.queue.getSize(),this.onProgressUpdate.trigger(this.uploaderProgress))}canPerformUpload(){return Object.values(this.inProgress).length<bx.maximumConcurrentUploads}drain(){return yx(this,void 0,void 0,(function*(){this.cancelled||(this.logger.crumb({message:"s3-uploader: draining upload queue",level:Ce.Info,context:{queueSize:this.queue.getSize()}}),yield this.waitForPendingUploads(),this.onDrained.trigger())}))}waitForPendingUploads(){return yx(this,void 0,void 0,(function*(){yield this.queue.waitUntilEmpty(),yield Promise.all(Object.values(this.inProgress))}))}notifyNewPendingFile(){this.uploaderProgress.pending+=1,this.uploaderProgress.total+=1,this.onProgressUpdate.trigger(this.uploaderProgress)}notifyFileUploaded(e){this.uploaderProgress.pending-=1,this.onProgressUpdate.trigger(this.uploaderProgress),this.onFileUploaded.trigger(e)}performUpload(e){const t=`${(new Date).getTime()}`;this.inProgress[t]=(()=>yx(this,void 0,void 0,(function*(){var n;const r=`${this.options.keyPrefix}${e.s3Key}`;this.logger.crumb({message:`s3-uploader: uploading ${r}`,level:Ce.Info,context:{}});const i=e.body instanceof ArrayBuffer?new Uint8Array(e.body):e.body,o=this.s3.putObject({Body:i,Bucket:this.options.bucketName,Key:r}),a=yield o,s=null===(n=a.$metadata)||void 0===n?void 0:n.httpStatusCode;if(s&&s.toString().match(/^[4|5]/))return this.onError.trigger(new Error(`Error uploading to S3: aws-error code: ${s}`)),a;this.notifyFileUploaded(r),delete this.inProgress[t];const u=this.queue.shift();return!this.cancelled&&u&&this.performUpload(u),a})))()}}var Sx=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class Ex{constructor(){this.onData=new Is,this.onError=new Is,this.fileReader=new FileReader,this.readChain=new Promise((e=>e())),this.readChainResolve=()=>{},this.fileReader.onloadend=()=>{const e=this.fileReader.result;if(e&&e instanceof ArrayBuffer)try{this.onData.trigger(e.slice(0)),this.readChainResolve()}catch(e){this.onError.trigger(e)}else this.onError.trigger(new Error(`FileReader: invalid result ${e}`))},this.fileReader.onerror=()=>{this.onError.trigger(new Error(`FileReader error: ${this.fileReader.error}`))}}get Data(){return this.onData.expose()}get Error(){return this.onError.expose()}read(e){this.readChain=this.readChain.then((()=>new Promise((t=>{this.readChainResolve=t,this.fileReader.readAsArrayBuffer(e)}))))}drain(){return Sx(this,void 0,void 0,(function*(){yield this.readChain}))}}class kx{constructor(e,t,n){this.onComplete=new Is,this.onError=new Is,this.blobReader=new Ex,this.is_finishing=!1,this.logger=n,this.uploader=t,this.packager=e,this.registerEventHandlers()}get Complete(){return this.onComplete.expose()}get Error(){return this.onError.expose()}static get mimeType(){return"video/webm"}upload(e){this.blobReader.read(e)}cancel(){this.unregisterEventHandlers(),this.uploader.cancel()}finish(){this.blobReader.drain().then((()=>{this.packager.drain()}))}registerEventHandlers(){this.packager.InitSegment.on(this.packagerInitSegmentHandler.bind(this)),this.packager.MediaSegment.on(this.packagerMediaSegmentHandler.bind(this)),this.packager.Drained.on(this.packagerDrainedHandler.bind(this)),this.packager.Error.on(this.onError.trigger.bind(this.onError)),this.blobReader.Error.on(this.onError.trigger.bind(this.onError)),this.blobReader.Data.on((e=>{this.is_finishing?this.logger.warn(`Discarding ArrayBuffer with ${e.byteLength} bytes`,{},{}):this.packager.addSample(e)}))}unregisterEventHandlers(){this.packager.InitSegment.clear(),this.packager.MediaSegment.clear(),this.packager.Drained.clear()}packagerInitSegmentHandler(e){this.requestUpload(e.data,e.name)}packagerMediaSegmentHandler(e){this.requestUpload(e.data,e.name)}packagerDrainedHandler(e){this.logger.crumb({message:"segment-uploader: packager drained, uploading manifest",level:Ce.Info,context:{}}),this.uploader.Drained.on((()=>{this.logger.crumb({message:"segment-uploader: all parts uploaded, triggering onComplete",level:Ce.Info,context:{}}),this.onComplete.trigger()})),this.requestUpload(e,`${this.packager.getSegmentNamePrefix()}manifest.mpd`),this.uploader.drain()}requestUpload(e,t){try{this.uploader.uploadFile(e,t)}catch(e){this.onError.trigger(e)}}}var Cx=function(e,t,n){t=t||0;for(var r=1;r<=8&&!(e[t]>=Math.pow(2,8-r));r++);if(r>8)throw new Error("Unrepresentable length: "+r+" "+e.toString("hex",t,t+r));if(t+r>e.length)return null;var i,o=e[t]&(1<<8-r)-1;for(i=1;i<r;i++){if(7===i&&o>=Math.pow(2,45)&&e[t+7]>0)return{length:r,value:-1};o*=Math.pow(2,8),o+=e[t+i]}return n&&(o-=Math.pow(2,7*r-1)-1),{length:r,value:o}};function xx(e){this.buffer=e,this.offset=0}xx.prototype.nextInt16BE=function(){var e=this.buffer.readInt16BE(this.offset);return this.offset+=2,e},xx.prototype.nextUInt8=function(){var e=this.buffer.readUInt8(this.offset);return this.offset+=1,e},xx.prototype.nextUIntV=function(){var e=Cx(this.buffer,this.offset);return this.offset+=e.length,e.value},xx.prototype.nextIntV=function(){var e=Cx(this.buffer,this.offset,!0);return this.offset+=e.length,e.value},xx.prototype.nextBuffer=function(e){var t=e?this.buffer.slice(this.offset,this.offset+e):this.buffer.slice(this.offset);return this.offset+=e||this.length,t},Object.defineProperty(xx.prototype,"length",{get:function(){return this.buffer.length-this.offset}});var Tx=xx;var Nx={128:{name:"ChapterDisplay",level:4,type:"m",multiple:!0,minver:1,webm:!0,description:"Contains all possible strings to use for the chapter display."},131:{name:"TrackType",level:3,type:"u",mandatory:!0,minver:1,range:"1-254",description:"A set of track types coded on 8 bits (1: video, 2: audio, 3: complex, 0x10: logo, 0x11: subtitle, 0x12: buttons, 0x20: control)."},133:{name:"ChapString",cppname:"ChapterString",level:5,type:"8",mandatory:!0,minver:1,webm:!0,description:"Contains the string to use as the chapter atom."},134:{name:"CodecID",level:3,type:"s",mandatory:!0,minver:1,description:"An ID corresponding to the codec, see the codec page for more info."},136:{name:"FlagDefault",cppname:"TrackFlagDefault",level:3,type:"u",mandatory:!0,minver:1,default:1,range:"0-1",description:"Set if that track (audio, video or subs) SHOULD be active if no language found matches the user preference. (1 bit)"},137:{name:"ChapterTrackNumber",level:5,type:"u",mandatory:!0,multiple:!0,minver:1,webm:!1,range:"not 0",description:"UID of the Track to apply this chapter too. In the absense of a control track, choosing this chapter will select the listed Tracks and deselect unlisted tracks. Absense of this element indicates that the Chapter should be applied to any currently used Tracks."},145:{name:"ChapterTimeStart",level:4,type:"u",mandatory:!0,minver:1,webm:!0,description:"Timestamp of the start of Chapter (not scaled)."},146:{name:"ChapterTimeEnd",level:4,type:"u",minver:1,webm:!1,description:"Timestamp of the end of Chapter (timestamp excluded, not scaled)."},150:{name:"CueRefTime",level:5,type:"u",mandatory:!0,minver:2,webm:!1,description:"Timestamp of the referenced Block."},151:{name:"CueRefCluster",level:5,type:"u",mandatory:!0,webm:!1,description:"The Position of the Cluster containing the referenced Block."},152:{name:"ChapterFlagHidden",level:4,type:"u",mandatory:!0,minver:1,webm:!1,default:0,range:"0-1",description:"If a chapter is hidden (1), it should not be available to the user interface (but still to Control Tracks; see flag notes). (1 bit)"},16980:{name:"ContentCompAlgo",level:6,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"The compression algorithm used. Algorithms that have been specified so far are: 0 - zlib,   3 - Header Stripping"},16981:{name:"ContentCompSettings",level:6,type:"b",minver:1,webm:!1,description:"Settings that might be needed by the decompressor. For Header Stripping (ContentCompAlgo=3), the bytes that were removed from the beggining of each frames of the track."},17026:{name:"DocType",level:1,type:"s",mandatory:!0,default:"matroska",minver:1,description:"A string that describes the type of document that follows this EBML header. 'matroska' in our case or 'webm' for webm files."},17029:{name:"DocTypeReadVersion",level:1,type:"u",mandatory:!0,default:1,minver:1,description:"The minimum DocType version an interpreter has to support to read this file."},17030:{name:"EBMLVersion",level:1,type:"u",mandatory:!0,default:1,minver:1,description:"The version of EBML parser used to create the file."},17031:{name:"DocTypeVersion",level:1,type:"u",mandatory:!0,default:1,minver:1,description:"The version of DocType interpreter used to create the file."},17476:{name:"SegmentFamily",level:2,type:"b",multiple:!0,minver:1,webm:!1,bytesize:16,description:"A randomly generated unique ID that all segments related to each other must use (128 bits)."},17505:{name:"DateUTC",level:2,type:"d",minver:1,description:"Date of the origin of timestamp (value 0), i.e. production date."},17540:{name:"TagDefault",level:4,type:"u",mandatory:!0,minver:1,webm:!1,default:1,range:"0-1",description:"Indication to know if this is the default/original language to use for the given tag. (1 bit)"},17541:{name:"TagBinary",level:4,type:"b",minver:1,webm:!1,description:"The values of the Tag if it is binary. Note that this cannot be used in the same SimpleTag as TagString."},17543:{name:"TagString",level:4,type:"8",minver:1,webm:!1,description:"The value of the Element."},17545:{name:"Duration",level:2,type:"f",minver:1,range:"> 0",description:"Duration of the segment (based on TimecodeScale)."},17816:{name:"ChapterFlagEnabled",level:4,type:"u",mandatory:!0,minver:1,webm:!1,default:1,range:"0-1",description:"Specify wether the chapter is enabled. It can be enabled/disabled by a Control Track. When disabled, the movie should skip all the content between the TimeStart and TimeEnd of this chapter (see flag notes). (1 bit)"},18016:{name:"FileMimeType",level:3,type:"s",mandatory:!0,minver:1,webm:!1,description:"MIME type of the file."},18017:{name:"FileUsedStartTime",level:3,type:"u",divx:!0,description:"DivX font extension"},18018:{name:"FileUsedEndTime",level:3,type:"u",divx:!0,description:"DivX font extension"},18037:{name:"FileReferral",level:3,type:"b",webm:!1,description:"A binary value that a track/codec can refer to when the attachment is needed."},20529:{name:"ContentEncodingOrder",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"Tells when this modification was used during encoding/muxing starting with 0 and counting upwards. The decoder/demuxer has to start with the highest order number it finds and work its way down. This value has to be unique over all ContentEncodingOrder elements in the segment."},20530:{name:"ContentEncodingScope",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:1,range:"not 0",description:"A bit field that describes which elements have been modified in this way. Values (big endian) can be OR'ed. Possible values: 1 - all frame contents, 2 - the track's private data, 4 - the next ContentEncoding (next ContentEncodingOrder. Either the data inside ContentCompression and/or ContentEncryption)"},20531:{name:"ContentEncodingType",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"A value describing what kind of transformation has been done. Possible values: 0 - compression, 1 - encryption"},20532:{name:"ContentCompression",level:5,type:"m",minver:1,webm:!1,description:"Settings describing the compression used. Must be present if the value of ContentEncodingType is 0 and absent otherwise. Each block must be decompressable even if no previous block is available in order not to prevent seeking."},20533:{name:"ContentEncryption",level:5,type:"m",minver:1,webm:!1,description:"Settings describing the encryption used. Must be present if the value of ContentEncodingType is 1 and absent otherwise."},21368:{name:"CueBlockNumber",level:4,type:"u",minver:1,default:1,range:"not 0",description:"Number of the Block in the specified Cluster."},22100:{name:"ChapterStringUID",level:4,type:"8",mandatory:!1,minver:3,webm:!0,description:"A unique string ID to identify the Chapter. Use for WebVTT cue identifier storage."},22337:{name:"WritingApp",level:2,type:"8",mandatory:!0,minver:1,description:'Writing application ("mkvmerge-0.3.3").'},22612:{name:"SilentTracks",cppname:"ClusterSilentTracks",level:2,type:"m",minver:1,webm:!1,description:"The list of tracks that are not used in that part of the stream. It is useful when using overlay tracks on seeking. Then you should decide what track to use."},25152:{name:"ContentEncoding",level:4,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"Settings for one content encoding like compression or encryption."},25188:{name:"BitDepth",cppname:"AudioBitDepth",level:4,type:"u",minver:1,range:"not 0",description:"Bits per sample, mostly used for PCM."},25906:{name:"SignedElement",level:3,type:"b",multiple:!0,webm:!1,description:"An element ID whose data will be used to compute the signature."},26148:{name:"TrackTranslate",level:3,type:"m",multiple:!0,minver:1,webm:!1,description:"The track identification for the given Chapter Codec."},26897:{name:"ChapProcessCommand",cppname:"ChapterProcessCommand",level:5,type:"m",multiple:!0,minver:1,webm:!1,description:"Contains all the commands associated to the Atom."},26914:{name:"ChapProcessTime",cppname:"ChapterProcessTime",level:6,type:"u",mandatory:!0,minver:1,webm:!1,description:"Defines when the process command should be handled (0: during the whole chapter, 1: before starting playback, 2: after playback of the chapter)."},26916:{name:"ChapterTranslate",level:2,type:"m",multiple:!0,minver:1,webm:!1,description:"A tuple of corresponding ID used by chapter codecs to represent this segment."},26931:{name:"ChapProcessData",cppname:"ChapterProcessData",level:6,type:"b",mandatory:!0,minver:1,webm:!1,description:"Contains the command information. The data should be interpreted depending on the ChapProcessCodecID value. For ChapProcessCodecID = 1, the data correspond to the binary DVD cell pre/post commands."},26948:{name:"ChapProcess",cppname:"ChapterProcess",level:4,type:"m",multiple:!0,minver:1,webm:!1,description:"Contains all the commands associated to the Atom."},26965:{name:"ChapProcessCodecID",cppname:"ChapterProcessCodecID",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"Contains the type of the codec used for the processing. A value of 0 means native Matroska processing (to be defined), a value of 1 means the DVD command set is used. More codec IDs can be added later."},29555:{name:"Tag",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"Element containing elements specific to Tracks/Chapters."},29572:{name:"SegmentFilename",level:2,type:"8",minver:1,webm:!1,description:"A filename corresponding to this segment."},29766:{name:"AttachmentLink",cppname:"TrackAttachmentLink",level:3,type:"u",minver:1,webm:!1,range:"not 0",description:"The UID of an attachment that is used by this codec."},2459272:{name:"CodecName",level:3,type:"8",minver:1,description:"A human-readable string specifying the codec."},408125543:{name:"Segment",level:"0",type:"m",mandatory:!0,multiple:!0,minver:1,description:"This element contains all other top-level (level 1) elements. Typically a Matroska file is composed of 1 segment."},17530:{name:"TagLanguage",level:4,type:"s",mandatory:!0,minver:1,webm:!1,default:"und",description:"Specifies the language of the tag specified, in the Matroska languages form."},17827:{name:"TagName",level:4,type:"8",mandatory:!0,minver:1,webm:!1,description:"The name of the Tag that is going to be stored."},26568:{name:"SimpleTag",cppname:"TagSimple",level:3,recursive:"1",type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"Contains general information about the target."},25542:{name:"TagAttachmentUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,default:0,description:"A unique ID to identify the Attachment(s) the tags belong to. If the value is 0 at this level, the tags apply to all the attachments in the Segment."},25540:{name:"TagChapterUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,default:0,description:"A unique ID to identify the Chapter(s) the tags belong to. If the value is 0 at this level, the tags apply to all chapters in the Segment."},25545:{name:"TagEditionUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,default:0,description:"A unique ID to identify the EditionEntry(s) the tags belong to. If the value is 0 at this level, the tags apply to all editions in the Segment."},25541:{name:"TagTrackUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,default:0,description:"A unique ID to identify the Track(s) the tags belong to. If the value is 0 at this level, the tags apply to all tracks in the Segment."},25546:{name:"TargetType",cppname:"TagTargetType",level:4,type:"s",minver:1,webm:!1,strong:"informational",description:'An  string that can be used to display the logical level of the target like "ALBUM", "TRACK", "MOVIE", "CHAPTER", etc (see TargetType).'},26826:{name:"TargetTypeValue",cppname:"TagTargetTypeValue",level:4,type:"u",minver:1,webm:!1,default:50,description:"A number to indicate the logical level of the target (see TargetType)."},25536:{name:"Targets",cppname:"TagTargets",level:3,type:"m",mandatory:!0,minver:1,webm:!1,description:"Contain all UIDs where the specified meta data apply. It is empty to describe everything in the segment."},307544935:{name:"Tags",level:1,type:"m",multiple:!0,minver:1,webm:!1,description:"Element containing elements specific to Tracks/Chapters. A list of valid tags can be found here."},17677:{name:"ChapProcessPrivate",cppname:"ChapterProcessPrivate",level:5,type:"b",minver:1,webm:!1,description:'Some optional data attached to the ChapProcessCodecID information. For ChapProcessCodecID = 1, it is the "DVD level" equivalent.'},17278:{name:"ChapCountry",cppname:"ChapterCountry",level:5,type:"s",multiple:!0,minver:1,webm:!1,description:"The countries corresponding to the string, same 2 octets as in Internet domains."},17276:{name:"ChapLanguage",cppname:"ChapterLanguage",level:5,type:"s",mandatory:!0,multiple:!0,minver:1,webm:!0,default:"eng",description:"The languages corresponding to the string, in the bibliographic ISO-639-2 form."},143:{name:"ChapterTrack",level:4,type:"m",minver:1,webm:!1,description:"List of tracks on which the chapter applies. If this element is not present, all tracks apply"},25539:{name:"ChapterPhysicalEquiv",level:4,type:"u",minver:1,webm:!1,description:'Specify the physical equivalent of this ChapterAtom like "DVD" (60) or "SIDE" (50), see complete list of values.'},28348:{name:"ChapterSegmentEditionUID",level:4,type:"u",minver:1,webm:!1,range:"not 0",description:"The EditionUID to play from the segment linked in ChapterSegmentUID."},28263:{name:"ChapterSegmentUID",level:4,type:"b",minver:1,webm:!1,range:">0",bytesize:16,description:"A segment to play in place of this chapter. Edition ChapterSegmentEditionUID should be used for this segment, otherwise no edition is used."},29636:{name:"ChapterUID",level:4,type:"u",mandatory:!0,minver:1,webm:!0,range:"not 0",description:"A unique ID to identify the Chapter."},182:{name:"ChapterAtom",level:3,recursive:"1",type:"m",mandatory:!0,multiple:!0,minver:1,webm:!0,description:"Contains the atom information to use as the chapter atom (apply to all tracks)."},17885:{name:"EditionFlagOrdered",level:3,type:"u",minver:1,webm:!1,default:0,range:"0-1",description:"Specify if the chapters can be defined multiple times and the order to play them is enforced. (1 bit)"},17883:{name:"EditionFlagDefault",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,range:"0-1",description:"If a flag is set (1) the edition should be used as the default one. (1 bit)"},17853:{name:"EditionFlagHidden",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,range:"0-1",description:"If an edition is hidden (1), it should not be available to the user interface (but still to Control Tracks; see flag notes). (1 bit)"},17852:{name:"EditionUID",level:3,type:"u",minver:1,webm:!1,range:"not 0",description:"A unique ID to identify the edition. It's useful for tagging an edition."},17849:{name:"EditionEntry",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!0,description:"Contains all information about a segment edition."},272869232:{name:"Chapters",level:1,type:"m",minver:1,webm:!0,description:"A system to define basic menus and partition data. For more detailed information, look at the Chapters Explanation."},18094:{name:"FileUID",level:3,type:"u",mandatory:!0,minver:1,webm:!1,range:"not 0",description:"Unique ID representing the file, as random as possible."},18012:{name:"FileData",level:3,type:"b",mandatory:!0,minver:1,webm:!1,description:"The data of the file."},18030:{name:"FileName",level:3,type:"8",mandatory:!0,minver:1,webm:!1,description:"Filename of the attached file."},18046:{name:"FileDescription",level:3,type:"8",minver:1,webm:!1,description:"A human-friendly name for the attached file."},24999:{name:"AttachedFile",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"An attached file."},423732329:{name:"Attachments",level:1,type:"m",minver:1,webm:!1,description:"Contain attached files."},235:{name:"CueRefCodecState",level:5,type:"u",webm:!1,default:0,description:"The position of the Codec State corresponding to this referenced element. 0 means that the data is taken from the initial Track Entry."},21343:{name:"CueRefNumber",level:5,type:"u",webm:!1,default:1,range:"not 0",description:"Number of the referenced Block of Track X in the specified Cluster."},219:{name:"CueReference",level:4,type:"m",multiple:!0,minver:2,webm:!1,description:"The Clusters containing the required referenced Blocks."},234:{name:"CueCodecState",level:4,type:"u",minver:2,webm:!1,default:0,description:"The position of the Codec State corresponding to this Cue element. 0 means that the data is taken from the initial Track Entry."},178:{name:"CueDuration",level:4,type:"u",mandatory:!1,minver:4,webm:!1,description:"The duration of the block according to the segment time base. If missing the track's DefaultDuration does not apply and no duration information is available in terms of the cues."},240:{name:"CueRelativePosition",level:4,type:"u",mandatory:!1,minver:4,webm:!1,description:"The relative position of the referenced block inside the cluster with 0 being the first possible position for an element inside that cluster.",position:"clusterRelative"},241:{name:"CueClusterPosition",level:4,type:"u",mandatory:!0,minver:1,description:"The position of the Cluster containing the required Block.",position:"segment"},247:{name:"CueTrack",level:4,type:"u",mandatory:!0,minver:1,range:"not 0",description:"The track for which a position is given."},183:{name:"CueTrackPositions",level:3,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Contain positions for different tracks corresponding to the timestamp."},179:{name:"CueTime",level:3,type:"u",mandatory:!0,minver:1,description:"Absolute timestamp according to the segment time base."},187:{name:"CuePoint",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Contains all information relative to a seek point in the segment."},475249515:{name:"Cues",level:1,type:"m",minver:1,description:'A top-level element to speed seeking access. All entries are local to the segment. Should be mandatory for non "live" streams.'},18406:{name:"ContentSigHashAlgo",level:6,type:"u",minver:1,webm:!1,default:0,description:"The hash algorithm used for the signature. A value of '0' means that the contents have not been signed but only encrypted. Predefined values: 1 - SHA1-160 2 - MD5"},18405:{name:"ContentSigAlgo",level:6,type:"u",minver:1,webm:!1,default:0,description:"The algorithm used for the signature. A value of '0' means that the contents have not been signed but only encrypted. Predefined values: 1 - RSA"},18404:{name:"ContentSigKeyID",level:6,type:"b",minver:1,webm:!1,description:"This is the ID of the private key the data was signed with."},18403:{name:"ContentSignature",level:6,type:"b",minver:1,webm:!1,description:"A cryptographic signature of the contents."},18402:{name:"ContentEncKeyID",level:6,type:"b",minver:1,webm:!1,description:"For public key algorithms this is the ID of the public key the the data was encrypted with."},18401:{name:"ContentEncAlgo",level:6,type:"u",minver:1,webm:!1,default:0,description:"The encryption algorithm used. The value '0' means that the contents have not been encrypted but only signed. Predefined values: 1 - DES, 2 - 3DES, 3 - Twofish, 4 - Blowfish, 5 - AES"},28032:{name:"ContentEncodings",level:3,type:"m",minver:1,webm:!1,description:"Settings for several content encoding mechanisms like compression or encryption."},196:{name:"TrickMasterTrackSegmentUID",level:3,type:"b",divx:!0,bytesize:16,description:"DivX trick track extenstions"},199:{name:"TrickMasterTrackUID",level:3,type:"u",divx:!0,description:"DivX trick track extenstions"},198:{name:"TrickTrackFlag",level:3,type:"u",divx:!0,default:0,description:"DivX trick track extenstions"},193:{name:"TrickTrackSegmentUID",level:3,type:"b",divx:!0,bytesize:16,description:"DivX trick track extenstions"},192:{name:"TrickTrackUID",level:3,type:"u",divx:!0,description:"DivX trick track extenstions"},237:{name:"TrackJoinUID",level:5,type:"u",mandatory:!0,multiple:!0,minver:3,webm:!1,range:"not 0",description:"The trackUID number of a track whose blocks are used to create this virtual track."},233:{name:"TrackJoinBlocks",level:4,type:"m",minver:3,webm:!1,description:"Contains the list of all tracks whose Blocks need to be combined to create this virtual track"},230:{name:"TrackPlaneType",level:6,type:"u",mandatory:!0,minver:3,webm:!1,description:"The kind of plane this track corresponds to (0: left eye, 1: right eye, 2: background)."},229:{name:"TrackPlaneUID",level:6,type:"u",mandatory:!0,minver:3,webm:!1,range:"not 0",description:"The trackUID number of the track representing the plane."},228:{name:"TrackPlane",level:5,type:"m",mandatory:!0,multiple:!0,minver:3,webm:!1,description:"Contains a video plane track that need to be combined to create this 3D track"},227:{name:"TrackCombinePlanes",level:4,type:"m",minver:3,webm:!1,description:"Contains the list of all video plane tracks that need to be combined to create this 3D track"},226:{name:"TrackOperation",level:3,type:"m",minver:3,webm:!1,description:"Operation that needs to be applied on tracks to create this virtual track. For more details look at the Specification Notes on the subject."},32123:{name:"ChannelPositions",cppname:"AudioPosition",level:4,type:"b",webm:!1,description:"Table of horizontal angles for each successive channel, see appendix."},159:{name:"Channels",cppname:"AudioChannels",level:4,type:"u",mandatory:!0,minver:1,default:1,range:"not 0",description:"Numbers of channels in the track."},30901:{name:"OutputSamplingFrequency",cppname:"AudioOutputSamplingFreq",level:4,type:"f",minver:1,default:"Sampling Frequency",range:"> 0",description:"Real output sampling frequency in Hz (used for SBR techniques)."},181:{name:"SamplingFrequency",cppname:"AudioSamplingFreq",level:4,type:"f",mandatory:!0,minver:1,default:8e3,range:"> 0",description:"Sampling frequency in Hz."},225:{name:"Audio",cppname:"TrackAudio",level:3,type:"m",minver:1,description:"Audio settings."},2327523:{name:"FrameRate",cppname:"VideoFrameRate",level:4,type:"f",range:"> 0",strong:"Informational",description:"Number of frames per second.  only."},3126563:{name:"GammaValue",cppname:"VideoGamma",level:4,type:"f",webm:!1,range:"> 0",description:"Gamma Value."},3061028:{name:"ColourSpace",cppname:"VideoColourSpace",level:4,type:"b",minver:1,webm:!1,bytesize:4,description:"Same value as in AVI (32 bits)."},21683:{name:"AspectRatioType",cppname:"VideoAspectRatio",level:4,type:"u",minver:1,default:0,description:"Specify the possible modifications to the aspect ratio (0: free resizing, 1: keep aspect ratio, 2: fixed)."},21682:{name:"DisplayUnit",cppname:"VideoDisplayUnit",level:4,type:"u",minver:1,default:0,description:"How DisplayWidth & DisplayHeight should be interpreted (0: pixels, 1: centimeters, 2: inches, 3: Display Aspect Ratio)."},21690:{name:"DisplayHeight",cppname:"VideoDisplayHeight",level:4,type:"u",minver:1,default:"PixelHeight",range:"not 0",description:"Height of the video frames to display. The default value is only valid when DisplayUnit is 0."},21680:{name:"DisplayWidth",cppname:"VideoDisplayWidth",level:4,type:"u",minver:1,default:"PixelWidth",range:"not 0",description:"Width of the video frames to display. The default value is only valid when DisplayUnit is 0."},21725:{name:"PixelCropRight",cppname:"VideoPixelCropRight",level:4,type:"u",minver:1,default:0,description:"The number of video pixels to remove on the right of the image."},21708:{name:"PixelCropLeft",cppname:"VideoPixelCropLeft",level:4,type:"u",minver:1,default:0,description:"The number of video pixels to remove on the left of the image."},21691:{name:"PixelCropTop",cppname:"VideoPixelCropTop",level:4,type:"u",minver:1,default:0,description:"The number of video pixels to remove at the top of the image."},21674:{name:"PixelCropBottom",cppname:"VideoPixelCropBottom",level:4,type:"u",minver:1,default:0,description:"The number of video pixels to remove at the bottom of the image (for HDTV content)."},186:{name:"PixelHeight",cppname:"VideoPixelHeight",level:4,type:"u",mandatory:!0,minver:1,range:"not 0",description:"Height of the encoded video frames in pixels."},176:{name:"PixelWidth",cppname:"VideoPixelWidth",level:4,type:"u",mandatory:!0,minver:1,range:"not 0",description:"Width of the encoded video frames in pixels."},21433:{name:"OldStereoMode",level:4,type:"u",maxver:"0",webm:!1,divx:!1,description:"DEPRECATED, DO NOT USE. Bogus StereoMode value used in old versions of libmatroska. (0: mono, 1: right eye, 2: left eye, 3: both eyes)."},21440:{name:"AlphaMode",cppname:"VideoAlphaMode",level:4,type:"u",minver:3,webm:!0,default:0,description:"Alpha Video Mode. Presence of this element indicates that the BlockAdditional element could contain Alpha data."},21432:{name:"StereoMode",cppname:"VideoStereoMode",level:4,type:"u",minver:3,webm:!0,default:0,description:"Stereo-3D video mode (0: mono, 1: side by side (left eye is first), 2: top-bottom (right eye is first), 3: top-bottom (left eye is first), 4: checkboard (right is first), 5: checkboard (left is first), 6: row interleaved (right is first), 7: row interleaved (left is first), 8: column interleaved (right is first), 9: column interleaved (left is first), 10: anaglyph (cyan/red), 11: side by side (right eye is first), 12: anaglyph (green/magenta), 13 both eyes laced in one Block (left eye is first), 14 both eyes laced in one Block (right eye is first)) . There are some more details on 3D support in the Specification Notes."},154:{name:"FlagInterlaced",cppname:"VideoFlagInterlaced",level:4,type:"u",mandatory:!0,minver:2,webm:!0,default:0,range:"0-1",description:"Set if the video is interlaced. (1 bit)"},224:{name:"Video",cppname:"TrackVideo",level:3,type:"m",minver:1,description:"Video settings."},26277:{name:"TrackTranslateTrackID",level:4,type:"b",mandatory:!0,minver:1,webm:!1,description:"The binary value used to represent this track in the chapter codec data. The format depends on the ChapProcessCodecID used."},26303:{name:"TrackTranslateCodec",level:4,type:"u",mandatory:!0,minver:1,webm:!1,description:"The chapter codec using this ID (0: Matroska Script, 1: DVD-menu)."},26364:{name:"TrackTranslateEditionUID",level:4,type:"u",multiple:!0,minver:1,webm:!1,description:"Specify an edition UID on which this translation applies. When not specified, it means for all editions found in the segment."},22203:{name:"SeekPreRoll",level:3,type:"u",mandatory:!0,multiple:!1,default:0,minver:4,webm:!0,description:"After a discontinuity, SeekPreRoll is the duration in nanoseconds of the data the decoder must decode before the decoded data is valid."},22186:{name:"CodecDelay",level:3,type:"u",multiple:!1,default:0,minver:4,webm:!0,description:"CodecDelay is The codec-built-in delay in nanoseconds. This value must be subtracted from each block timestamp in order to get the actual timestamp. The value should be small so the muxing of tracks with the same actual timestamp are in the same Cluster."},28587:{name:"TrackOverlay",level:3,type:"u",multiple:!0,minver:1,webm:!1,description:"Specify that this track is an overlay track for the Track specified (in the u-integer). That means when this track has a gap (see SilentTracks) the overlay track should be used instead. The order of multiple TrackOverlay matters, the first one is the one that should be used. If not found it should be the second, etc."},170:{name:"CodecDecodeAll",level:3,type:"u",mandatory:!0,minver:2,webm:!1,default:1,range:"0-1",description:"The codec can decode potentially damaged data (1 bit)."},2536e3:{name:"CodecDownloadURL",level:3,type:"s",multiple:!0,webm:!1,description:"A URL to download about the codec used."},3883072:{name:"CodecInfoURL",level:3,type:"s",multiple:!0,webm:!1,description:"A URL to find information about the codec used."},3839639:{name:"CodecSettings",level:3,type:"8",webm:!1,description:"A string describing the encoding setting used."},25506:{name:"CodecPrivate",level:3,type:"b",minver:1,description:"Private data only known to the codec."},2274716:{name:"Language",cppname:"TrackLanguage",level:3,type:"s",minver:1,default:"eng",description:"Specifies the language of the track in the Matroska languages form."},21358:{name:"Name",cppname:"TrackName",level:3,type:"8",minver:1,description:"A human-readable track name."},21998:{name:"MaxBlockAdditionID",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"The maximum value of BlockAdditions for this track."},21375:{name:"TrackOffset",level:3,type:"i",webm:!1,default:0,description:"A value to add to the Block's Timestamp. This can be used to adjust the playback offset of a track."},2306383:{name:"TrackTimecodeScale",level:3,type:"f",mandatory:!0,minver:1,maxver:"3",webm:!1,default:1,range:"> 0",description:"DEPRECATED, DO NOT USE. The scale to apply on this track to work at normal speed in relation with other tracks (mostly used to adjust video speed when the audio length differs)."},2313850:{name:"DefaultDecodedFieldDuration",cppname:"TrackDefaultDecodedFieldDuration",level:3,type:"u",minver:4,range:"not 0",description:"The period in nanoseconds (not scaled by TimcodeScale)\nbetween two successive fields at the output of the decoding process (see the notes)"},2352003:{name:"DefaultDuration",cppname:"TrackDefaultDuration",level:3,type:"u",minver:1,range:"not 0",description:"Number of nanoseconds (not scaled via TimecodeScale) per frame ('frame' in the Matroska sense -- one element put into a (Simple)Block)."},28152:{name:"MaxCache",cppname:"TrackMaxCache",level:3,type:"u",minver:1,webm:!1,description:"The maximum cache size required to store referenced frames in and the current frame. 0 means no cache is needed."},28135:{name:"MinCache",cppname:"TrackMinCache",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"The minimum number of frames a player should be able to cache during playback. If set to 0, the reference pseudo-cache system is not used."},156:{name:"FlagLacing",cppname:"TrackFlagLacing",level:3,type:"u",mandatory:!0,minver:1,default:1,range:"0-1",description:"Set if the track may contain blocks using lacing. (1 bit)"},21930:{name:"FlagForced",cppname:"TrackFlagForced",level:3,type:"u",mandatory:!0,minver:1,default:0,range:"0-1",description:"Set if that track MUST be active during playback. There can be many forced track for a kind (audio, video or subs), the player should select the one which language matches the user preference or the default + forced track. Overlay MAY happen between a forced and non-forced track of the same kind. (1 bit)"},185:{name:"FlagEnabled",cppname:"TrackFlagEnabled",level:3,type:"u",mandatory:!0,minver:2,webm:!0,default:1,range:"0-1",description:"Set if the track is usable. (1 bit)"},29637:{name:"TrackUID",level:3,type:"u",mandatory:!0,minver:1,range:"not 0",description:"A unique ID to identify the Track. This should be kept the same when making a direct stream copy of the Track to another file."},215:{name:"TrackNumber",level:3,type:"u",mandatory:!0,minver:1,range:"not 0",description:"The track number as used in the Block Header (using more than 127 tracks is not encouraged, though the design allows an unlimited number)."},174:{name:"TrackEntry",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Describes a track with all elements."},374648427:{name:"Tracks",level:1,type:"m",multiple:!0,minver:1,description:"A top-level block of information with many tracks described."},175:{name:"EncryptedBlock",level:2,type:"b",multiple:!0,webm:!1,description:"Similar to EncryptedBlock Structure)"},202:{name:"ReferenceTimeCode",level:4,type:"u",multiple:!1,mandatory:!0,minver:0,webm:!1,divx:!0,description:"DivX trick track extenstions"},201:{name:"ReferenceOffset",level:4,type:"u",multiple:!1,mandatory:!0,minver:0,webm:!1,divx:!0,description:"DivX trick track extenstions"},200:{name:"ReferenceFrame",level:3,type:"m",multiple:!1,minver:0,webm:!1,divx:!0,description:"DivX trick track extenstions"},207:{name:"SliceDuration",level:5,type:"u",default:0,description:"The (scaled) duration to apply to the element."},206:{name:"Delay",cppname:"SliceDelay",level:5,type:"u",default:0,description:"The (scaled) delay to apply to the element."},203:{name:"BlockAdditionID",cppname:"SliceBlockAddID",level:5,type:"u",default:0,description:"The ID of the BlockAdditional element (0 is the main Block)."},205:{name:"FrameNumber",cppname:"SliceFrameNumber",level:5,type:"u",default:0,description:"The number of the frame to generate from this lace with this delay (allow you to generate many frames from the same Block/Frame)."},204:{name:"LaceNumber",cppname:"SliceLaceNumber",level:5,type:"u",minver:1,default:0,divx:!1,description:"The reverse number of the frame in the lace (0 is the last frame, 1 is the next to last, etc). While there are a few files in the wild with this element, it is no longer in use and has been deprecated. Being able to interpret this element is not required for playback."},232:{name:"TimeSlice",level:4,type:"m",multiple:!0,minver:1,divx:!1,description:"Contains extra time information about the data contained in the Block. While there are a few files in the wild with this element, it is no longer in use and has been deprecated. Being able to interpret this element is not required for playback."},142:{name:"Slices",level:3,type:"m",minver:1,divx:!1,description:"Contains slices description."},30114:{name:"DiscardPadding",level:3,type:"i",minver:4,webm:!0,description:"Duration in nanoseconds of the silent data added to the Block (padding at the end of the Block for positive value, at the beginning of the Block for negative value). The duration of DiscardPadding is not calculated in the duration of the TrackEntry and should be discarded during playback."},164:{name:"CodecState",level:3,type:"b",minver:2,webm:!1,description:"The new codec state to use. Data interpretation is private to the codec. This information should always be referenced by a seek entry."},253:{name:"ReferenceVirtual",level:3,type:"i",webm:!1,description:"Relative position of the data that should be in position of the virtual block."},251:{name:"ReferenceBlock",level:3,type:"i",multiple:!0,minver:1,description:"Timestamp of another frame used as a reference (ie: B or P frame). The timestamp is relative to the block it's attached to."},250:{name:"ReferencePriority",cppname:"FlagReferenced",level:3,type:"u",mandatory:!0,minver:1,webm:!1,default:0,description:"This frame is referenced and has the specified cache priority. In cache only a frame of the same or higher priority can replace this frame. A value of 0 means the frame is not referenced."},155:{name:"BlockDuration",level:3,type:"u",minver:1,default:"TrackDuration",description:'The duration of the Block (based on TimecodeScale). This element is mandatory when DefaultDuration is set for the track (but can be omitted as other default values). When not written and with no DefaultDuration, the value is assumed to be the difference between the timestamp of this Block and the timestamp of the next Block in "display" order (not coding order). This element can be useful at the end of a Track (as there is not other Block available), or when there is a break in a track like for subtitle tracks. When set to 0 that means the frame is not a keyframe.'},165:{name:"BlockAdditional",level:5,type:"b",mandatory:!0,minver:1,webm:!1,description:"Interpreted by the codec as it wishes (using the BlockAddID)."},238:{name:"BlockAddID",level:5,type:"u",mandatory:!0,minver:1,webm:!1,default:1,range:"not 0",description:"An ID to identify the BlockAdditional level."},166:{name:"BlockMore",level:4,type:"m",mandatory:!0,multiple:!0,minver:1,webm:!1,description:"Contain the BlockAdditional and some parameters."},30113:{name:"BlockAdditions",level:3,type:"m",minver:1,webm:!1,description:"Contain additional blocks to complete the main one. An EBML parser that has no knowledge of the Block structure could still see and use/skip these data."},162:{name:"BlockVirtual",level:3,type:"b",webm:!1,description:"A Block with no data. It must be stored in the stream at the place the real Block should be in display order. (see Block Virtual)"},161:{name:"Block",level:3,type:"b",mandatory:!0,minver:1,description:"Block containing the actual data to be rendered and a timestamp relative to the Cluster Timecode. (see Block Structure)"},160:{name:"BlockGroup",level:2,type:"m",multiple:!0,minver:1,description:"Basic container of information containing a single Block or BlockVirtual, and information specific to that Block/VirtualBlock."},163:{name:"SimpleBlock",level:2,type:"b",multiple:!0,minver:2,webm:!0,divx:!0,description:"Similar to SimpleBlock Structure"},171:{name:"PrevSize",cppname:"ClusterPrevSize",level:2,type:"u",minver:1,description:"Size of the previous Cluster, in octets. Can be useful for backward playing.",position:"prevCluster"},167:{name:"Position",cppname:"ClusterPosition",level:2,type:"u",minver:1,webm:!1,description:"The Position of the Cluster in the segment (0 in live broadcast streams). It might help to resynchronise offset on damaged streams.",position:"segment"},22743:{name:"SilentTrackNumber",cppname:"ClusterSilentTrackNumber",level:3,type:"u",multiple:!0,minver:1,webm:!1,description:"One of the track number that are not used from now on in the stream. It could change later if not specified as silent in a further Cluster."},231:{name:"Timecode",cppname:"ClusterTimecode",level:2,type:"u",mandatory:!0,minver:1,description:"Absolute timestamp of the cluster (based on TimecodeScale)."},524531317:{name:"Cluster",level:1,type:"m",multiple:!0,minver:1,description:"The lower level element containing the (monolithic) Block structure."},19840:{name:"MuxingApp",level:2,type:"8",mandatory:!0,minver:1,description:'Muxing application or library ("libmatroska-0.4.3").'},31657:{name:"Title",level:2,type:"8",minver:1,webm:!1,description:"General name of the segment."},2807730:{name:"TimecodeScaleDenominator",level:2,type:"u",mandatory:!0,minver:4,default:"1000000000",description:"Timestamp scale numerator, see TimecodeScale."},2807729:{name:"TimecodeScale",level:2,type:"u",mandatory:!0,minver:1,default:"1000000",description:"Timestamp scale in nanoseconds (1.000.000 means all timestamps in the segment are expressed in milliseconds)."},27045:{name:"ChapterTranslateID",level:3,type:"b",mandatory:!0,minver:1,webm:!1,description:"The binary value used to represent this segment in the chapter codec data. The format depends on the ChapProcessCodecID used."},27071:{name:"ChapterTranslateCodec",level:3,type:"u",mandatory:!0,minver:1,webm:!1,description:"The chapter codec using this ID (0: Matroska Script, 1: DVD-menu)."},27132:{name:"ChapterTranslateEditionUID",level:3,type:"u",multiple:!0,minver:1,webm:!1,description:"Specify an edition UID on which this correspondance applies. When not specified, it means for all editions found in the segment."},4096955:{name:"NextFilename",level:2,type:"8",minver:1,webm:!1,description:"An escaped filename corresponding to the next segment."},4110627:{name:"NextUID",level:2,type:"b",minver:1,webm:!1,bytesize:16,description:"A unique ID to identify the next chained segment (128 bits)."},3965867:{name:"PrevFilename",level:2,type:"8",minver:1,webm:!1,description:"An escaped filename corresponding to the previous segment."},3979555:{name:"PrevUID",level:2,type:"b",minver:1,webm:!1,bytesize:16,description:"A unique ID to identify the previous chained segment (128 bits)."},29604:{name:"SegmentUID",level:2,type:"b",minver:1,webm:!1,range:"not 0",bytesize:16,description:"A randomly generated unique ID to identify the current segment between many others (128 bits)."},357149030:{name:"Info",level:1,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Contains miscellaneous general information and statistics on the file."},21420:{name:"SeekPosition",level:3,type:"u",mandatory:!0,minver:1,description:"The position of the element in the segment in octets (0 = first level 1 element).",position:"segment"},21419:{name:"SeekID",level:3,type:"b",mandatory:!0,minver:1,description:"The binary ID corresponding to the element name.",type2:"ebmlID"},19899:{name:"Seek",cppname:"SeekPoint",level:2,type:"m",mandatory:!0,multiple:!0,minver:1,description:"Contains a single seek entry to an EBML element."},290298740:{name:"SeekHead",cppname:"SeekHeader",level:1,type:"m",multiple:!0,minver:1,description:"Contains the position of other level 1 elements."},32379:{name:"SignatureElementList",level:2,type:"m",multiple:!0,webm:!1,i:"Cluster|Block|BlockAdditional",description:"A list consists of a number of consecutive elements that represent one case where data is used in signature. Ex:  means that the BlockAdditional of all Blocks in all Clusters is used for encryption."},32347:{name:"SignatureElements",level:1,type:"m",webm:!1,description:"Contains elements that will be used to compute the signature."},32437:{name:"Signature",level:1,type:"b",webm:!1,description:"The signature of the data (until a new."},32421:{name:"SignaturePublicKey",level:1,type:"b",webm:!1,description:"The public key to use with the algorithm (in the case of a PKI-based signature)."},32410:{name:"SignatureHash",level:1,type:"u",webm:!1,description:"Hash algorithm used (1=SHA1-160, 2=MD5)."},32394:{name:"SignatureAlgo",level:1,type:"u",webm:!1,description:"Signature algorithm used (1=RSA, 2=elliptic)."},458458727:{name:"SignatureSlot",level:-1,type:"m",multiple:!0,webm:!1,description:"Contain signature of some (coming) elements in the stream."},191:{name:"CRC-32",level:-1,type:"b",minver:1,webm:!1,description:"The CRC is computed on all the data of the Master element it's in. The CRC element should be the first in it's parent master for easier reading. All level 1 elements should include a CRC-32. The CRC in use is the IEEE CRC32 Little Endian",crc:!0},236:{name:"Void",level:-1,type:"b",minver:1,description:"Used to void damaged data, to avoid unexpected behaviors when using damaged data. The content is discarded. Also used to reserve space in a sub-element for later use."},17139:{name:"EBMLMaxSizeLength",level:1,type:"u",mandatory:!0,default:8,minver:1,description:"The maximum length of the sizes you'll find in this file (8 or less in Matroska). This does not override the element size indicated at the beginning of an element. Elements that have an indicated size which is larger than what is allowed by EBMLMaxSizeLength shall be considered invalid."},17138:{name:"EBMLMaxIDLength",level:1,type:"u",mandatory:!0,default:4,minver:1,description:"The maximum length of the IDs you'll find in this file (4 or less in Matroska)."},17143:{name:"EBMLReadVersion",level:1,type:"u",mandatory:!0,default:1,minver:1,description:"The minimum EBML version a parser has to support to read this file."},440786851:{name:"EBML",level:"0",type:"m",mandatory:!0,multiple:!0,minver:1,description:"Set the EBML characteristics of the data to follow. Each EBML document has to start with this."}},Ox={},_x={byEbmlID:Nx,byName:Ox};for(var Px in Nx){Ox[Nx[Px].name.replace("-","_")]=parseInt(Px,10)}for(var Ax=_x,Ix=function(e){var t=Fx(e),n=t[0],r=t[1];return 3*(n+r)/4-r},Mx=function(e){var t,n,r=Fx(e),i=r[0],o=r[1],a=new Dx(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),s=0,u=o>0?i-4:i;for(n=0;n<u;n+=4)t=Lx[e.charCodeAt(n)]<<18|Lx[e.charCodeAt(n+1)]<<12|Lx[e.charCodeAt(n+2)]<<6|Lx[e.charCodeAt(n+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;2===o&&(t=Lx[e.charCodeAt(n)]<<2|Lx[e.charCodeAt(n+1)]>>4,a[s++]=255&t);1===o&&(t=Lx[e.charCodeAt(n)]<<10|Lx[e.charCodeAt(n+1)]<<4|Lx[e.charCodeAt(n+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t);return a},Rx=function(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,s=n-r;a<s;a+=o)i.push(qx(e,a,a+o>s?s:a+o));1===r?(t=e[n-1],i.push(Bx[t>>2]+Bx[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(Bx[t>>10]+Bx[t>>4&63]+Bx[t<<2&63]+"="));return i.join("")},Bx=[],Lx=[],Dx="undefined"!=typeof Uint8Array?Uint8Array:Array,jx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zx=0,Ux=jx.length;zx<Ux;++zx)Bx[zx]=jx[zx],Lx[jx.charCodeAt(zx)]=zx;function Fx(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function qx(e,t,n){for(var r,i,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(Bx[(i=r)>>18&63]+Bx[i>>12&63]+Bx[i>>6&63]+Bx[63&i]);return o.join("")}Lx["-".charCodeAt(0)]=62,Lx["_".charCodeAt(0)]=63;var Kx={byteLength:Ix,toByteArray:Mx,fromByteArray:Rx},Hx=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,d=-7,l=n?i-1:0,f=n?-1:1,p=e[t+l];for(l+=f,o=p&(1<<-d)-1,p>>=-d,d+=s;d>0;o=256*o+e[t+l],l+=f,d-=8);for(a=o&(1<<-d)-1,o>>=-d,d+=r;d>0;a=256*a+e[t+l],l+=f,d-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},$x=function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,d=(1<<c)-1,l=d>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=d):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+l>=1?f/u:f*Math.pow(2,1-l))*u>=2&&(a++,u/=2),a+l>=d?(s=0,a=d):a+l>=1?(s=(t*u-1)*Math.pow(2,i),a+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=h,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+p]=255&a,p+=h,a/=256,c-=8);e[n+p-h]|=128*v},Vx=Vr((function(e,t){var n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=function(e){+e!=e&&(e=0);return o.alloc(+e)},t.INSPECT_MAX_BYTES=50;var r=2147483647;function i(e){if(e>r)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return a(e,t,n)}function a(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!o.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|f(e,t),r=i(n),a=r.write(e,t);a!==n&&(r=r.slice(0,a));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(j(e,Uint8Array)){var t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return c(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(j(e,ArrayBuffer)||e&&j(e.buffer,ArrayBuffer))return d(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(j(e,SharedArrayBuffer)||e&&j(e.buffer,SharedArrayBuffer)))return d(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return o.from(r,t,n);var a=function(e){if(o.isBuffer(e)){var t=0|l(e.length),n=i(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||z(e.length)?i(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return s(e),i(e<0?0:0|l(e))}function c(e){for(var t=e.length<0?0:0|l(e.length),n=i(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,o.prototype),r}function l(e){if(e>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|e}function f(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||j(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return B(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return L(e).length;default:if(i)return r?-1:B(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return x(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function h(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),z(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var d=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===d?0:o-d)){if(-1===d&&(d=o),o-d+1===u)return d*a}else-1!==d&&(o-=o-d),d=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var l=!0,f=0;f<u;f++)if(c(e,o+f)!==c(t,f)){l=!1;break}if(l)return o}return-1}function g(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(z(s))return a;e[n+a]=s}return a}function y(e,t,n,r){return D(B(t,e.length-n),e,n,r)}function w(e,t,n,r){return D(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function b(e,t,n,r){return D(L(t),e,n,r)}function S(e,t,n,r){return D(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function E(e,t,n){return 0===t&&n===e.length?Kx.fromByteArray(e):Kx.fromByteArray(e.slice(t,n))}function k(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,u,c=e[i],d=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=n)switch(l){case 1:c<128&&(d=c);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&c)<<6|63&o)>127&&(d=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(u=(15&c)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(d=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(d=u)}null===d?(d=65533,l=1):d>65535&&(d-=65536,r.push(d>>>10&1023|55296),d=56320|1023&d),r.push(d),i+=l}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=C));return n}(r)}t.kMaxLength=r,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,n){return a(e,t,n)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,n){return function(e,t,n){return s(e),e<=0?i(e):void 0!==t?"string"==typeof n?i(e).fill(t,n):i(e).fill(t):i(e)}(e,t,n)},o.allocUnsafe=function(e){return u(e)},o.allocUnsafeSlow=function(e){return u(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(j(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),j(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(j(a,Uint8Array))i+a.length>r.length?o.from(a).copy(r,i):Uint8Array.prototype.set.call(r,a,i);else{if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i)}i+=a.length}return r},o.byteLength=f,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)h(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?k(this,0,e):p.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(e,t,n,r,i){if(j(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),u=Math.min(a,s),c=this.slice(r,i),d=e.slice(t,n),l=0;l<u;++l)if(c[l]!==d[l]){a=c[l],s=d[l];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return g(this,e,t,n);case"utf8":case"utf-8":return y(this,e,t,n);case"ascii":case"latin1":case"binary":return w(this,e,t,n);case"base64":return b(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function x(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function N(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=U[e[o]];return i}function O(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function _(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,n,r,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function A(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function I(e,t,n,r,i){return t=+t,n>>>=0,i||A(e,0,n,4),$x(e,t,n,r,23,4),n+4}function M(e,t,n,r,i){return t=+t,n>>>=0,i||A(e,0,n,8),$x(e,t,n,r,52,8),n+8}o.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,o.prototype),r},o.prototype.readUintLE=o.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||_(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUintBE=o.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||_(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUint8=o.prototype.readUInt8=function(e,t){return e>>>=0,t||_(e,1,this.length),this[e]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||_(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||_(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||_(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||_(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||_(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||_(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return e>>>=0,t||_(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||_(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){e>>>=0,t||_(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||_(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||_(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||_(e,4,this.length),Hx(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||_(e,4,this.length),Hx(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||_(e,8,this.length),Hx(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||_(e,8,this.length),Hx(this,e,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||P(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||P(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUint8=o.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);P(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,n){return I(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return I(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return M(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return M(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var s=o.isBuffer(e)?e:o.from(e,r),u=s.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=s[a%u]}return this};var R=/[^+/0-9A-Za-z-_]/g;function B(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function L(e){return Kx.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(R,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function D(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function j(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function z(e){return e!=e}var U=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}()}));
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */const Gx=(e,t)=>{t=t||0;for(var n=1;n<=8&&!(e[t]>=Math.pow(2,8-n));n++);if(n>8)throw new Error("Unrepresentable length: "+n+" "+e.toString("hex",t,t+n));if(t+n>e.length)return null;let r=e[t]&(1<<8-n)-1;for(let i=1;i<n;i++){if(7===i&&r>=Math.pow(2,45)&&e[t+7]>0)return{length:n,value:-1};r*=Math.pow(2,8),r+=e[t+i]}return{length:n,value:r}},Wx=e=>{if(e<0||e>Math.pow(2,53))throw new Error("Unrepresentable value: "+e);for(var t=1;t<=8&&!(e<Math.pow(2,7*t)-1);t++);const n=new Vx.Buffer(t);for(let r=1;r<=t;r++){const i=255&e;n[t-r]=i,e-=i,e/=Math.pow(2,8)}return n[0]=n[0]|1<<8-t,n},{byEbmlID:Yx}=Ax,Qx=function(e){var t={},n=new Tx(e);t.trackNumber=n.nextUIntV(),t.timecode=n.nextInt16BE();var r=n.nextUInt8();t.invisible=!!(8&r),t.keyframe=!!(128&r),t.discardable=!!(1&r);var i=(6&r)>>1;return t.frames=function(e,t){if(!t)return[e.nextBuffer()];var n,r,i=[],o=e.nextUInt8()+1;if(2===t){if(e.length%o!=0)throw new Error("Fixed-Size Lacing Error");for(r=e.length/o,n=0;n<o;n++)i.push(e.nextBuffer(r));return i}var a=[];if(1===t)for(n=0;n<o-1;n++){var s;r=0;do{r+=s=e.nextUInt8()}while(255===s);a.push(r)}else if(3===t)for(r=e.nextUIntV(),a.push(r),n=1;n<o-1;n++)r+=e.nextIntV(),a.push(r);for(n=0;n<o-1;n++)i.push(e.nextBuffer(a[n]));return i.push(e.nextBuffer()),i}(n,i),t},Jx=e=>Vx.Buffer.concat(e),Xx=(e,t,n=!1)=>Jx([e,n?new Vx.Buffer("01ffffffffffffff","hex"):Wx(t.length),t]),Zx=e=>e instanceof Date?e:new Date(new Date("2001-01-01T00:00:00.000Z").getTime()+Number(e)/1e3/1e3);var eT,tT=un,nT="undefined"!=typeof Uint8Array&&Uint8Array,rT="undefined"!=typeof ArrayBuffer&&ArrayBuffer,iT=[0,0,0,0,0,0,0,0],oT=Array.isArray||function(e){return!!e&&"[object Array]"==Object.prototype.toString.call(e)},aT=4294967296;const sT=cT("Uint64BE",!0,!0),uT=cT("Int64BE",!0,!1);function cT(e,t,n){var r=t?0:4,i=t?4:0,o=t?0:3,a=t?1:2,s=t?2:1,u=t?3:0,c=t?mT:yT,d=t?gT:wT,l=h.prototype,f="is"+e,p="_"+f;return l.buffer=void 0,l.offset=0,l[p]=!0,l.toNumber=v,l.toString=function(e){var t=this.buffer,o=this.offset,a=g(t,o+r),s=g(t,o+i),u="",c=!n&&2147483648&a;c&&(a=~a,s=aT-s);e=e||10;for(;;){var d=a%e*aT+s;if(a=Math.floor(a/e),s=Math.floor(d/e),u=(d%e).toString(e)+u,!a&&!s)break}c&&(u="-"+u);return u},l.toJSON=v,l.toArray=dT,tT&&(l.toBuffer=lT),nT&&(l.toArrayBuffer=fT),h[f]=function(e){return!(!e||!e[p])},h;function h(e,t,n,o){return this instanceof h?function(e,t,n,o,a){nT&&rT&&(t instanceof rT&&(t=new nT(t)),o instanceof rT&&(o=new nT(o)));if(!(t||n||o||eT))return void(e.buffer=vT(iT,0));if(!pT(t,n)){var s=eT||Array;a=n,o=t,n=0,t=eT===tT?tT.alloc(8):new s(8)}if(e.buffer=t,e.offset=n|=0,void 0===o)return;"string"==typeof o?function(e,t,n,o){var a=0,s=n.length,u=0,c=0;"-"===n[0]&&a++;var d=a;for(;a<s;){var l=parseInt(n[a++],o);if(!(l>=0))break;c=c*o+l,u=u*o+Math.floor(c/aT),c%=aT}d&&(u=~u,c?c=aT-c:u++);m(e,t+r,u),m(e,t+i,c)}(t,n,o,a||10):pT(o,a)?hT(t,n,o,a):"number"==typeof a?(m(t,n+r,o),m(t,n+i,a)):o>0?c(t,n,o):o<0?d(t,n,o):hT(t,n,iT,0)}(this,e,t,n,o):new h(e,t,n,o)}function v(){var e=this.buffer,t=this.offset,o=g(e,t+r),a=g(e,t+i);return n||(o|=0),o?o*aT+a:a}function m(e,t,n){e[t+u]=255&n,n>>=8,e[t+s]=255&n,n>>=8,e[t+a]=255&n,n>>=8,e[t+o]=255&n}function g(e,t){return 16777216*e[t+o]+(e[t+a]<<16)+(e[t+s]<<8)+e[t+u]}}function dT(e){var t=this.buffer,n=this.offset;return eT=null,!1!==e&&oT(t)?8===t.length?t:t.slice(n,n+8):vT(t,n)}function lT(e){var t=this.buffer,n=this.offset;return eT=tT,!1!==e&&tT.isBuffer(t)?8===t.length?t:t.slice(n,n+8):tT.from(fT.call(this,e))}function fT(e){var t=this.buffer,n=this.offset,r=t.buffer;if(eT=nT,!1!==e&&!t.offset&&r instanceof rT)return 8===r.byteLength?r:r.slice(n,n+8);var i=new nT(8);return hT(i,0,t,n),i.buffer}function pT(e,t){var n=e&&e.length;return t|=0,n&&t+8<=n&&"string"!=typeof e[t]}function hT(e,t,n,r){t|=0,r|=0;for(var i=0;i<8;i++)e[t++]=255&n[r++]}function vT(e,t){return Array.prototype.slice.call(e,t,t+8)}function mT(e,t,n){for(var r=t+8;r>t;)e[--r]=255&n,n/=256}function gT(e,t,n){var r=t+8;for(n++;r>t;)e[--r]=255&-n^255,n/=256}function yT(e,t,n){for(var r=t+8;t<r;)e[t++]=255&n,n/=256}function wT(e,t,n){var r=t+8;for(n++;t<r;)e[t++]=255&-n^255,n/=256}var bT;cT("Uint64LE",!1,!0),cT("Int64LE",!1,!1),function(e){e[e.STATE_TAG=1]="STATE_TAG",e[e.STATE_SIZE=2]="STATE_SIZE",e[e.STATE_CONTENT=3]="STATE_CONTENT"}(bT||(bT={}));class ST{constructor(){this._buffer=new Vx.Buffer(0),this._tag_stack=[],this._state=bT.STATE_TAG,this._cursor=0,this._total=0,this._schema=Yx,this._result=[]}decode(e){this.readChunk(e);const t=this._result;return this._result=[],t}readChunk(e){for(this._buffer=Jx([this._buffer,new Vx.Buffer(e)]);this._cursor<this._buffer.length&&(this._state!==bT.STATE_TAG||this.readTag())&&(this._state!==bT.STATE_SIZE||this.readSize())&&(this._state!==bT.STATE_CONTENT||this.readContent()););}getSchemaInfo(e){return this._schema[e]||{name:"unknown",level:-1,type:"unknown",description:"unknown"}}readTag(){if(this._cursor>=this._buffer.length)return!1;const e=Gx(this._buffer,this._cursor);if(null==e)return!1;const t=this._buffer.slice(this._cursor,this._cursor+e.length).reduce(((e,t,n,r)=>e+t*Math.pow(16,2*(r.length-1-n))),0),n=this.getSchemaInfo(t),r={EBML_ID:t.toString(16),schema:n,type:n.type,name:n.name,level:n.level,tagStart:this._total,tagEnd:this._total+e.length,sizeStart:this._total+e.length,sizeEnd:null,dataStart:null,dataEnd:null,dataSize:null,data:null};return this._tag_stack.push(r),this._cursor+=e.length,this._total+=e.length,this._state=bT.STATE_SIZE,!0}readSize(){if(this._cursor>=this._buffer.length)return!1;const e=Gx(this._buffer,this._cursor);if(null==e)return!1;const t=this._tag_stack[this._tag_stack.length-1];return t.sizeEnd=t.sizeStart+e.length,t.dataStart=t.sizeEnd,t.dataSize=e.value,-1===e.value?(t.dataEnd=-1,"m"===t.type&&(t.unknownSize=!0)):t.dataEnd=t.sizeEnd+e.value,this._cursor+=e.length,this._total+=e.length,this._state=bT.STATE_CONTENT,!0}readContent(){const e=this._tag_stack[this._tag_stack.length-1];if("m"===e.type){if(e.isEnd=!1,this._result.push(e),this._state=bT.STATE_TAG,0===e.dataSize){const t=Object.assign({},e,{isEnd:!0});this._result.push(t),this._tag_stack.pop()}return!0}if(this._buffer.length<this._cursor+e.dataSize)return!1;const t=this._buffer.slice(this._cursor,this._cursor+e.dataSize);switch(this._buffer=this._buffer.slice(this._cursor+e.dataSize),e.data=t,e.type){case"u":e.value=t.readUIntBE(0,t.length);break;case"i":e.value=t.readIntBE(0,t.length);break;case"f":e.value=4===e.dataSize?t.readFloatBE(0):8===e.dataSize?t.readDoubleBE(0):(console.warn(`cannot read ${e.dataSize} octets float. failback to 0`),0);break;case"s":e.value=t.toString("ascii");break;case"8":e.value=t.toString("utf8");break;case"b":e.value=t;break;case"d":e.value=Zx(new uT(t).toNumber())}if(null===e.value)throw new Error("unknown tag type:"+e.type);for(this._result.push(e),this._total+=e.dataSize,this._state=bT.STATE_TAG,this._cursor=0,this._tag_stack.pop();this._tag_stack.length>0;){const e=this._tag_stack[this._tag_stack.length-1];if(e.dataEnd<0)return this._tag_stack.pop(),!0;if(this._total<e.dataEnd)break;if("m"!==e.type)throw new Error("parent element is not master element");const t=Object.assign({},e,{isEnd:!0});this._result.push(t),this._tag_stack.pop()}return!0}}class ET{constructor(){this._schema=Yx,this._buffers=[],this._stack=[]}encode(e){return Jx(e.reduce(((e,t)=>e.concat(this.encodeChunk(t))),[])).buffer}encodeChunk(e){return"m"===e.type?e.isEnd?this.endTag(e):this.startTag(e):this.writeTag(e),this.flush()}flush(){const e=this._buffers;return this._buffers=[],e}getSchemaInfo(e){const t=Object.keys(this._schema).map(Number);for(let n=0;n<t.length;n++){const r=t[n];if(this._schema[r].name===e)return new Vx.Buffer(r.toString(16),"hex")}return null}writeTag(e){const t=e.name,n=this.getSchemaInfo(t),r=e.data;if(null==n)throw new Error("No schema entry found for "+t);const i=Xx(n,r);if(this._stack.length>0){this._stack[this._stack.length-1].children.push({tagId:n,elm:e,children:[],data:i})}else this._buffers=this._buffers.concat(i)}startTag(e){const t=e.name,n=this.getSchemaInfo(t);if(null==n)throw new Error("No schema entry found for "+t);if(e.unknownSize){const t=Xx(n,new Vx.Buffer(0),e.unknownSize);return void(this._buffers=this._buffers.concat(t))}const r={tagId:n,elm:e,children:[],data:null};this._stack.length>0&&this._stack[this._stack.length-1].children.push(r),this._stack.push(r)}endTag(e){const t=this._stack.pop();if(null==t)throw new Error("EBML structure is broken");if(t.elm.name!==e.name)throw new Error("EBML structure is broken");const n=t.children.reduce(((e,t)=>{if(null===t.data)throw new Error("EBML structure is broken");return e.concat(t.data)}),[]),r=Jx(n);"m"===t.elm.type?t.data=Xx(t.tagId,r,t.elm.unknownSize):t.data=Xx(t.tagId,r),this._stack.length<1&&(this._buffers=this._buffers.concat(t.data))}}function kT(e){return e.reduce(((e,t)=>{if("b"!==t.type)return e;if("SimpleBlock"!==t.name)return e;return Qx(t.data).frames.some((e=>"9d012a"===e.slice(3,6).toString("hex")))?e.concat(t):e}),[])}function CT(e){const t=xT("VP8 ",e);return xT("RIFF",Jx([new Vx.Buffer("WEBP","ascii"),t]))}function xT(e,t){const n=new Vx.Buffer(4);return n.writeUInt32LE(t.byteLength,0),Jx([new Vx.Buffer(e.substr(0,4),"ascii"),n,t,new Vx.Buffer(t.byteLength%2==0?0:1)])}function TT(e,t){let n=-1;for(let r=0;r<t.length;r++){const i=t[r];if(i.name===e){if("m"!==i.type)return void t.splice(r,1);if(i.isEnd){if(-1===n)throw new Error(`Detected ${e} closing element before finding the start`);return void t.splice(n,r-n+1)}n=r}}}function NT(e,t){let n=[],r=-1;for(let i=0;i<t.length;i++){const o=t[i];if(o.name===e){if("m"!==o.type){n.push(t[i]);break}if(o.isEnd){if(-1===r)throw new Error(`Detected ${e} closing element before finding the start`);n=t.slice(r,i+1);break}r=i}}return n}function OT(e){const t=new ET;return e.reduce(((e,n)=>e.concat(t.encode([n]))),[]).reduce(((e,t)=>e+t.byteLength),0)}function _T(e,t,n){const{duration:r,clusterPtrs:i,cues:o}=n,a=e.slice(0);if("number"==typeof r){let e=!1;a.forEach((t=>{"f"===t.type&&"Duration"===t.name&&(e=!0,t.data=MT(r,8))})),e||PT(a,"Info",[{name:"Duration",type:"f",data:MT(r,8)}])}Array.isArray(o)&&PT(a,"Cues",function(e,t){const n=[];return e.forEach((({CueTrack:e,CueClusterPosition:r,CueTime:i})=>{n.push({name:"CuePoint",type:"m",isEnd:!1}),n.push({name:"CueTime",type:"u",data:AT(i)}),n.push({name:"CueTrackPositions",type:"m",isEnd:!1}),n.push({name:"CueTrack",type:"u",data:AT(e)}),n.push({name:"CueClusterPosition",type:"u",data:AT(r+t)}),n.push({name:"CueTrackPositions",type:"m",isEnd:!0}),n.push({name:"CuePoint",type:"m",isEnd:!0})})),n}(o,t));let s=[];return Array.isArray(i)&&(console.warn("append cluster pointers to seekhead is deprecated. please use cues"),s=function(e,t){const n=[];return e.forEach((e=>{n.push({name:"Seek",type:"m",isEnd:!1}),n.push({name:"SeekID",type:"b",data:new Vx.Buffer([31,67,182,117])}),n.push({name:"SeekPosition",type:"u",data:AT(e+t)}),n.push({name:"Seek",type:"m",isEnd:!0})})),n}(i,t)),PT(a,"SeekHead",s,!0),a}function PT(e,t,n,r=!1){let i=-1;for(let n=0;n<e.length;n++){const r=e[n];if("m"===r.type&&r.name===t&&!1===r.isEnd){i=n;break}}i>=0?e.splice(i+1,0,...n):r?[].concat([{name:t,type:"m",isEnd:!1}],n,[{name:t,type:"m",isEnd:!0}]).reverse().forEach((t=>{e.unshift(t)})):(e.push({name:t,type:"m",isEnd:!1}),n.forEach((t=>{e.push(t)})),e.push({name:t,type:"m",isEnd:!0}))}function AT(e){let t=1;for(;e>=Math.pow(2,8*t);t++);if(t>=7)return console.warn("7bit or more bigger uint not supported."),new sT(e).toBuffer();const n=new Vx.Buffer(t);return n.writeUIntBE(e,0,t),n}function IT(e){let t=1;for(;e>=Math.pow(2,8*t);t++);if(t>=7)return console.warn("7bit or more bigger uint not supported."),new uT(e).toBuffer();const n=new Vx.Buffer(t);return n.writeIntBE(e,0,t),n}function MT(e,t=8){if(8===t){const t=new Vx.Buffer(8);return t.writeDoubleBE(e,0),t}if(4===t){const t=new Vx.Buffer(4);return t.writeFloatBE(e,0),t}throw new Error("float type bits must 4bytes or 8bytes")}var RT=Object.freeze({__proto__:null,WebPFrameFilter:function(e){return kT(e).reduce(((e,t)=>Qx(t.data).frames.reduce(((e,t)=>{const n=CT(t),r=new Blob([n],{type:"image/webp"});return e.concat(r)}),e)),[])},WebPBlockFilter:kT,VP8BitStreamToRiffWebPBuffer:CT,createRIFFChunk:xT,makeMetadataSeekable:function(e,t,n){const r=NT("EBML",e),i=OT(r)+12,o=e[e.length-1].dataEnd-i,a=NT("Info",e);TT("Duration",a),a.splice(1,0,{name:"Duration",type:"f",data:MT(t,8)});const s=OT(a),u=NT("Tracks",e),c=OT(u);let d=47,l=[],f=5+15*n.length,p=[],h=-1;for(let e=0;e<10;e++){const t=d,r=t+s,a=r+c,u=a+f-o;if(l=[],l.push({name:"SeekHead",type:"m",isEnd:!1}),l.push({name:"Seek",type:"m",isEnd:!1}),l.push({name:"SeekID",type:"b",data:new Vx.Buffer([21,73,169,102])}),l.push({name:"SeekPosition",type:"u",data:AT(t)}),l.push({name:"Seek",type:"m",isEnd:!0}),l.push({name:"Seek",type:"m",isEnd:!1}),l.push({name:"SeekID",type:"b",data:new Vx.Buffer([22,84,174,107])}),l.push({name:"SeekPosition",type:"u",data:AT(r)}),l.push({name:"Seek",type:"m",isEnd:!0}),l.push({name:"Seek",type:"m",isEnd:!1}),l.push({name:"SeekID",type:"b",data:new Vx.Buffer([28,83,187,107])}),l.push({name:"SeekPosition",type:"u",data:AT(a)}),l.push({name:"Seek",type:"m",isEnd:!0}),l.push({name:"SeekHead",type:"m",isEnd:!0}),d=OT(l),p=[],p.push({name:"Cues",type:"m",isEnd:!1}),n.forEach((({CueTrack:e,CueClusterPosition:t,CueTime:n})=>{p.push({name:"CuePoint",type:"m",isEnd:!1}),p.push({name:"CueTime",type:"u",data:AT(n)}),p.push({name:"CueTrackPositions",type:"m",isEnd:!1}),p.push({name:"CueTrack",type:"u",data:AT(e)}),t-=i,t+=u,p.push({name:"CueClusterPosition",type:"u",data:AT(t)}),p.push({name:"CueTrackPositions",type:"m",isEnd:!0}),p.push({name:"CuePoint",type:"m",isEnd:!0})})),p.push({name:"Cues",type:"m",isEnd:!0}),f=OT(p),h===u)break;if(h=u,9===e)throw new Error("Failed to converge to a stable metadata size")}const v=[r,{name:"Segment",type:"m",isEnd:!1,unknownSize:!0},l,a,u,p];return(new ET).encode(v)},removeElement:TT,extractElement:NT,putRefinedMetaData:function(e,t){Array.isArray(t.cueInfos)&&!Array.isArray(t.cues)&&(console.warn("putRefinedMetaData: info.cueInfos property is deprecated. please use info.cues"),t.cues=t.cueInfos);let n=[],r=[];for(let t=0;t<e.length;t++){const i=e[t];if("m"===i.type&&"Segment"===i.name){if(n=e.slice(0,t),r=e.slice(t),i.unknownSize){r.shift();break}throw new Error("this metadata is not streaming webm file")}}if(!(r[r.length-1].dataEnd>0))throw new Error("metadata dataEnd has wrong number");const i=r[r.length-1].dataEnd,o=n[n.length-1].dataEnd,a=(new ET).encode(n).byteLength-o,s=i-r[0].tagStart,u=new Vx.Buffer([24,83,128,103]),c=new Vx.Buffer("01ffffffffffffff","hex"),d=u.byteLength+c.byteLength;let l,f=s;for(l=1;l<20;l++){const e=_T(r,a+(o+d+f-i),t),s=(new ET).encode(e).byteLength;if(s===f)return(new ET).encode([].concat(n,[{type:"m",name:"Segment",isEnd:!1,unknownSize:!0}],e));f=s}throw new Error("unable to refine metadata, stable size could not be found in "+l+" iterations!")},encodeValueToBuffer:function(e){let t=new Vx.Buffer(0);if("m"===e.type)return e;switch(e.type){case"u":t=AT(e.value);break;case"i":t=IT(e.value);break;case"f":t=MT(e.value);break;case"s":t=new Vx.Buffer(e.value,"ascii");break;case"8":t=new Vx.Buffer(e.value,"utf8");break;case"b":t=e.value;break;case"d":t=new uT(e.value.getTime().toString()).toBuffer()}return Object.assign({},e,{data:t})},createUIntBuffer:AT,createIntBuffer:IT,createFloatBuffer:MT,readVint:Gx,writeVint:Wx,byEbmlID:Yx,convertEBMLDateToJSDate:Zx,readBlock:e=>Qx(new Vx.Buffer(e)),ebmlBlock:Qx,encodeTag:Xx,concat:Jx}),BT=Vr((function(e,t){const n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=o,t.SlowBuffer=function(e){+e!=e&&(e=0);return o.alloc(+e)},t.INSPECT_MAX_BYTES=50;const r=2147483647;function i(e){if(e>r)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,o.prototype),t}function o(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}return a(e,t,n)}function a(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!o.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|f(e,t);let r=i(n);const a=r.write(e,t);a!==n&&(r=r.slice(0,a));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(V(e,Uint8Array)){const t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return c(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(V(e,ArrayBuffer)||e&&V(e.buffer,ArrayBuffer))return d(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(V(e,SharedArrayBuffer)||e&&V(e.buffer,SharedArrayBuffer)))return d(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return o.from(r,t,n);const a=function(e){if(o.isBuffer(e)){const t=0|l(e.length),n=i(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||G(e.length)?i(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return s(e),i(e<0?0:0|l(e))}function c(e){const t=e.length<0?0:0|l(e.length),n=i(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,o.prototype),r}function l(e){if(e>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|e}function f(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||V(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return K(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(e).length;default:if(i)return r?-1:K(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,n);case"utf8":case"utf-8":return k(this,t,n);case"ascii":return x(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function h(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),G(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:m(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):m(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,n,r,i){let o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let r=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===u)return r*a}else-1!==r&&(o-=o-r),r=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){let n=!0;for(let r=0;r<u;r++)if(c(e,o+r)!==c(t,r)){n=!1;break}if(n)return o}return-1}function g(e,t,n,r){n=Number(n)||0;const i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;const o=t.length;let a;for(r>o/2&&(r=o/2),a=0;a<r;++a){const r=parseInt(t.substr(2*a,2),16);if(G(r))return a;e[n+a]=r}return a}function y(e,t,n,r){return $(K(t,e.length-n),e,n,r)}function w(e,t,n,r){return $(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function b(e,t,n,r){return $(H(t),e,n,r)}function S(e,t,n,r){return $(function(e,t){let n,r,i;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function E(e,t,n){return 0===t&&n===e.length?Kx.fromByteArray(e):Kx.fromByteArray(e.slice(t,n))}function k(e,t,n){n=Math.min(e.length,n);const r=[];let i=t;for(;i<n;){const t=e[i];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=n){let n,r,s,u;switch(a){case 1:t<128&&(o=t);break;case 2:n=e[i+1],128==(192&n)&&(u=(31&t)<<6|63&n,u>127&&(o=u));break;case 3:n=e[i+1],r=e[i+2],128==(192&n)&&128==(192&r)&&(u=(15&t)<<12|(63&n)<<6|63&r,u>2047&&(u<55296||u>57343)&&(o=u));break;case 4:n=e[i+1],r=e[i+2],s=e[i+3],128==(192&n)&&128==(192&r)&&128==(192&s)&&(u=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&s,u>65535&&u<1114112&&(o=u))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=a}return function(e){const t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=C));return n}(r)}t.kMaxLength=r,o.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(e,t,n){return a(e,t,n)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(e,t,n){return function(e,t,n){return s(e),e<=0?i(e):void 0!==t?"string"==typeof n?i(e).fill(t,n):i(e).fill(t):i(e)}(e,t,n)},o.allocUnsafe=function(e){return u(e)},o.allocUnsafeSlow=function(e){return u(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(V(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),V(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=o.allocUnsafe(t);let i=0;for(n=0;n<e.length;++n){let t=e[n];if(V(t,Uint8Array))i+t.length>r.length?(o.isBuffer(t)||(t=o.from(t)),t.copy(r,i)):Uint8Array.prototype.set.call(r,t,i);else{if(!o.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,i)}i+=t.length}return r},o.byteLength=f,o.prototype._isBuffer=!0,o.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)h(this,t,t+1);return this},o.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)h(this,t,t+3),h(this,t+1,t+2);return this},o.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)h(this,t,t+7),h(this,t+1,t+6),h(this,t+2,t+5),h(this,t+3,t+4);return this},o.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?k(this,0,e):p.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(e,t,n,r,i){if(V(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;let a=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0);const u=Math.min(a,s),c=this.slice(r,i),d=e.slice(t,n);for(let e=0;e<u;++e)if(c[e]!==d[e]){a=c[e],s=d[e];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return g(this,e,t,n);case"utf8":case"utf-8":return y(this,e,t,n);case"ascii":case"latin1":case"binary":return w(this,e,t,n);case"base64":return b(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const C=4096;function x(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function T(e,t,n){let r="";n=Math.min(e.length,n);for(let i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function N(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let i="";for(let r=t;r<n;++r)i+=W[e[r]];return i}function O(e,t,n){const r=e.slice(t,n);let i="";for(let e=0;e<r.length-1;e+=2)i+=String.fromCharCode(r[e]+256*r[e+1]);return i}function _(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,n,r,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function A(e,t,n,r,i){z(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function I(e,t,n,r,i){z(t,r,i,e,n,7);let o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function M(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function R(e,t,n,r,i){return t=+t,n>>>=0,i||M(e,0,n,4),$x(e,t,n,r,23,4),n+4}function B(e,t,n,r,i){return t=+t,n>>>=0,i||M(e,0,n,8),$x(e,t,n,r,52,8),n+8}o.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,o.prototype),r},o.prototype.readUintLE=o.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||_(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUintBE=o.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||_(e,t,this.length);let r=this[e+--t],i=1;for(;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUint8=o.prototype.readUInt8=function(e,t){return e>>>=0,t||_(e,1,this.length),this[e]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||_(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||_(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||_(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||_(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readBigUInt64LE=Y((function(e){U(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||F(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),o.prototype.readBigUInt64BE=Y((function(e){U(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||F(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),o.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||_(e,t,this.length);let r=this[e],i=1,o=0;for(;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||_(e,t,this.length);let r=t,i=1,o=this[e+--r];for(;r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return e>>>=0,t||_(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||_(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){e>>>=0,t||_(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||_(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||_(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readBigInt64LE=Y((function(e){U(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||F(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),o.prototype.readBigInt64BE=Y((function(e){U(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||F(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),o.prototype.readFloatLE=function(e,t){return e>>>=0,t||_(e,4,this.length),Hx(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||_(e,4,this.length),Hx(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||_(e,8,this.length),Hx(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||_(e,8,this.length),Hx(this,e,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){P(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){P(this,e,t,n,Math.pow(2,8*n)-1,0)}let i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUint8=o.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigUInt64LE=Y((function(e,t=0){return A(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeBigUInt64BE=Y((function(e,t=0){return I(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);P(this,e,t,n,r-1,-r)}let i=0,o=1,a=0;for(this[t]=255&e;++i<n&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);P(this,e,t,n,r-1,-r)}let i=n-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeBigInt64LE=Y((function(e,t=0){return A(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeBigInt64BE=Y((function(e,t=0){return I(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),o.prototype.writeFloatLE=function(e,t,n){return R(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return R(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return B(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return B(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let i;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{const a=o.isBuffer(e)?e:o.from(e,r),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<n-t;++i)this[i+t]=a[i%s]}return this};const L={};function D(e,t,n){L[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function j(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function z(e,t,n,r,i,o){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new L.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,n){U(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||F(t,e.length-(n+1))}(r,i,o)}function U(e,t){if("number"!=typeof e)throw new L.ERR_INVALID_ARG_TYPE(t,"number",e)}function F(e,t,n){if(Math.floor(e)!==e)throw U(e,n),new L.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new L.ERR_BUFFER_OUT_OF_BOUNDS;throw new L.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}D("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),D("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),D("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=j(String(n)):"bigint"==typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=j(i)),i+="n"),r+=` It must be ${t}. Received ${i}`,r}),RangeError);const q=/[^+/0-9A-Za-z-_]/g;function K(e,t){let n;t=t||1/0;const r=e.length;let i=null;const o=[];for(let a=0;a<r;++a){if(n=e.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function H(e){return Kx.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(q,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function $(e,t,n,r){let i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function V(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function G(e){return e!=e}const W=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function Y(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}}));
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var LT=Object.entries({Cluster:"1F43B675",TimestampScale:"2AD7B1",Timestamp:"E7",Info:"1549A966",Tracks:"1654AE6B",TrackEntry:"AE",TrackNumber:"D7",TrackUID:"73C5",TrackType:"83",CodecId:"86",Segment:"18538067",MuxingApp:"4D80",WritingApp:"5741",SimpleBlock:"A3",Void:"EC",BlockGroup:"A0",Block:"A1",ReferenceBlock:"FB",BlockDuration:"9B",Video:"E0",Audio:"E1",PixelWidth:"B0",PixelHeight:"BA",DisplayWidth:"54B0",DisplayHeight:"54BA",SamplingFrequency:"B5",Channels:"9F"}).reduce(((e,[t,n])=>(e[t]=BT.Buffer.from(n,"hex"),e)),{});const{removeElement:DT,encodeTag:jT,createUIntBuffer:zT,writeVint:UT}=RT,FT=({timestamp:e,simpleBlocks:t,blockGroup:n})=>jT(LT.Cluster,BT.Buffer.concat([jT(LT.Timestamp,zT(e)),...t.map((e=>jT(LT.SimpleBlock,BT.Buffer.from(e)))),BT.Buffer.from(n||new ArrayBuffer(0))])),qT=({trackNumber:e,timecode:t,duration:n,frames:r,referenceTimestamp:i})=>{const o=new Uint8Array([255&t>>8,255&t]),a=null===i?null:new Uint8Array([255&i>>24,255&i>>16,255&i>>8,255&i]);return jT(LT.BlockGroup,BT.Buffer.concat([jT(LT.Block,BT.Buffer.concat([UT(e),BT.Buffer.from(o),BT.Buffer.from([0]),BT.Buffer.from(r)])),a?jT(LT.ReferenceBlock,BT.Buffer.from(a)):BT.Buffer.alloc(0),jT(LT.BlockDuration,zT(n))]))};function KT(e){const t=new Tx(BT.Buffer.from(e)),n=t.nextUIntV(),r=t.nextInt16BE(),i=t.nextUInt8();return{trackNumber:n,timecode:r,keyframe:Boolean(128&i)}}function HT(e){const t=new Uint8Array(e),n=3&t[0];let r=0;switch(n){case 0:r=1;break;case 1:case 2:r=2;break;case 3:if(t.byteLength<2)return console.error("Second byte missing from 'Code 3' Opus packet; demuxed block duration may be imprecise."),0;if(r=63&t[1],0===r)return console.error("Illegal 'Code 3' Opus packet with frame count zero; demuxed block duration may be imprecise."),0;break;default:return console.error(`Unexpected Opus frame count type: ${n}; demuxed block duration may be imprecise.`),0}const i=(248&t[0])>>3;if(i<0)throw new Error(`Unexpected opusConfig: ${i}`);if(0===r)return console.warn("Received opus packet without frames"),0;const o=[1e4,2e4,4e4,6e4,1e4,2e4,4e4,6e4,1e4,2e4,4e4,6e4,1e4,2e4,1e4,2e4,2500,5e3,1e4,2e4,2500,5e3,1e4,2e4,2500,5e3,1e4,2e4,2500,5e3,1e4,2e4][i]*r/1e3;return o>120&&console.warn(`Warning, demuxed Opus packet with encoded duration: ${o}ms. Should be no greater than 120`),o}function $T(e){const t=e.reduce(((e,t)=>e+t.byteLength),0),n=new Uint8Array(t);let r=0;return e.forEach((e=>{n.set(new Uint8Array(e),r),r+=e.byteLength})),n}class VT{constructor(e,t){this.simpleBlocks=[],this.timestamp=0,this.endTimestamp=0,this.firstTimecode=1/0,this.lastTimecode=-1/0,this.trackNumber=e,this.streamType=t}static get defaultVideoFrameDurationMs(){return 33}addSimpleBlock(e){const{trackNumber:t,timecode:n}=KT(e);if(this.firstTimecode=Math.min(this.firstTimecode,n),this.lastTimecode=Math.min(this.lastTimecode,n),t!==this.trackNumber)throw new Error(`received SimpleBlock from Track ${t}, expected ${this.trackNumber}`);this.simpleBlocks.push(e)}setTimestamp(e){this.timestamp=e}hasData(){return this.simpleBlocks.length>0}setEndTimestamp(e){this.endTimestamp=e}getTrackNumber(){return this.trackNumber}getDuration(e=VT.defaultVideoFrameDurationMs){if(0===this.simpleBlocks.length)return 0;if(1===this.simpleBlocks.length&&!this.endTimestamp)return e;const t=KT(this.simpleBlocks[0]).timecode;if(this.endTimestamp)return this.endTimestamp-(this.timestamp+this.firstTimecode);return KT(this.simpleBlocks[this.simpleBlocks.length-1]).timecode-t+this.getMostFrequentDuration()}getTimestamp(){return this.timestamp}startsWithKeyframe(){return!!this.simpleBlocks.length&&KT(this.simpleBlocks[0]).keyframe}getEncoded(){if(0===this.simpleBlocks.length)return new ArrayBuffer(0);if(1===this.simpleBlocks.length)return FT({timestamp:this.getTimestamp(),simpleBlocks:this.simpleBlocks});const e=this.simpleBlocks[this.simpleBlocks.length-1],{timecode:t,trackNumber:n,keyframe:r}=KT(e),i=KT(this.simpleBlocks[this.simpleBlocks.length-2]),o="audio"===this.streamType?HT(e.slice(4)):this.endTimestamp?this.endTimestamp-(this.timestamp+t):this.getMostFrequentDuration(),a=e.slice(4,e.byteLength);return FT({timestamp:this.getTimestamp(),simpleBlocks:this.simpleBlocks.slice(0,this.simpleBlocks.length-1),blockGroup:qT({trackNumber:n,timecode:t,duration:o,frames:a,referenceTimestamp:r?null:this.timestamp+i.timecode})})}getMostFrequentDuration(){const e={},t=this.simpleBlocks.map((e=>KT(e).timecode)).sort(((e,t)=>e>t?1:-1));for(let n=0;n<t.length-1;n+=2){const r=Math.round(t[n+1]-t[n]);e[r]=e[r]?e[r]+1:1}return Object.keys(e).map((e=>Number(e))).sort(((t,n)=>e[t]>e[n]?-1:1))[0]}}var GT=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};class WT{constructor(e=0){this.size=0,this.offset=0,this.data=new ArrayBuffer(e)}add(e){if(this.getCapacity()<this.size+e.byteLength)return this.data=$T([this.data,e]),void(this.size=this.data.byteLength);new Uint8Array(this.data).set(new Uint8Array(e),this.size),this.size+=e.byteLength}getCopy({begin:e,end:t}){if(e<0||t<0)throw new Error("Range delimiters must be positive");if(t-this.offset>this.size)throw new Error(`End index beyond buffer bounds: ${t} > ${this.size+this.offset}`);return this.data.slice(e-this.offset,t-this.offset)}getSize(){return this.size}release(){this.offset+=this.size,this.size=0}getCapacity(){return this.data.byteLength}}class YT{constructor(){this.onEbmlHeader=new Is,this.onTrackEntry=new Is,this.onTimestampScale=new Is,this.onCluster=new Is,this.onDrained=new Is,this.onError=new Is,this.trackClusters={},this.decoder=new ST,this.decodeTasks=new Promise((e=>{e()})),this.accumulatedOpusDuration=0,this.undecoded=new WT,this.parsingHeader=!0}get EbmlHeader(){return this.onEbmlHeader.expose()}get TrackEntry(){return this.onTrackEntry.expose()}get TimestampScale(){return this.onTimestampScale.expose()}get Cluster(){return this.onCluster.expose()}get Drained(){return this.onDrained.expose()}get Error(){return this.onError.expose()}read(e){this.decodeTasks=this.decodeTasks.then((()=>{try{this.parseEbml(e)}catch(e){this.onError.trigger(e)}}))}drain(){return GT(this,void 0,void 0,(function*(){yield this.decodeTasks,this.onDrained.trigger(Object.values(this.trackClusters).reduce(((e,t)=>[...e,t.cluster]),[]))}))}parseEbml(e){this.parsingHeader&&this.undecoded.add(e),this.decoder.decode(e).forEach((e=>{this.parsingHeader=!!this.parsingHeader&&!("Cluster"===e.name),"TimecodeScale"===e.name?this.onTimestampScale.trigger(e.value):"Timecode"===e.name?this.setClustersTimecode(e.value):["SimpleBlock","Block"].includes(e.name)&&this.addSimpleBlockToCluster(e.value);if("m"===e.type&&e.isEnd)switch(e.name){case"EBML":this.onEbmlHeader.trigger(this.undecoded.getCopy({begin:e.tagStart,end:e.dataEnd}));break;case"TrackEntry":this.parseTrackEntry(this.undecoded.getCopy({begin:e.tagStart,end:e.dataEnd}))}}))}parseTrackEntry(e){const t=function(e,t){const n=(new ST).decode(e).filter((e=>"unknown"!==e.name));return t.forEach((e=>DT(e,n))),(new ET).encode(n)}(e,["DefaultDuration","MaxBlockAdditionID","BitDepth"]),n=function(e){const t={},n={};function r(e,t){const n=e[t];if(!n)throw new Error(`${t} not found`);return n}let i=null;(new ST).decode(e).forEach((e=>{"Video"===e.name?i="video":"Audio"===e.name&&(i="audio"),"u"===e.type||"f"===e.type?n[e.name]=e.value:"s"!==e.type&&"8"!==e.type||(t[e.name]=e.value)}));const o={TrackNumber:r(n,"TrackNumber"),TrackUID:r(n,"TrackUID"),TrackType:r(n,"TrackType"),CodecID:r(t,"CodecID")};if("video"===i)return Object.assign(Object.assign({},o),{__typename:"VideoTrackEntry",Video:{PixelWidth:r(n,"PixelWidth"),PixelHeight:r(n,"PixelHeight")}});if("audio"===i)return Object.assign(Object.assign({},o),{__typename:"AudioTrackEntry",Audio:{SamplingFrequency:r(n,"SamplingFrequency"),Channels:r(n,"Channels")}});throw new Error(`unsupported track type ${t.TrackType} (should be Video or Audio)`)}(t),r="VideoTrackEntry"===n.__typename?"video":"audio";this.trackClusters[n.TrackNumber]={cluster:new VT(n.TrackNumber,r),mustFlush:!1,nextTimestamp:0,streamType:r},this.onTrackEntry.trigger({data:t,trackEntry:n})}setClustersTimecode(e){for(const t of Object.values(this.trackClusters))t.nextTimestamp=e,t.mustFlush=t.cluster.hasData()}addSimpleBlockToCluster(e){const{trackNumber:t,timecode:n}=KT(e),r=this.trackClusters[t];if(r){if(r.mustFlush&&"audio"===r.streamType){if(null===r.nextTimestamp)throw new Error("missing timestamp of the next cluster");const e=r.cluster.getTimestamp()+this.accumulatedOpusDuration;this.accumulatedOpusDuration=Math.max(e-r.nextTimestamp,0)}if(r.mustFlush){if(!r.nextTimestamp)throw new Error("missing timestamp of the next cluster");r.cluster.setEndTimestamp(n+r.nextTimestamp),this.onCluster.trigger(r.cluster),r.cluster=new VT(r.cluster.getTrackNumber(),r.streamType),r.cluster.setTimestamp(r.nextTimestamp),r.nextTimestamp=null,r.mustFlush=!1}switch(r.streamType){case"video":r.cluster.addSimpleBlock(e);break;case"audio":r.cluster.addSimpleBlock(n<this.accumulatedOpusDuration?function(e,t){if(t<0)throw new Error("negative timestamps are not allowed");const n=new Uint8Array(e);return n[1]=t>>8&255,n[2]=255&t,n}(e,this.accumulatedOpusDuration):e),this.accumulatedOpusDuration=Math.max(n,this.accumulatedOpusDuration)+HT(e.slice(4));break;default:this.onError.trigger(new Error(`Unrecognized stream type: ${r.streamType} | Cluster: ${r}`))}}else this.onError.trigger(new Error(`Missing Cluster for track ${t}`))}}var QT=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Array.from("string"==typeof e?[e]:e.raw);r[r.length-1]=r[r.length-1].replace(/\r?\n([\t ]*)$/,"");var i=r.reduce((function(e,t){var n=t.match(/\n[\t ]+/g);return n?e.concat(n.map((function(e){return e.length-1}))):e}),[]);if(i.length){var o=new RegExp("\n[\t ]{"+Math.min.apply(Math,i)+"}","g");r=r.map((function(e){return e.replace(o,"\n")}))}r[0]=r[0].replace(/^\r?\n/,"");var a=r[0];return t.forEach((function(e,t){a+=e+r[t+1]})),a};class JT{constructor(e){this.segmentTimeline={video:[],audio:[]},this.videoInfo=null,this.audioInfo=null,this.segmentPrefix=e}addAudioStream(e){this.audioInfo=e}addVideoStream(e){this.videoInfo=e}addSegment(e,t,n,r){isNaN(t)||0===Number(t)||this.segmentTimeline[r].push({timestamp:e,duration:t,byteLength:n})}getSegmentName(e,t){return`${this.segmentPrefix}${e}-${t}.webm`}getInitSegmentName(e){return`${this.segmentPrefix}${e}-init.webm`}getManifest(){return QT`<?xml version="1.0" encoding="UTF-8"?>
    <!--Generated by Loom-->
    <MPD xmlns="urn:mpeg:dash:schema:mpd:2011" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:mpeg:dash:schema:mpd:2011 DASH-MPD.xsd" profiles="urn:mpeg:dash:profile:isoff-live:2011" minBufferTime="PT2S" type="static" mediaPresentationDuration="PT${this.getDuration()}S">
    <Period id="0">
        ${this.buildAudioAdaptationSet()}${this.buildVideoAdaptationSet()}
    </Period>
    </MPD>`}getDuration(){var e,t;const n=this.segmentTimeline.video[this.segmentTimeline.video.length-1],r=this.segmentTimeline.audio[this.segmentTimeline.audio.length-1],i=Math.pow(10,9),o=n&&(null===(e=this.videoInfo)||void 0===e?void 0:e.timescale)?(n.duration+n.timestamp)/(i/this.videoInfo.timescale):0,a=r&&(null===(t=this.audioInfo)||void 0===t?void 0:t.timescale)?(r.duration+r.timestamp)/i/this.audioInfo.timescale:0;return Math.max(o,a)}buildAudioAdaptationSet(){if(!this.audioInfo)return"";const e=Math.pow(10,9)/this.audioInfo.timescale;return QT`<AdaptationSet id="0" contentType="audio" lang="en" segmentAlignment="true">
      <Representation id="0" bandwidth="${this.getAudioBandwidth()}" codecs="${this.audioInfo.codec}" mimeType="audio/webm" audioSamplingRate="${this.audioInfo.sampleRate}">
          <AudioChannelConfiguration schemeIdUri="urn:mpeg:dash:23003:3:audio_channel_configuration:2011" value="${this.audioInfo.channels}"/>
          <SegmentTemplate timescale="${this.audioInfo.timescale}" initialization="${this.audioInfo.initializationFileName}" media="${this.segmentPrefix}audio-$Number$.webm" startNumber="0">
              <SegmentTimeline>
                  ${this.segmentTimeline.audio.map((t=>`<S t="${t.timestamp*e}" d="${t.duration*e}"/>`)).join("\n")}
              </SegmentTimeline>
          </SegmentTemplate>
      </Representation>
  </AdaptationSet>`}buildVideoAdaptationSet(){if(!this.videoInfo)return"";const e=Math.pow(10,9)/this.videoInfo.timescale;return QT`<AdaptationSet id="1" contentType="video" width="${this.videoInfo.width}" height="${this.videoInfo.height}" segmentAlignment="true">
      <Representation id="1" bandwidth="${this.getVideoBandwidth()}" codecs="${this.videoInfo.codec}" mimeType="video/webm" sar="1:1">
          <SegmentTemplate timescale="${this.videoInfo.timescale}" initialization="${this.videoInfo.initializationFileName}" media="${this.segmentPrefix}video-$Number$.webm" startNumber="0">
              <SegmentTimeline>
                  ${this.segmentTimeline.video.map((t=>`<S t="${t.timestamp*e}" d="${t.duration*e}"/>`)).join("\n")}
              </SegmentTimeline>
          </SegmentTemplate>
      </Representation>
  </AdaptationSet>`}getVideoBandwidth(){return Math.floor(8*this.segmentTimeline.video.reduce(((e,t)=>e+t.byteLength),0)/this.getDuration())}getAudioBandwidth(){return Math.floor(8*this.segmentTimeline.audio.reduce(((e,t)=>e+t.byteLength),0)/this.getDuration())}}const{encodeTag:XT,createUIntBuffer:ZT}=RT;class eN{constructor(e,t){this.ebml={header:new ArrayBuffer(0),timestampScale:1e6,muxingApp:"Loom",writingApp:"Loom"},this.draining=!1,this.streamTypeByTrackNumber={},this.segmentIndexes={audio:0,video:0},this.stagedClusters={audio:[],video:[]},this.onInitSegment=new Is,this.onMediaSegment=new Is,this.onDrained=new Is,this.onError=new Is,this.logger=t,this.reader=new YT,this.segmentPrefix=e,this.manifest=new JT(e),this.setReaderEventHandlers()}get InitSegment(){return this.onInitSegment.expose()}get MediaSegment(){return this.onMediaSegment.expose()}get Drained(){return this.onDrained.expose()}get Error(){return this.onError.expose()}addSample(e){this.reader.read(e)}drain(){this.reader.drain()}getSegmentNamePrefix(){return this.segmentPrefix}generateInitSegment(e,t){if(!this.ebml.header.byteLength)return void this.onError.trigger(new Error("missing EBML header"));if(!this.ebml.timestampScale)return void this.onError.trigger(new Error("missing TimecodeScale"));const n="VideoTrackEntry"===t.__typename?"video":"audio",r=XT(LT.Tracks,BT.Buffer.from(e)),i=BT.Buffer.from(this.ebml.muxingApp),o=BT.Buffer.from(this.ebml.writingApp),a=XT(LT.Info,BT.Buffer.concat([XT(LT.TimestampScale,ZT(this.ebml.timestampScale)),XT(LT.WritingApp,o),XT(LT.MuxingApp,i)])),s=XT(LT.Segment,BT.Buffer.concat([XT(LT.Void,BT.Buffer.alloc(87)),a,r]),!0);this.onInitSegment.trigger(Object.assign({data:$T([this.ebml.header,s]),streamType:n,name:this.manifest.getInitSegmentName(n)},t))}addVideoStreamToManifest(e){const t=e.Video,n={width:t.PixelWidth,height:t.PixelHeight,codec:{V_VP8:"vp8",V_VP9:"vp9"}[e.CodecID],timescale:this.ebml.timestampScale,initializationFileName:this.manifest.getInitSegmentName("video")};this.logger.crumb({message:"packager: Video track detected",level:Ce.Info,context:n}),this.manifest.addVideoStream(n)}addAudioStreamToManifest(e){const t=e.Audio,n={sampleRate:t.SamplingFrequency,channels:t.Channels,codec:{A_OPUS:"opus",A_VORBIS:"vorbis"}[e.CodecID],timescale:this.ebml.timestampScale,initializationFileName:this.manifest.getInitSegmentName("audio")};this.logger.crumb({message:"packager: Audio track detected",level:Ce.Info,context:n}),this.manifest.addAudioStream(n)}associateTrackNumberToStreamType(e,t){const n={1:"video",2:"audio"};if(!Object.keys(n).map((e=>Number(e))).includes(e))throw new Error(`unsupported Track Type: ${e}`);this.streamTypeByTrackNumber[t]=n[e]}addTrackToManifest(e){const t=this.getTrackStreamType(e.TrackNumber);if("video"===t)this.addVideoStreamToManifest(e);else{if("audio"!==t)throw new Error(`unsupported track: ${e}`);this.addAudioStreamToManifest(e)}}getTrackStreamType(e){return this.streamTypeByTrackNumber[e]}clustersToMediaSegments(e,t=[]){const n=this.popClusterGroup(e);if(!n.length)return t;const r=n.reduce(((e,t)=>e+t.getDuration()),0),i=n.reduce(((e,t)=>Math.min(e,t.getTimestamp())),1/0),o={data:BT.Buffer.concat(n.map((e=>BT.Buffer.from(e.getEncoded())))),duration:r,timestamp:i,streamType:e,index:this.segmentIndexes[e],name:this.manifest.getSegmentName(e,this.segmentIndexes[e])};return this.segmentIndexes[o.streamType]+=1,this.clustersToMediaSegments(e,[...t,o])}popClusterGroup(e){const t=[];let n=0;for(const[r,i]of Object.entries(this.stagedClusters[e])){if(t.length&&i.startsWithKeyframe())break;t.push(i),n=Number(r)}return this.stagedClusters[e]=this.stagedClusters[e].slice(n+1,this.stagedClusters[e].length),t}addMediaSegmentToManifest(e){this.manifest.addSegment(e.timestamp,e.duration,e.data.byteLength,e.streamType)}createMediaSegment(e){const t=this.streamTypeByTrackNumber[e.getTrackNumber()],n=this.draining||this.stagedClusters[t].length&&e.startsWithKeyframe();if(this.stagedClusters[t].push(e),!n)return;this.clustersToMediaSegments(t).forEach((e=>{this.logger.crumb({message:"packager: media segment created",level:Ce.Info,context:{streamType:t,index:e.index,timestamp:e.timestamp,duration:e.duration}}),this.addMediaSegmentToManifest(e),this.onMediaSegment.trigger(e)}))}setReaderEventHandlers(){this.reader.EbmlHeader.on((e=>{this.ebml.header=e,this.logger.crumb({message:"packager: EBML header received",level:Ce.Info,context:{size:e.byteLength}})})),this.reader.TimestampScale.on((e=>{this.ebml.timestampScale=e})),this.reader.TrackEntry.on((({data:e,trackEntry:t})=>{try{this.associateTrackNumberToStreamType(t.TrackType,t.TrackNumber),this.addTrackToManifest(t),this.generateInitSegment(e,t)}catch(e){this.onError.trigger(e)}})),this.reader.Cluster.on((e=>{try{this.createMediaSegment(e)}catch(e){this.onError.trigger(e)}})),this.reader.Drained.on((e=>{this.draining=!0,e.forEach((e=>this.createMediaSegment(e))),this.onDrained.trigger(this.manifest.getManifest())})),this.reader.Error.on((e=>{this.onError.trigger(e)}))}}var tN=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const nN=(e,t)=>()=>tN(void 0,void 0,void 0,(function*(){const n=e.currentStatus(),{result:r}=yield Os({fn:()=>(e=>xs(void 0,void 0,void 0,(function*(){const t=yield Es({method:"POST",url:gs(e),headers:e.headers},{});return t.kind===Le.Failed?_i({failure:t,message:"api.credentials: Failed",context:{args:[e],extra:{}}}):{kind:Le.Success,payload:t.payload}})))(Object.assign({videoId:t.videoId},e.api)),shouldRetry:e=>e.kind===Le.Failed&&n!==je.Abandoning,remainingAttempts:3});if(r.kind===Le.Failed)throw _i({failure:r,context:{args:t,extra:{}},message:"Failed to refresh credentials for webm-uploader-sdk"}),new Error("Failed to refresh S3 credentials");const i=r.payload;return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken}}));var rN=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const iN=(e,t,n)=>{const{videoId:r,s3Config:i}=e,o=n.getState();let a=!1;return{hooks:e.hooks,videoId:r,s3Config:i,onProgress:e=>{t.setProgress(e)},onFileComplete:e=>rN(void 0,void 0,void 0,(function*(){const t=n.currentStatus(),i={state:o,status:t},s=e.match(/-video-\d+\.webm/),u=[je.Recording,je.Pausing,je.Paused,je.Resuming,je.Resumed,je.MediaStreamStopped,je.Completing];!1===a&&s&&u.includes(t)?(yield As({callFn:()=>((e,t)=>Ts(void 0,void 0,void 0,(function*(){const{s3FileKey:n}=t;return yield Es({method:"POST",url:ys(e),headers:e.headers},{s3FileKey:n})})))(Object.assign({videoId:r},n.api),{s3FileKey:e}),purpose:"Request metadata of the recording to be extracted",breadcrumbs:i,allowedRetries:1},n.log),a=!0):!1===a&&s&&n.log.crumb({level:Ce.Warning,message:"onFileComplete: Ignoring completed video segment, we are in the wrong state to extract metadata",context:Object.assign({},i)}),t===je.Completing&&(yield As({callFn:()=>((e,t)=>{const{packets:n}=t;return Es({method:"POST",url:ws(e),headers:e.headers},{packets:n})})(Object.assign({videoId:r},n.api),{packets:o.progress.total-o.progress.pending}),breadcrumbs:i,purpose:"Send the current upload progress",allowedRetries:0},n.log))})),onComplete:()=>rN(void 0,void 0,void 0,(function*(){t.setUploadCompleted();(yield As({callFn:()=>((e,t=aN)=>Cs(void 0,void 0,void 0,(function*(){return yield Es({method:"POST",url:ms(e),headers:e.headers},Object.assign(Object.assign({format:"dash",recording_version:_e.V5},e.environmentMetadata),{duration:Math.round(t.duration/1e3),trueBitrate:t.trueBitrate}))})))(Object.assign({videoId:r},n.api),n.recordingStats),purpose:"Mark a recording as complete",breadcrumbs:o,allowedRetries:8},n.log)).kind===Le.Failed&&n.log.crumb({level:Ce.Warning,message:"uploader.onComplete: Failed to request the complete endpooint",context:{videoId:r}}),t.setCompleted()}))}};var oN=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const aN={duration:0,totalByteSize:0,totalParts:0,trueBitrate:0},sN=(e,t)=>{const{stream:n,hooks:r,api:i,videoId:o}=e,a={progress:{total:0,pending:0},markers:{startedAbandoning:!1,startedCancel:!1,startedCompletion:!1,startedStarting:!1,finishedInitializing:!1,finishedTeardown:!1,finishedCompletion:!1,finishedUploading:!1,finishedStarting:!1},mediarecorder:null},s=()=>(e=>fs.statusFinder(e,ps,je.Unknown))(a),u=()=>{const e=s();try{r.onLifecycleEvent(e)}catch(n){t.error(`Lifecycle event hook failed: ${(null==n?void 0:n.message)||n}`,{error:n,status:e})}},c=Object.assign({},aN),d={currentStatus:s,getState:()=>a,log:t,api:i,recordingStats:c,triggerAnalytics:u};u();const l=((e,t)=>{const{videoId:n,s3Config:r,onComplete:i,onProgress:o,onFileComplete:a}=e,{accessKeyId:s,secretAccessKey:u,sessionToken:c,bucket:d,endpoint:l}=r;if(!Object.values(Ue).includes(d))return{kind:Le.Failed,context:{args:e,extra:{}},stackContext:[],message:`unauthorized bucket ${d}`};const{log:f,currentStatus:p,recordingStats:h}=t,v={credentials:{accessKeyId:s,secretAccessKey:u,sessionToken:c},region:"us-west-2"};d===Ue.Test&&(v.endpoint=l);const m=bx.createUploader(v,{bucketName:d,keyPrefix:"sessions/raw/"},nN(t,e),t.log),g=new eN(`${n}-`,t.log);g.MediaSegment.on((e=>{e.index+1>h.totalParts&&e.duration&&(h.totalParts+=1,h.duration+=e.duration),h.totalByteSize+=e.data.byteLength,h.trueBitrate=Math.round(8*h.totalByteSize/(h.duration/1e3))}));const y=new kx(g,m,t.log),w={dashPackager:g,s3Uploader:m,segmentUploader:y};m.ProgressUpdate.on((e=>{o(e,w)})),m.FileUploaded.on((e=>{a(e)}));const b=t=>n=>{f.crumb({level:Ce.Error,message:`uploader.${t}: ${n.message}`,context:{status:status,error:n}}),e.hooks.onUnrecoverable(n)};return g.Error.on(b("dashPackager")),m.Error.on(b("s3Uploader")),y.Error.on(b("segmentUploader")),y.Complete.on((()=>{const e=p();e===je.Completing?i():f.crumb({level:Ce.Warning,message:"uploader.segmentUploader: Ignoring the Complete callback.",context:{status:e,recorders:w}})})),{kind:Le.Success,payload:w}})(iN(e,{setCompleted:()=>{a.markers.finishedCompletion=!0,u()},setProgress:e=>{a.progress=e},setUploadCompleted:()=>{a.markers.finishedUploading=!0,u()}},d),d);if(l.kind===Le.Failed)return console.error({uploaderResult:l}),_i({failure:l,context:{args:e,extra:{}},message:`Failed to: Prepare the uploader for wru-core: ${l.message}`});const{payload:{segmentUploader:f}}=l,p=()=>oN(void 0,void 0,void 0,(function*(){f.cancel(),yield As({callFn:()=>(e=>ks(void 0,void 0,void 0,(function*(){return yield Es({method:"DELETE",url:vs(e),headers:e.headers},{cancelling_recording:!0,video_properties:e.environmentMetadata})})))(Object.assign({videoId:o},d.api)),purpose:"Tell the api that this recording has been cancelled",breadcrumbs:a,allowedRetries:3},d.log),a.markers.finishedTeardown=!0,u()})),h=()=>oN(void 0,void 0,void 0,(function*(){f.finish(),yield As({callFn:()=>((e,t)=>Es({method:"POST",url:bs(e),headers:e.headers},Object.assign({packets:t.packets,pendingPackets:t.pendingPackets},e.environmentMetadata)))(Object.assign({videoId:o},d.api),{packets:a.progress.total+3,pendingPackets:a.progress.pending}),purpose:"Send the total number of parts for the current recording",breadcrumbs:a,allowedRetries:0},d.log)})),[v,m]=ds({stream:n,settings:e.settings,handlerOptions:ls(e,{uploadFn:e=>f.upload(e),setFinishedStarting:()=>{a.markers.finishedStarting=!0,u()},cancelRecording:p,completeRecording:h},d)},d);a.mediarecorder=m,a.markers.finishedInitializing=!0,u();const g=([e,t,n])=>((e,t)=>{const{name:n,validStates:r,fn:i}=e;return()=>{t.log.crumb({level:Ce.Info,message:`wru-core.control/${n}: Attempting`,context:{}});const e=t.currentStatus();if(!1===r.includes(e)){const r=t.getState();return{kind:Le.Failed,message:`wru-core.control/${n}: Ignoring attempt, we are in the wrong state`,context:{args:{},extra:{status:e,state_markers:JSON.stringify(r.markers),state_mediarecorder:r.mediarecorder?r.mediarecorder.state:"null"}},stackContext:[]}}try{return i(),{kind:Le.Success,payload:null}}catch(t){return{kind:Le.Failed,message:`wru-core.control/${n}: Threw an unexpected error`,context:{args:{},extra:{error:t,status:e}},stackContext:[]}}}})({name:e,validStates:t,fn:n},d);return{kind:Le.Success,payload:{controls:{abandon:g(["abandon",[je.Intitializing,je.Ready,je.Starting,je.Recording,je.Paused,je.Completing,je.FinishedUploading,je.Cancelling,je.MediaStreamStopped],()=>{const e=s();a.markers.startedAbandoning=!0,u(),[je.Intitializing,je.Ready].includes(e)&&v.start(3e3),v.abandon(),e===je.MediaStreamStopped&&p()}]),cancel:g(["cancel",[je.Recording,je.Paused,je.MediaStreamStopped],()=>{const e=s();a.markers.startedCancel=!0,u(),e===je.MediaStreamStopped?p():v.stop()}]),start:g(["start",[je.Ready],()=>{a.markers.startedStarting=!0,u(),v.start(3e3)}]),complete:g(["complete",[je.Recording,je.Paused,je.MediaStreamStopped],()=>{const e=s();switch(a.markers.startedCompletion=!0,u(),e){case je.Paused:case je.Recording:v.stop();break;case je.MediaStreamStopped:h()}}]),pause:g(["pause",[je.Recording],()=>{r.onLifecycleEvent(je.Pausing),v.pause(),u()}]),resume:g(["resume",[je.Paused],()=>{r.onLifecycleEvent(je.Resuming),v.resume(),r.onLifecycleEvent(je.Resumed),u()}])},currentStatus:s,getRecordingStats:()=>Object.assign({},c),__hacks:{assocWithMetadata:e=>{d.api.environmentMetadata=Object.assign(Object.assign({},d.api.environmentMetadata),e)}}}}};var uN=Vr((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.RECORDING_ALL_EVENTS=t.EVENT_FORCE_QUIT_FOUND=t.EVENT_RECORDING_NETWORK_LOST_CONNECTION=t.EVENT_RECORDING_COMPLETE=t.EVENT_RECORDING_UPLOAD_CANCELLED=t.EVENT_RECORDING_UPLOADED=t.EVENT_RECORDING_STOPPED=t.EVENT_RECORDING_LAYER_STOPPED=t.EVENT_RECORDING_STOP=t.EVENT_RECORDING_CANCEL_PROMPT_REJECT=t.EVENT_RECORDING_CANCEL_PROMPT_CONFIRM=t.EVENT_RECORDING_CANCELLED=t.EVENT_RECORDING_LAYER_CANCELLED=t.EVENT_RECORDING_CANCEL=t.EVENT_RECORDING_LAYER_RESUMED=t.EVENT_RECORDING_RESUME=t.EVENT_RECORDING_LAYER_PAUSED=t.EVENT_RECORDING_PAUSE=t.EVENT_RECORDING_LAYER_STARTED=t.EVENT_RECORDING_START=void 0;var n="Recording Start";t.EVENT_RECORDING_START=n;var r="Recording Layer Started";t.EVENT_RECORDING_LAYER_STARTED=r;var i="Recording Pause";t.EVENT_RECORDING_PAUSE=i;var o="Recording Layer Paused";t.EVENT_RECORDING_LAYER_PAUSED=o;var a="Recording Resume";t.EVENT_RECORDING_RESUME=a;var s="Recording Layer Resumed";t.EVENT_RECORDING_LAYER_RESUMED=s;var u="Recording Cancel";t.EVENT_RECORDING_CANCEL=u;var c="Recording Layer Cancelled";t.EVENT_RECORDING_LAYER_CANCELLED=c;var d="Recording Cancelled";t.EVENT_RECORDING_CANCELLED=d;var l="Recording Cancel Prompt Confirm";t.EVENT_RECORDING_CANCEL_PROMPT_CONFIRM=l;var f="Recording Cancel Prompt Reject";t.EVENT_RECORDING_CANCEL_PROMPT_REJECT=f;var p="Recording Stop";t.EVENT_RECORDING_STOP=p;var h="Recording Layer Stopped";t.EVENT_RECORDING_LAYER_STOPPED=h;var v="Recording Stopped";t.EVENT_RECORDING_STOPPED=v;var m="Recording Uploaded";t.EVENT_RECORDING_UPLOADED=m;var g="Recording Upload Canceled";t.EVENT_RECORDING_UPLOAD_CANCELLED=g;var y="Recording Complete";t.EVENT_RECORDING_COMPLETE=y;var w="Recording Lost Network Connection";t.EVENT_RECORDING_NETWORK_LOST_CONNECTION=w;var b="App was Force Quit";t.EVENT_FORCE_QUIT_FOUND=b;var S=[n,r,i,o,a,s,u,c,d,l,f,p,h,v,m,g,y,w,b];t.RECORDING_ALL_EVENTS=S})),cN=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const dN=e=>cN(void 0,void 0,void 0,(function*(){const t=yield e.getAnonymousId();if(t)return{headers:{"segment-anonymous-id":t}}}));var lN=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const fN=(e,t,n,r,i)=>lN(void 0,void 0,void 0,(function*(){const o=(e=>{switch(e){case je.Recording:return uN.EVENT_RECORDING_LAYER_STARTED;case je.Pausing:return uN.EVENT_RECORDING_PAUSE;case je.Paused:return uN.EVENT_RECORDING_LAYER_PAUSED;case je.Resuming:return uN.EVENT_RECORDING_RESUME;case je.Resumed:return uN.EVENT_RECORDING_LAYER_RESUMED;case je.Cancelling:case je.Abandoning:return uN.EVENT_RECORDING_CANCEL;case je.Cancelled:case je.Abandoned:return uN.EVENT_RECORDING_LAYER_CANCELLED;case je.Completing:return uN.EVENT_RECORDING_STOP;case je.FinishedUploading:return uN.EVENT_RECORDING_UPLOADED;case je.Completed:return uN.EVENT_RECORDING_LAYER_STOPPED;default:return null}})(r);if(!o)return;const{hadSuccess:a,result:s}=yield Os({fn:()=>lN(void 0,void 0,void 0,(function*(){return yield e.mutation(ni`
          mutation SendRecordingEvent(
            $eventName: String!
            $recordingMetadata: RecordingEventAttributes
          ) {
            success: sendRecordingEvent(
              eventName: $eventName
              attributes: $recordingMetadata
            )
          }
        `,{eventName:o,recordingMetadata:i},{fetchOptions:yield dN(n)}).toPromise()})),shouldRetry:e=>{var t;return!(null===(t=e.data)||void 0===t?void 0:t.success)},remainingAttempts:3});a||t.error("Fail to send recording event",{event:o,error:s.error})}));var pN=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const hN=Object.freeze({cancel:"cancel",complete:"complete",pause:"pause",resume:"resume",start:"start"});function vN(e){if(e.kind!==Le.Success)throw new Error(e.message)}function mN(e,{logger:t}){const n=`wrucore-recorder: Attempted to ${e}, but recorder does not exist`;throw t.crumb({level:Ce.Error,message:n,context:{}}),new Error(n)}var gN=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const yN={recorderTools:void 0,startedBuilding:!1,finishedBuilding:!1,intentionToBuild:!1,onFinish:[]};const wN=new class{constructor(){this.state=Object.assign({},yN)}identifyRecorderVersion(){return _e.V5}resetState(){this.state=Object.assign({},yN)}setIntentionToBuild({logger:e}){this.state.intentionToBuild=!0,e.crumb({level:Ce.Info,message:"recorder: setting intention to build",context:{category:"recorder"}})}resetFromNonNullRecorder({logger:e}){return gN(this,void 0,void 0,(function*(){e.crumb({level:Ce.Warning,message:"Found an unexpected recording instance. Attempting to tear down",context:Object.assign({category:"recorder"},this.state)});try{if(!this.state.recorderTools)throw new Error("recorderTools instance not found");yield this.state.recorderTools.cancel()}catch(t){e.error(new Error("Could not gracefully terminate existing recording instance"),{message:t.message,stack:t.stack})}finally{this.resetState(),e.crumb({level:Ce.Error,message:"Attempted to overwrite a recorder before it has been torn down",context:Object.assign({category:"recorder"},this.state)})}}))}build(e,t){return gN(this,void 0,void 0,(function*(){const{logger:n}=t;if(this.state.startedBuilding=!0,n.crumb({level:Ce.Info,message:"recorder.js: let's build the recorder",context:Object.assign(Object.assign(Object.assign({},e),{category:"recorder"}),this.state)}),this.state.recorderTools&&(yield this.resetFromNonNullRecorder(t)),void 0===e)throw new Error("builder.ts: Has not been initialised with options!");return n.info("Lets build the recorder"),this.state.recorderTools=yield((e,t)=>{const{logger:n,gqlClient:r,analytics:i}=t,{recorderOptions:o,getCaptureStream:a,onMediaStreamStopped:s,onUnrecoverable:u,onLifecycleEvent:c}=e;let d;const l=a();if(void 0===l)throw n.crumb({level:Ce.Error,message:"wrucore-recorder: MediaStream is unavailable. Cannot start initializing wru-core",context:{buildOptions:e,getCaptureStream:a}}),new Error("Failed to initializd wru, no media stream provided");const{streamConfig:{videoID:f,highQuality:p},recordingMetadata:h,credentials:v}=o;n.info("Constructing wru with credentials ",{credentials:v});const m=sN({stream:l,s3Config:v,videoId:f,api:{host:window.location.origin,environmentMetadata:h},settings:{videoQuality:p?ze.Normal:ze.Low},hooks:{onLifecycleEvent:e=>pN(void 0,void 0,void 0,(function*(){c(e),yield fN(r,n,i,e,h)})),onUnrecoverable:e=>{n.error(e),u(e)},onMediaStreamStopped:s}},n);if(m.kind!==Le.Success)throw new Error(m.message);return d=m.payload,{cancel:()=>{void 0===d&&mN(hN.cancel,t);const e=d.currentStatus();if([je.Recording,je.Paused].includes(e))vN(d.controls.cancel());else{let t="wrucore-recorder: Cancel control was called, but the recorder was not in a recording.";e===je.Completing&&(t="wrucore-recorder: Attempting to abandon current recording before marking it as complete."),n.crumb({level:Ce.Info,message:t,context:{currentStatus:e}}),vN(d.controls.abandon())}},end:e=>{void 0===d&&mN(hN.complete,t),n.crumb({level:Ce.Info,message:"Recorder: recorder_s3: End recording options",context:{options:e}}),d.__hacks.assocWithMetadata(e),vN(d.controls.complete())},pause:()=>{void 0===d&&mN(hN.pause,t),vN(d.controls.pause())},start:()=>{void 0===d&&mN(hN.start,t),vN(d.controls.start())},resume:()=>{void 0===d&&mN(hN.complete,t),vN(d.controls.resume())}}})(e,t),n.info("The recorder has been built"),this.state.finishedBuilding=!0,this.state.onFinish.map((e=>e())),this.state.recorderTools}))}get({logger:e}){return void 0!==this.state.recorderTools||!1===this.state.intentionToBuild?Promise.resolve(this.state.recorderTools):(e.warn("recorder: Attempting to retrieve recorder before it has been built",{state:this.state}),new Promise((t=>{let n=!1,r=!1;this.state.onFinish.push((()=>{!0!==n&&!0!==r&&(n=!0,t(this.state.recorderTools))})),window.setTimeout((()=>{!0!==n&&!0!==r&&(r=!0,e.error("Waiting for recorder to build has timed out",{state:this.state}),t(this.state.recorderTools))}),15e3)})))}detach(){this.resetState()}};var bN=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var SN=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};
/*!@license
 * UAParser.js v0.7.28
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright © 2012-2021 Faisal Salman <f@faisalman.com>
 * Licensed under MIT License
 */
var EN=Vr((function(e,t){!function(n,r){var i="function",o="object",a="string",s="model",u="name",c="type",d="vendor",l="version",f="architecture",p="console",h="mobile",v="tablet",m="smarttv",g="wearable",y="embedded",w={extend:function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n},has:function(e,t){return typeof e===a&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return typeof e===a?e.replace(/[^\d\.]/g,"").split(".")[0]:r},trim:function(e,t){return e=e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),void 0===t?e:e.substring(0,255)}},b={rgx:function(e,t){for(var n,a,s,u,c,d,l=0;l<t.length&&!c;){var f=t[l],p=t[l+1];for(n=a=0;n<f.length&&!c;)if(c=f[n++].exec(e))for(s=0;s<p.length;s++)d=c[++a],typeof(u=p[s])===o&&u.length>0?2==u.length?typeof u[1]==i?this[u[0]]=u[1].call(this,d):this[u[0]]=u[1]:3==u.length?typeof u[1]!==i||u[1].exec&&u[1].test?this[u[0]]=d?d.replace(u[1],u[2]):r:this[u[0]]=d?u[1].call(this,d,u[2]):r:4==u.length&&(this[u[0]]=d?u[3].call(this,d.replace(u[1],u[2])):r):this[u]=d||r;l+=2}},str:function(e,t){for(var n in t)if(typeof t[n]===o&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(w.has(t[n][i],e))return"?"===n?r:n}else if(w.has(t[n],e))return"?"===n?r:n;return e}},S={browser:{oldSafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}},oldEdge:{version:{.1:"12.",21:"13.",31:"14.",39:"15.",41:"16.",42:"17.",44:"18."}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},E={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[l,[u,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[l,[u,"Edge"]],[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]{3,6})\b.+version\/([\w\.-]+)/i,/(opera)(?:.+version\/|[\/\s]+)([\w\.]+)/i],[u,l],[/opios[\/\s]+([\w\.]+)/i],[l,[u,"Opera Mini"]],[/\sopr\/([\w\.]+)/i],[l,[u,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(ba?idubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i,/(rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([\w\.]+)/i,/(weibo)__([\d\.]+)/i],[u,l],[/(?:[\s\/]uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[l,[u,"UCBrowser"]],[/(?:windowswechat)?\sqbcore\/([\w\.]+)\b.*(?:windowswechat)?/i],[l,[u,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[l,[u,"WeChat"]],[/konqueror\/([\w\.]+)/i],[l,[u,"Konqueror"]],[/trident.+rv[:\s]([\w\.]{1,9})\b.+like\sgecko/i],[l,[u,"IE"]],[/yabrowser\/([\w\.]+)/i],[l,[u,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[u,/(.+)/,"$1 Secure Browser"],l],[/focus\/([\w\.]+)/i],[l,[u,"Firefox Focus"]],[/opt\/([\w\.]+)/i],[l,[u,"Opera Touch"]],[/coc_coc_browser\/([\w\.]+)/i],[l,[u,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[l,[u,"Dolphin"]],[/coast\/([\w\.]+)/i],[l,[u,"Opera Coast"]],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[l,[u,"MIUI Browser"]],[/fxios\/([\w\.-]+)/i],[l,[u,"Firefox"]],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[u,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[u,/(.+)/,"$1 Browser"],l],[/(comodo_dragon)\/([\w\.]+)/i],[[u,/_/g," "],l],[/\s(electron)\/([\w\.]+)\ssafari/i,/(tesla)(?:\sqtcarbrowser|\/(20[12]\d\.[\w\.-]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/\s]?([\w\.]+)/i],[u,l],[/(MetaSr)[\/\s]?([\w\.]+)/i,/(LBBROWSER)/i],[u],[/;fbav\/([\w\.]+);/i],[l,[u,"Facebook"]],[/FBAN\/FBIOS|FB_IAB\/FB4A/i],[[u,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/\s]([\w\.-]+)/i],[u,l],[/\bgsa\/([\w\.]+)\s.*safari\//i],[l,[u,"GSA"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[l,[u,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[u,"Chrome WebView"],l],[/droid.+\sversion\/([\w\.]+)\b.+(?:mobile\ssafari|safari)/i],[l,[u,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[u,l],[/version\/([\w\.]+)\s.*mobile\/\w+\s(safari)/i],[l,[u,"Mobile Safari"]],[/version\/([\w\.]+)\s.*(mobile\s?safari|safari)/i],[l,u],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[u,[l,b.str,S.browser.oldSafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[u,l],[/(navigator|netscape)\/([\w\.-]+)/i],[[u,"Netscape"],l],[/ile\svr;\srv:([\w\.]+)\).+firefox/i],[l,[u,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(firefox)\/([\w\.]+)\s[\w\s\-]+\/[\w\.]+$/i,/(mozilla)\/([\w\.]+)\s.+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[u,l]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[f,"amd64"]],[/(ia32(?=;))/i],[[f,w.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[f,"ia32"]],[/\b(aarch64|armv?8e?l?)\b/i],[[f,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[f,"armhf"]],[/windows\s(ce|mobile);\sppc;/i],[[f,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[f,/ower/,"",w.lowerize]],[/(sun4\w)[;\)]/i],[[f,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?:64|(?=v(?:[1-7]|[5-7]1)l?|;|eabi))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[f,w.lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus\s10)/i],[s,[d,"Samsung"],[c,v]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy\snexus)/i,/\ssamsung[\s-]([\w-]+)/i,/sec-(sgh\w+)/i],[s,[d,"Samsung"],[c,h]],[/\((ip(?:hone|od)[\s\w]*);/i],[s,[d,"Apple"],[c,h]],[/\((ipad);[\w\s\),;-]+apple/i,/applecoremedia\/[\w\.]+\s\((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[s,[d,"Apple"],[c,v]],[/\b((?:agr|ags[23]|bah2?|sht?)-a?[lw]\d{2})/i],[s,[d,"Huawei"],[c,v]],[/d\/huawei([\w\s-]+)[;\)]/i,/\b(nexus\s6p|vog-[at]?l\d\d|ane-[at]?l[x\d]\d|eml-a?l\d\da?|lya-[at]?l\d[\dc]|clt-a?l\d\di?|ele-l\d\d)/i,/\b(\w{2,4}-[atu][ln][01259][019])[;\)\s]/i],[s,[d,"Huawei"],[c,h]],[/\b(poco[\s\w]+)(?:\sbuild|\))/i,/\b;\s(\w+)\sbuild\/hm\1/i,/\b(hm[\s\-_]?note?[\s_]?(?:\d\w)?)\sbuild/i,/\b(redmi[\s\-_]?(?:note|k)?[\w\s_]+)(?:\sbuild|\))/i,/\b(mi[\s\-_]?(?:a\d|one|one[\s_]plus|note lte)?[\s_]?(?:\d?\w?)[\s_]?(?:plus)?)\sbuild/i],[[s,/_/g," "],[d,"Xiaomi"],[c,h]],[/\b(mi[\s\-_]?(?:pad)(?:[\w\s_]+))(?:\sbuild|\))/i],[[s,/_/g," "],[d,"Xiaomi"],[c,v]],[/;\s(\w+)\sbuild.+\soppo/i,/\s(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007)\b/i],[s,[d,"OPPO"],[c,h]],[/\svivo\s(\w+)(?:\sbuild|\))/i,/\s(v[12]\d{3}\w?[at])(?:\sbuild|;)/i],[s,[d,"Vivo"],[c,h]],[/\s(rmx[12]\d{3})(?:\sbuild|;)/i],[s,[d,"Realme"],[c,h]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)\b[\w\s]+build\//i,/\smot(?:orola)?[\s-](\w*)/i,/((?:moto[\s\w\(\)]+|xt\d{3,4}|nexus\s6)(?=\sbuild|\)))/i],[s,[d,"Motorola"],[c,h]],[/\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[s,[d,"Motorola"],[c,v]],[/((?=lg)?[vl]k\-?\d{3})\sbuild|\s3\.[\s\w;-]{10}lg?-([06cv9]{3,4})/i],[s,[d,"LG"],[c,v]],[/(lm-?f100[nv]?|nexus\s[45])/i,/lg[e;\s\/-]+((?!browser|netcast)\w+)/i,/\blg(\-?[\d\w]+)\sbuild/i],[s,[d,"LG"],[c,h]],[/(ideatab[\w\-\s]+)/i,/lenovo\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+)|yt[\d\w-]{6}|tb[\d\w-]{6})/i],[s,[d,"Lenovo"],[c,v]],[/(?:maemo|nokia).*(n900|lumia\s\d+)/i,/nokia[\s_-]?([\w\.-]*)/i],[[s,/_/g," "],[d,"Nokia"],[c,h]],[/droid.+;\s(pixel\sc)[\s)]/i],[s,[d,"Google"],[c,v]],[/droid.+;\s(pixel[\s\daxl]{0,6})(?:\sbuild|\))/i],[s,[d,"Google"],[c,h]],[/droid.+\s([c-g]\d{4}|so[-l]\w+|xq-a\w[4-7][12])(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[s,[d,"Sony"],[c,h]],[/sony\stablet\s[ps]\sbuild\//i,/(?:sony)?sgp\w+(?:\sbuild\/|\))/i],[[s,"Xperia Tablet"],[d,"Sony"],[c,v]],[/\s(kb2005|in20[12]5|be20[12][59])\b/i,/\ba000(1)\sbuild/i,/\boneplus\s(a\d{4})[\s)]/i],[s,[d,"OnePlus"],[c,h]],[/(alexa)webm/i,/(kf[a-z]{2}wi)(\sbuild\/|\))/i,/(kf[a-z]+)(\sbuild\/|\)).+silk\//i],[s,[d,"Amazon"],[c,v]],[/(sd|kf)[0349hijorstuw]+(\sbuild\/|\)).+silk\//i],[[s,"Fire Phone"],[d,"Amazon"],[c,h]],[/\((playbook);[\w\s\),;-]+(rim)/i],[s,d,[c,v]],[/((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10;\s(\w+)/i],[s,[d,"BlackBerry"],[c,h]],[/(?:\b|asus_)(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus\s7|padfone|p00[cj])/i],[s,[d,"ASUS"],[c,v]],[/\s(z[es]6[027][01][km][ls]|zenfone\s\d\w?)\b/i],[s,[d,"ASUS"],[c,h]],[/(nexus\s9)/i],[s,[d,"HTC"],[c,v]],[/(htc)[;_\s-]{1,2}([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[d,[s,/_/g," "],[c,h]],[/droid[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[s,[d,"Acer"],[c,v]],[/droid.+;\s(m[1-5]\snote)\sbuild/i,/\bmz-([\w-]{2,})/i],[s,[d,"Meizu"],[c,h]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i,/(microsoft);\s(lumia[\s\w]+)/i,/(lenovo)[_\s-]?([\w-]+)/i,/linux;.+(jolla);/i,/droid.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[d,s,[c,h]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i,/[;\/]\s?(le[\s\-]+pan)[\s\-]+(\w{1,9})\sbuild/i,/[;\/]\s?(trinity)[\-\s]*(t\d{3})\sbuild/i,/\b(gigaset)[\s\-]+(q\w{1,9})\sbuild/i,/\b(vodafone)\s([\w\s]+)(?:\)|\sbuild)/i],[d,s,[c,v]],[/\s(surface\sduo)\s/i],[s,[d,"Microsoft"],[c,v]],[/droid\s[\d\.]+;\s(fp\du?)\sbuild/i],[s,[d,"Fairphone"],[c,h]],[/\s(u304aa)\sbuild/i],[s,[d,"AT&T"],[c,h]],[/sie-(\w*)/i],[s,[d,"Siemens"],[c,h]],[/[;\/]\s?(rct\w+)\sbuild/i],[s,[d,"RCA"],[c,v]],[/[;\/\s](venue[\d\s]{2,7})\sbuild/i],[s,[d,"Dell"],[c,v]],[/[;\/]\s?(q(?:mv|ta)\w+)\sbuild/i],[s,[d,"Verizon"],[c,v]],[/[;\/]\s(?:barnes[&\s]+noble\s|bn[rt])([\w\s\+]*)\sbuild/i],[s,[d,"Barnes & Noble"],[c,v]],[/[;\/]\s(tm\d{3}\w+)\sbuild/i],[s,[d,"NuVision"],[c,v]],[/;\s(k88)\sbuild/i],[s,[d,"ZTE"],[c,v]],[/;\s(nx\d{3}j)\sbuild/i],[s,[d,"ZTE"],[c,h]],[/[;\/]\s?(gen\d{3})\sbuild.*49h/i],[s,[d,"Swiss"],[c,h]],[/[;\/]\s?(zur\d{3})\sbuild/i],[s,[d,"Swiss"],[c,v]],[/[;\/]\s?((zeki)?tb.*\b)\sbuild/i],[s,[d,"Zeki"],[c,v]],[/[;\/]\s([yr]\d{2})\sbuild/i,/[;\/]\s(dragon[\-\s]+touch\s|dt)(\w{5})\sbuild/i],[[d,"Dragon Touch"],s,[c,v]],[/[;\/]\s?(ns-?\w{0,9})\sbuild/i],[s,[d,"Insignia"],[c,v]],[/[;\/]\s?((nxa|Next)-?\w{0,9})\sbuild/i],[s,[d,"NextBook"],[c,v]],[/[;\/]\s?(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05]))\sbuild/i],[[d,"Voice"],s,[c,h]],[/[;\/]\s?(lvtel\-)?(v1[12])\sbuild/i],[[d,"LvTel"],s,[c,h]],[/;\s(ph-1)\s/i],[s,[d,"Essential"],[c,h]],[/[;\/]\s?(v(100md|700na|7011|917g).*\b)\sbuild/i],[s,[d,"Envizen"],[c,v]],[/[;\/]\s?(trio[\s\w\-\.]+)\sbuild/i],[s,[d,"MachSpeed"],[c,v]],[/[;\/]\s?tu_(1491)\sbuild/i],[s,[d,"Rotor"],[c,v]],[/(shield[\w\s]+)\sbuild/i],[s,[d,"Nvidia"],[c,v]],[/(sprint)\s(\w+)/i],[d,s,[c,h]],[/(kin\.[onetw]{3})/i],[[s,/\./g," "],[d,"Microsoft"],[c,h]],[/droid\s[\d\.]+;\s(cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[s,[d,"Zebra"],[c,v]],[/droid\s[\d\.]+;\s(ec30|ps20|tc[2-8]\d[kx])\)/i],[s,[d,"Zebra"],[c,h]],[/\s(ouya)\s/i,/(nintendo)\s([wids3utch]+)/i],[d,s,[c,p]],[/droid.+;\s(shield)\sbuild/i],[s,[d,"Nvidia"],[c,p]],[/(playstation\s[345portablevi]+)/i],[s,[d,"Sony"],[c,p]],[/[\s\(;](xbox(?:\sone)?(?!;\sxbox))[\s\);]/i],[s,[d,"Microsoft"],[c,p]],[/smart-tv.+(samsung)/i],[d,[c,m]],[/hbbtv.+maple;(\d+)/i],[[s,/^/,"SmartTV"],[d,"Samsung"],[c,m]],[/(?:linux;\snetcast.+smarttv|lg\snetcast\.tv-201\d)/i],[[d,"LG"],[c,m]],[/(apple)\s?tv/i],[d,[s,"Apple TV"],[c,m]],[/crkey/i],[[s,"Chromecast"],[d,"Google"],[c,m]],[/droid.+aft([\w])(\sbuild\/|\))/i],[s,[d,"Amazon"],[c,m]],[/\(dtv[\);].+(aquos)/i],[s,[d,"Sharp"],[c,m]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[d,w.trim],[s,w.trim],[c,m]],[/[\s\/\(](android\s|smart[-\s]?|opera\s)tv[;\)\s]/i],[[c,m]],[/((pebble))app\/[\d\.]+\s/i],[d,s,[c,g]],[/droid.+;\s(glass)\s\d/i],[s,[d,"Google"],[c,g]],[/droid\s[\d\.]+;\s(wt63?0{2,3})\)/i],[s,[d,"Zebra"],[c,g]],[/(tesla)(?:\sqtcarbrowser|\/20[12]\d\.[\w\.-]+)/i],[d,[c,y]],[/droid .+?; ([^;]+?)(?: build|\) applewebkit).+? mobile safari/i],[s,[c,h]],[/droid .+?;\s([^;]+?)(?: build|\) applewebkit).+?(?! mobile) safari/i],[s,[c,v]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[c,w.lowerize]],[/(android[\w\.\s\-]{0,9});.+build/i],[s,[d,"Generic"]],[/(phone)/i],[[c,h]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[l,[u,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[l,[u,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[u,l],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[l,u]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[u,l],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)(?!.+xbox)/i],[u,[l,b.str,S.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[u,"Windows"],[l,b.str,S.os.windows.version]],[/ip[honead]{2,4}\b(?:.*os\s([\w]+)\slike\smac|;\sopera)/i,/cfnetwork\/.+darwin/i],[[l,/_/g,"."],[u,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)(?!.+haiku)/i],[[u,"Mac OS"],[l,/_/g,"."]],[/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/\((series40);/i],[u,l],[/\(bb(10);/i],[l,[u,"BlackBerry"]],[/(?:symbian\s?os|symbos|s60(?=;)|series60)[\/\s-]?([\w\.]*)/i],[l,[u,"Symbian"]],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[u,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[l,[u,"webOS"]],[/crkey\/([\d\.]+)/i],[l,[u,"Chromecast"]],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[u,"Chromium OS"],l],[/(nintendo|playstation)\s([wids345portablevuch]+)/i,/(xbox);\s+xbox\s([^\);]+)/i,/(mint)[\/\s\(\)]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?=\slinux)|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus|raspbian)(?:\sgnu\/linux)?(?:\slinux)?[\/\s-]?(?!chrom|package)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i,/\s([frentopc-]{0,4}bsd|dragonfly)\s?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku)\s(\w+)/i],[u,l],[/(sunos)\s?([\w\.\d]*)/i],[[u,"Solaris"],l],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[u,l]]},k=function(e,t){if("object"==typeof e&&(t=e,e=r),!(this instanceof k))return new k(e,t).getResult();var i=e||(void 0!==n&&n.navigator&&n.navigator.userAgent?n.navigator.userAgent:""),o=t?w.extend(E,t):E;return this.getBrowser=function(){var e={name:r,version:r};return b.rgx.call(e,i,o.browser),e.major=w.major(e.version),e},this.getCPU=function(){var e={architecture:r};return b.rgx.call(e,i,o.cpu),e},this.getDevice=function(){var e={vendor:r,model:r,type:r};return b.rgx.call(e,i,o.device),e},this.getEngine=function(){var e={name:r,version:r};return b.rgx.call(e,i,o.engine),e},this.getOS=function(){var e={name:r,version:r};return b.rgx.call(e,i,o.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=typeof e===a&&e.length>255?w.trim(e,255):e,this},this.setUA(i),this};k.VERSION="0.7.28",k.BROWSER={NAME:u,MAJOR:"major",VERSION:l},k.CPU={ARCHITECTURE:f},k.DEVICE={MODEL:s,VENDOR:d,TYPE:c,CONSOLE:p,MOBILE:h,SMARTTV:m,TABLET:v,WEARABLE:g,EMBEDDED:y},k.ENGINE={NAME:u,VERSION:l},k.OS={NAME:u,VERSION:l},e.exports&&(t=e.exports=k),t.UAParser=k;var C=void 0!==n&&(n.jQuery||n.Zepto);if(C&&!C.ua){var x=new k;C.ua=x.getResult(),C.ua.get=function(){return x.getUA()},C.ua.set=function(e){x.setUA(e);var t=x.getResult();for(var n in t)C.ua[n]=t[n]}}}("object"==typeof window?window:Kr)}));var kN=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function CN(e){var t;return void 0!==(null===(t=e)||void 0===t?void 0:t.error)}const xN=(e,t,n,r)=>kN(void 0,void 0,void 0,(function*(){const{metrics:i,logger:o}=r;if(i.increment("integrations.sdk.media.get_display_stream.count",{recordingType:e}),e===Re.CameraOnly){const n=yield((e,t)=>jo(void 0,void 0,void 0,(function*(){const{deviceId:n}=e,{logger:r}=t,i=yield Lo();let o;if(o=n?i.find((e=>e.deviceId===n)):i.find((e=>"videoinput"===e.kind)),!o)return void r.crumb({level:Ce.Warning,message:"Media Utilities: No active video camera input",context:{devices:i}});if(zo.camera)return zo.camera;const a=yield Uo({audio:!1,video:{deviceId:{exact:o.deviceId},frameRate:30,width:1280,height:720}},t);if(!(a instanceof Error))return zo.camera=a,a;r.error(a,{devices:i})})))({deviceId:t},r);return n||(i.increment("integrations.sdk.media.get_display_stream.undefined",{recordingType:e}),{error:Do.UnableToOpen})}const a=yield((e,t)=>jo(void 0,void 0,void 0,(function*(){const{logger:n}=e;try{if(zo.display)return zo.display;const e=navigator.mediaDevices,n=yield e.getDisplayMedia({audio:!1,video:{cursor:"always",width:1920,height:1080,frameRate:30}});return n.getTracks().map((e=>{e.onended=()=>{t({})}})),zo.display=n,n}catch(e){const{userAgent:t}=navigator,r={err:e,userAgent:t};return(e=>{const{name:t,message:n}=e;return"NotFoundError"===t||"NotAllowedError"===t&&"Permission denied by system"===n})(e)?(n.warn("Media Utilities: Missing required OS permissions",r),{error:Do.MissingPermissions}):"NotAllowedError"===e.name?(n.info("Media Utilities: User declined to share screen",r),{error:Do.UserDeclined}):(n.warn("Media Utilities: Unable to open display media stream",r),{error:Do.UnableToOpen})}})))(r,n);return CN(a)?(o.warn("Failed to getVisualStream",{error:a}),i.increment("integrations.sdk.media.get_display_stream.failed",{recordingType:e}),a):a})),TN=(e,t,n)=>kN(void 0,void 0,void 0,(function*(){return e?yield((e,t)=>jo(void 0,void 0,void 0,(function*(){const{deviceId:n}=e,{logger:r}=t,i=yield Lo();let o;if(o=n?i.find((e=>e.deviceId===n)):i.find((e=>"audioinput"===e.kind)),!o)return void r.crumb({level:Ce.Warning,message:"Media Utilities: No active audio input",context:{devices:i}});if(zo.audio)return zo.audio;const a=yield Uo({audio:{deviceId:{exact:o.deviceId},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},video:!1},t);if(!(a instanceof Error))return zo.audio=a,a;r.error(a,{devices:i})})))({deviceId:t},n):Promise.resolve(void 0)}));function NN(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function ON(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function _N(e){ON(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function PN(e,t){ON(2,arguments);var n=_N(e).getTime(),r=NN(t);return new Date(n+r)}function AN(e){return e.getTime()%6e4}function IN(e){var t=new Date(e.getTime()),n=Math.ceil(t.getTimezoneOffset());return t.setSeconds(0,0),6e4*n+(n>0?(6e4+AN(t))%6e4:AN(t))}function MN(e){ON(1,arguments);var t=_N(e);return!isNaN(t)}var RN={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function BN(e){return function(t){var n=t||{},r=n.width?String(n.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var LN={date:BN({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:BN({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:BN({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},DN={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function jN(e){return function(t,n){var r,i=n||{};if("formatting"===(i.context?String(i.context):"standalone")&&e.formattingValues){var o=e.defaultFormattingWidth||e.defaultWidth,a=i.width?String(i.width):o;r=e.formattingValues[a]||e.formattingValues[o]}else{var s=e.defaultWidth,u=i.width?String(i.width):e.defaultWidth;r=e.values[u]||e.values[s]}return r[e.argumentCallback?e.argumentCallback(t):t]}}function zN(e){return function(t,n){var r=String(t),i=n||{},o=i.width,a=o&&e.matchPatterns[o]||e.matchPatterns[e.defaultMatchWidth],s=r.match(a);if(!s)return null;var u,c=s[0],d=o&&e.parsePatterns[o]||e.parsePatterns[e.defaultParseWidth];return u="[object Array]"===Object.prototype.toString.call(d)?function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}(d,(function(e){return e.test(c)})):function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}(d,(function(e){return e.test(c)})),u=e.valueCallback?e.valueCallback(u):u,{value:u=i.valueCallback?i.valueCallback(u):u,rest:r.slice(c.length)}}}var UN,FN={code:"en-US",formatDistance:function(e,t,n){var r;return n=n||{},r="string"==typeof RN[e]?RN[e]:1===t?RN[e].one:RN[e].other.replace("{{count}}",t),n.addSuffix?n.comparison>0?"in "+r:r+" ago":r},formatLong:LN,formatRelative:function(e,t,n,r){return DN[e]},localize:{ordinalNumber:function(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:jN({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:jN({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:function(e){return Number(e)-1}}),month:jN({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:jN({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:jN({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(UN={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}},function(e,t){var n=String(e),r=t||{},i=n.match(UN.matchPattern);if(!i)return null;var o=i[0],a=n.match(UN.parsePattern);if(!a)return null;var s=UN.valueCallback?UN.valueCallback(a[0]):a[0];return{value:s=r.valueCallback?r.valueCallback(s):s,rest:n.slice(o.length)}}),era:zN({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:zN({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:zN({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:zN({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:zN({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function qN(e,t){ON(2,arguments);var n=NN(t);return PN(e,-n)}function KN(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var HN=function(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return KN("yy"===t?r%100:r,t.length)},$N=function(e,t){var n=e.getUTCMonth();return"M"===t?String(n+1):KN(n+1,2)},VN=function(e,t){return KN(e.getUTCDate(),t.length)},GN=function(e,t){return KN(e.getUTCHours()%12||12,t.length)},WN=function(e,t){return KN(e.getUTCHours(),t.length)},YN=function(e,t){return KN(e.getUTCMinutes(),t.length)},QN=function(e,t){return KN(e.getUTCSeconds(),t.length)},JN=function(e,t){var n=t.length,r=e.getUTCMilliseconds();return KN(Math.floor(r*Math.pow(10,n-3)),t.length)};function XN(e){ON(1,arguments);var t=1,n=_N(e),r=n.getUTCDay(),i=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-i),n.setUTCHours(0,0,0,0),n}function ZN(e){ON(1,arguments);var t=_N(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var i=XN(r),o=new Date(0);o.setUTCFullYear(n,0,4),o.setUTCHours(0,0,0,0);var a=XN(o);return t.getTime()>=i.getTime()?n+1:t.getTime()>=a.getTime()?n:n-1}function eO(e){ON(1,arguments);var t=ZN(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=XN(n);return r}function tO(e,t){ON(1,arguments);var n=t||{},r=n.locale,i=r&&r.options&&r.options.weekStartsOn,o=null==i?0:NN(i),a=null==n.weekStartsOn?o:NN(n.weekStartsOn);if(!(a>=0&&a<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var s=_N(e),u=s.getUTCDay(),c=(u<a?7:0)+u-a;return s.setUTCDate(s.getUTCDate()-c),s.setUTCHours(0,0,0,0),s}function nO(e,t){ON(1,arguments);var n=_N(e,t),r=n.getUTCFullYear(),i=t||{},o=i.locale,a=o&&o.options&&o.options.firstWeekContainsDate,s=null==a?1:NN(a),u=null==i.firstWeekContainsDate?s:NN(i.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=new Date(0);c.setUTCFullYear(r+1,0,u),c.setUTCHours(0,0,0,0);var d=tO(c,t),l=new Date(0);l.setUTCFullYear(r,0,u),l.setUTCHours(0,0,0,0);var f=tO(l,t);return n.getTime()>=d.getTime()?r+1:n.getTime()>=f.getTime()?r:r-1}function rO(e,t){ON(1,arguments);var n=t||{},r=n.locale,i=r&&r.options&&r.options.firstWeekContainsDate,o=null==i?1:NN(i),a=null==n.firstWeekContainsDate?o:NN(n.firstWeekContainsDate),s=nO(e,t),u=new Date(0);u.setUTCFullYear(s,0,a),u.setUTCHours(0,0,0,0);var c=tO(u,t);return c}var iO="midnight",oO="noon",aO="morning",sO="afternoon",uO="evening",cO="night",dO={G:function(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if("yo"===t){var r=e.getUTCFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return HN(e,t)},Y:function(e,t,n,r){var i=nO(e,r),o=i>0?i:1-i;return"YY"===t?KN(o%100,2):"Yo"===t?n.ordinalNumber(o,{unit:"year"}):KN(o,t.length)},R:function(e,t){return KN(ZN(e),t.length)},u:function(e,t){return KN(e.getUTCFullYear(),t.length)},Q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return KN(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return KN(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return $N(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return KN(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){var i=function(e,t){ON(1,arguments);var n=_N(e),r=tO(n,t).getTime()-rO(n,t).getTime();return Math.round(r/6048e5)+1}(e,r);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):KN(i,t.length)},I:function(e,t,n){var r=function(e){ON(1,arguments);var t=_N(e),n=XN(t).getTime()-eO(t).getTime();return Math.round(n/6048e5)+1}(e);return"Io"===t?n.ordinalNumber(r,{unit:"week"}):KN(r,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):VN(e,t)},D:function(e,t,n){var r=function(e){ON(1,arguments);var t=_N(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),i=n-r;return Math.floor(i/864e5)+1}(e);return"Do"===t?n.ordinalNumber(r,{unit:"dayOfYear"}):KN(r,t.length)},E:function(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return KN(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){var i=e.getUTCDay(),o=(i-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return KN(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){var r=e.getUTCDay(),i=0===r?7:r;switch(t){case"i":return String(i);case"ii":return KN(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(e,t,n){var r,i=e.getUTCHours();switch(r=12===i?oO:0===i?iO:i/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,n){var r,i=e.getUTCHours();switch(r=i>=17?uO:i>=12?sO:i>=4?aO:cO,t){case"B":case"BB":case"BBB":return n.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){var r=e.getUTCHours()%12;return 0===r&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return GN(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):WN(e,t)},K:function(e,t,n){var r=e.getUTCHours()%12;return"Ko"===t?n.ordinalNumber(r,{unit:"hour"}):KN(r,t.length)},k:function(e,t,n){var r=e.getUTCHours();return 0===r&&(r=24),"ko"===t?n.ordinalNumber(r,{unit:"hour"}):KN(r,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):YN(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):QN(e,t)},S:function(e,t){return JN(e,t)},X:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();if(0===i)return"Z";switch(t){case"X":return fO(i);case"XXXX":case"XX":return pO(i);case"XXXXX":case"XXX":default:return pO(i,":")}},x:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"x":return fO(i);case"xxxx":case"xx":return pO(i);case"xxxxx":case"xxx":default:return pO(i,":")}},O:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+lO(i,":");case"OOOO":default:return"GMT"+pO(i,":")}},z:function(e,t,n,r){var i=(r._originalDate||e).getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+lO(i,":");case"zzzz":default:return"GMT"+pO(i,":")}},t:function(e,t,n,r){var i=r._originalDate||e;return KN(Math.floor(i.getTime()/1e3),t.length)},T:function(e,t,n,r){return KN((r._originalDate||e).getTime(),t.length)}};function lO(e,t){var n=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),o=r%60;if(0===o)return n+String(i);var a=t||"";return n+String(i)+a+KN(o,2)}function fO(e,t){return e%60==0?(e>0?"-":"+")+KN(Math.abs(e)/60,2):pO(e,t)}function pO(e,t){var n=t||"",r=e>0?"-":"+",i=Math.abs(e);return r+KN(Math.floor(i/60),2)+n+KN(i%60,2)}function hO(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}}function vO(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}}var mO={p:vO,P:function(e,t){var n,r=e.match(/(P+)(p+)?/),i=r[1],o=r[2];if(!o)return hO(e,t);switch(i){case"P":n=t.dateTime({width:"short"});break;case"PP":n=t.dateTime({width:"medium"});break;case"PPP":n=t.dateTime({width:"long"});break;case"PPPP":default:n=t.dateTime({width:"full"})}return n.replace("{{date}}",hO(i,t)).replace("{{time}}",vO(o,t))}},gO=["D","DD"],yO=["YY","YYYY"];function wO(e){return-1!==gO.indexOf(e)}function bO(e){return-1!==yO.indexOf(e)}function SO(e,t,n){if("YYYY"===e)throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("YY"===e)throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("D"===e)throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"));if("DD"===e)throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://git.io/fxCyr"))}var EO=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,kO=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,CO=/^'([^]*?)'?$/,xO=/''/g,TO=/[a-zA-Z]/;function NO(e){return e.match(CO)[1].replace(xO,"'")}var OO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const _O=(e,t,n,r)=>OO(void 0,void 0,void 0,(function*(){var i;const o=`${function(e,t,n){ON(2,arguments);var r=String(t),i=n||{},o=i.locale||FN,a=o.options&&o.options.firstWeekContainsDate,s=null==a?1:NN(a),u=null==i.firstWeekContainsDate?s:NN(i.firstWeekContainsDate);if(!(u>=1&&u<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var c=o.options&&o.options.weekStartsOn,d=null==c?0:NN(c),l=null==i.weekStartsOn?d:NN(i.weekStartsOn);if(!(l>=0&&l<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!o.localize)throw new RangeError("locale must contain localize property");if(!o.formatLong)throw new RangeError("locale must contain formatLong property");var f=_N(e);if(!MN(f))throw new RangeError("Invalid time value");var p=IN(f),h=qN(f,p),v={firstWeekContainsDate:u,weekStartsOn:l,locale:o,_originalDate:f};return r.match(kO).map((function(e){var t=e[0];return"p"===t||"P"===t?(0,mO[t])(e,o.formatLong,v):e})).join("").match(EO).map((function(n){if("''"===n)return"'";var r=n[0];if("'"===r)return NO(n);var a=dO[r];if(a)return!i.useAdditionalWeekYearTokens&&bO(n)&&SO(n,t,e),!i.useAdditionalDayOfYearTokens&&wO(n)&&SO(n,t,e),a(h,n,o.localize,v);if(r.match(TO))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return n})).join("")}(new Date,"d MMMM, yyyy")} - Loom Recording`,a=null===(i=(yield n.mutation(ni`
        mutation StartNewRecordingSession(
          $title: String!
          $flippedCamera: Boolean!
          $videoProperties: InputVideoProperties!
        ) {
          startNewRecordingSession(
            title: $title
            flippedCamera: $flippedCamera
            videoProperties: $videoProperties
          ) {
            id
            credentials {
              AccessKeyId
              SecretAccessKey
              SessionToken
              Bucket
            }
          }
        }
      `,{title:o,flippedCamera:e,videoProperties:t},{fetchOptions:yield dN(r)}).toPromise()).data)||void 0===i?void 0:i.startNewRecordingSession;if(!a)throw"Unable to get session for user";return(({id:e,credentials:t})=>({id:e,credentials:{accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,sessionToken:t.SessionToken,bucket:t.Bucket}}))(a)}));var PO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const AO=e=>new Promise((t=>setTimeout(t,e)));var IO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var MO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const RO=[e=>qt(Ft.endRecording,(({dispatch:t,getState:n},{fromError:r,reason:i,errorMessage:o,fromRecordingLimit:a})=>bN(void 0,void 0,void 0,(function*(){const{logger:s,metrics:u}=e,{recorder:c,previewRecording:{dimensions:d}}=n(),{session:l,mediaDevicePermissions:f,screenType:p}=c;u.increment("integrations.sdk.consumers.end_recording",Object.assign(Object.assign({},i&&{reason:i}),{mediaDevicePermissions:f,screenType:p})),o&&s.warn("Recording ended due to error: ",{errorMessage:o});const h=(e=>(ua||(ua=ca("end",e)),ua))(e.logger);null==h||h.play();const v=yield wN.get(e);if(void 0===l||void 0===v)Fo(e),t(Ut.endRecording());else{t(Ut.updateBubbleMessageShown(!1)),yield v.end({fromError:r,videoHasReachedRecordingLimit:a}),Fo(e),t(Ut.endRecording());const n=e.config.publicUrl.replace("/api",""),i=`${n}/share/${l.id}`,o=`${n}/embed/${l.id}`;t(Ut.updateLoomVideo({id:l.id,sharedUrl:i,embedUrl:o,title:"Loom video",height:d.height,width:d.width,providerUrl:n}))}})))),e=>qt(Ft.startRecording,(t=>PO(void 0,void 0,void 0,(function*(){const{getState:n,dispatch:r}=t,{logger:i,gqlClient:o,metrics:a,analytics:s}=e,u=e=>{let t=`Unable to get video ${e}, attempting to cancel recording`;"stream"===e&&(t="Recording stream blocked by the user, cancelling recording");const{preRecording:o}=n(),{modalToDisplay:s}=o;i.warn(t,{error:e}),a.increment($t+".error",{errorType:e}),s!==Ie.SystemPermissions&&r(Ft.cancelRecording({detach:!1}))},{recorder:c,recorderSettings:d,countdown:{enabled:l,secondsLeft:f}}=n(),{appStage:p,isCapturing:h,recordingType:v,screenType:m,tab:g,mediaDevicePermissions:y}=c,{audioEnabled:w,availableCameras:b,cameraId:S,cameraEnabled:E,defaultCameraId:k,highQuality:C,microphoneId:x,microphones:T,flipCamera:N}=d;if(p===Me.Recording)return void i.warn("tried to record  while recording",{recorderState:c});if(!h)return void i.warn("tried to record with no capture",{recorderState:c});y!==qe.Denied&&(yield Jo(e).handler({dispatch:r,getState:n},void 0)),wN.setIntentionToBuild(e);const[O,_]=yield Promise.all([xN(v,S||k,(()=>{i.warn("Ending recording due to stream being closed"),r(Ft.endRecording({fromError:!1,fromRecordingLimit:!1,reason:jt.ScreenRecordingEnded}))}),e),TN(w,x,e)]);if(CN(O))return O.error===Do.MissingPermissions&&r(Ut.openSystemPermissionsModal(Ie.RecordingControls)),O.error===Do.UserDeclined?void a.increment($t+".user_declined_share",{recordingType:v}):void u("stream");if(w&&!_)return void u("stream");w&&_&&(e=>{const t=zo.display||zo.camera,n=e.getAudioTracks()[0];null==t||t.addTrack(n)})(_);const P=(e=>{const t=new EN(window.navigator.userAgent).getResult();return{client:"sdk_recorder",client_version:e.config.sdkVersion,recordingClient:"sdk_recorder",recording_version:wN.identifyRecorderVersion(),os:t.os.name,os_version:t.os.version,sdkPartnerId:e.config.sdkPartnerId}})(e),A=T.find((e=>e.deviceId===x)),I=b.find((e=>e.deviceId===S)),M=Object.assign(Object.assign({},P),{currentAudioDeviceValue:null==A?void 0:A.label,currentAudioDeviceLabel:null==A?void 0:A.deviceId,currentVideoDeviceLabel:null==I?void 0:I.label,currentVideoDeviceValue:null==I?void 0:I.deviceId,camera_enabled:E,countdown:l,recording_type:v,microphone_enabled:w,screen_type:m}),R=yield _O(N,M,o,s);if(!R)return void u("session");const B=(e=>(sa||(sa=ca("start",e)),sa))(i);r(Ut.updateRecordingSession({session:R,tab:g})),l?(r(Ut.startCountdown()),yield function(e){return PO(this,void 0,void 0,(function*(){for(;e>0;)yield AO(1e3),e--,r(Ut.decrementCountdown())}))}(f)):yield AO(500),null==B||B.play();const L=yield wN.build({getCaptureStream:()=>O,recorderOptions:{credentials:R.credentials,streamConfig:{highQuality:C,videoID:R.id},recordingMetadata:Object.assign(Object.assign({},P),{client_timestamp:new Date,countdown:l,microphone_enabled:w,recording_type:v,video_id:R.id})},onLifecycleEvent:e=>((e,t)=>{t===je.Completed&&e.dispatch(Ut.finishedUploading())})(t,e),onUnrecoverable:e=>{i.error("Encountered unrecoverable error, attempting to end recording",{recorderState:c}),r(Ft.endRecording({fromError:!0,fromRecordingLimit:!1,reason:jt.UnrecoverableError,errorMessage:e.message}))},onMediaStreamStopped:()=>{i.info("Media stream has stopped during recording, attempting to end recording"),r(Ft.endRecording({fromError:!0,fromRecordingLimit:!1,reason:jt.MediaStreamStopped}))}},e);try{a.increment($t,{mediaDevicePermissions:y}),L.start();const e=(e=>{const t={width:0,height:0};if(!e)return t;const n=e.getVideoTracks();if(0===n.length)return t;const{width:r,height:i}=n[0].getSettings();return i&&r?{width:r,height:i}:t})(O);r(Ut.startRecording(e))}catch(e){wN.detach(),i.error("recording: failed to start recording",{error:e}),r(Ft.endRecording({fromError:!0,fromRecordingLimit:!1,reason:jt.FailedToStartRecording,errorMessage:e.message}))}})))),e=>qt(Ft.redoRecording,(({dispatch:t},{id:n})=>SN(void 0,void 0,void 0,(function*(){(yield oa(n,e))&&(t(Ut.cancelRecording()),t(Ft.startRecording()))})))),e=>qt(Ft.cancelRecording,(({dispatch:t},{detach:n=!0})=>MO(void 0,void 0,void 0,(function*(){if(n){const t=yield wN.get(e);null!=t&&(yield t.cancel(),wN.detach())}Fo(e),t(Ut.cancelRecording())})))),e=>qt(Ft.deleteRecording,(({},{id:t})=>aa(void 0,void 0,void 0,(function*(){yield oa(t,e)})))),()=>qt(Ft.togglePauseRecording,(({dispatch:e,getState:t})=>{const{appStage:n}=t().recorder;[Me.Paused,Me.Recording].includes(n)&&(n===Me.Paused?e(Ft.resumeRecording()):e(Ft.pauseRecording()))})),e=>qt(Ft.pauseRecording,(({dispatch:t,getState:n})=>MO(void 0,void 0,void 0,(function*(){const{appStage:r}=n().recorder;if(![Me.Paused,Me.Recording].includes(r))return;const i=yield wN.get(e);if(!i)throw"Could not find recorder!";i.pause(),t(Ut.pauseRecording())})))),e=>qt(Ft.resumeRecording,(({dispatch:t,getState:n})=>MO(void 0,void 0,void 0,(function*(){const{appStage:r}=n().recorder;if(![Me.Paused,Me.Recording].includes(r))return;const i=yield wN.get(e);if(!i)throw"Could not find recorder!";i.resume(),t(Ut.resumeRecording())})))),()=>qt(Ft.copyVideoUrl,(({dispatch:e},{closeAfterCopy:t})=>{t&&e(Ft.finishRecordingPreview())})),()=>qt(Ft.finishRecordingPreview,(({dispatch:e})=>{wN.detach(),e(Ut.closePreviewModal())})),...[({logger:e})=>qt(Ft.updateUserRecordingSettings,(({getState:t,dispatch:n},r)=>IO(void 0,void 0,void 0,(function*(){var i;const{isSdkSharedUser:o}=t().authentication;if(e.info("Updating recording settings",{userSettings:r}),function(e,t){void 0!==t.countdown_enabled&&e(Ut.updateCountdownEnabled(t.countdown_enabled))}(n,r),!o){const t=yield Es({method:"POST",url:`${null===(i=null===window||void 0===window?void 0:window.location)||void 0===i?void 0:i.origin}/api/users/recorder-settings`},r);if(t.kind===Le.Failed)throw e.error("Failed to update recording settings",{result:t}),new Error(t.message)}}))))]];var BO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};var LO=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const DO=[e=>qt(Ft.getWorkspaces,(t=>BO(void 0,void 0,void 0,(function*(){var n,r,i,o,a;const{authentication:{user:s},featureFlags:{activeFlags:u}}=t.getState(),c=yield function(e){var t,n;return BO(this,void 0,void 0,(function*(){try{const r=yield e.gqlClient.query(ni`
          query userWorkspaceMemberships {
            userWorkspaceMemberships {
              id
              isSelected
              member_limits
              member_role
              organization {
                id
                limits
                name
                counts {
                  videos
                }
              }
            }
          }
        `).toPromise();if(r.error)throw r.error.toString();return null!==(n=null===(t=r.data)||void 0===t?void 0:t.userWorkspaceMemberships)&&void 0!==n?n:[]}catch(t){return e.logger.error("Failed to fetch user workspace memberships",{error:t}),[]}}))}(e);if(s){const d=c.find((e=>e.organization.id===s.default_workspace_id)),l=(null==d?void 0:d.member_role)===ke.Guest;l||e.analytics.identify(s.id,{isSdkSharedUser:l,hasDefaultWorkspace:null!=d}),e.logger.addToBaseContext({defaultWorkspace:{id:null==d?void 0:d.id,member_role:null==d?void 0:d.member_role,organization_name:null===(n=null==d?void 0:d.organization)||void 0===n?void 0:n.name}}),t.dispatch(Ut.setWorkspaces({defaultWorkspace:d,workspaces:c,isSdkSharedUser:l}));const f=null===(r=null==d?void 0:d.member_limits)||void 0===r?void 0:r.TOTAL_VIDEOS,p=(null===(a=null===(o=null===(i=null==d?void 0:d.organization)||void 0===i?void 0:i.counts)||void 0===o?void 0:o.videos)||void 0===a?void 0:a.total_member_created_videos)||0;!0===(u.includes(Ve.ENABLE_SDK_MEMBER_VIDEO_LIMITS)&&!1===l&&null!=f&&f>0&&p>=f)&&t.dispatch(Ut.setMemberPaywall())}})))),e=>qt(Ft.getDefaultWorkspaceAdmins,(t=>LO(void 0,void 0,void 0,(function*(){const{defaultWorkspace:n}=t.getState().workspaces;if(n){const r=yield function(e,t){var n,r,i;return LO(this,void 0,void 0,(function*(){try{const o=yield e.gqlClient.query(ni`
          query ($orgId: ID!) {
            orgAdmins: getOrganizationAdmins(orgId: $orgId) {
              ... on OrgAdmins {
                user {
                  email
                }
              }
              ... on Error {
                message
              }
            }
          }
        `,{orgId:t}).toPromise();if(o.error)throw o.error.toString();return null!==(i=null===(r=null===(n=o.data)||void 0===n?void 0:n.orgAdmins)||void 0===r?void 0:r.user)&&void 0!==i?i:[]}catch(t){return e.logger.error("Failed to fetch workspace admins",{error:t}),[]}}))}(e,n.organization.id);t.dispatch(Ut.setDefaultWorkspaceAdmins({admins:r}))}}))))],jO=({logger:e,metrics:t})=>()=>n=>r=>{t.increment(Ht,{consumer:r.type});try{return n(r)}catch(n){throw e.error(`Redux action failed ${r.type}`,{err:n}),t.increment("integrations.sdk.consumers.failed",{consumer:r.type}),n}},zO=e=>{var t,n,r,i,o,a;if("undefined"!=typeof window&&(()=>{try{return window.self!==window.top}catch(e){return!0}})()){const s=null!==(t=(new EN).getBrowser().name)&&void 0!==t?t:"unknown";e.metrics.increment("integrations.sdk.initialize_background",{browserType:s});const u=(e=>t=>n=>r=>{const i=e.find((e=>e.trigger.match(r)));return void 0!==i?i.handler(t,r.payload):r.type.startsWith("consumer_trigger/")&&console.warn("[redux-consumer] - Missing trigger consumer for trigger",r),n(r)})([...Gt,...fo,...ho,...Mo,...Zo,...ta,...ra,...RO,...DO].map((t=>t(e)))),{store:c}=(o=[u,jO(e)],a="development"===e.config.trackerConfig.environment,{store:Ye({reducer:zt,middleware:o,devTools:a})});((e,{diffStrategy:t=To}={diffStrategy:To})=>{if("function"!=typeof t)throw new Error("diffStrategy must be one of the included diffing strategies or a custom diff function");const n=xo({methods:{dispatch:No(e)}}),r=((e,t)=>n=>{let r=e.getState();e.subscribe((()=>{const i=e.getState(),o=t(r,i);o.length&&(r=i,n.syncState({type:"iframe.patch_state",payload:o}))})),n.syncState({type:"iframe.state",payload:r})})(e,t);n.promise.then(r)})(c);const d=null===(r=null===(n=e.config)||void 0===n?void 0:n.publicUrl)||void 0===r?void 0:r.replace("/api",""),l=(null===(i=e.config)||void 0===i?void 0:i.guestRecordingEnabled)||!1;c.dispatch(Ut.updateHostUrl(d)),c.dispatch(Ut.setGuestRecordingEnabled(l)),(e=>{window.onbeforeunload=t=>{const{recorder:{appStage:n}}=e.getState();if(e.dispatch(Ft.quitPage()),wt.ACTIVE_RECORDING_STAGES.includes(n))return t.preventDefault(),t.returnValue="Are you sure you want to cancel your recording?","Are you sure you want to cancel your recording?"}})(c)}else e.metrics.increment("integrations.sdk.initialize_background.failed"),console.error("The SDK background must be run within an iframe, and have a window object available!")};var UO={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},FO=Object.freeze({});function qO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:UO,r=void 0,i=Array.isArray(e),o=[e],a=-1,s=[],u=void 0,c=void 0,d=void 0,l=[],f=[],p=e;do{var h=++a===o.length,v=h&&0!==s.length;if(h){if(c=0===f.length?void 0:l[l.length-1],u=d,d=f.pop(),v){if(i)u=u.slice();else{for(var m={},g=0,y=Object.keys(u);g<y.length;g++){var w=y[g];m[w]=u[w]}u=m}for(var b=0,S=0;S<s.length;S++){var E=s[S][0],k=s[S][1];i&&(E-=b),i&&null===k?(u.splice(E,1),b++):u[E]=k}}a=r.index,o=r.keys,s=r.edits,i=r.inArray,r=r.prev}else{if(c=d?i?a:o[a]:void 0,null==(u=d?d[c]:p))continue;d&&l.push(c)}var C,x=void 0;if(!Array.isArray(u)){if(!mr(u))throw new Error("Invalid AST Node: ".concat(wr(u),"."));var T=KO(t,u.kind,h);if(T){if((x=T.call(t,u,c,d,l,f))===FO)break;if(!1===x){if(!h){l.pop();continue}}else if(void 0!==x&&(s.push([c,x]),!h)){if(!mr(x)){l.pop();continue}u=x}}}if(void 0===x&&v&&s.push([c,u]),h)l.pop();else r={inArray:i,index:a,keys:o,edits:s,prev:r},o=(i=Array.isArray(u))?u:null!==(C=n[u.kind])&&void 0!==C?C:[],a=-1,s=[],d&&f.push(d),d=u}while(void 0!==r);return 0!==s.length&&(p=s[s.length-1][1]),p}function KO(e,t,n){var r=e[t];if(r){if(!n&&"function"==typeof r)return r;var i=n?r.leave:r.enter;if("function"==typeof i)return i}else{var o=n?e.leave:e.enter;if(o){if("function"==typeof o)return o;var a=o[t];if("function"==typeof a)return a}}}function HO(e){return qO(e,{leave:$O})}var $O={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return GO(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=YO("(",GO(e.variableDefinitions,", "),")"),i=GO(e.directives," "),o=e.selectionSet;return n||i||r||"query"!==t?GO([t,GO([n,r]),i,o]," "):o},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,i=e.directives;return t+": "+n+YO(" = ",r)+YO(" ",GO(i," "))},SelectionSet:function(e){return WO(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,i=e.directives,o=e.selectionSet,a=YO("",t,": ")+n,s=a+YO("(",GO(r,", "),")");return s.length>80&&(s=a+YO("(\n",QO(GO(r,"\n")),"\n)")),GO([s,GO(i," "),o]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+YO(" ",GO(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return GO(["...",YO("on ",t),GO(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,i=e.directives,o=e.selectionSet;return"fragment ".concat(t).concat(YO("(",GO(r,", "),")")," ")+"on ".concat(n," ").concat(YO("",GO(i," ")," "))+o},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=-1===e.indexOf("\n"),i=" "===e[0]||"\t"===e[0],o='"'===e[e.length-1],a="\\"===e[e.length-1],s=!r||o||a||n,u="";return!s||r&&i||(u+="\n"+t),u+=t?e.replace(/\n/g,"\n"+t):e,s&&(u+="\n"),'"""'+u.replace(/"""/g,'\\"""')+'"""'}(n,"description"===t?"":"  "):JSON.stringify(n)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+GO(e.values,", ")+"]"},ObjectValue:function(e){return"{"+GO(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+YO("(",GO(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:VO((function(e){var t=e.directives,n=e.operationTypes;return GO(["schema",GO(t," "),WO(n)]," ")})),OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:VO((function(e){return GO(["scalar",e.name,GO(e.directives," ")]," ")})),ObjectTypeDefinition:VO((function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return GO(["type",t,YO("implements ",GO(n," & ")),GO(r," "),WO(i)]," ")})),FieldDefinition:VO((function(e){var t=e.name,n=e.arguments,r=e.type,i=e.directives;return t+(XO(n)?YO("(\n",QO(GO(n,"\n")),"\n)"):YO("(",GO(n,", "),")"))+": "+r+YO(" ",GO(i," "))})),InputValueDefinition:VO((function(e){var t=e.name,n=e.type,r=e.defaultValue,i=e.directives;return GO([t+": "+n,YO("= ",r),GO(i," ")]," ")})),InterfaceTypeDefinition:VO((function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return GO(["interface",t,YO("implements ",GO(n," & ")),GO(r," "),WO(i)]," ")})),UnionTypeDefinition:VO((function(e){var t=e.name,n=e.directives,r=e.types;return GO(["union",t,GO(n," "),r&&0!==r.length?"= "+GO(r," | "):""]," ")})),EnumTypeDefinition:VO((function(e){var t=e.name,n=e.directives,r=e.values;return GO(["enum",t,GO(n," "),WO(r)]," ")})),EnumValueDefinition:VO((function(e){return GO([e.name,GO(e.directives," ")]," ")})),InputObjectTypeDefinition:VO((function(e){var t=e.name,n=e.directives,r=e.fields;return GO(["input",t,GO(n," "),WO(r)]," ")})),DirectiveDefinition:VO((function(e){var t=e.name,n=e.arguments,r=e.repeatable,i=e.locations;return"directive @"+t+(XO(n)?YO("(\n",QO(GO(n,"\n")),"\n)"):YO("(",GO(n,", "),")"))+(r?" repeatable":"")+" on "+GO(i," | ")})),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return GO(["extend schema",GO(t," "),WO(n)]," ")},ScalarTypeExtension:function(e){return GO(["extend scalar",e.name,GO(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return GO(["extend type",t,YO("implements ",GO(n," & ")),GO(r," "),WO(i)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return GO(["extend interface",t,YO("implements ",GO(n," & ")),GO(r," "),WO(i)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return GO(["extend union",t,GO(n," "),r&&0!==r.length?"= "+GO(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return GO(["extend enum",t,GO(n," "),WO(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return GO(["extend input",t,GO(n," "),WO(r)]," ")}};function VO(e){return function(t){return GO([t.description,e(t)],"\n")}}function GO(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(t=null==e?void 0:e.filter((function(e){return e})).join(n))&&void 0!==t?t:""}function WO(e){return YO("{\n",QO(GO(e,"\n")),"\n}")}function YO(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return null!=t&&""!==t?e+t+n:""}function QO(e){return YO("  ",e.replace(/\n/g,"\n  "))}function JO(e){return-1!==e.indexOf("\n")}function XO(e){return null!=e&&e.some(JO)}var ZO,e_,t_,n_,r_,i_,o_=Object.freeze({__proto__:null,print:HO});function a_(e){return"string"==typeof e?new cr(e):"object"==typeof e&&e.message?new cr(e.message,e.nodes,e.source,e.positions,e.path,e,e.extensions||{}):e}function s_(){return this.message}function u_(e,t){e|=0;for(var n=0,r=0|t.length;n<r;n++)e=(e<<5)+e+t.charCodeAt(n);return e}function c_(e){var t,n,r,i,o,a;if(null===e||e_.has(e))return"null";if("object"!=typeof e)return JSON.stringify(e)||"";if(e.toJSON)return c_(e.toJSON());if(Array.isArray(e)){for(t="[",n=0,r=e.length;n<r;n++)0<n&&(t+=","),t+=0<(i=c_(e[n])).length?i:"null";return t+"]"}if(!(t=Object.keys(e).sort()).length&&e.constructor&&e.constructor!==Object)return t=t_.get(e)||Math.random().toString(36).slice(2),t_.set(e,t),'{"__key":"'+t+'"}';for(e_.add(e),n="{",r=0,i=t.length;r<i;r++)(a=c_(e[o=t[r]]))&&(1<n.length&&(n+=","),n+=c_(o)+":"+a);return e_.delete(e),n+"}"}function d_(e){return e_.clear(),c_(e)}function l_(e){var t=("string"!=typeof e?e.loc&&e.loc.source.body||HO(e):e).replace(/([\s,]|#[^\n\r]+)+/g," ").trim();return"string"!=typeof e&&(e.loc?(e="definitions"in e&&p_(e))&&(t="# "+e+"\n"+t):e.loc={start:0,end:t.length,source:{body:t,name:"gql",locationOffset:{line:1,column:1}}}),t}function f_(e){if("string"==typeof e){var t=u_(5381,l_(e))>>>0;e=n_.get(t)||zr(e,{noLocation:!0})}else t=e.__key||u_(5381,l_(e))>>>0,e=n_.get(t)||e;return e.loc||l_(e),e.__key=t,n_.set(t,e),e}function p_(e){var t,n,r;for(t=0,n=e.definitions.length;t<n;t++)if((r=e.definitions[t]).kind===lr.OPERATION_DEFINITION&&r.name)return r.name.value}function h_(e,t,n){return{operation:e,data:t.data,error:Array.isArray(t.errors)?new ZO({graphQLErrors:t.errors,response:n}):void 0,extensions:"object"==typeof t.extensions&&t.extensions||void 0}}function v_(e,t,n){return{operation:e,data:void 0,error:new ZO({networkError:t,response:n}),extensions:void 0}}function m_(){return(m_=Object.assign||function(e){var t,n,r;for(t=1;t<arguments.length;t++)for(r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)}function g_(e,t){return e=f_(e),{key:t?u_(e.__key,d_(t))>>>0:e.__key,query:e,variables:t||{}}}function y_(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)y_(e[n],t);else if("object"==typeof e&&null!==e)for(n in e)"__typename"===n&&"string"==typeof e[n]?t[e[n]]=0:y_(e[n],t);return t}function w_(e){return e.kind===lr.FIELD&&"__typename"===e.name.value&&!e.alias}function b_(e){if(e.selectionSet&&!e.selectionSet.selections.some(w_))return m_({},e,{selectionSet:m_({},e.selectionSet,{selections:e.selectionSet.selections.concat([{kind:lr.FIELD,name:{kind:lr.NAME,value:"__typename"}}])})})}function S_(e){return e&&"object"==typeof e?Object.keys(e).reduce((function(t,n){var r=e[n];return"__typename"===n?Object.defineProperty(t,"__typename",{enumerable:!1,value:r}):Array.isArray(r)?t[n]=r.map(S_):t[n]=r&&"object"==typeof r&&"__typename"in r?S_(r):r,t}),{}):e}function E_(e){return e.toPromise=function(){return function(e){return new Promise((function(t){pi(1)(e)((function(e){"number"!=typeof e&&(e.tag?t(e[0]):e[0](0))}))}))}(Ci(1)(e))},e}function k_(e,t,n){return n||(n=t.context),{key:t.key,query:t.query,variables:t.variables,kind:e,context:n}}function C_(e,t){return k_(e.kind,e,m_({},e.context,{meta:m_({},e.context.meta,t)}))}function x_(){}function T_(e){return"mutation"!==(e=e.kind)&&"query"!==e}function N_(e){var t=k_(e.kind,e);return t.query=function(e){e=f_(e);var t=r_.get(e.__key);return t||((t=qO(e,{Field:b_,InlineFragment:b_})).__key=e.__key,r_.set(e.__key,t)),t}(e.query),t}function O_(e){return"query"!==e.kind||"cache-only"!==e.context.requestPolicy}function __(e){return C_(e,{cacheOutcome:"miss"})}function P_(e){return T_(e)}function A_(e){function t(e){var t=e.context.requestPolicy;return"query"===e.kind&&"network-only"!==t&&("cache-only"===t||u.has(e.key))}function n(e){var t=u.get(e.key);return t=m_({},t,{operation:C_(e,{cacheOutcome:t?"hit":"miss"})}),"cache-and-network"===e.context.requestPolicy&&(t.stale=!0,I_(s,e)),t}function r(e){return!T_(e)&&t(e)}function i(e){function t(e){r.add(e)}var n,r,i,o=e.operation;if(o)if(n=Object.keys(y_(e.data,{})).concat(o.context.additionalTypenames||[]),"mutation"===e.operation.kind){for(r=new Set,e=0;e<n.length;e++)(i=c[i=n[e]]||(c[i]=new Set)).forEach(t),i.clear();r.forEach((function(e){u.has(e)&&(o=u.get(e).operation,u.delete(e),I_(s,o))}))}else if("query"===o.kind&&e.data)for(u.set(o.key,e),e=0;e<n.length;e++)(c[i=n[e]]||(c[i]=new Set)).add(o.key)}function o(e){return!T_(e)&&!t(e)}var a=e.forward,s=e.client;e.dispatchDebug;var u=new Map,c=Object.create(null);return function(e){var t=ki(e);return e=bi(n)(mi(r)(t)),t=li(i)(a(mi(O_)(bi(__)(Si([bi(N_)(mi(o)(t)),mi(P_)(t)]))))),Si([e,t])}}function I_(e,t){return e.reexecuteOperation(k_(t.kind,t,m_({},t.context,{requestPolicy:"network-only"})))}function M_(e){function t(e){i.delete(e.operation.key)}function n(e){var t=e.key,n=e.kind;return"teardown"===n?(i.delete(t),!0):"query"!==n&&"subscription"!==n||(n=i.has(t),i.add(t),!n)}var r=e.forward,i=(e.dispatchDebug,new Set);return function(e){return e=mi(n)(e),li(t)(r(e))}}function R_(e){return"query"===e.kind||"mutation"===e.kind}function B_(e){return"query"!==e.kind&&"mutation"!==e.kind}function L_(e){var t=e.forward;return e.dispatchDebug,function(e){var n=ki(e);return Si([e=ci((function(e){var t=e.key,r=mi((function(e){return"teardown"===e.kind&&e.key===t}))(n),i=function(e){return{query:HO(e.query),operationName:p_(e.query),variables:e.variables||void 0,extensions:void 0}}(e),o=function(e,t){var n=e.context.url;return"query"===e.kind&&e.context.preferGetMethod&&t?(e=[],t.operationName&&e.push("operationName="+encodeURIComponent(t.operationName)),t.query&&e.push("query="+encodeURIComponent(t.query.replace(/([\s,]|#[^\n\r]+)+/g," ").trim())),t.variables&&e.push("variables="+encodeURIComponent(d_(t.variables))),t.extensions&&e.push("extensions="+encodeURIComponent(d_(t.extensions))),n+"?"+e.join("&")):n}(e,i),a=function(e,t){var n="query"===e.kind&&!!e.context.preferGetMethod;return m_({},e="function"==typeof e.context.fetchOptions?e.context.fetchOptions():e.context.fetchOptions||{},{body:!n&&t?JSON.stringify(t):void 0,method:n?"GET":"POST",headers:n?e.headers:m_({},{"content-type":"application/json"},e.headers)})}(e,i);return li((function(e){e.data||e.error}))(xi(r)(function(e,t,n){return yi((function(r){var i=r.next,o=r.complete,a="undefined"!=typeof AbortController?new AbortController:null,s=!1;return Promise.resolve().then((function(){if(!s)return a&&(n.signal=a.signal),function(e,t,n){var r,i=!1;return(e.context.fetch||fetch)(t,n).then((function(e){return r=e,i=200>e.status||e.status>=("manual"===n.redirect?400:300),e.json()})).then((function(t){if(!("data"in t)&&!("errors"in t))throw Error("No Content");return h_(e,t,r)})).catch((function(t){if("AbortError"!==t.name)return v_(e,i?Error(r.statusText):t,r)}))}(e,t,n)})).then((function(e){s||(s=!0,e&&i(e),o())})),function(){s=!0,a&&a.abort()}}))}(e,o,a)))}))(mi(R_)(n)),t(mi(B_)(n))])}}function D_(){return!1}function j_(e){function t(e){e.kind}return e.dispatchDebug,function(e){return mi(D_)(li(t)(e))}}function z_(e){var t,n,r,i,o=this;this.activeOperations=Object.create(null),this.queue=[],this.createOperationContext=function(e){return e||(e={}),m_({},{url:o.url,fetchOptions:o.fetchOptions,fetch:o.fetch,preferGetMethod:o.preferGetMethod},e,{suspense:e.suspense||!1!==e.suspense&&o.suspense,requestPolicy:e.requestPolicy||o.requestPolicy})},this.createRequestOperation=function(e,t,n){return k_(e,t,o.createOperationContext(n))},this.executeQuery=function(e,t){return e=o.createRequestOperation("query",e,t),o.executeRequestOperation(e)},this.executeSubscription=function(e,t){return e=o.createRequestOperation("subscription",e,t),o.executeRequestOperation(e)},this.executeMutation=function(e,t){return e=o.createRequestOperation("mutation",e,t),o.executeRequestOperation(e)},t=x_,this.url=e.url,this.fetchOptions=e.fetchOptions,this.fetch=e.fetch,this.suspense=!!e.suspense,this.requestPolicy=e.requestPolicy||"cache-first",this.preferGetMethod=!!e.preferGetMethod,this.maskTypename=!!e.maskTypename,n=wi(),r=n.next,this.operations$=n.source,i=!1,this.dispatchOperation=function(e){for(i=!0,e&&r(e);e=o.queue.shift();)r(e);i=!1},this.reexecuteOperation=function(e){("mutation"===e.kind||0<(o.activeOperations[e.key]||0))&&(o.queue.push(e),i||Promise.resolve().then(o.dispatchOperation))},e=function(e){return function(t){var n=t.client;return t.dispatchDebug,e.reduceRight((function(e,t){return t({client:n,forward:e,dispatchDebug:function(e){}})}),t.forward)}}(void 0!==e.exchanges?e.exchanges:i_),this.results$=ki(e({client:this,dispatchDebug:t,forward:j_({dispatchDebug:t})})(this.operations$)),function(e){hi(vi)(e)}(this.results$)}function U_(e){return e.data=S_(e.data),e}function F_(e){function t(e){var t=e.error;e=e.operation,t&&n(t,e)}var n=e.onError;return function(e){var n=e.forward;return function(e){return li(t)(n(e))}}}ZO=function(e){function t(t){var n,r=t.networkError,i=t.response;n=function(e,t){var n="";return void 0!==e?n="[Network] "+e.message:(void 0!==t&&t.forEach((function(e){n+="[GraphQL] "+e.message+"\n"})),n.trim())}(r,t=(t.graphQLErrors||[]).map(a_)),e.call(this,n),this.name="CombinedError",this.message=n,this.graphQLErrors=t,this.networkError=r,this.response=i}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.toString=s_,t}(Error),e_=new Set,t_=new WeakMap,n_=new Map,r_=new Map,j_({dispatchDebug:x_}),i_=[M_,A_,L_],z_.prototype.onOperationStart=function(e){var t=e.key;this.activeOperations[t]=(this.activeOperations[t]||0)+1,this.dispatchOperation(e)},z_.prototype.onOperationEnd=function(e){var t=e.key,n=this.activeOperations[t]||0;if(0>=(this.activeOperations[t]=0>=n?0:n-1)){for(t=this.queue.length-1;0<=t;t--)this.queue[t].key===e.key&&this.queue.splice(t,1);this.dispatchOperation(k_("teardown",e,e.context))}},z_.prototype.executeRequestOperation=function(e){var t,n,r=this,i=mi((function(t){return t.operation.key===e.key}))(this.results$);return this.maskTypename&&(i=bi(U_)(i)),"mutation"===e.kind?Ci(1)(Ei((function(){return r.dispatchOperation(e)}))(i)):(t=mi((function(t){return"teardown"===t.kind&&t.key===e.key}))(this.operations$),n=mi((function(t){return t.kind===e.kind&&t.key===e.key&&"cache-only"!==t.context.requestPolicy}))(this.operations$),function(e){return function(t){return function(n){let r=!1;return t((function(t){if("number"==typeof t){if(r)return;return r=!0,n(t),e()}if(t.tag)r||n(t);else{var i=t[0];n(ri(0,[function(t){if(!r)return t?(r=!0,i(t),e()):i(t)}]))}}))}}}((function(){r.onOperationEnd(e)}))(Ei((function(){r.onOperationStart(e)}))(function(e){return function(t){return function(n){function r(e){s&&("number"==typeof e?(s=!1,c?n(e):o||(o=!0,i(0))):e.tag?(n(e),u?u=!1:a(0)):(a=e=e[0],u=!1,e(0)))}let i=ii,o=!1,a=ii,s=!1,u=!1,c=!1;t((function(t){"number"==typeof t?c||(c=!0,s||n(0)):t.tag?c||(s&&(a(1),a=ii),o?o=!1:(o=!0,i(0)),t=e(t[0]),s=!0,t(r)):i=t[0]})),n(ri(0,[function(e){if(e){if(c||(c=!0,i(1)),s)return s=!1,a(1)}else c||o||(o=!0,i(0)),s&&!u&&(u=!0,a(0))}]))}}}((function(e){return e.stale?gi(e):Si([gi(e),bi((function(){return m_({},e,{stale:!0})}))(Ci(1)(n))])}))(xi(t)(i)))))},z_.prototype.query=function(e,t,n){return n&&"boolean"==typeof n.suspense||(n=m_({},n,{suspense:!1})),E_(this.executeQuery(g_(e,t),n))},z_.prototype.readQuery=function(e,t,n){var r=null;return hi((function(e){r=e}))(this.executeQuery(g_(e,t),n)).unsubscribe(),r},z_.prototype.subscription=function(e,t,n){return this.executeSubscription(g_(e,t),n)},z_.prototype.mutation=function(e,t,n){return E_(this.executeMutation(g_(e,t),n))};var q_=Vr((function(e,t){e.exports=function(e,t,n,r,i){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:i;return e===i?n:e}}));function K_(e,t,n,r,i,o){if("undefined"!=typeof window)return arguments.length>1?document.cookie=e+"="+encodeURIComponent(t)+(n?"; expires="+new Date(+new Date+1e3*n).toUTCString()+(r?"; path="+r:"")+(i?"; domain="+i:"")+(o?"; secure":""):""):decodeURIComponent((("; "+document.cookie).split("; "+e+"=")[1]||"").split(";")[0])}var H_=K_,$_=K_;function V_(e){return K_(e,"",-1)}function G_(e){return(G_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W_(e){var t;try{void 0===(t=JSON.parse(e))&&(t=e),"true"===t&&(t=!0),"false"===t&&(t=!1),parseFloat(t)===t&&"object"!==G_(t)&&(t=parseFloat(t))}catch(n){t=e}return t}var Y_="object"===("undefined"==typeof self?"undefined":G_(self))&&self.self===self&&self||"object"===(void 0===e?"undefined":G_(e))&&e.global===e&&e||void 0,Q_=function(){try{if("undefined"==typeof localStorage||"undefined"==typeof JSON)return!1;localStorage.setItem("_t_","1"),localStorage.removeItem("_t_")}catch(e){return!1}return!0}(),J_=function(){try{var e="_c_";K_(e,"1");var t=-1!==document.cookie.indexOf(e);return K_(e,"",-1),t}catch(e){return!1}}();function X_(e){return{cookie:W_(H_(e)),localStorage:W_(localStorage.getItem(e)),global:Y_[e]||null}}function Z_(e){return"string"==typeof e?e:e.storage}function eP(e){return Q_&&(!e||"localStorage"===e)}function tP(e){return J_&&(!e||"cookie"===e)}var nP={getItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return null;var n=Z_(t);if("all"===n)return X_(e);if(eP(n)){var r=localStorage.getItem(e);if(r||"localStorage"===n)return W_(r)}if(tP(n)){var i=H_(e);if(i||"cookie"===n)return W_(i)}return Y_[e]||null},setItem:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||!t)return!1;var r=Z_(n),i=JSON.stringify(t);if(eP(r)){var o=W_(localStorage.getItem(e));return localStorage.setItem(e,i),{value:t,oldValue:o,location:"localStorage"}}if(tP(r)){var a=W_(H_(e));return $_(e,i),{value:t,oldValue:a,location:"cookie"}}var s=Y_[e];return Y_[e]=t,{value:t,oldValue:s,location:"global"}},removeItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return!1;var n=Z_(t);return eP(n)?(localStorage.removeItem(e),"localStorage"):tP(n)?(V_(e),"cookie"):(Y_[e]=void 0,"global")}};function rP(e){return(rP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iP(e){return"function"==typeof e}function oP(e){return"string"==typeof e}function aP(e){return"boolean"==typeof e}function sP(e){if("object"!==rP(e)||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function uP(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}var cP="undefined"!=typeof document;function dP(e){return function(e){var t,n={},r=/([^&=]+)=?([^&]*)/g;for(;t=r.exec(e);){var i=uP(t[1]),o=uP(t[2]);"[]"===i.substring(i.length-2)?(n[i=i.substring(0,i.length-2)]||(n[i]=[])).push(o):n[i]=""===o||o}for(var a in n){var s=a.split("[");s.length>1&&(lP(n,s.map((function(e){return e.replace(/[?[\]\\ ]/g,"")})),n[a]),delete n[a])}return n}(function(e){if(e){var t=e.match(/\?(.*)/);return t&&t[1]?t[1].split("#")[0]:""}return cP&&window.location.search.substring(1)}(e))}function lP(e,t,n){for(var r=t.length-1,i=0;i<r;++i){var o=t[i];o in e||(e[o]={}),e=e[o]}e[t[r]]=n}function fP(){for(var e="",t=0,n=4294967295*Math.random()|0;t++<36;){var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"[t-1],i=15&n;e+="-"==r||"4"==r?r:("x"==r?i:3&i|8).toString(16),n=t%8==0?4294967295*Math.random()|0:n>>4}return e}var pP=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}};var hP=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)};var vP=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")};var mP=function(e){return pP(e)||hP(e)||vP()};function gP(e,t){return e(t={exports:{}},t.exports),t.exports}var yP=gP((function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(r){return"function"==typeof Symbol&&"symbol"===t(Symbol.iterator)?e.exports=n=function(e){return t(e)}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":t(e)},n(r)}e.exports=n})),wP=gP((function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,o=Object.create(i.prototype),a=new O(r||[]);return o._invoke=function(e,t,n){var r=l;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw o;return P()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=x(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=d(e,t,n);if("normal"===u.type){if(r=n.done?h:f,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=h,n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l="suspendedStart",f="suspendedYield",p="executing",h="completed",v={};function m(){}function g(){}function y(){}var w={};w[o]=function(){return this};var b=Object.getPrototypeOf,S=b&&b(b(_([])));S&&S!==n&&r.call(S,o)&&(w=S);var E=y.prototype=m.prototype=Object.create(w);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,t){function n(i,o,a,s){var u=d(e[i],e,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(l).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function x(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,x(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=d(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function _(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:P}}function P(){return{value:t,done:!0}}return g.prototype=E.constructor=y,y.constructor=g,g.displayName=u(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,s,"GeneratorFunction")),e.prototype=Object.create(E),e},e.awrap=function(e){return{__await:e}},k(C.prototype),C.prototype[a]=function(){return this},e.AsyncIterator=C,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new C(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(E),u(E,s,"Generator"),E[o]=function(){return this},E.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=_,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;N(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:_(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));function bP(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}var SP=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){bP(o,r,i,a,s,"next",e)}function s(e){bP(o,r,i,a,s,"throw",e)}a(void 0)}))}};var EP=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e};function kP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var CP=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kP(n,!0).forEach((function(t){EP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kP(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},xP="function",TP="undefined",NP="@@redux/"+Math.random().toString(36),OP=function(){return("undefined"==typeof Symbol?"undefined":yP(Symbol))===xP&&Symbol.observable||"@@observable"}(),_P=" != "+xP;function PP(e,t,n){if(yP(t)===xP&&yP(n)===TP&&(n=t,t=void 0),yP(n)!==TP){if(yP(n)!==xP)throw new Error("enhancer"+_P);return n(PP)(e,t)}if(yP(e)!==xP)throw new Error("reducer"+_P);var r=e,i=t,o=[],a=o,s=!1;function u(){a===o&&(a=o.slice())}function c(){return i}function d(e){if(yP(e)!==xP)throw new Error("Listener"+_P);var t=!0;return u(),a.push(e),function(){if(t){t=!1,u();var n=a.indexOf(e);a.splice(n,1)}}}function l(e){if(!sP(e))throw new Error("Act != obj");if(yP(e.type)===TP)throw new Error("ActType "+TP);if(s)throw new Error("Dispatch in reducer");try{s=!0,i=r(i,e)}finally{s=!1}for(var t=o=a,n=0;n<t.length;n++){(0,t[n])()}return e}return l({type:"@@redux/INIT"}),EP({dispatch:l,subscribe:d,getState:c,replaceReducer:function(e){if(yP(e)!==xP)throw new Error("next reducer"+_P);r=e,l({type:"@@redux/INIT"})}},OP,(function(){var e=d;return EP({subscribe:function(t){if("object"!==yP(t))throw new TypeError("Observer != obj");function n(){t.next&&t.next(c())}return n(),{unsubscribe:e(n)}}},OP,(function(){return this}))}))}function AP(e,t){var n=t&&t.type;return"action "+(n&&n.toString()||"?")+"reducer "+e+" returns "+TP}function IP(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];yP(e[i])===xP&&(n[i]=e[i])}var o,a=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t],r=n(void 0,{type:"@@redux/INIT"});if(yP(r)===TP||yP(n(void 0,{type:NP}))===TP)throw new Error("reducer "+t+" "+TP)}))}(n)}catch(e){o=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(o)throw o;for(var r=!1,i={},s=0;s<a.length;s++){var u=a[s],c=n[u],d=e[u],l=c(d,t);if(yP(l)===TP){var f=AP(u,t);throw new Error(f)}i[u]=l,r=r||l!==d}return r?i:e}}function MP(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function RP(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,r,i){var o,a=e(n,r,i),s=a.dispatch,u={getState:a.getState,dispatch:function(e){return s(e)}};return o=t.map((function(e){return e(u)})),s=MP.apply(void 0,mP(o))(a.dispatch),CP(CP({},a),{},{dispatch:s})}}}var BP=["bootstrap","params","campaign","initializeStart","initialize","initializeEnd","ready","resetStart","reset","resetEnd","pageStart","page","pageEnd","pageAborted","trackStart","track","trackEnd","trackAborted","identifyStart","identify","identifyEnd","identifyAborted","userIdChanged","registerPlugins","enablePlugin","disablePlugin","online","offline","setItemStart","setItem","setItemEnd","setItemAborted","removeItemStart","removeItem","removeItemEnd","removeItemAborted"],LP=["name","EVENTS","config","loaded"],DP=BP.reduce((function(e,t){return e[t]=t,e}),{registerPluginType:function(e){return"registerPlugin:".concat(e)},pluginReadyType:function(e){return"ready:".concat(e)}});function jP(e){return BP.includes(e)}var zP="userId",UP="anonymousId",FP="__anon_id",qP="__user_id",KP="__user_traits",HP=/^utm_/,$P=/^an_prop_/,VP=/^an_trait_/;function GP(e){var t=e.storage,n=t.setItem;return t.getItem,function(t){return function(r){return function(i){if(i.type===DP.bootstrap){var o=i.params,a=i.user,s=i.persistedUser;s.anonymousId!==a.anonymousId&&n(FP,a.anonymousId),s.userId!==a.userId&&n(qP,a.userId);var u=Object.keys(i.params);if(u.length){var c=o.an_uid,d=o.an_event,l=u.reduce((function(e,t){if(t.match(HP)||t.match(/^(d|g)clid/)){var n=t.replace(HP,""),r="campaign"===n?"name":n;e.campaign[r]=o[t]}return t.match($P)&&(e.props[t.replace($P,"")]=o[t]),t.match(VP)&&(e.traits[t.replace(VP,"")]=o[t]),e}),{campaign:{},props:{},traits:{}});t.dispatch(CP(CP({type:DP.params,raw:o},l),c?{userId:c}:{})),c&&setTimeout((function(){return e.identify(c,l.traits)}),0),d&&setTimeout((function(){return e.track(d,l.props)}),0),Object.keys(l.campaign).length&&t.dispatch({type:DP.campaign,campaign:l.campaign})}}return r(i)}}}}function WP(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.type===DP.setItemEnd){if(n.key===FP)return CP(CP({},t),{anonymousId:n.value});if(n.key===qP)return CP(CP({},t),{userId:n.value})}switch(n.type){case DP.identify:return Object.assign({},t,{userId:n.userId,traits:CP(CP({},t.traits),n.traits)});case DP.reset:return[qP,FP,KP].forEach((function(t){e.removeItem(t)})),Object.assign({},t,{userId:null,anonymousId:null,traits:{}});default:return t}}}function YP(e){return{userId:e.getItem(qP),anonymousId:e.getItem(FP),traits:e.getItem(KP)||{}}}var QP=function(e){return"__TEMP__"+e};function JP(e){return function(t,n,r){var i=n.getState("user")[t];if(i)return i;if(r&&sP(r)&&r[t])return r[t];var o=YP(e)[t];return o||(Y_[QP(t)]?Y_[QP(t)]:null)}}function XP(e){var t=e.storage,n=t.setItem,r=t.removeItem,i=t.getItem;return function(e){return function(t){return function(o){var a=o.userId,s=o.traits,u=o.options;if(o.type===DP.reset&&([qP,KP,FP].forEach((function(e){r(e)})),[zP,UP,"traits"].forEach((function(e){Y_[QP(e)]=void 0}))),o.type===DP.identify){i(FP)||n(FP,fP());var c=i(qP),d=i(KP)||{};c&&c!==a&&e.dispatch({type:DP.userIdChanged,old:{userId:c,traits:d},new:{userId:a,traits:s},options:u}),a&&n(qP,a),s&&n(KP,CP(CP({},d),s))}return t(o)}}}}var ZP={};function eA(e,t){ZP[e]&&iP(ZP[e])&&(ZP[e](t),delete ZP[e])}function tA(e,t,n){return new Promise((function(r,i){return t()?r(e):n<1?i(CP(CP({},e),{},{queue:!0})):(o=10,new Promise((function(e){return setTimeout(e,o)}))).then((function(o){return tA(e,t,n-10).then(r,i)}));var o}))}function nA(e,t,n){var r=t(),i=e.getState(),o=i.plugins,a=i.context,s=i.queue,u=i.user;if(!a.offline&&s&&s.actions&&s.actions.length){var c=s.actions.reduce((function(e,t,n){return o[t.plugin].loaded?(e.process.push(t),e.processIndex.push(n)):(e.requeue.push(t),e.requeueIndex.push(n)),e}),{processIndex:[],process:[],requeue:[],requeueIndex:[]});if(c.processIndex&&c.processIndex.length){c.processIndex.forEach((function(t){var i=s.actions[t],a=i.plugin,c=i.payload.type,d=r[a][c];if(d&&iP(d)){var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return[zP,UP].reduce((function(n,r){return e.hasOwnProperty(r)&&t[r]&&t[r]!==e[r]&&(n[r]=t[r]),n}),e)}(i.payload,u);d({payload:l,config:o[a].config,instance:n});var f="".concat(c,":").concat(a);e.dispatch(CP(CP({},l),{},{type:f,_:{called:f,from:"queueDrain"}}))}}));var d=s.actions.filter((function(e,t){return!~c.processIndex.indexOf(t)}));s.actions=d}}}function rA(e,t,n){return setInterval((function(){return nA(e,t,n)}),3e3)}var iA=function(e){if(Array.isArray(e))return e};var oA=function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n};var aA=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")};var sA=function(e,t){return iA(e)||oA(e,t)||aA()};function uA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(e).filter((function(e){var r=n.plugins||{};return aP(r[e])?r[e]:!1!==r.all&&(!t[e]||!1!==t[e].enabled)})).map((function(t){return e[t]}))}var cA=/Start$/,dA=/^bootstrap/,lA=/^ready/;function fA(e,t,n,r,i){return pA.apply(this,arguments)}function pA(){return(pA=SP(wP.mark((function e(t,n,r,i,o){var a,s,u,c,d,l,f,p,h,v,m;return wP.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=iP(n)?n():n,s=t.type,u=s.replace(cA,""),!t._||!t._.called){e.next=5;break}return e.abrupt("return",t);case 5:return c=r.getState(),d=uA(a,c.plugins,t.options),s===DP.initializeStart&&t.fromEnable&&(d=Object.keys(c.plugins).filter((function(e){var n=c.plugins[e];return t.plugins.includes(e)&&!n.initialized})).map((function(e){return a[e]}))),l=d.map((function(e){return e.name})),f=bA(s,d),e.next=12,hA({action:t,data:{exact:f.before,namespaced:f.beforeNS},state:c,allPlugins:a,allMatches:f,instance:r,store:i,EVENTS:o});case 12:if(!EA(p=e.sent,l.length)){e.next=15;break}return e.abrupt("return",p);case 15:if(s!==u){e.next=19;break}h=p,e.next=22;break;case 19:return e.next=21,hA({action:CP(CP({},p),{},{type:u}),data:{exact:f.during,namespaced:f.duringNS},state:c,allPlugins:a,allMatches:f,instance:r,store:i,EVENTS:o});case 21:h=e.sent;case 22:if(!s.match(cA)){e.next=28;break}return v="".concat(u,"End"),e.next=26,hA({action:CP(CP({},h),{},{type:v}),data:{exact:f.after,namespaced:f.afterNS},state:c,allPlugins:a,allMatches:f,instance:r,store:i,EVENTS:o});case 26:(m=e.sent).meta&&m.meta.hasCallback&&eA(m.meta.rid,{payload:m});case 28:return e.abrupt("return",p);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hA(e){return vA.apply(this,arguments)}function vA(){return(vA=SP(wP.mark((function e(t){var n,r,i,o,a,s,u,c,d,l,f,p,h,v,m,g,y,w;return wP.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,r=t.action,i=t.instance,o=t.state,a=t.allPlugins,s=t.allMatches,u=t.store,c=t.EVENTS,d=o.plugins,l=o.context,f=r.type,p=f.match(cA),h=n.exact.map((function(e){return e.pluginName})),p&&(h=s.during.map((function(e){return e.pluginName}))),v=xA(i,h),m=n.exact.reduce((function(e,t){var n=t.pluginName,r=t.methodName,i=!1;return r.match(/^initialize/)||r.match(/^reset/)||(i=!d[n].loaded),l.offline&&r.match(/^(page|track|identify)/)&&(i=!0),e["".concat(n)]=i,e}),{}),e.next=10,n.exact.reduce(function(){var e=SP(wP.mark((function e(t,o,s){var u,c,l;return wP.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=o.pluginName,e.next=3,t;case 3:if(c=e.sent,!n.namespaced||!n.namespaced[u]){e.next=11;break}return e.next=7,n.namespaced[u].reduce(function(){var e=SP(wP.mark((function e(t,n,r){var o,s,c,l;return wP.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(e,t,n){return function(r,i){var o=n||t;return CP(CP({},e),{},{abort:{reason:r,plugins:i||[t],caller:f,from:o}})}},e.next=3,t;case 3:if(o=e.sent,n.method&&iP(n.method)){e.next=6;break}return e.abrupt("return",o);case 6:return TA(n.methodName,n.pluginName),e.next=9,n.method({payload:o,instance:i,abort:s(o,u,n.pluginName),config:gA(n.pluginName,d,a),plugins:d});case 9:return c=e.sent,l=sP(c)?c:{},e.abrupt("return",Promise.resolve(CP(CP({},o),l)));case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Promise.resolve(r));case 7:l=e.sent,c[u]=l,e.next=12;break;case 11:c[u]=r;case 12:return e.abrupt("return",Promise.resolve(c));case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Promise.resolve({}));case 10:return g=e.sent,e.next=13,n.exact.reduce(function(){var e=SP(wP.mark((function e(t,r,o){var s,c,l,h,y,w,b,S,E,k,C,x;return wP.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.exact.length===o+1,c=r.pluginName,l=a[c],e.next=5,t;case 5:if(h=e.sent,y=g[c]?g[c]:{},p&&(y=h),!SA(y,c)){e.next=11;break}return mA({data:y,method:f,instance:i,pluginName:c,store:u}),e.abrupt("return",Promise.resolve(h));case 11:if(!SA(h,c)){e.next=14;break}return s&&mA({data:h,method:f,instance:i,store:u}),e.abrupt("return",Promise.resolve(h));case 14:if(!m.hasOwnProperty(c)||!0!==m[c]){e.next=17;break}return u.dispatch({type:"queue",plugin:c,payload:y,_:{called:"queue",from:"queueMechanism"}}),e.abrupt("return",Promise.resolve(h));case 17:return w=v(g[c],a[c]),e.next=20,l[f]({abort:w.abort,payload:y,instance:i,config:gA(c,d,a),plugins:d});case 20:return b=e.sent,S=sP(b)?b:{},E=CP(CP({},h),S),SA(k=g[c],c)?mA({data:k,method:f,instance:i,pluginName:c,store:u}):(C="".concat(f,":").concat(c),(C.match(/:/g)||[]).length<2&&!f.match(dA)&&!f.match(lA)&&(x=p?E:y,i.dispatch(CP(CP({},x),{},{type:C,_:{called:C,from:"submethod"}})))),e.abrupt("return",Promise.resolve(E));case 26:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Promise.resolve(r));case 13:if(y=e.sent,f.match(cA)||f.match(/^registerPlugin/)||f.match(lA)||f.match(dA)||f.match(/^params/)||f.match(/^userIdChanged/)){e.next=21;break}if(c.plugins.includes(f),!y._||y._.originalAction!==f){e.next=18;break}return e.abrupt("return",y);case 18:w=CP(CP({},y),{_:{originalAction:y.type,called:y.type,from:"engineEnd"}}),EA(y,n.exact.length)&&!f.match(/End$/)&&(w=CP(CP({},w),{type:y.type+"Aborted"})),u.dispatch(w);case 21:return e.abrupt("return",y);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mA(e){var t=e.data,n=e.method;e.instance;var r=e.pluginName,i=n+"Aborted"+(r?":"+r:"");e.store.dispatch(CP(CP({},t),{},{type:i,_:{called:i,from:"abort"}}))}function gA(e,t,n){var r=t[e]||n[e];return r&&r.config?r.config:{}}function yA(e,t){return t.reduce((function(t,n){return n[e]?t.concat({methodName:e,pluginName:n.name,method:n[e]}):t}),[])}function wA(e,t){var n=function(e){return e.replace(cA,"")}(e),r=t?":".concat(t):"";return["".concat(e).concat(r),"".concat(n).concat(r),"".concat(n,"End").concat(r)]}function bA(e,t,n){var r=wA(e).map((function(e){return yA(e,t)}));return t.reduce((function(n,r){var i=r.name,o=wA(e,i).map((function(e){return yA(e,t)})),a=sA(o,3),s=a[0],u=a[1],c=a[2];return s.length&&(n.beforeNS[i]=s),u.length&&(n.duringNS[i]=u),c.length&&(n.afterNS[i]=c),n}),{before:r[0],beforeNS:{},during:r[1],duringNS:{},after:r[2],afterNS:{}})}function SA(e,t){var n=e.abort;return!!n&&(!0===n||(CA(n,t)||n&&CA(n.plugins,t)))}function EA(e,t){var n=e.abort;if(!n)return!1;if(!0===n||oP(n))return!0;var r=n.plugins;return kA(n)&&n.length===t||kA(r)&&r.length===t}function kA(e){return Array.isArray(e)}function CA(e,t){return!(!e||!kA(e))&&e.includes(t)}function xA(e,t){return function(n,r,i){var o=r.config,a=r.name,s="".concat(a,".").concat(n.type);i&&(s=i.event);var u=n.type.match(cA)?function(e,t,n,r,i){return function(o,a){var s=r?r.name:e,u=a&&kA(a)?a:n;if(r&&(!(u=a&&kA(a)?a:[e]).includes(e)||1!==u.length))throw new Error("Method ".concat(t," can only abort ").concat(e," plugin. ").concat(JSON.stringify(u)," input valid"));return CP(CP({},i),{},{abort:{reason:o,plugins:u,caller:t,_:s}})}}(a,s,t,i,n):function(e,t){return function(){throw new Error(e.type+" action not cancellable. Remove abort in "+t)}}(n,s);return{payload:OA(n),instance:e,config:o||{},abort:u}}}function TA(e,t){var n=NA(e);if(n&&n.name===t){var r=NA(n.method),i=r?"or "+r.method:"";throw new Error([t+" plugin is calling method "+e,"Plugins cant call self","Use ".concat(n.method," ").concat(i," in ").concat(t," plugin insteadof ").concat(e)].join("\n"))}}function NA(e){var t=e.match(/(.*):(.*)/);return!!t&&{method:t[1],name:t[2]}}function OA(e){return Object.keys(e).reduce((function(t,n){return"type"===n||(sP(e[n])?t[n]=Object.assign({},e[n]):t[n]=e[n]),t}),{})}function _A(e,t,n){var r={};return function(i){return function(o){return function(){var a=SP(wP.mark((function a(s){var u,c,d,l,f,p,h,v,m,g,y,w;return wP.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(u=s.type,c=s.abort,d=s.plugins,l=s,!c){a.next=4;break}return a.abrupt("return",o(s));case 4:if(u===DP.enablePlugin&&i.dispatch({type:DP.initializeStart,plugins:d,disabled:[],fromEnable:!0,meta:s.meta}),u===DP.disablePlugin&&setTimeout((function(){return eA(s.meta.rid,{payload:s})}),0),u===DP.initializeEnd&&(f=t(),p=Object.keys(f),h=p.filter((function(e){return d.includes(e)})).map((function(e){return f[e]})),v=[],m=[],g=s.disabled,y=h.map((function(e){var t=e.loaded,n=e.name;return tA(e,t,1e4).then((function(t){return r[n]||(i.dispatch({type:DP.pluginReadyType(n),name:n,events:Object.keys(e).filter((function(e){return!LP.includes(e)}))}),r[n]=!0),v=v.concat(n),e})).catch((function(e){if(e instanceof Error)throw new Error(e);return m=m.concat(e.name),e}))})),Promise.all(y).then((function(e){var t={plugins:v,failed:m,disabled:g};setTimeout((function(){p.length===y.length+g.length&&i.dispatch(CP(CP({},{type:DP.ready}),t))}),0)}))),u===DP.bootstrap){a.next=13;break}return/^ready:([^:]*)$/.test(u)&&setTimeout((function(){return nA(i,t,e)}),0),a.next=11,fA(s,t,e,i,n);case 11:return w=a.sent,a.abrupt("return",o(w));case 13:return a.abrupt("return",o(l));case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}}}function PA(e){return function(t){return function(t){return function(n){var r=n.type,i=n.key,o=n.value,a=n.options;if(r===DP.setItem||r===DP.removeItem){if(n.abort)return t(n);r===DP.setItem?e.setItem(i,o,a):e.removeItem(i,a)}return t(n)}}}}var AA,IA,MA,RA,BA=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},LA=function e(){var t=this;BA(this,e),EP(this,"before",[]),EP(this,"after",[]),EP(this,"addMiddleware",(function(e,n){t[n]=t[n].concat(e)})),EP(this,"removeMiddleware",(function(e,n){var r=t[n].findIndex((function(t){return t===e}));-1!==r&&(t[n]=[].concat(mP(t[n].slice(0,r)),mP(t[n].slice(r+1))))})),EP(this,"dynamicMiddlewares",(function(e){return function(n){return function(r){return function(i){var o={getState:n.getState,dispatch:function(e){return n.dispatch(e)}},a=t[e].map((function(e){return e(o)}));return MP.apply(void 0,mP(a))(r)(i)}}}}))};function DA(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r={};if("initialize:aborted"===n.type)return t;if(/^registerPlugin:([^:]*)$/.test(n.type)){var i=jA(n.type,"registerPlugin"),o=e()[i];if(!o||!i)return t;var a=n.enabled;return r[i]={enabled:a,initialized:!!a&&Boolean(!o.initialize),loaded:!!a&&Boolean(o.loaded()),config:o.config||{}},CP(CP({},t),r)}if(/^initialize:([^:]*)$/.test(n.type)){var s=jA(n.type,DP.initialize),u=e()[s];return u&&s?(r[s]=CP(CP({},t[s]),{initialized:!0,loaded:Boolean(u.loaded())}),CP(CP({},t),r)):t}if(/^ready:([^:]*)$/.test(n.type))return r[n.name]=CP(CP({},t[n.name]),{loaded:!0}),CP(CP({},t),r);switch(n.type){case DP.disablePlugin:return CP(CP({},t),zA(n.plugins,!1,t));case DP.enablePlugin:return CP(CP({},t),zA(n.plugins,!0,t));default:return t}}}function jA(e,t){return e.substring(t.length+1,e.length)}function zA(e,t,n){return e.reduce((function(e,r){return e[r]=CP(CP({},n[r]),{enabled:t}),e}),n)}AA=function(){if(!cP)return!1;var e=navigator.appVersion;return~e.indexOf("Win")?"Windows":~e.indexOf("Mac")?"MacOS":~e.indexOf("X11")?"UNIX":~e.indexOf("Linux")?"Linux":"Unknown OS"}(),IA=cP?document.referrer:null,MA=function(){if(cP){var e=navigator,t=e.language,n=e.languages;return e.userLanguage||(n&&n.length?n[0]:t)}}(),RA=function(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}}();var UA={initialized:!1,sessionId:fP(),app:null,version:null,debug:!1,offline:!!cP&&!navigator.onLine,os:{name:AA},userAgent:cP?navigator.userAgent:"node",library:{name:"analytics",version:"0.10.2"},timezone:RA,locale:MA,campaign:{},referrer:IA};function FA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:UA,t=arguments.length>1?arguments[1]:void 0,n=e.initialized,r=t.type,i=t.campaign;switch(r){case DP.campaign:return CP(CP({},e),{campaign:i});case DP.offline:return CP(CP({},e),{offline:!0});case DP.online:return CP(CP({},e),{offline:!1});default:return n?e:CP(CP(CP({},UA),e),{initialized:!0})}}var qA=["plugins","reducers","storage"];function KA(e){return Object.keys(e).reduce((function(t,n){return qA.includes(n)||(t[n]=e[n]),t}),{})}function HA(e){var t=e;try{t=JSON.parse(JSON.stringify(e))}catch(e){}return t}var $A=/#.*$/;function VA(e){var t=/(http[s]?:\/\/)?([^\/\s]+\/)(.*)/g.exec(e);return"/"+(t&&t[3]?t[3].split("?")[0].replace($A,""):"")}function GA(e){var t=function(){if(cP)for(var e,t=document.getElementsByTagName("link"),n=0;e=t[n];n++)if("canonical"===e.getAttribute("rel"))return e.getAttribute("href")}();return t?t.match(/\?/)?t:t+e:window.location.href.replace($A,"")}var WA=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!cP)return e;var t=document,n=t.title,r=t.referrer,i=window,o=i.location,a=i.innerWidth,s=i.innerHeight,u=o.hash,c=o.search,d=GA(c),l={title:n,url:d,path:VA(d),hash:u,search:c,width:a,height:s};return r&&""!==r&&(l.referrer=r),CP(CP({},l),e)},YA={last:{},history:[]};function QA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:YA,t=arguments.length>1?arguments[1]:void 0,n=t.properties,r=t.options,i=t.meta;switch(t.type){case DP.page:var o=HA(CP({properties:n,meta:i},Object.keys(r).length&&{options:r}));return CP(CP({},e),{last:o,history:e.history.concat(o)});default:return e}}var JA={last:{},history:[]};function XA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:JA,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.meta,i=t.options,o=t.event,a=t.properties;switch(n){case DP.track:var s=HA(CP(CP({event:o,properties:a},Object.keys(i).length&&{options:i}),{},{meta:r}));return CP(CP({},e),{last:s,history:e.history.concat(s)});default:return e}}var ZA={actions:[]};function eI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ZA,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"queue":var i;return i=r&&r.type&&r.type===DP.identify?[t].concat(e.actions):e.actions.concat(t),CP(CP({},e),{},{actions:i});case"dequeue":return[];default:return e}}function tI(e,t,n){if(!cP)return!1;var r=window[(n?"add":"remove")+"EventListener"];e.split(" ").forEach((function(e){r(e,t)}))}function nI(e){var t=tI.bind(null,"online offline",(function(t){return Promise.resolve(!navigator.onLine).then(e)}));return t(!0),function(e){return t(!1)}}function rI(){return Y_.__analytics__=[],function(e){return function(t,n,r){var i=e(t,n,r),o=i.dispatch;return Object.assign(i,{dispatch:function(e){var t=e.action||e;return Y_.__analytics__.push(t),o(e)}})}}}function iI(e){return function(){return MP(MP.apply(null,arguments),rI())}}function oI(e){return e?function(e){return Array.isArray(e)}(e)?e:[e]:[]}function aI(e){var t=e||Array.prototype.slice.call(arguments);return t.reduce((function(e,t){return e||(iP(t)?t:e)}),!1)}function sI(){return(new Date).getTime()}function uI(e,t){return function(n){t&&t(n),e(n)}}function cI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=fP();return t&&(ZP[r]=uI(t,aI(n))),CP(CP({},e),{},{rid:r,ts:sI()},t?{hasCallback:!0}:{})}function dI(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.reducers||{},n=e.initialUser||{},r=(e.plugins||[]).reduce((function(e,t){if(iP(t))return e.middlewares=e.middlewares.concat(t),e;if(t.NAMESPACE&&(t.name=t.NAMESPACE),!t.name)throw new Error("https://lytics.dev/errors/1");var n=t.EVENTS?Object.keys(t.EVENTS).map((function(e){return t.EVENTS[e]})):[],r=!(!1===t.enabled),i=!(t.config&&!1===t.config.enabled);e.pluginEnabled[t.name]=r&&i,delete t.enabled,t.methods&&(e.methods[t.name]=Object.keys(t.methods).reduce((function(e,n){return e[n]=z(t.methods[n]),e}),{}),delete t.methods);var o=Object.keys(t).concat(n),a=new Set(e.events.concat(o));if(e.events=Array.from(a),e.pluginsArray=e.pluginsArray.concat(t),e.plugins[t.name])throw new Error(t.name+"AlreadyLoaded");return e.plugins[t.name]=t,e.plugins[t.name].loaded||(e.plugins[t.name].loaded=function(){return!0}),e}),{plugins:{},pluginEnabled:{},methods:{},pluginsArray:[],middlewares:[],events:[]}),i=e.storage?e.storage:{getItem:function(e){return Y_[e]},setItem:function(e,t){return Y_[e]=t},removeItem:function(e){return Y_[e]=void 0}},o=JP(i),a=r.plugins,s=r.events.filter((function(e){return!LP.includes(e)})),u=new Set(s.concat(BP).filter((function(e){return!LP.includes(e)}))),c=Array.from(u).sort(),d=s.sort(),l=function(){return a},f=new LA,p=f.addMiddleware,h=f.removeMiddleware,v=f.dynamicMiddlewares,m=function(){throw new Error("Abort disabled inListener")},g=dP(),y=YP(i),w=CP(CP(CP(CP({},y),n),g.an_uid?{userId:g.an_uid}:{}),g.an_aid?{anonymousId:g.an_aid}:{});w.anonymousId||(w.anonymousId=fP());var b,S,E,k=CP({enable:function(e,t){return new Promise((function(n){R.dispatch({type:DP.enablePlugin,plugins:oI(e),_:{originalAction:DP.enablePlugin}},n,[t])}))},disable:function(e,t){return new Promise((function(n){R.dispatch({type:DP.disablePlugin,plugins:oI(e),_:{originalAction:DP.disablePlugin}},n,[t])}))}},r.methods),C={identify:(E=SP(wP.mark((function e(t,n,r,i){var a,s,u,c,d;return wP.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=oP(t)?t:null,s=sP(t)?t:n,u=r||{},c=C.user(),Y_[QP(zP)]=a,d=a||s.userId||o(zP,C,s),e.abrupt("return",new Promise((function(e){R.dispatch(CP({type:DP.identifyStart,userId:d,traits:s||{},options:u,anonymousId:c.anonymousId},c.id&&c.id!==a&&{previousId:c.id}),e,[n,r,i])})));case 7:case"end":return e.stop()}}),e)}))),function(e,t,n,r){return E.apply(this,arguments)}),track:(S=SP(wP.mark((function e(t,n,r,i){var a,s,u;return wP.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=sP(t)?t.event:t)&&oP(a)){e.next=3;break}throw new Error("EventMissing");case 3:return s=sP(t)?t:n||{},u=sP(r)?r:{},e.abrupt("return",new Promise((function(e){R.dispatch({type:DP.trackStart,event:a,properties:s,options:u,userId:o(zP,C,n),anonymousId:o(UP,C,n)},e,[n,r,i])})));case 6:case"end":return e.stop()}}),e)}))),function(e,t,n,r){return S.apply(this,arguments)}),page:(b=SP(wP.mark((function e(t,n,r){var i,a;return wP.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=sP(t)?t:{},a=sP(n)?n:{},e.abrupt("return",new Promise((function(e,s){R.dispatch({type:DP.pageStart,properties:WA(i),options:a,userId:o(zP,C,i),anonymousId:o(UP,C,i)},e,[t,n,r])})));case 3:case"end":return e.stop()}}),e)}))),function(e,t,n){return b.apply(this,arguments)}),user:function(e){if(e===zP||"id"===e)return o(zP,C);if(e===UP||"anonId"===e)return o(UP,C);var t=C.getState("user");return e?q_(t,e):t},reset:function(e){return new Promise((function(t,n){R.dispatch({type:DP.resetStart},t,e)}))},ready:function(e){return C.on(DP.ready,e)},on:function(e,t){if(!e||!iP(t))return!1;if(e===DP.bootstrap)throw new Error(".on disabled for "+e);var n=/Start$|Start:/;if("*"===e){var r=function(e){return function(e){return function(r){return r.type.match(n)&&t({payload:r,instance:C,plugins:a}),e(r)}}},i=function(e){return function(e){return function(r){return r.type.match(n)||t({payload:r,instance:C,plugins:a}),e(r)}}};return p(r,lI),p(i,fI),function(){h(r,lI),h(i,fI)}}var o=e.match(n)?lI:fI,s=function(n){return function(n){return function(r){return r.type===e&&t({payload:r,instance:C,plugins:a,abort:m}),n(r)}}};return p(s,o),function(){return h(s,o)}},once:function(e,t){if(!e||!iP(t))return!1;if(e===DP.bootstrap)throw new Error(".once disabled for "+e);var n=C.on(e,(function(e){var r=e.payload;t({payload:r,instance:C,plugins:a,abort:m}),n()}));return n},getState:function(e){var t=R.getState();return e?q_(t,e):Object.assign({},t)},dispatch:function(e){var t=oP(e)?{type:e}:e;if(jP(t.type))throw new Error("reserved action "+t.type);var n=e._||{},r=CP(CP({},t),{},{_:CP({originalAction:t.type},n)});R.dispatch(r)},enablePlugin:k.enable,disablePlugin:k.disable,plugins:k,storage:{getItem:i.getItem,setItem:function(e,t,n){R.dispatch({type:DP.setItemStart,key:e,value:t,options:n})},removeItem:function(e,t){R.dispatch({type:DP.removeItemStart,key:e,options:t})}},setAnonymousId:function(e,t){C.storage.setItem(FP,e,t)},events:{all:c,core:BP,plugins:d}},x=function(e){return function(e){return function(t){return t.meta||(t.meta=cI()),e(t)}}},T=r.middlewares.concat([x,v(lI),_A(C,l,{all:c,plugins:d}),PA(i),GP(C),XP(C),v(fI)]),N={context:FA,user:WP(i),page:QA,track:XA,plugins:DA(l),queue:eI},O=MP,_=MP;if(cP&&e.debug){var P=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;P&&(O=P({trace:!0,traceLimit:25})),_=function(){return 0===arguments.length?rI():sP(yP(arguments[0]))?iI():iI().apply(null,arguments)}}var A=KA(e),I=r.pluginsArray.reduce((function(e,t){var n=t.name,i=t.config,o=t.loaded,a=r.pluginEnabled[n];return e[n]={enabled:a,initialized:!!a&&Boolean(!t.initialize),loaded:Boolean(o()),config:i||{}},e}),{}),M={context:A,user:w,plugins:I},R=PP(IP(CP(CP({},N),t)),M,_(O(RP.apply(void 0,mP(T)))));function B(e){return function(t,n,r){var i=cI(t.meta,n,oI(r)),o=CP(CP({},t),{meta:i});return e.apply(null,[o])}}R.dispatch=B(R.dispatch);var L=Object.keys(a);R.dispatch({type:DP.bootstrap,plugins:L,config:A,params:g,user:w,persistedUser:y});var D=L.filter((function(e){return r.pluginEnabled[e]})),j=L.filter((function(e){return!r.pluginEnabled[e]}));function z(e){return function(){var t=Array.prototype.slice.call(arguments),n=Array.apply(null,Array(e.length)).map((function(){})).map((function(e,n){if(t[n]||!1===t[n]||null===t[n])return t[n]})).concat(C);return e.apply({instance:C},n)}}return R.dispatch({type:DP.registerPlugins,plugins:L,enabled:r.pluginEnabled}),r.pluginsArray.map((function(e,t){var n=e.bootstrap,i=e.config,o=e.name;n&&iP(n)&&n({instance:C,config:i,payload:e}),R.dispatch({type:DP.registerPluginType(o),name:o,enabled:r.pluginEnabled[o],plugin:e}),r.pluginsArray.length===t+1&&R.dispatch({type:DP.initializeStart,plugins:D,disabled:j})})),nI((function(e){R.dispatch({type:e?DP.offline:DP.online})})),rA(R,l,C),C}var lI="before",fI="after";var pI=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e};function hI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var vI=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hI(n,!0).forEach((function(t){pI(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hI(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e};function mI(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){mI(e,t,n[t])}))}return e}var yI={writeKey:null,disableAnonymousTraffic:!1,syncAnonymousId:!1,integrations:{}};var wI=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:"segment",config:gI({},yI,e),methods:{group:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;void 0!==window.analytics&&window.analytics.group(e,t,n,r)}},bootstrap:function(e){var t=e.config,n=e.instance;t.disableAnonymousTraffic&&!n.user("userId")&&n.once("identifyStart",(function(e){e.plugins.segment.loaded()||n.loadPlugin("segment")}))},initialize:function(e){var t=e.config,n=e.instance;e.payload;var r=t.disableAnonymousTraffic,i=t.writeKey,o=t.customScriptSrc;if(!i)throw new Error("No segment writeKey");if(!n.user("userId")&&r)return!1;!function(){var e=window.analytics=window.analytics||[];if(!e.initialize&&!function(){var e=document.getElementsByTagName("script"),t=o||"cdn.segment.com/analytics.js/v1/";return!!Object.keys(e).filter((function(n){return((e[n]||{}).src||"").indexOf(t)>-1})).length}()){e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"],e.factory=function(t){return function(){var n=Array.prototype.slice.call(arguments);return n.unshift(t),e.push(n),e}};for(var t=0;t<e.methods.length;t++){var n=e.methods[t];e[n]=e.factory(n)}e.load=function(t,n){var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src=o||"https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js",r.id="segment-io";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(r,i),e._loadOptions=n},e.SNIPPET_VERSION="4.1.0",e.load(i)}}()},page:function(e){var t=e.payload,n=e.config;"undefined"!=typeof analytics&&analytics.page(t.properties,gI({integrations:n.integrations},t.options))},track:function(e){var t=e.payload,n=e.config;"undefined"!=typeof analytics&&analytics.track(t.event,t.properties,gI({integrations:n.integrations},t.options))},identify:function(e){var t=e.payload,n=e.config;if("undefined"!=typeof analytics){var r=t.userId,i=t.traits,o=t.options;"string"==typeof r?analytics.identify(r,i,gI({integrations:n.integrations},o)):analytics.identify(i,gI({integrations:n.integrations},o))}},reset:function(){analytics.reset()},ready:function(e){var t=e.instance;if(e.config.syncAnonymousId&&"undefined"!=typeof analytics){var n=analytics.user();if(n){var r=n.anonymousId(),i=t.user("anonymousId");r&&r!==i&&t.setAnonymousId(r)}}},loaded:function(){return window.analytics&&!!analytics.initialized}}};const bI=(e,t)=>{const{segmentWriteKey:n,app:r,baseContext:i}=e;let o=i||{};if(!n)throw new Error("segmentWriteKey must be provided to analytics.");if(!r)throw new Error("app must be provided to analytics.");const a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return dI(vI(vI({},{storage:nP}),e))}({app:r,plugins:[wI({writeKey:n})]});let s;return a.ready((()=>{void 0!==window.analytics&&void 0!==window.analytics.user||t.warn("Segment failed to load."),s=(()=>{const e=Mi.get("ajs_anonymous_id"),t=(e||"").replace(/"/g,"");if(e&&"null"!==t&&"undefined"!==t)return t;const n=Dc();return Mi.set("ajs_anonymous_id",`"${n}"`,{domain:window.location.hostname,expires:365,secure:!0,sameSite:"none"}),n})()})),{getAnonymousId:()=>{const e=new Date;return new Promise((n=>{const r=setInterval((()=>{if(s)return clearInterval(r),n(s);(new Date).getTime()-e.getTime()>3e3&&(clearInterval(r),t.warn("getAnonymousId call timed out."),n(void 0))}),200)}))},identify:(e,t)=>{a.identify(e,t)},track:(e,t={},n={})=>{const r=Object.assign({event:e},n);r.properties=Object.assign(Object.assign({},o),t),a.track(e,r)},addToBaseContext:e=>{o=Object.assign(Object.assign({},o),e)}}};function SI(){return(SI=Object.assign||function(e){var t,n,r;for(t=1;t<arguments.length;t++)for(r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)}function EI(e){return e&&e.networkError}function kI(e){var t=e.initialDelayMs||1e3,n=e.maxDelayMs||15e3,r=e.maxNumberAttempts||2,i=e.randomDelay||!0,o=e.retryIf||EI;return function(e){var a=e.forward;return e.dispatchDebug,function(e){var s,u,c=ki(e);return s=(e=wi()).source,u=e.next,e=ci((function(e){var r,o=e.key,a=e.context,s=(a.retryCount||0)+1;return a=a.retryDelay||t,r=Math.random()+1.5,i&&a*r<n&&(a*=r),xi(r=mi((function(e){return("query"===e.kind||"teardown"===e.kind)&&e.key===o}))(c))(function(e){return function(t){return function(n){let r=0;return t((function(t){"number"==typeof t||t.tag?(r=r+1|0,setTimeout((function(){0!==r&&(r=r-1|0,n(t))}),e)):n(t)}))}}}(a)(gi(k_(e.kind,e,SI({},e.context,{retryDelay:a,retryCount:s})))))}))(s),mi((function(e){return!e.error||!o(e.error,e.operation)||((e.operation.context.retryCount||0)>=r-1||(u(e.operation),!1))}))(ki(a(Si([c,e]))))}}}var CI=xI;function xI(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}xI.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},xI.prototype.reset=function(){this.attempts=0},xI.prototype.setMin=function(e){this.ms=e},xI.prototype.setMax=function(e){this.max=e},xI.prototype.setJitter=function(e){this.jitter=e};var TI=Vr((function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var u,c,d=this._events[s],l=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),l){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,i),!0;case 5:return d.fn.call(d.context,t,r,i,o),!0;case 6:return d.fn.call(d.context,t,r,i,o,a),!0}for(c=1,u=new Array(l-1);c<l;c++)u[c-1]=arguments[c];d.fn.apply(d.context,u)}else{var f,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),l){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,r);break;case 4:d[c].fn.call(d[c].context,t,r,i);break;default:if(!u)for(f=1,u=new Array(l-1);f<l;f++)u[f-1]=arguments[f];d[c].fn.apply(d[c].context,u)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var u=0,c=[],d=s.length;u<d;u++)(s[u].fn!==t||i&&!s[u].once||r&&s[u].context!==r)&&c.push(s[u]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}));var NI={default:function(e){return"string"==typeof e}};var OI={default:function(e){return null!==e&&"object"==typeof e}};var _I=Object.freeze({__proto__:null,getOperationAST:function(e,t){for(var n=null,r=0,i=e.definitions;r<i.length;r++){var o,a=i[r];if(a.kind===lr.OPERATION_DEFINITION)if(null==t){if(n)return null;n=a}else if((null===(o=a.name)||void 0===o?void 0:o.value)===t)return a}return n}}),PI=Vr((function(e,t){t.GRAPHQL_SUBSCRIPTIONS=t.GRAPHQL_WS=void 0;t.GRAPHQL_WS="graphql-ws";t.GRAPHQL_SUBSCRIPTIONS="graphql-subscriptions"})),AI=Vr((function(e,t){t.WS_TIMEOUT=t.MIN_WS_TIMEOUT=void 0;t.MIN_WS_TIMEOUT=1e3;t.WS_TIMEOUT=3e4})),II={default:function(){function e(){throw new Error("Static Class")}return e.GQL_CONNECTION_INIT="connection_init",e.GQL_CONNECTION_ACK="connection_ack",e.GQL_CONNECTION_ERROR="connection_error",e.GQL_CONNECTION_KEEP_ALIVE="ka",e.GQL_CONNECTION_TERMINATE="connection_terminate",e.GQL_START="start",e.GQL_DATA="data",e.GQL_ERROR="error",e.GQL_COMPLETE="complete",e.GQL_STOP="stop",e.SUBSCRIPTION_START="subscription_start",e.SUBSCRIPTION_DATA="subscription_data",e.SUBSCRIPTION_SUCCESS="subscription_success",e.SUBSCRIPTION_FAIL="subscription_fail",e.SUBSCRIPTION_END="subscription_end",e.INIT="init",e.INIT_SUCCESS="init_success",e.INIT_FAIL="init_fail",e.KEEP_ALIVE="keepalive",e}()},MI=$r(o_),RI=$r(_I),BI=$r(J),LI=Vr((function(e,t){var n=Kr&&Kr.__assign||function(){return(n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},r=Kr&&Kr.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},i=Kr&&Kr.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},o=Kr&&Kr.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};t.SubscriptionClient=void 0;var a=void 0!==Kr?Kr:"undefined"!=typeof window?window:{},s=a.WebSocket||a.MozWebSocket,u=function(){function e(e,t,n,r){var i=t||{},o=i.connectionCallback,a=void 0===o?void 0:o,u=i.connectionParams,c=void 0===u?{}:u,d=i.minTimeout,l=void 0===d?AI.MIN_WS_TIMEOUT:d,f=i.timeout,p=void 0===f?AI.WS_TIMEOUT:f,h=i.reconnect,v=void 0!==h&&h,m=i.reconnectionAttempts,g=void 0===m?1/0:m,y=i.lazy,w=void 0!==y&&y,b=i.inactivityTimeout,S=void 0===b?0:b,E=i.wsOptionArguments,k=void 0===E?[]:E;if(this.wsImpl=n||s,!this.wsImpl)throw new Error("Unable to find native implementation, or alternative implementation for WebSocket!");this.wsProtocols=r||PI.GRAPHQL_WS,this.connectionCallback=a,this.url=e,this.operations={},this.nextOperationId=0,this.minWsTimeout=l,this.wsTimeout=p,this.unsentMessagesQueue=[],this.reconnect=v,this.reconnecting=!1,this.reconnectionAttempts=g,this.lazy=!!w,this.inactivityTimeout=S,this.closedByUser=!1,this.backoff=new CI({jitter:.5}),this.eventEmitter=new TI.EventEmitter,this.middlewares=[],this.client=null,this.maxConnectTimeGenerator=this.createMaxConnectTimeGenerator(),this.connectionParams=this.getConnectionParams(c),this.wsOptionArguments=k,this.lazy||this.connect()}return Object.defineProperty(e.prototype,"status",{get:function(){return null===this.client?this.wsImpl.CLOSED:this.client.readyState},enumerable:!1,configurable:!0}),e.prototype.close=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),this.clearInactivityTimeout(),null!==this.client&&(this.closedByUser=t,e&&(this.clearCheckConnectionInterval(),this.clearMaxConnectTimeout(),this.clearTryReconnectTimeout(),this.unsubscribeAll(),this.sendMessage(void 0,II.default.GQL_CONNECTION_TERMINATE,null)),this.client.close(),this.client.onopen=null,this.client.onclose=null,this.client.onerror=null,this.client.onmessage=null,this.client=null,this.eventEmitter.emit("disconnected"),e||this.tryReconnect())},e.prototype.request=function(e){var t,n,r=this.getObserver.bind(this),i=this.executeOperation.bind(this),o=this.unsubscribe.bind(this);return this.clearInactivityTimeout(),(t={})[BI.default]=function(){return this},t.subscribe=function(t,a,s){var u=r(t,a,s);return n=i(e,(function(e,t){null===e&&null===t?u.complete&&u.complete():e?u.error&&u.error(e[0]):u.next&&u.next(t)})),{unsubscribe:function(){n&&(o(n),n=null)}}},t},e.prototype.on=function(e,t,n){var r=this.eventEmitter.on(e,t,n);return function(){r.off(e,t,n)}},e.prototype.onConnected=function(e,t){return this.on("connected",e,t)},e.prototype.onConnecting=function(e,t){return this.on("connecting",e,t)},e.prototype.onDisconnected=function(e,t){return this.on("disconnected",e,t)},e.prototype.onReconnected=function(e,t){return this.on("reconnected",e,t)},e.prototype.onReconnecting=function(e,t){return this.on("reconnecting",e,t)},e.prototype.onError=function(e,t){return this.on("error",e,t)},e.prototype.unsubscribeAll=function(){var e=this;Object.keys(this.operations).forEach((function(t){e.unsubscribe(t)}))},e.prototype.applyMiddlewares=function(e){var t=this;return new Promise((function(n,r){var i,a,s;i=o(t.middlewares),a=t,(s=function(t){if(t)r(t);else if(i.length>0){var o=i.shift();o&&o.applyMiddleware.apply(a,[e,s])}else n(e)})()}))},e.prototype.use=function(e){var t=this;return e.map((function(e){if("function"!=typeof e.applyMiddleware)throw new Error("Middleware must implement the applyMiddleware function.");t.middlewares.push(e)})),this},e.prototype.getConnectionParams=function(e){return function(){return new Promise((function(t,n){if("function"==typeof e)try{return t(e.call(null))}catch(e){return n(e)}t(e)}))}},e.prototype.executeOperation=function(e,t){var n=this;null===this.client&&this.connect();var r=this.generateOperationId();return this.operations[r]={options:e,handler:t},this.applyMiddlewares(e).then((function(e){n.checkOperationOptions(e,t),n.operations[r]&&(n.operations[r]={options:e,handler:t},n.sendMessage(r,II.default.GQL_START,e))})).catch((function(e){n.unsubscribe(r),t(n.formatErrors(e))})),r},e.prototype.getObserver=function(e,t,n){return"function"==typeof e?{next:function(t){return e(t)},error:function(e){return t&&t(e)},complete:function(){return n&&n()}}:e},e.prototype.createMaxConnectTimeGenerator=function(){var e=this.minWsTimeout,t=this.wsTimeout;return new CI({min:e,max:t,factor:1.2})},e.prototype.clearCheckConnectionInterval=function(){this.checkConnectionIntervalId&&(clearInterval(this.checkConnectionIntervalId),this.checkConnectionIntervalId=null)},e.prototype.clearMaxConnectTimeout=function(){this.maxConnectTimeoutId&&(clearTimeout(this.maxConnectTimeoutId),this.maxConnectTimeoutId=null)},e.prototype.clearTryReconnectTimeout=function(){this.tryReconnectTimeoutId&&(clearTimeout(this.tryReconnectTimeoutId),this.tryReconnectTimeoutId=null)},e.prototype.clearInactivityTimeout=function(){this.inactivityTimeoutId&&(clearTimeout(this.inactivityTimeoutId),this.inactivityTimeoutId=null)},e.prototype.setInactivityTimeout=function(){var e=this;this.inactivityTimeout>0&&0===Object.keys(this.operations).length&&(this.inactivityTimeoutId=setTimeout((function(){0===Object.keys(e.operations).length&&e.close()}),this.inactivityTimeout))},e.prototype.checkOperationOptions=function(e,t){var n=e.query,r=e.variables,i=e.operationName;if(!n)throw new Error("Must provide a query.");if(!t)throw new Error("Must provide an handler.");if(!NI.default(n)&&!RI.getOperationAST(n,i)||i&&!NI.default(i)||r&&!OI.default(r))throw new Error("Incorrect option types. query must be a string or a document,`operationName` must be a string, and `variables` must be an object.")},e.prototype.buildMessage=function(e,t,r){return{id:e,type:t,payload:r&&r.query?n(n({},r),{query:"string"==typeof r.query?r.query:MI.print(r.query)}):r}},e.prototype.formatErrors=function(e){return Array.isArray(e)?e:e&&e.errors?this.formatErrors(e.errors):e&&e.message?[e]:[{name:"FormatedError",message:"Unknown error",originalError:e}]},e.prototype.sendMessage=function(e,t,n){this.sendMessageRaw(this.buildMessage(e,t,n))},e.prototype.sendMessageRaw=function(e){switch(this.status){case this.wsImpl.OPEN:var t=JSON.stringify(e);try{JSON.parse(t)}catch(t){this.eventEmitter.emit("error",new Error("Message must be JSON-serializable. Got: "+e))}this.client.send(t);break;case this.wsImpl.CONNECTING:this.unsentMessagesQueue.push(e);break;default:this.reconnecting||this.eventEmitter.emit("error",new Error("A message was not sent because socket is not connected, is closing or is already closed. Message was: "+JSON.stringify(e)))}},e.prototype.generateOperationId=function(){return String(++this.nextOperationId)},e.prototype.tryReconnect=function(){var e=this;if(this.reconnect&&!(this.backoff.attempts>=this.reconnectionAttempts)){this.reconnecting||(Object.keys(this.operations).forEach((function(t){e.unsentMessagesQueue.push(e.buildMessage(t,II.default.GQL_START,e.operations[t].options))})),this.reconnecting=!0),this.clearTryReconnectTimeout();var t=this.backoff.duration();this.tryReconnectTimeoutId=setTimeout((function(){e.connect()}),t)}},e.prototype.flushUnsentMessagesQueue=function(){var e=this;this.unsentMessagesQueue.forEach((function(t){e.sendMessageRaw(t)})),this.unsentMessagesQueue=[]},e.prototype.checkConnection=function(){this.wasKeepAliveReceived?this.wasKeepAliveReceived=!1:this.reconnecting||this.close(!1,!0)},e.prototype.checkMaxConnectTimeout=function(){var e=this;this.clearMaxConnectTimeout(),this.maxConnectTimeoutId=setTimeout((function(){e.status!==e.wsImpl.OPEN&&(e.reconnecting=!0,e.close(!1,!0))}),this.maxConnectTimeGenerator.duration())},e.prototype.connect=function(){var e,t=this;this.client=new((e=this.wsImpl).bind.apply(e,o([void 0,this.url,this.wsProtocols],this.wsOptionArguments))),this.checkMaxConnectTimeout(),this.client.onopen=function(){return r(t,void 0,void 0,(function(){var e,t;return i(this,(function(n){switch(n.label){case 0:if(this.status!==this.wsImpl.OPEN)return[3,4];this.clearMaxConnectTimeout(),this.closedByUser=!1,this.eventEmitter.emit(this.reconnecting?"reconnecting":"connecting"),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.connectionParams()];case 2:return e=n.sent(),this.sendMessage(void 0,II.default.GQL_CONNECTION_INIT,e),this.flushUnsentMessagesQueue(),[3,4];case 3:return t=n.sent(),this.sendMessage(void 0,II.default.GQL_CONNECTION_ERROR,t),this.flushUnsentMessagesQueue(),[3,4];case 4:return[2]}}))}))},this.client.onclose=function(){t.closedByUser||t.close(!1,!1)},this.client.onerror=function(e){t.eventEmitter.emit("error",e)},this.client.onmessage=function(e){var n=e.data;t.processReceivedData(n)}},e.prototype.processReceivedData=function(e){var t,r;try{r=(t=JSON.parse(e)).id}catch(t){throw new Error("Message must be JSON-parseable. Got: "+e)}if(-1===[II.default.GQL_DATA,II.default.GQL_COMPLETE,II.default.GQL_ERROR].indexOf(t.type)||this.operations[r])switch(t.type){case II.default.GQL_CONNECTION_ERROR:this.connectionCallback&&this.connectionCallback(t.payload);break;case II.default.GQL_CONNECTION_ACK:this.eventEmitter.emit(this.reconnecting?"reconnected":"connected",t.payload),this.reconnecting=!1,this.backoff.reset(),this.maxConnectTimeGenerator.reset(),this.connectionCallback&&this.connectionCallback();break;case II.default.GQL_COMPLETE:var i=this.operations[r].handler;delete this.operations[r],i.call(this,null,null);break;case II.default.GQL_ERROR:this.operations[r].handler(this.formatErrors(t.payload),null),delete this.operations[r];break;case II.default.GQL_DATA:var o=t.payload.errors?n(n({},t.payload),{errors:this.formatErrors(t.payload.errors)}):t.payload;this.operations[r].handler(null,o);break;case II.default.GQL_CONNECTION_KEEP_ALIVE:var a=void 0===this.wasKeepAliveReceived;this.wasKeepAliveReceived=!0,a&&this.checkConnection(),this.checkConnectionIntervalId&&(clearInterval(this.checkConnectionIntervalId),this.checkConnection()),this.checkConnectionIntervalId=setInterval(this.checkConnection.bind(this),this.wsTimeout);break;default:throw new Error("Invalid message type!")}else this.unsubscribe(r)},e.prototype.unsubscribe=function(e){this.operations[e]&&(delete this.operations[e],this.setInactivityTimeout(),this.sendMessage(e,II.default.GQL_STOP,void 0))},e}();t.SubscriptionClient=u}));const DI=(e,{uri:t,wsUri:n},r)=>{const i=[M_,A_,kI({}),L_,F_({onError(t,n){r.error(`[${e}]: Graphql Query error`,{error:t,operation:n})}})];if(n){const t=new LI.SubscriptionClient(n,{connectionParams:{headers:{"apollographql-client-name":e}},reconnect:!1,minTimeout:1e4,connectionCallback:e=>{r.crumb({level:Ce.Debug,message:"✅ WS connectionCallback",context:{}}),e&&r.error("❌ WS connectionCallback error:",{err:e})}});i.push(function(e){function t(e){return"subscription"===(e=e.kind)||!!r&&("query"===e||"mutation"===e)}var n=e.forwardSubscription,r=e.enableAllOperations;return function(e){function r(e){var t=n({key:e.key.toString(36),query:HO(e.query),variables:e.variables,context:m_({},e.context)});return yi((function(n){function r(t){return u(h_(e,t))}function i(t){return u(v_(e,t))}function a(){d||(d=!0,"subscription"===e.kind&&o.reexecuteOperation(k_("teardown",e,e.context)),c())}var s,u=n.next,c=n.complete,d=!1;return Promise.resolve().then((function(){d||(s=t.subscribe({next:r,error:i,complete:a}))})),function(){d=!0,s&&s.unsubscribe()}}))}function i(e){return!s(e)}var o=e.client,a=e.forward,s=t;return function(e){var t=ki(e);return Si([e=ci((function(e){var n=e.key;return xi(mi((function(e){return"teardown"===e.kind&&e.key===n}))(t))(r(e))}))(mi(s)(t)),a(mi(i)(t))])}}}({forwardSubscription:e=>t.request(e)}))}return function(e){return new z_(e)}({url:t,fetchOptions:{headers:{"apollographql-client-name":e}},exchanges:i})};var jI,zI,UI;function FI(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return QI(e,Error)}}function qI(e){return"[object ErrorEvent]"===Object.prototype.toString.call(e)}function KI(e){return"[object DOMError]"===Object.prototype.toString.call(e)}function HI(e){return"[object String]"===Object.prototype.toString.call(e)}function $I(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function VI(e){return"[object Object]"===Object.prototype.toString.call(e)}function GI(e){return"undefined"!=typeof Event&&QI(e,Event)}function WI(e){return"undefined"!=typeof Element&&QI(e,Element)}function YI(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function QI(e,t){try{return e instanceof t}catch(e){return!1}}function JI(e){try{for(var t=e,n=[],r=0,i=0,o=" > ".length,a=void 0;t&&r++<5&&!("html"===(a=XI(t))||r>1&&i+n.length*o+a.length>=80);)n.push(a),i+=a.length,t=t.parentNode;return n.reverse().join(" > ")}catch(e){return"<unknown>"}}function XI(e){var t,n,r,i,o,a=e,s=[];if(!a||!a.tagName)return"";if(s.push(a.tagName.toLowerCase()),a.id&&s.push("#"+a.id),(t=a.className)&&HI(t))for(n=t.split(/\s+/),o=0;o<n.length;o++)s.push("."+n[o]);var u=["type","name","title","alt"];for(o=0;o<u.length;o++)r=u[o],(i=a.getAttribute(r))&&s.push("["+r+'="'+i+'"]');return s.join("")}!function(e){e.Ok="ok",e.Exited="exited",e.Crashed="crashed",e.Abnormal="abnormal"}(jI||(jI={})),function(e){e.Fatal="fatal",e.Error="error",e.Warning="warning",e.Log="log",e.Info="info",e.Debug="debug",e.Critical="critical"}(zI||(zI={})),function(e){e.fromString=function(t){switch(t){case"debug":return e.Debug;case"info":return e.Info;case"warn":case"warning":return e.Warning;case"error":return e.Error;case"fatal":return e.Fatal;case"critical":return e.Critical;case"log":default:return e.Log}}}(zI||(zI={})),function(e){e.Unknown="unknown",e.Skipped="skipped",e.Success="success",e.RateLimit="rate_limit",e.Invalid="invalid",e.Failed="failed"}(UI||(UI={})),function(e){e.fromHttpCode=function(t){return t>=200&&t<300?e.Success:429===t?e.RateLimit:t>=400&&t<500?e.Invalid:t>=500?e.Failed:e.Unknown}}(UI||(UI={}));var ZI=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);return e});var eM=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return r.message=t,r.name=n.prototype.constructor.name,ZI(r,n.prototype),r}return Gs(t,e),t}(Error),tM=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,nM=function(){function e(e){"string"==typeof e?this._fromString(e):this._fromComponents(e),this._validate()}return e.prototype.toString=function(e){void 0===e&&(e=!1);var t=this,n=t.host,r=t.path,i=t.pass,o=t.port,a=t.projectId;return t.protocol+"://"+t.user+(e&&i?":"+i:"")+"@"+n+(o?":"+o:"")+"/"+(r?r+"/":r)+a},e.prototype._fromString=function(e){var t=tM.exec(e);if(!t)throw new eM("Invalid Dsn");var n=Js(t.slice(1),6),r=n[0],i=n[1],o=n[2],a=void 0===o?"":o,s=n[3],u=n[4],c=void 0===u?"":u,d="",l=n[5],f=l.split("/");if(f.length>1&&(d=f.slice(0,-1).join("/"),l=f.pop()),l){var p=l.match(/^\d+/);p&&(l=p[0])}this._fromComponents({host:s,pass:a,path:d,projectId:l,port:c,protocol:r,user:i})},e.prototype._fromComponents=function(e){this.protocol=e.protocol,this.user=e.user,this.pass=e.pass||"",this.host=e.host,this.port=e.port||"",this.path=e.path||"",this.projectId=e.projectId},e.prototype._validate=function(){var e=this;if(["protocol","user","host","projectId"].forEach((function(t){if(!e[t])throw new eM("Invalid Dsn: "+t+" missing")})),!this.projectId.match(/^\d+$/))throw new eM("Invalid Dsn: Invalid projectId "+this.projectId);if("http"!==this.protocol&&"https"!==this.protocol)throw new eM("Invalid Dsn: Invalid protocol "+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new eM("Invalid Dsn: Invalid port "+this.port)},e}(),rM=function(){function e(){this._hasWeakSet="function"==typeof WeakSet,this._inner=this._hasWeakSet?new WeakSet:[]}return e.prototype.memoize=function(e){if(this._hasWeakSet)return!!this._inner.has(e)||(this._inner.add(e),!1);for(var t=0;t<this._inner.length;t++){if(this._inner[t]===e)return!0}return this._inner.push(e),!1},e.prototype.unmemoize=function(e){if(this._hasWeakSet)this._inner.delete(e);else for(var t=0;t<this._inner.length;t++)if(this._inner[t]===e){this._inner.splice(t,1);break}},e}();function iM(e){try{return e&&"function"==typeof e&&e.name||"<anonymous>"}catch(e){return"<anonymous>"}}function oM(e,t){return void 0===t&&(t=0),"string"!=typeof e||0===t||e.length<=t?e:e.substr(0,t)+"..."}function aM(e,t){if(!Array.isArray(e))return"";for(var n=[],r=0;r<e.length;r++){var i=e[r];try{n.push(String(i))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function sM(e,t){return!!HI(e)&&(n=t,"[object RegExp]"===Object.prototype.toString.call(n)?t.test(e):"string"==typeof t&&-1!==e.indexOf(t));var n}function uM(e,t,n){if(t in e){var r=e[t],i=n(r);if("function"==typeof i)try{i.prototype=i.prototype||{},Object.defineProperties(i,{__sentry_original__:{enumerable:!1,value:r}})}catch(e){}e[t]=i}}function cM(e){if(FI(e)){var t=e,n={message:t.message,name:t.name,stack:t.stack};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}if(GI(e)){var i=e,o={};o.type=i.type;try{o.target=WI(i.target)?JI(i.target):Object.prototype.toString.call(i.target)}catch(e){o.target="<unknown>"}try{o.currentTarget=WI(i.currentTarget)?JI(i.currentTarget):Object.prototype.toString.call(i.currentTarget)}catch(e){o.currentTarget="<unknown>"}for(var r in"undefined"!=typeof CustomEvent&&QI(e,CustomEvent)&&(o.detail=i.detail),i)Object.prototype.hasOwnProperty.call(i,r)&&(o[r]=i);return o}return e}function dM(e){return function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(e))}function lM(e,t,n){void 0===t&&(t=3),void 0===n&&(n=102400);var r=hM(e,t);return dM(r)>n?lM(e,t-1,n):r}function fM(t,n){return"domain"===n&&t&&"object"==typeof t&&t._events?"[Domain]":"domainEmitter"===n?"[DomainEmitter]":void 0!==e&&t===e?"[Global]":"undefined"!=typeof window&&t===window?"[Window]":"undefined"!=typeof document&&t===document?"[Document]":VI(r=t)&&"nativeEvent"in r&&"preventDefault"in r&&"stopPropagation"in r?"[SyntheticEvent]":"number"==typeof t&&t!=t?"[NaN]":void 0===t?"[undefined]":"function"==typeof t?"[Function: "+iM(t)+"]":"symbol"==typeof t?"["+String(t)+"]":"bigint"==typeof t?"[BigInt: "+String(t)+"]":t;var r}function pM(e,t,n,r){if(void 0===n&&(n=1/0),void 0===r&&(r=new rM),0===n)return function(e){var t=Object.prototype.toString.call(e);if("string"==typeof e)return e;if("[object Object]"===t)return"[Object]";if("[object Array]"===t)return"[Array]";var n=fM(e);return $I(n)?n:t}(t);if(null!=t&&"function"==typeof t.toJSON)return t.toJSON();var i=fM(t,e);if($I(i))return i;var o=cM(t),a=Array.isArray(t)?[]:{};if(r.memoize(t))return"[Circular ~]";for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(a[s]=pM(s,o[s],n-1,r));return r.unmemoize(t),a}function hM(e,t){try{return JSON.parse(JSON.stringify(e,(function(e,n){return pM(e,n,t)})))}catch(e){return"**non-serializable**"}}function vM(e,t){void 0===t&&(t=40);var n=Object.keys(cM(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return oM(n[0],t);for(var r=n.length;r>0;r--){var i=n.slice(0,r).join(", ");if(!(i.length>t))return r===n.length?i:oM(i,t)}return""}function mM(e){var t,n;if(VI(e)){var r=e,i={};try{for(var o=Qs(Object.keys(r)),a=o.next();!a.done;a=o.next()){var s=a.value;void 0!==r[s]&&(i[s]=mM(r[s]))}}catch(e){t={error:e}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}return Array.isArray(e)?e.map(mM):e}function gM(){return"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}var yM={};function wM(){return gM()?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:yM}function bM(){var e=wM(),t=e.crypto||e.msCrypto;if(void 0!==t&&t.getRandomValues){var n=new Uint16Array(8);t.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var r=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return r(n[0])+r(n[1])+r(n[2])+r(n[3])+r(n[4])+r(n[5])+r(n[6])+r(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function SM(e){if(!e)return{};var t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+n+r}}function EM(e){if(e.message)return e.message;if(e.exception&&e.exception.values&&e.exception.values[0]){var t=e.exception.values[0];return t.type&&t.value?t.type+": "+t.value:t.type||t.value||e.event_id||"<unknown>"}return e.event_id||"<unknown>"}function kM(e){var t=wM();if(!("console"in t))return e();var n=t.console,r={};["debug","info","warn","error","log","assert"].forEach((function(e){e in t.console&&n[e].__sentry_original__&&(r[e]=n[e],n[e]=n[e].__sentry_original__)}));var i=e();return Object.keys(r).forEach((function(e){n[e]=r[e]})),i}function CM(e,t,n){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].value=e.exception.values[0].value||t||"",e.exception.values[0].type=e.exception.values[0].type||n||"Error"}function xM(e,t){void 0===t&&(t={});try{e.exception.values[0].mechanism=e.exception.values[0].mechanism||{},Object.keys(t).forEach((function(n){e.exception.values[0].mechanism[n]=t[n]}))}catch(e){}}var TM=wM(),NM="Sentry Logger ",OM=function(){function e(){this._enabled=!1}return e.prototype.disable=function(){this._enabled=!1},e.prototype.enable=function(){this._enabled=!0},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&kM((function(){TM.console.log(NM+"[Log]: "+e.join(" "))}))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&kM((function(){TM.console.warn(NM+"[Warn]: "+e.join(" "))}))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&kM((function(){TM.console.error(NM+"[Error]: "+e.join(" "))}))},e}();TM.__SENTRY__=TM.__SENTRY__||{};var _M=TM.__SENTRY__.logger||(TM.__SENTRY__.logger=new OM);function PM(){if(!("fetch"in wM()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function AM(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function IM(){if(!PM())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(e){return!1}}var MM,RM=wM(),BM={},LM={};function DM(e){if(!LM[e])switch(LM[e]=!0,e){case"console":!function(){if(!("console"in RM))return;["debug","info","warn","error","log","assert"].forEach((function(e){e in RM.console&&uM(RM.console,e,(function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];zM("console",{args:n,level:e}),t&&Function.prototype.apply.call(t,RM.console,n)}}))}))}();break;case"dom":!function(){if(!("document"in RM))return;RM.document.addEventListener("click",$M("click",zM.bind(null,"dom")),!1),RM.document.addEventListener("keypress",VM(zM.bind(null,"dom")),!1),["EventTarget","Node"].forEach((function(e){var t=RM[e]&&RM[e].prototype;t&&t.hasOwnProperty&&t.hasOwnProperty("addEventListener")&&(uM(t,"addEventListener",(function(e){return function(t,n,r){return n&&n.handleEvent?("click"===t&&uM(n,"handleEvent",(function(e){return function(t){return $M("click",zM.bind(null,"dom"))(t),e.call(this,t)}})),"keypress"===t&&uM(n,"handleEvent",(function(e){return function(t){return VM(zM.bind(null,"dom"))(t),e.call(this,t)}}))):("click"===t&&$M("click",zM.bind(null,"dom"),!0)(this),"keypress"===t&&VM(zM.bind(null,"dom"))(this)),e.call(this,t,n,r)}})),uM(t,"removeEventListener",(function(e){return function(t,n,r){try{e.call(this,t,n.__sentry_wrapped__,r)}catch(e){}return e.call(this,t,n,r)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in RM))return;var e=[],t=[],n=XMLHttpRequest.prototype;uM(n,"open",(function(n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=this,a=r[1];o.__sentry_xhr__={method:HI(r[0])?r[0].toUpperCase():r[0],url:r[1]},HI(a)&&"POST"===o.__sentry_xhr__.method&&a.match(/sentry_key/)&&(o.__sentry_own_request__=!0);var s=function(){if(4===o.readyState){try{o.__sentry_xhr__&&(o.__sentry_xhr__.status_code=o.status)}catch(e){}try{var n=e.indexOf(o);if(-1!==n){e.splice(n);var i=t.splice(n)[0];o.__sentry_xhr__&&void 0!==i[0]&&(o.__sentry_xhr__.body=i[0])}}catch(e){}zM("xhr",{args:r,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:o})}};return"onreadystatechange"in o&&"function"==typeof o.onreadystatechange?uM(o,"onreadystatechange",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return s(),e.apply(o,t)}})):o.addEventListener("readystatechange",s),n.apply(o,r)}})),uM(n,"send",(function(n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return e.push(this),t.push(r),zM("xhr",{args:r,startTimestamp:Date.now(),xhr:this}),n.apply(this,r)}}))}();break;case"fetch":!function(){if(!function(){if(!PM())return!1;var e=wM();if(AM(e.fetch))return!0;var t=!1,n=e.document;if(n&&"function"==typeof n.createElement)try{var r=n.createElement("iframe");r.hidden=!0,n.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(t=AM(r.contentWindow.fetch)),n.head.removeChild(r)}catch(e){_M.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return t}())return;uM(RM,"fetch",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r={args:t,fetchData:{method:UM(t),url:FM(t)},startTimestamp:Date.now()};return zM("fetch",Ws({},r)),e.apply(RM,t).then((function(e){return zM("fetch",Ws(Ws({},r),{endTimestamp:Date.now(),response:e})),e}),(function(e){throw zM("fetch",Ws(Ws({},r),{endTimestamp:Date.now(),error:e})),e}))}}))}();break;case"history":!function(){if(!function(){var e=wM(),t=e.chrome,n=t&&t.app&&t.app.runtime,r="history"in e&&!!e.history.pushState&&!!e.history.replaceState;return!n&&r}())return;var e=RM.onpopstate;function t(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length>2?t[2]:void 0;if(r){var i=MM,o=String(r);MM=o,zM("history",{from:i,to:o})}return e.apply(this,t)}}RM.onpopstate=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=RM.location.href,i=MM;if(MM=r,zM("history",{from:i,to:r}),e)return e.apply(this,t)},uM(RM.history,"pushState",t),uM(RM.history,"replaceState",t)}();break;case"error":GM=RM.onerror,RM.onerror=function(e,t,n,r,i){return zM("error",{column:r,error:i,line:n,msg:e,url:t}),!!GM&&GM.apply(this,arguments)};break;case"unhandledrejection":YM=RM.onunhandledrejection,RM.onunhandledrejection=function(e){return zM("unhandledrejection",e),!YM||YM.apply(this,arguments)};break;default:_M.warn("unknown instrumentation type:",e)}}function jM(e){e&&"string"==typeof e.type&&"function"==typeof e.callback&&(BM[e.type]=BM[e.type]||[],BM[e.type].push(e.callback),DM(e.type))}function zM(e,t){var n,r;if(e&&BM[e])try{for(var i=Qs(BM[e]||[]),o=i.next();!o.done;o=i.next()){var a=o.value;try{a(t)}catch(t){_M.error("Error while triggering instrumentation handler.\nType: "+e+"\nName: "+iM(a)+"\nError: "+t)}}}catch(e){n={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function UM(e){return void 0===e&&(e=[]),"Request"in RM&&QI(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():"GET"}function FM(e){return void 0===e&&(e=[]),"string"==typeof e[0]?e[0]:"Request"in RM&&QI(e[0],Request)?e[0].url:String(e[0])}var qM,KM,HM=0;function $M(e,t,n){return void 0===n&&(n=!1),function(r){qM=void 0,r&&KM!==r&&(KM=r,HM&&clearTimeout(HM),n?HM=setTimeout((function(){t({event:r,name:e})})):t({event:r,name:e}))}}function VM(e){return function(t){var n;try{n=t.target}catch(e){return}var r=n&&n.tagName;r&&("INPUT"===r||"TEXTAREA"===r||n.isContentEditable)&&(qM||$M("input",e)(t),clearTimeout(qM),qM=setTimeout((function(){qM=void 0}),1e3))}}var GM=null;var WM,YM=null;!function(e){e.PENDING="PENDING",e.RESOLVED="RESOLVED",e.REJECTED="REJECTED"}(WM||(WM={}));var QM=function(){function e(e){var t=this;this._state=WM.PENDING,this._handlers=[],this._resolve=function(e){t._setResult(WM.RESOLVED,e)},this._reject=function(e){t._setResult(WM.REJECTED,e)},this._setResult=function(e,n){t._state===WM.PENDING&&(YI(n)?n.then(t._resolve,t._reject):(t._state=e,t._value=n,t._executeHandlers()))},this._attachHandler=function(e){t._handlers=t._handlers.concat(e),t._executeHandlers()},this._executeHandlers=function(){if(t._state!==WM.PENDING){var e=t._handlers.slice();t._handlers=[],e.forEach((function(e){e.done||(t._state===WM.RESOLVED&&e.onfulfilled&&e.onfulfilled(t._value),t._state===WM.REJECTED&&e.onrejected&&e.onrejected(t._value),e.done=!0)}))}};try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}return e.resolve=function(t){return new e((function(e){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.all=function(t){return new e((function(n,r){if(Array.isArray(t))if(0!==t.length){var i=t.length,o=[];t.forEach((function(t,a){e.resolve(t).then((function(e){o[a]=e,0===(i-=1)&&n(o)})).then(null,r)}))}else n([]);else r(new TypeError("Promise.all requires an array as input."))}))},e.prototype.then=function(t,n){var r=this;return new e((function(e,i){r._attachHandler({done:!1,onfulfilled:function(n){if(t)try{return void e(t(n))}catch(e){return void i(e)}else e(n)},onrejected:function(t){if(n)try{return void e(n(t))}catch(e){return void i(e)}else i(t)}})}))},e.prototype.catch=function(e){return this.then((function(e){return e}),e)},e.prototype.finally=function(t){var n=this;return new e((function(e,r){var i,o;return n.then((function(e){o=!1,i=e,t&&t()}),(function(e){o=!0,i=e,t&&t()})).then((function(){o?r(i):e(i)}))}))},e.prototype.toString=function(){return"[object SyncPromise]"},e}(),JM=function(){function e(e){this._limit=e,this._buffer=[]}return e.prototype.isReady=function(){return void 0===this._limit||this.length()<this._limit},e.prototype.add=function(e){var t=this;return this.isReady()?(-1===this._buffer.indexOf(e)&&this._buffer.push(e),e.then((function(){return t.remove(e)})).then(null,(function(){return t.remove(e).then(null,(function(){}))})),e):QM.reject(new eM("Not adding Promise due to buffer limit reached."))},e.prototype.remove=function(e){return this._buffer.splice(this._buffer.indexOf(e),1)[0]},e.prototype.length=function(){return this._buffer.length},e.prototype.drain=function(e){var t=this;return new QM((function(n){var r=setTimeout((function(){e&&e>0&&n(!1)}),e);QM.all(t._buffer).then((function(){clearTimeout(r),n(!0)})).then(null,(function(){n(!0)}))}))},e}(),XM={nowSeconds:function(){return Date.now()/1e3}};var ZM=gM()?function(){try{return function(e,t){return e.require(t)}(module,"perf_hooks").performance}catch(e){return}}():function(){var e=wM().performance;if(e&&e.now)return{now:function(){return e.now()},timeOrigin:Date.now()-e.now()}}(),eR=void 0===ZM?XM:{nowSeconds:function(){return(ZM.timeOrigin+ZM.now())/1e3}},tR=XM.nowSeconds.bind(XM);eR.nowSeconds.bind(eR),function(){var e=wM().performance;if(e)e.timeOrigin?e.timeOrigin:e.timing&&e.timing.navigationStart||Date.now()}();var nR=function(){function e(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}return e.clone=function(t){var n=new e;return t&&(n._breadcrumbs=Xs(t._breadcrumbs),n._tags=Ws({},t._tags),n._extra=Ws({},t._extra),n._contexts=Ws({},t._contexts),n._user=t._user,n._level=t._level,n._span=t._span,n._session=t._session,n._transactionName=t._transactionName,n._fingerprint=t._fingerprint,n._eventProcessors=Xs(t._eventProcessors)),n},e.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},e.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},e.prototype.setUser=function(e){return this._user=e||{},this._session&&this._session.update({user:e}),this._notifyScopeListeners(),this},e.prototype.getUser=function(){return this._user},e.prototype.setTags=function(e){return this._tags=Ws(Ws({},this._tags),e),this._notifyScopeListeners(),this},e.prototype.setTag=function(e,t){var n;return this._tags=Ws(Ws({},this._tags),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setExtras=function(e){return this._extra=Ws(Ws({},this._extra),e),this._notifyScopeListeners(),this},e.prototype.setExtra=function(e,t){var n;return this._extra=Ws(Ws({},this._extra),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},e.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},e.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},e.prototype.setTransaction=function(e){return this.setTransactionName(e)},e.prototype.setContext=function(e,t){var n;return null===t?delete this._contexts[e]:this._contexts=Ws(Ws({},this._contexts),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},e.prototype.getSpan=function(){return this._span},e.prototype.getTransaction=function(){var e,t,n,r,i=this.getSpan();return(null===(e=i)||void 0===e?void 0:e.transaction)?null===(t=i)||void 0===t?void 0:t.transaction:(null===(r=null===(n=i)||void 0===n?void 0:n.spanRecorder)||void 0===r?void 0:r.spans[0])?i.spanRecorder.spans[0]:void 0},e.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},e.prototype.getSession=function(){return this._session},e.prototype.update=function(t){if(!t)return this;if("function"==typeof t){var n=t(this);return n instanceof e?n:this}return t instanceof e?(this._tags=Ws(Ws({},this._tags),t._tags),this._extra=Ws(Ws({},this._extra),t._extra),this._contexts=Ws(Ws({},this._contexts),t._contexts),t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint)):VI(t)&&(t=t,this._tags=Ws(Ws({},this._tags),t.tags),this._extra=Ws(Ws({},this._extra),t.extra),this._contexts=Ws(Ws({},this._contexts),t.contexts),t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint)),this},e.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},e.prototype.addBreadcrumb=function(e,t){var n=Ws({timestamp:tR()},e);return this._breadcrumbs=void 0!==t&&t>=0?Xs(this._breadcrumbs,[n]).slice(-t):Xs(this._breadcrumbs,[n]),this._notifyScopeListeners(),this},e.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},e.prototype.applyToEvent=function(e,t){var n;if(this._extra&&Object.keys(this._extra).length&&(e.extra=Ws(Ws({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=Ws(Ws({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=Ws(Ws({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=Ws(Ws({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts=Ws({trace:this._span.getTraceContext()},e.contexts);var r=null===(n=this._span.transaction)||void 0===n?void 0:n.name;r&&(e.tags=Ws({transaction:r},e.tags))}return this._applyFingerprint(e),e.breadcrumbs=Xs(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,this._notifyEventProcessors(Xs(rR(),this._eventProcessors),e,t)},e.prototype._notifyEventProcessors=function(e,t,n,r){var i=this;return void 0===r&&(r=0),new QM((function(o,a){var s=e[r];if(null===t||"function"!=typeof s)o(t);else{var u=s(Ws({},t),n);YI(u)?u.then((function(t){return i._notifyEventProcessors(e,t,n,r+1).then(o)})).then(null,a):i._notifyEventProcessors(e,u,n,r+1).then(o).then(null,a)}}))},e.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((function(t){t(e)})),this._notifyingListeners=!1)},e.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},e}();function rR(){var e=wM();return e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.globalEventProcessors=e.__SENTRY__.globalEventProcessors||[],e.__SENTRY__.globalEventProcessors}function iR(e){rR().push(e)}var oR=function(){function e(e){this.errors=0,this.sid=bM(),this.timestamp=Date.now(),this.started=Date.now(),this.duration=0,this.status=jI.Ok,e&&this.update(e)}return e.prototype.update=function(e){void 0===e&&(e={}),e.user&&(e.user.ip_address&&(this.ipAddress=e.user.ip_address),e.did||(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||Date.now(),e.sid&&(this.sid=32===e.sid.length?e.sid:bM()),e.did&&(this.did=""+e.did),"number"==typeof e.started&&(this.started=e.started),"number"==typeof e.duration?this.duration=e.duration:this.duration=this.timestamp-this.started,e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),e.ipAddress&&(this.ipAddress=e.ipAddress),e.userAgent&&(this.userAgent=e.userAgent),"number"==typeof e.errors&&(this.errors=e.errors),e.status&&(this.status=e.status)},e.prototype.close=function(e){e?this.update({status:e}):this.status===jI.Ok?this.update({status:jI.Exited}):this.update()},e.prototype.toJSON=function(){return mM({sid:""+this.sid,init:!0,started:new Date(this.started).toISOString(),timestamp:new Date(this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:mM({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},e}(),aR=function(){function e(e,t,n){void 0===t&&(t=new nR),void 0===n&&(n=3),this._version=n,this._stack=[{}],this.getStackTop().scope=t,this.bindClient(e)}return e.prototype.isOlderThan=function(e){return this._version<e},e.prototype.bindClient=function(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()},e.prototype.pushScope=function(){var e=nR.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},e.prototype.popScope=function(){return!(this.getStack().length<=1)&&!!this.getStack().pop()},e.prototype.withScope=function(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}},e.prototype.getClient=function(){return this.getStackTop().client},e.prototype.getScope=function(){return this.getStackTop().scope},e.prototype.getStack=function(){return this._stack},e.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},e.prototype.captureException=function(e,t){var n=this._lastEventId=bM(),r=t;if(!t){var i=void 0;try{throw new Error("Sentry syntheticException")}catch(e){i=e}r={originalException:e,syntheticException:i}}return this._invokeClient("captureException",e,Ws(Ws({},r),{event_id:n})),n},e.prototype.captureMessage=function(e,t,n){var r=this._lastEventId=bM(),i=n;if(!n){var o=void 0;try{throw new Error(e)}catch(e){o=e}i={originalException:e,syntheticException:o}}return this._invokeClient("captureMessage",e,t,Ws(Ws({},i),{event_id:r})),r},e.prototype.captureEvent=function(e,t){var n=this._lastEventId=bM();return this._invokeClient("captureEvent",e,Ws(Ws({},t),{event_id:n})),n},e.prototype.lastEventId=function(){return this._lastEventId},e.prototype.addBreadcrumb=function(e,t){var n=this.getStackTop(),r=n.scope,i=n.client;if(r&&i){var o=i.getOptions&&i.getOptions()||{},a=o.beforeBreadcrumb,s=void 0===a?null:a,u=o.maxBreadcrumbs,c=void 0===u?100:u;if(!(c<=0)){var d=tR(),l=Ws({timestamp:d},e),f=s?kM((function(){return s(l,t)})):l;null!==f&&r.addBreadcrumb(f,Math.min(c,100))}}},e.prototype.setUser=function(e){var t=this.getScope();t&&t.setUser(e)},e.prototype.setTags=function(e){var t=this.getScope();t&&t.setTags(e)},e.prototype.setExtras=function(e){var t=this.getScope();t&&t.setExtras(e)},e.prototype.setTag=function(e,t){var n=this.getScope();n&&n.setTag(e,t)},e.prototype.setExtra=function(e,t){var n=this.getScope();n&&n.setExtra(e,t)},e.prototype.setContext=function(e,t){var n=this.getScope();n&&n.setContext(e,t)},e.prototype.configureScope=function(e){var t=this.getStackTop(),n=t.scope,r=t.client;n&&r&&e(n)},e.prototype.run=function(e){var t=uR(this);try{e(this)}finally{uR(t)}},e.prototype.getIntegration=function(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return _M.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},e.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},e.prototype.startTransaction=function(e,t){return this._callExtensionMethod("startTransaction",e,t)},e.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},e.prototype.startSession=function(e){this.endSession();var t=this.getStackTop(),n=t.scope,r=t.client,i=r&&r.getOptions()||{},o=i.release,a=i.environment,s=new oR(Ws(Ws({release:o,environment:a},n&&{user:n.getUser()}),e));return n&&n.setSession(s),s},e.prototype.endSession=function(){var e=this.getStackTop(),t=e.scope,n=e.client;if(t){var r=t.getSession&&t.getSession();r&&(r.close(),n&&n.captureSession&&n.captureSession(r),t.setSession())}},e.prototype._invokeClient=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.getStackTop(),o=i.scope,a=i.client;a&&a[e]&&(t=a)[e].apply(t,Xs(n,[o]))},e.prototype._callExtensionMethod=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=sR(),i=r.__SENTRY__;if(i&&i.extensions&&"function"==typeof i.extensions[e])return i.extensions[e].apply(this,t);_M.warn("Extension method "+e+" couldn't be found, doing nothing.")},e}();function sR(){var e=wM();return e.__SENTRY__=e.__SENTRY__||{extensions:{},hub:void 0},e}function uR(e){var t=sR(),n=lR(t);return fR(t,e),n}function cR(){var e=sR();return dR(e)&&!lR(e).isOlderThan(3)||fR(e,new aR),gM()?function(e){try{var t=(r=sR().__SENTRY__)&&r.extensions&&r.extensions.domain&&r.extensions.domain.active;if(!t)return lR(e);if(!dR(t)||lR(t).isOlderThan(3)){var n=lR(e).getStackTop();fR(t,new aR(n.client,nR.clone(n.scope)))}return lR(t)}catch(t){return lR(e)}var r}(e):lR(e)}function dR(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function lR(e){return e&&e.__SENTRY__&&e.__SENTRY__.hub||(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=new aR),e.__SENTRY__.hub}function fR(e,t){return!!e&&(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=t,!0)}function pR(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=cR();if(r&&r[e])return r[e].apply(r,Xs(t));throw new Error("No hub defined or "+e+" was not found on the hub, please open a bug report.")}function hR(e,t){var n;try{throw new Error("Sentry syntheticException")}catch(e){n=e}return pR("captureException",e,{captureContext:t,originalException:e,syntheticException:n})}function vR(e){pR("withScope",e)}var mR=function(){function e(e){this.dsn=e,this._dsnObject=new nM(e)}return e.prototype.getDsn=function(){return this._dsnObject},e.prototype.getBaseApiEndpoint=function(){var e=this._dsnObject,t=e.protocol?e.protocol+":":"",n=e.port?":"+e.port:"";return t+"//"+e.host+n+(e.path?"/"+e.path:"")+"/api/"},e.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")},e.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()},e.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this._getEnvelopeEndpoint()+"?"+this._encodedAuth()},e.prototype.getStoreEndpointPath=function(){var e=this._dsnObject;return(e.path?"/"+e.path:"")+"/api/"+e.projectId+"/store/"},e.prototype.getRequestHeaders=function(e,t){var n=this._dsnObject,r=["Sentry sentry_version=7"];return r.push("sentry_client="+e+"/"+t),r.push("sentry_key="+n.user),n.pass&&r.push("sentry_secret="+n.pass),{"Content-Type":"application/json","X-Sentry-Auth":r.join(", ")}},e.prototype.getReportDialogEndpoint=function(e){void 0===e&&(e={});var t=this._dsnObject,n=this.getBaseApiEndpoint()+"embed/error-page/",r=[];for(var i in r.push("dsn="+t.toString()),e)if("dsn"!==i)if("user"===i){if(!e.user)continue;e.user.name&&r.push("name="+encodeURIComponent(e.user.name)),e.user.email&&r.push("email="+encodeURIComponent(e.user.email))}else r.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return r.length?n+"?"+r.join("&"):n},e.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")},e.prototype._getIngestEndpoint=function(e){return""+this.getBaseApiEndpoint()+this._dsnObject.projectId+"/"+e+"/"},e.prototype._encodedAuth=function(){var e,t={sentry_key:this._dsnObject.user,sentry_version:"7"};return e=t,Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")},e}(),gR=[];function yR(e){var t={};return function(e){var t=e.defaultIntegrations&&Xs(e.defaultIntegrations)||[],n=e.integrations,r=[];if(Array.isArray(n)){var i=n.map((function(e){return e.name})),o=[];t.forEach((function(e){-1===i.indexOf(e.name)&&-1===o.indexOf(e.name)&&(r.push(e),o.push(e.name))})),n.forEach((function(e){-1===o.indexOf(e.name)&&(r.push(e),o.push(e.name))}))}else"function"==typeof n?(r=n(t),r=Array.isArray(r)?r:[r]):r=Xs(t);var a=r.map((function(e){return e.name})),s="Debug";return-1!==a.indexOf(s)&&r.push.apply(r,Xs(r.splice(a.indexOf(s),1))),r}(e).forEach((function(e){t[e.name]=e,function(e){-1===gR.indexOf(e.name)&&(e.setupOnce(iR,cR),gR.push(e.name),_M.log("Integration installed: "+e.name))}(e)})),t}var wR,bR=function(){function e(e,t){this._integrations={},this._processing=0,this._backend=new e(t),this._options=t,t.dsn&&(this._dsn=new nM(t.dsn))}return e.prototype.captureException=function(e,t,n){var r=this,i=t&&t.event_id;return this._process(this._getBackend().eventFromException(e,t).then((function(e){return r._captureEvent(e,t,n)})).then((function(e){i=e}))),i},e.prototype.captureMessage=function(e,t,n,r){var i=this,o=n&&n.event_id,a=$I(e)?this._getBackend().eventFromMessage(String(e),t,n):this._getBackend().eventFromException(e,n);return this._process(a.then((function(e){return i._captureEvent(e,n,r)})).then((function(e){o=e}))),o},e.prototype.captureEvent=function(e,t,n){var r=t&&t.event_id;return this._process(this._captureEvent(e,t,n).then((function(e){r=e}))),r},e.prototype.captureSession=function(e){e.release?this._sendSession(e):_M.warn("Discarded session because of missing release")},e.prototype.getDsn=function(){return this._dsn},e.prototype.getOptions=function(){return this._options},e.prototype.flush=function(e){var t=this;return this._isClientProcessing(e).then((function(n){return t._getBackend().getTransport().close(e).then((function(e){return n&&e}))}))},e.prototype.close=function(e){var t=this;return this.flush(e).then((function(e){return t.getOptions().enabled=!1,e}))},e.prototype.setupIntegrations=function(){this._isEnabled()&&(this._integrations=yR(this._options))},e.prototype.getIntegration=function(e){try{return this._integrations[e.id]||null}catch(t){return _M.warn("Cannot retrieve integration "+e.id+" from the current Client"),null}},e.prototype._updateSessionFromEvent=function(e,t){var n,r,i,o=!1,a=!1,s=t.exception&&t.exception.values;if(s){a=!0;try{for(var u=Qs(s),c=u.next();!c.done;c=u.next()){var d=c.value.mechanism;if(d&&!1===d.handled){o=!0;break}}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}var l=t.user;if(!e.userAgent){var f=t.request?t.request.headers:{};for(var p in f)if("user-agent"===p.toLowerCase()){i=f[p];break}}e.update(Ws(Ws({},o&&{status:jI.Crashed}),{user:l,userAgent:i,errors:e.errors+Number(a||o)}))},e.prototype._sendSession=function(e){this._getBackend().sendSession(e)},e.prototype._isClientProcessing=function(e){var t=this;return new QM((function(n){var r=0,i=setInterval((function(){0==t._processing?(clearInterval(i),n(!0)):(r+=1,e&&r>=e&&(clearInterval(i),n(!1)))}),1)}))},e.prototype._getBackend=function(){return this._backend},e.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},e.prototype._prepareEvent=function(e,t,n){var r=this,i=this.getOptions().normalizeDepth,o=void 0===i?3:i,a=Ws(Ws({},e),{event_id:e.event_id||(n&&n.event_id?n.event_id:bM()),timestamp:e.timestamp||tR()});this._applyClientOptions(a),this._applyIntegrationsMetadata(a);var s=t;n&&n.captureContext&&(s=nR.clone(s).update(n.captureContext));var u=QM.resolve(a);return s&&(u=s.applyToEvent(a,n)),u.then((function(e){return"number"==typeof o&&o>0?r._normalizeEvent(e,o):e}))},e.prototype._normalizeEvent=function(e,t){if(!e)return null;var n=Ws(Ws(Ws(Ws(Ws({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((function(e){return Ws(Ws({},e),e.data&&{data:hM(e.data,t)})}))}),e.user&&{user:hM(e.user,t)}),e.contexts&&{contexts:hM(e.contexts,t)}),e.extra&&{extra:hM(e.extra,t)});return e.contexts&&e.contexts.trace&&(n.contexts.trace=e.contexts.trace),n},e.prototype._applyClientOptions=function(e){var t=this.getOptions(),n=t.environment,r=t.release,i=t.dist,o=t.maxValueLength,a=void 0===o?250:o;"environment"in e||(e.environment="environment"in t?n:"production"),void 0===e.release&&void 0!==r&&(e.release=r),void 0===e.dist&&void 0!==i&&(e.dist=i),e.message&&(e.message=oM(e.message,a));var s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=oM(s.value,a));var u=e.request;u&&u.url&&(u.url=oM(u.url,a))},e.prototype._applyIntegrationsMetadata=function(e){var t=e.sdk,n=Object.keys(this._integrations);t&&n.length>0&&(t.integrations=n)},e.prototype._sendEvent=function(e){this._getBackend().sendEvent(e)},e.prototype._captureEvent=function(e,t,n){return this._processEvent(e,t,n).then((function(e){return e.event_id}),(function(e){_M.error(e)}))},e.prototype._processEvent=function(e,t,n){var r=this,i=this.getOptions(),o=i.beforeSend,a=i.sampleRate;if(!this._isEnabled())return QM.reject(new eM("SDK not enabled, will not send event."));var s="transaction"===e.type;return!s&&"number"==typeof a&&Math.random()>a?QM.reject(new eM("Discarding event because it's not included in the random sample (sampling rate = "+a+")")):this._prepareEvent(e,n,t).then((function(e){if(null===e)throw new eM("An event processor returned null, will not send event.");if(t&&t.data&&!0===t.data.__sentry__||s||!o)return e;var n=o(e,t);if(void 0===n)throw new eM("`beforeSend` method has to return `null` or a valid event.");return YI(n)?n.then((function(e){return e}),(function(e){throw new eM("beforeSend rejected with "+e)})):n})).then((function(e){if(null===e)throw new eM("`beforeSend` returned `null`, will not send event.");var t=n&&n.getSession&&n.getSession();return!s&&t&&r._updateSessionFromEvent(t,e),r._sendEvent(e),e})).then(null,(function(e){if(e instanceof eM)throw e;throw r.captureException(e,{data:{__sentry__:!0},originalException:e}),new eM("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+e)}))},e.prototype._process=function(e){var t=this;this._processing+=1,e.then((function(e){return t._processing-=1,e}),(function(e){return t._processing-=1,e}))},e}(),SR=function(){function e(){}return e.prototype.sendEvent=function(e){return QM.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:UI.Skipped})},e.prototype.close=function(e){return QM.resolve(!0)},e}(),ER=function(){function e(e){this._options=e,this._options.dsn||_M.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return e.prototype.eventFromException=function(e,t){throw new eM("Backend has to implement `eventFromException` method")},e.prototype.eventFromMessage=function(e,t,n){throw new eM("Backend has to implement `eventFromMessage` method")},e.prototype.sendEvent=function(e){this._transport.sendEvent(e).then(null,(function(e){_M.error("Error while sending event: "+e)}))},e.prototype.sendSession=function(e){this._transport.sendSession?this._transport.sendSession(e).then(null,(function(e){_M.error("Error while sending session: "+e)})):_M.warn("Dropping session because custom transport doesn't implement sendSession")},e.prototype.getTransport=function(){return this._transport},e.prototype._setupTransport=function(){return new SR},e}();function kR(e,t){return{body:JSON.stringify({sent_at:(new Date).toISOString()})+"\n"+JSON.stringify({type:"session"})+"\n"+JSON.stringify(e),type:"session",url:t.getEnvelopeEndpointWithUrlEncodedAuth()}}function CR(e,t){var n=e.tags||{},r=n.__sentry_samplingMethod,i=n.__sentry_sampleRate,o=Ys(n,["__sentry_samplingMethod","__sentry_sampleRate"]);e.tags=o;var a="transaction"===e.type,s={body:JSON.stringify(e),type:e.type||"event",url:a?t.getEnvelopeEndpointWithUrlEncodedAuth():t.getStoreEndpointWithUrlEncodedAuth()};if(a){var u=JSON.stringify({event_id:e.event_id,sent_at:(new Date).toISOString()})+"\n"+JSON.stringify({type:e.type,sample_rates:[{id:r,rate:i}]})+"\n"+s.body;s.body=u}return s}var xR=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){wR=Function.prototype.toString,Function.prototype.toString=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.__sentry_original__||this;return wR.apply(n,e)}},e.id="FunctionToString",e}(),TR=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],NR=function(){function e(t){void 0===t&&(t={}),this._options=t,this.name=e.id}return e.prototype.setupOnce=function(){iR((function(t){var n=cR();if(!n)return t;var r=n.getIntegration(e);if(r){var i=n.getClient(),o=i?i.getOptions():{},a=r._mergeOptions(o);if(r._shouldDropEvent(t,a))return null}return t}))},e.prototype._shouldDropEvent=function(e,t){return this._isSentryError(e,t)?(_M.warn("Event dropped due to being internal Sentry Error.\nEvent: "+EM(e)),!0):this._isIgnoredError(e,t)?(_M.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+EM(e)),!0):this._isDeniedUrl(e,t)?(_M.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+EM(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0):!this._isAllowedUrl(e,t)&&(_M.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+EM(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0)},e.prototype._isSentryError=function(e,t){if(!t.ignoreInternal)return!1;try{return e&&e.exception&&e.exception.values&&e.exception.values[0]&&"SentryError"===e.exception.values[0].type||!1}catch(e){return!1}},e.prototype._isIgnoredError=function(e,t){return!(!t.ignoreErrors||!t.ignoreErrors.length)&&this._getPossibleEventMessages(e).some((function(e){return t.ignoreErrors.some((function(t){return sM(e,t)}))}))},e.prototype._isDeniedUrl=function(e,t){if(!t.denyUrls||!t.denyUrls.length)return!1;var n=this._getEventFilterUrl(e);return!!n&&t.denyUrls.some((function(e){return sM(n,e)}))},e.prototype._isAllowedUrl=function(e,t){if(!t.allowUrls||!t.allowUrls.length)return!0;var n=this._getEventFilterUrl(e);return!n||t.allowUrls.some((function(e){return sM(n,e)}))},e.prototype._mergeOptions=function(e){return void 0===e&&(e={}),{allowUrls:Xs(this._options.whitelistUrls||[],this._options.allowUrls||[],e.whitelistUrls||[],e.allowUrls||[]),denyUrls:Xs(this._options.blacklistUrls||[],this._options.denyUrls||[],e.blacklistUrls||[],e.denyUrls||[]),ignoreErrors:Xs(this._options.ignoreErrors||[],e.ignoreErrors||[],TR),ignoreInternal:void 0===this._options.ignoreInternal||this._options.ignoreInternal}},e.prototype._getPossibleEventMessages=function(e){if(e.message)return[e.message];if(e.exception)try{var t=e.exception.values&&e.exception.values[0]||{},n=t.type,r=void 0===n?"":n,i=t.value,o=void 0===i?"":i;return[""+o,r+": "+o]}catch(t){return _M.error("Cannot extract message for event "+EM(e)),[]}return[]},e.prototype._getEventFilterUrl=function(e){try{if(e.stacktrace){var t=e.stacktrace.frames;return t&&t[t.length-1].filename||null}if(e.exception){var n=e.exception.values&&e.exception.values[0].stacktrace&&e.exception.values[0].stacktrace.frames;return n&&n[n.length-1].filename||null}return null}catch(t){return _M.error("Cannot extract url for event "+EM(e)),null}},e.id="InboundFilters",e}(),OR=Object.freeze({__proto__:null,FunctionToString:xR,InboundFilters:NR}),_R=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,PR=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,AR=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,IR=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,MR=/\((\S*)(?::(\d+))(?::(\d+))\)/,RR=/Minified React error #\d+;/i;function BR(e){var t=null,n=0;e&&("number"==typeof e.framesToPop?n=e.framesToPop:RR.test(e.message)&&(n=1));try{if(t=function(e){if(!e||!e.stacktrace)return null;for(var t,n=e.stacktrace,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,i=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,o=n.split("\n"),a=[],s=0;s<o.length;s+=2){var u=null;(t=r.exec(o[s]))?u={url:t[2],func:t[3],args:[],line:+t[1],column:null}:(t=i.exec(o[s]))&&(u={url:t[6],func:t[3]||t[4],args:t[5]?t[5].split(","):[],line:+t[1],column:+t[2]}),u&&(!u.func&&u.line&&(u.func="?"),a.push(u))}if(!a.length)return null;return{message:DR(e),name:e.name,stack:a}}(e))return LR(t,n)}catch(e){}try{if(t=function(e){if(!e||!e.stack)return null;for(var t,n,r,i=[],o=e.stack.split("\n"),a=0;a<o.length;++a){if(n=_R.exec(o[a])){var s=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(t=MR.exec(n[2]))&&(n[2]=t[1],n[3]=t[2],n[4]=t[3]),r={url:n[2]&&0===n[2].indexOf("address at ")?n[2].substr("address at ".length):n[2],func:n[1]||"?",args:s?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=AR.exec(o[a]))r={url:n[2],func:n[1]||"?",args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=PR.exec(o[a])))continue;n[3]&&n[3].indexOf(" > eval")>-1&&(t=IR.exec(n[3]))?(n[1]=n[1]||"eval",n[3]=t[1],n[4]=t[2],n[5]=""):0!==a||n[5]||void 0===e.columnNumber||(i[0].column=e.columnNumber+1),r={url:n[3],func:n[1]||"?",args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!r.func&&r.line&&(r.func="?"),i.push(r)}if(!i.length)return null;return{message:DR(e),name:e.name,stack:i}}(e))return LR(t,n)}catch(e){}return{message:DR(e),name:e&&e.name,stack:[],failed:!0}}function LR(e,t){try{return Ws(Ws({},e),{stack:e.stack.slice(t)})}catch(t){return e}}function DR(e){var t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function jR(e){var t=UR(e.stack),n={type:e.name,value:e.message};return t&&t.length&&(n.stacktrace={frames:t}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function zR(e){return{exception:{values:[jR(e)]}}}function UR(e){if(!e||!e.length)return[];var t=e,n=t[0].func||"",r=t[t.length-1].func||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(t=t.slice(1)),-1!==r.indexOf("sentryWrapped")&&(t=t.slice(0,-1)),t.slice(0,50).map((function(e){return{colno:null===e.column?void 0:e.column,filename:e.url||t[0].url,function:e.func||"?",in_app:!0,lineno:null===e.line?void 0:e.line}})).reverse()}function FR(e,t,n){var r,i;if(void 0===n&&(n={}),qI(e)&&e.error)return r=zR(BR(e=e.error));if(KI(e)||(i=e,"[object DOMException]"===Object.prototype.toString.call(i))){var o=e,a=o.name||(KI(o)?"DOMError":"DOMException"),s=o.message?a+": "+o.message:a;return CM(r=qR(s,t,n),s),"code"in o&&(r.tags=Ws(Ws({},r.tags),{"DOMException.code":""+o.code})),r}return FI(e)?r=zR(BR(e)):VI(e)||GI(e)?(xM(r=function(e,t,n){var r={exception:{values:[{type:GI(e)?e.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+vM(e)}]},extra:{__serialized__:lM(e)}};if(t){var i=UR(BR(t).stack);r.stacktrace={frames:i}}return r}(e,t,n.rejection),{synthetic:!0}),r):(CM(r=qR(e,t,n),""+e,void 0),xM(r,{synthetic:!0}),r)}function qR(e,t,n){void 0===n&&(n={});var r={message:e};if(n.attachStacktrace&&t){var i=UR(BR(t).stack);r.stacktrace={frames:i}}return r}var KR=function(){function e(e){this.options=e,this._buffer=new JM(30),this._rateLimits={},this._api=new mR(this.options.dsn),this.url=this._api.getStoreEndpointWithUrlEncodedAuth()}return e.prototype.sendEvent=function(e){throw new eM("Transport Class has to implement `sendEvent` method")},e.prototype.close=function(e){return this._buffer.drain(e)},e.prototype._handleResponse=function(e){var t=e.requestType,n=e.response,r=e.headers,i=e.resolve,o=e.reject,a=UI.fromHttpCode(n.status);this._handleRateLimit(r)&&_M.warn("Too many requests, backing off until: "+this._disabledUntil(t)),a!==UI.Success?o(n):i({status:a})},e.prototype._disabledUntil=function(e){return this._rateLimits[e]||this._rateLimits.all},e.prototype._isRateLimited=function(e){return this._disabledUntil(e)>new Date(Date.now())},e.prototype._handleRateLimit=function(e){var t,n,r,i,o=Date.now(),a=e["x-sentry-rate-limits"],s=e["retry-after"];if(a){try{for(var u=Qs(a.trim().split(",")),c=u.next();!c.done;c=u.next()){var d=c.value.split(":",2),l=parseInt(d[0],10),f=1e3*(isNaN(l)?60:l);try{for(var p=(r=void 0,Qs(d[1].split(";"))),h=p.next();!h.done;h=p.next()){var v=h.value;this._rateLimits[v||"all"]=new Date(o+f)}}catch(e){r={error:e}}finally{try{h&&!h.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return!0}return!!s&&(this._rateLimits.all=new Date(o+function(e,t){if(!t)return 6e4;var n=parseInt(""+t,10);if(!isNaN(n))return 1e3*n;var r=Date.parse(""+t);return isNaN(r)?6e4:r-e}(o,s)),!0)},e}(),HR=wM(),$R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.sendEvent=function(e){return this._sendRequest(CR(e,this._api),e)},t.prototype.sendSession=function(e){return this._sendRequest(kR(e,this._api),e)},t.prototype._sendRequest=function(e,t){var n=this;if(this._isRateLimited(e.type))return Promise.reject({event:t,type:e.type,reason:"Transport locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429});var r={body:e.body,method:"POST",referrerPolicy:IM()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(r,this.options.fetchParameters),void 0!==this.options.headers&&(r.headers=this.options.headers),this._buffer.add(new QM((function(t,i){HR.fetch(e.url,r).then((function(r){var o={"x-sentry-rate-limits":r.headers.get("X-Sentry-Rate-Limits"),"retry-after":r.headers.get("Retry-After")};n._handleResponse({requestType:e.type,response:r,headers:o,resolve:t,reject:i})})).catch(i)})))},t}(KR),VR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.sendEvent=function(e){return this._sendRequest(CR(e,this._api),e)},t.prototype.sendSession=function(e){return this._sendRequest(kR(e,this._api),e)},t.prototype._sendRequest=function(e,t){var n=this;return this._isRateLimited(e.type)?Promise.reject({event:t,type:e.type,reason:"Transport locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429}):this._buffer.add(new QM((function(t,r){var i=new XMLHttpRequest;for(var o in i.onreadystatechange=function(){if(4===i.readyState){var o={"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")};n._handleResponse({requestType:e.type,response:i,headers:o,resolve:t,reject:r})}},i.open("POST",e.url),n.options.headers)n.options.headers.hasOwnProperty(o)&&i.setRequestHeader(o,n.options.headers[o]);i.send(e.body)})))},t}(KR),GR=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Gs(t,e),t.prototype.eventFromException=function(e,t){return function(e,t,n){var r=FR(t,n&&n.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return xM(r,{handled:!0,type:"generic"}),r.level=zI.Error,n&&n.event_id&&(r.event_id=n.event_id),QM.resolve(r)}(this._options,e,t)},t.prototype.eventFromMessage=function(e,t,n){return void 0===t&&(t=zI.Info),function(e,t,n,r){void 0===n&&(n=zI.Info);var i=qR(t,r&&r.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return i.level=n,r&&r.event_id&&(i.event_id=r.event_id),QM.resolve(i)}(this._options,e,t,n)},t.prototype._setupTransport=function(){if(!this._options.dsn)return e.prototype._setupTransport.call(this);var t=Ws(Ws({},this._options.transportOptions),{dsn:this._options.dsn});return this._options.transport?new this._options.transport(t):PM()?new $R(t):new VR(t)},t}(ER),WR=0;function YR(){return WR>0}function QR(){WR+=1,setTimeout((function(){WR-=1}))}function JR(e,t,n){if(void 0===t&&(t={}),"function"!=typeof e)return e;try{if(e.__sentry__)return e;if(e.__sentry_wrapped__)return e.__sentry_wrapped__}catch(t){return e}var r=function(){var r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);var i=r.map((function(e){return JR(e,t)}));return e.handleEvent?e.handleEvent.apply(this,i):e.apply(this,i)}catch(e){throw QR(),vR((function(n){n.addEventProcessor((function(e){var n=Ws({},e);return t.mechanism&&(CM(n,void 0,void 0),xM(n,t.mechanism)),n.extra=Ws(Ws({},n.extra),{arguments:r}),n})),hR(e)})),e}};try{for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}catch(e){}e.prototype=e.prototype||{},r.prototype=e.prototype,Object.defineProperty(e,"__sentry_wrapped__",{enumerable:!1,value:r}),Object.defineProperties(r,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:e}});try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:function(){return e.name}})}catch(e){}return r}function XR(e){if(void 0===e&&(e={}),e.eventId)if(e.dsn){var t=document.createElement("script");t.async=!0,t.src=new mR(e.dsn).getReportDialogEndpoint(e),e.onLoad&&(t.onload=e.onLoad),(document.head||document.body).appendChild(t)}else _M.error("Missing dsn option in showReportDialog call");else _M.error("Missing eventId option in showReportDialog call")}var ZR=function(){function e(t){this.name=e.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=Ws({onerror:!0,onunhandledrejection:!0},t)}return e.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(_M.log("Global Handler attached: onerror"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(_M.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler())},e.prototype._installGlobalOnErrorHandler=function(){var t=this;this._onErrorHandlerInstalled||(jM({callback:function(n){var r=n.error,i=cR(),o=i.getIntegration(e),a=r&&!0===r.__sentry_own_request__;if(o&&!YR()&&!a){var s=i.getClient(),u=$I(r)?t._eventFromIncompleteOnError(n.msg,n.url,n.line,n.column):t._enhanceEventWithInitialFrame(FR(r,void 0,{attachStacktrace:s&&s.getOptions().attachStacktrace,rejection:!1}),n.url,n.line,n.column);xM(u,{handled:!1,type:"onerror"}),i.captureEvent(u,{originalException:r})}},type:"error"}),this._onErrorHandlerInstalled=!0)},e.prototype._installGlobalOnUnhandledRejectionHandler=function(){var t=this;this._onUnhandledRejectionHandlerInstalled||(jM({callback:function(n){var r=n;try{"reason"in n?r=n.reason:"detail"in n&&"reason"in n.detail&&(r=n.detail.reason)}catch(e){}var i=cR(),o=i.getIntegration(e),a=r&&!0===r.__sentry_own_request__;if(!o||YR()||a)return!0;var s=i.getClient(),u=$I(r)?t._eventFromRejectionWithPrimitive(r):FR(r,void 0,{attachStacktrace:s&&s.getOptions().attachStacktrace,rejection:!0});u.level=zI.Error,xM(u,{handled:!1,type:"onunhandledrejection"}),i.captureEvent(u,{originalException:r})},type:"unhandledrejection"}),this._onUnhandledRejectionHandlerInstalled=!0)},e.prototype._eventFromIncompleteOnError=function(e,t,n,r){var i,o=qI(e)?e.message:e;if(HI(o)){var a=o.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);a&&(i=a[1],o=a[2])}var s={exception:{values:[{type:i||"Error",value:o}]}};return this._enhanceEventWithInitialFrame(s,t,n,r)},e.prototype._eventFromRejectionWithPrimitive=function(e){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(e)}]}}},e.prototype._enhanceEventWithInitialFrame=function(e,t,n,r){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].stacktrace=e.exception.values[0].stacktrace||{},e.exception.values[0].stacktrace.frames=e.exception.values[0].stacktrace.frames||[];var i=isNaN(parseInt(r,10))?void 0:r,o=isNaN(parseInt(n,10))?void 0:n,a=HI(t)&&t.length>0?t:function(){try{return document.location.href}catch(e){return""}}();return 0===e.exception.values[0].stacktrace.frames.length&&e.exception.values[0].stacktrace.frames.push({colno:i,filename:a,function:"?",in_app:!0,lineno:o}),e},e.id="GlobalHandlers",e}(),eB=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],tB=function(){function e(t){this.name=e.id,this._options=Ws({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},t)}return e.prototype.setupOnce=function(){var e=wM();(this._options.setTimeout&&uM(e,"setTimeout",this._wrapTimeFunction.bind(this)),this._options.setInterval&&uM(e,"setInterval",this._wrapTimeFunction.bind(this)),this._options.requestAnimationFrame&&uM(e,"requestAnimationFrame",this._wrapRAF.bind(this)),this._options.XMLHttpRequest&&"XMLHttpRequest"in e&&uM(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this)),this._options.eventTarget)&&(Array.isArray(this._options.eventTarget)?this._options.eventTarget:eB).forEach(this._wrapEventTarget.bind(this))},e.prototype._wrapTimeFunction=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0];return t[0]=JR(r,{mechanism:{data:{function:iM(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}},e.prototype._wrapRAF=function(e){return function(t){return e.call(this,JR(t,{mechanism:{data:{function:"requestAnimationFrame",handler:iM(e)},handled:!0,type:"instrument"}}))}},e.prototype._wrapEventTarget=function(e){var t=wM(),n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(uM(n,"addEventListener",(function(t){return function(n,r,i){try{"function"==typeof r.handleEvent&&(r.handleEvent=JR(r.handleEvent.bind(r),{mechanism:{data:{function:"handleEvent",handler:iM(r),target:e},handled:!0,type:"instrument"}}))}catch(e){}return t.call(this,n,JR(r,{mechanism:{data:{function:"addEventListener",handler:iM(r),target:e},handled:!0,type:"instrument"}}),i)}})),uM(n,"removeEventListener",(function(e){return function(t,n,r){var i,o=n;try{var a=null===(i=o)||void 0===i?void 0:i.__sentry_wrapped__;a&&e.call(this,t,a,r)}catch(e){}return e.call(this,t,o,r)}})))},e.prototype._wrapXHR=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this,i=["onload","onerror","onprogress","onreadystatechange"];return i.forEach((function(e){e in r&&"function"==typeof r[e]&&uM(r,e,(function(t){var n={mechanism:{data:{function:e,handler:iM(t)},handled:!0,type:"instrument"}};return t.__sentry_original__&&(n.mechanism.data.handler=iM(t.__sentry_original__)),JR(t,n)}))})),e.apply(this,t)}},e.id="TryCatch",e}(),nB=function(){function e(t){this.name=e.id,this._options=Ws({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},t)}return e.prototype.addSentryBreadcrumb=function(e){this._options.sentry&&cR().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:EM(e)},{event:e})},e.prototype.setupOnce=function(){var e=this;this._options.console&&jM({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._consoleBreadcrumb.apply(e,Xs(t))},type:"console"}),this._options.dom&&jM({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._domBreadcrumb.apply(e,Xs(t))},type:"dom"}),this._options.xhr&&jM({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._xhrBreadcrumb.apply(e,Xs(t))},type:"xhr"}),this._options.fetch&&jM({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._fetchBreadcrumb.apply(e,Xs(t))},type:"fetch"}),this._options.history&&jM({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._historyBreadcrumb.apply(e,Xs(t))},type:"history"})},e.prototype._consoleBreadcrumb=function(e){var t={category:"console",data:{arguments:e.args,logger:"console"},level:zI.fromString(e.level),message:aM(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;t.message="Assertion failed: "+(aM(e.args.slice(1)," ")||"console.assert"),t.data.arguments=e.args.slice(1)}cR().addBreadcrumb(t,{input:e.args,level:e.level})},e.prototype._domBreadcrumb=function(e){var t;try{t=e.event.target?JI(e.event.target):JI(e.event)}catch(e){t="<unknown>"}0!==t.length&&cR().addBreadcrumb({category:"ui."+e.name,message:t},{event:e.event,name:e.name})},e.prototype._xhrBreadcrumb=function(e){if(e.endTimestamp){if(e.xhr.__sentry_own_request__)return;var t=e.xhr.__sentry_xhr__||{},n=t.method,r=t.url,i=t.status_code,o=t.body;cR().addBreadcrumb({category:"xhr",data:{method:n,url:r,status_code:i},type:"http"},{xhr:e.xhr,input:o})}else;},e.prototype._fetchBreadcrumb=function(e){e.endTimestamp&&(e.fetchData.url.match(/sentry_key/)&&"POST"===e.fetchData.method||(e.error?cR().addBreadcrumb({category:"fetch",data:e.fetchData,level:zI.Error,type:"http"},{data:e.error,input:e.args}):cR().addBreadcrumb({category:"fetch",data:Ws(Ws({},e.fetchData),{status_code:e.response.status}),type:"http"},{input:e.args,response:e.response})))},e.prototype._historyBreadcrumb=function(e){var t=wM(),n=e.from,r=e.to,i=SM(t.location.href),o=SM(n),a=SM(r);o.path||(o=i),i.protocol===a.protocol&&i.host===a.host&&(r=a.relative),i.protocol===o.protocol&&i.host===o.host&&(n=o.relative),cR().addBreadcrumb({category:"navigation",data:{from:n,to:r}})},e.id="Breadcrumbs",e}(),rB=function(){function e(t){void 0===t&&(t={}),this.name=e.id,this._key=t.key||"cause",this._limit=t.limit||5}return e.prototype.setupOnce=function(){iR((function(t,n){var r=cR().getIntegration(e);return r?r._handler(t,n):t}))},e.prototype._handler=function(e,t){if(!(e.exception&&e.exception.values&&t&&QI(t.originalException,Error)))return e;var n=this._walkErrorTree(t.originalException,this._key);return e.exception.values=Xs(n,e.exception.values),e},e.prototype._walkErrorTree=function(e,t,n){if(void 0===n&&(n=[]),!QI(e[t],Error)||n.length+1>=this._limit)return n;var r=jR(BR(e[t]));return this._walkErrorTree(e[t],t,Xs([r],n))},e.id="LinkedErrors",e}(),iB=wM(),oB=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){iR((function(t){var n,r,i;if(cR().getIntegration(e)){if(!iB.navigator&&!iB.location&&!iB.document)return t;var o=(null===(n=t.request)||void 0===n?void 0:n.url)||(null===(r=iB.location)||void 0===r?void 0:r.href),a=(iB.document||{}).referrer,s=(iB.navigator||{}).userAgent,u=Ws(Ws(Ws({},null===(i=t.request)||void 0===i?void 0:i.headers),a&&{Referer:a}),s&&{"User-Agent":s}),c=Ws(Ws({},o&&{url:o}),{headers:u});return Ws(Ws({},t),{request:c})}return t}))},e.id="UserAgent",e}(),aB=Object.freeze({__proto__:null,GlobalHandlers:ZR,TryCatch:tB,Breadcrumbs:nB,LinkedErrors:rB,UserAgent:oB}),sB=function(e){function t(t){return void 0===t&&(t={}),e.call(this,GR,t)||this}return Gs(t,e),t.prototype.showReportDialog=function(e){void 0===e&&(e={}),wM().document&&(this._isEnabled()?XR(Ws(Ws({},e),{dsn:e.dsn||this.getDsn()})):_M.error("Trying to call showReportDialog with Sentry Client disabled"))},t.prototype._prepareEvent=function(t,n,r){return t.platform=t.platform||"javascript",t.sdk=Ws(Ws({},t.sdk),{name:"sentry.javascript.browser",packages:Xs(t.sdk&&t.sdk.packages||[],[{name:"npm:@sentry/browser",version:"5.30.0"}]),version:"5.30.0"}),e.prototype._prepareEvent.call(this,t,n,r)},t.prototype._sendEvent=function(t){var n=this.getIntegration(nB);n&&n.addSentryBreadcrumb(t),e.prototype._sendEvent.call(this,t)},t}(bR),uB={},cB=wM();cB.Sentry&&cB.Sentry.Integrations&&(uB=cB.Sentry.Integrations);var dB,lB=Ws(Ws(Ws({},uB),OR),aB);!function(e){e[e.String=0]="String",e[e.Error=1]="Error",e[e.Unknown=2]="Unknown"}(dB||(dB={}));const fB=e=>"string"==typeof e?dB.String:e instanceof Error?dB.Error:dB.Unknown;Error;const pB=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0}],hB=({from:e,seen:t,to_:n,forceEnumerable:r})=>{const i=n||(Array.isArray(e)?[]:{});t.push(e);for(const[n,o]of Object.entries(e))"function"!=typeof o&&(o&&"object"==typeof o?t.includes(e[n])?i[n]="[Circular]":i[n]=hB({from:e[n],seen:t.slice(),forceEnumerable:r}):i[n]=o);for(const{property:t,enumerable:n}of pB)"string"==typeof e[t]&&Object.defineProperty(i,t,{value:e[t],enumerable:!!r||n,configurable:!0,writable:!0});return i};var vB=e=>"object"==typeof e&&null!==e?hB({from:e,seen:[],forceEnumerable:!0}):"function"==typeof e?`[Function: ${e.name||"anonymous"}]`:e;const mB=(e,t)=>t.includes(e);var gB=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};const yB=(e,t)=>{const n=new sB(Object.assign({integrations:[new lB.Breadcrumbs({console:!1})],beforeSend:e=>(null!=e.contexts&&(e.contexts=_s("credentials",e.contexts)),e)},t)),r=new aR(n);return{onEvent:t=>{const{level:n,message:i,context:o,tags:a}=t;!1!==mB(n,e)&&((e,t,n,r,i)=>{e.withScope((o=>{switch(o.setLevel(n),o.setContext("context",r),o.setTags(i),fB(t)){case dB.String:e.captureMessage(t);break;case dB.Error:e.captureException(t);break;case dB.Unknown:default:e.captureException("Unidentifed payload captured")}}))})(r,i,zI.fromString(n),o,a)},captureCrumb:e=>{const[t,n]=e,{level:i,message:o,context:a}=n,s={message:o,data:Object.assign({clientTimestamp:t},a),level:zI.fromString(i)};null!=a.category&&(s.category=a.category),r.addBreadcrumb(s)},teardown:()=>gB(void 0,void 0,void 0,(function*(){yield n.close(2e3)}))}};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var wB=function(){return(wB=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function bB(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function SB(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function EB(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var kB,CB,xB;!function(e){e.BEFORE_UNLOAD="beforeunload",e.CLICK="click",e.KEY_DOWN="keydown",e.LOAD="load",e.POP_STATE="popstate",e.SCROLL="scroll",e.TOUCH_START="touchstart",e.VISIBILITY_CHANGE="visibilitychange",e.DOM_CONTENT_LOADED="DOMContentLoaded"}(kB||(kB={})),function(e){e.DOCUMENT="document",e.XHR="xhr",e.BEACON="beacon",e.FETCH="fetch",e.CSS="css",e.JS="js",e.IMAGE="image",e.FONT="font",e.MEDIA="media",e.OTHER="other"}(CB||(CB={})),function(e){e.FETCH="fetch",e.XHR="xhr"}(xB||(xB={}));var TB,NB=function(e){return Array.isArray(e)},OB=function(e){return!Array.isArray(e)&&"object"==typeof e};function _B(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(e,t){return NB(e)&&NB(t)?EB(Array(Math.max(e.length,t.length))).map((function(n,r){return _B(e[r],t[r])})):OB(e)&&OB(t)?Object.keys(t).reduce((function(n,r){var i;return wB(wB({},n),((i={})[r]=_B(e[r],t[r]),i))}),e):void 0===t?e:t}),e)}function PB(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];t.forEach((function(t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}))}function AB(e){return e?(parseInt(e,10)^16*Math.random()>>parseInt(e,10)/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,AB)}function IB(){}function MB(e,t,n){if(null==e)return JSON.stringify(e);var r=[!1,void 0];RB(e)&&(r=[!0,e.toJSON],delete e.toJSON);var i,o,a=[!1,void 0];"object"==typeof e&&RB(i=Object.getPrototypeOf(e))&&(a=[!0,i.toJSON],delete i.toJSON);try{o=JSON.stringify(e,void 0,n)}catch(e){o="<error: unable to serialize object>"}finally{r[0]&&(e.toJSON=r[1]),a[0]&&(i.toJSON=a[1])}return o}function RB(e){return"object"==typeof e&&null!==e&&e.hasOwnProperty("toJSON")}function BB(e){return Math.floor(function(){void 0===TB&&(TB=performance.timing.navigationStart);return TB}()+e)}function LB(e){if(e.origin)return e.origin;var t=e.host.replace(/(:80|:443)$/,"");return e.protocol+"//"+t}function DB(e,t,n,r){var i=new Date;i.setTime(i.getTime()+n);var o="expires="+i.toUTCString(),a=r&&r.crossSite?"none":"strict",s=r&&r.domain?";domain="+r.domain:"",u=r&&r.secure?";secure":"";document.cookie=e+"="+t+";"+o+";path=/;samesite="+a+s+u}function jB(e){return function(e,t){var n=e.match("(?:^|;)\\s*"+t+"\\s*=\\s*([^;]+)");return n?n[1]:void 0}(document.cookie,e)}var zB=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function UB(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var FB=function(){var e,t,n,r,i,o,a=[];function s(e,t,n){var r;for(var i in a)if(UB(a,i))try{a[i](e,t,n)}catch(e){r=e}if(r)throw r}function u(e,r,i,o,a){if(t)qB.augmentStackTraceWithInitialElement(t,r,i,""+e),d();else if(a)s(qB(a),!0,a);else{var u,c={url:r,column:o,line:i},l=e;if("[object String]"==={}.toString.call(e)){var f=l.match(zB);f&&(u=f[1],l=f[2])}s({name:u,message:l,stack:[c]},!0)}return!!n&&n.apply(this,arguments)}function c(e){var t=e.reason||"Empty reason";s(qB(t),!0,t)}function d(){var n=t,r=e;t=void 0,e=void 0,s(n,!1,r)}function l(n){if(t){if(e===n)return;d()}var r=qB(n);throw t=r,e=n,setTimeout((function(){e===n&&d()}),r.incomplete?2e3:0),n}return l.subscribe=function(e){!function(){if(r)return;n=window.onerror,window.onerror=eL(u),r=!0}(),function(){if(o)return;i=null!==window.onunhandledrejection?window.onunhandledrejection:void 0,window.onunhandledrejection=eL(c),o=!0}(),a.push(e)},l.unsubscribe=function(e){for(var t=a.length-1;t>=0;t-=1)a[t]===e&&a.splice(t,1);0===a.length&&(r&&(window.onerror=n,r=!1),o&&(window.onunhandledrejection=i,o=!1))},l.traceKitWindowOnError=u,l}(),qB=function(){function e(e){if(e.stack){for(var t,n,r,i,o=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,a=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,s=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,u=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,c=/\((\S*)(?::(\d+))(?::(\d+))\)/,d=e.stack.split("\n"),l=[],f=0,p=d.length;f<p;f+=1){if(o.exec(d[f])){var h=(r=o.exec(d[f]))[2]&&0===r[2].indexOf("native");t=r[2]&&0===r[2].indexOf("eval"),n=c.exec(r[2]),t&&n&&(r[2]=n[1],r[3]=n[2],r[4]=n[3]),i={args:h?[r[2]]:[],column:r[4]?+r[4]:void 0,func:r[1]||"?",line:r[3]?+r[3]:void 0,url:h?void 0:r[2]}}else if(s.exec(d[f]))i={args:[],column:(r=s.exec(d[f]))[4]?+r[4]:void 0,func:r[1]||"?",line:+r[3],url:r[2]};else{if(!a.exec(d[f]))continue;t=(r=a.exec(d[f]))[3]&&r[3].indexOf(" > eval")>-1,n=u.exec(r[3]),t&&n?(r[3]=n[1],r[4]=n[2],r[5]=void 0):0!==f||r[5]||void 0===e.columnNumber||(l[0].column=e.columnNumber+1),i={args:r[2]?r[2].split(","):[],column:r[5]?+r[5]:void 0,func:r[1]||"?",line:r[4]?+r[4]:void 0,url:r[3]}}!i.func&&i.line&&(i.func="?"),l.push(i)}if(l.length)return{stack:l,message:e.message,name:e.name}}}function t(e,t,n,r){var i={url:t,line:n?+n:void 0};if(i.url&&i.line){e.incomplete=!1;var o=e.stack;if(o.length>0&&o[0].url===i.url){if(o[0].line===i.line)return!1;if(!o[0].line&&o[0].func===i.func)return o[0].line=i.line,o[0].context=i.context,!1}return o.unshift(i),e.partial=!0,!0}return e.incomplete=!0,!1}function n(e,r){for(var i,o,a=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,s=[],u={},c=!1,d=n.caller;d&&!c;d=d.caller)d!==qB&&d!==FB&&(o={args:[],column:void 0,func:"?",line:void 0,url:void 0},i=a.exec(d.toString()),d.name?o.func=d.name:i&&(o.func=i[1]),void 0===o.func&&(o.func=i?i.input.substring(0,i.input.indexOf("{")):void 0),u[""+d]?c=!0:u[""+d]=!0,s.push(o));r&&s.splice(0,r);var l={stack:s,message:e.message,name:e.name};return t(l,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),l}function r(t,r){var i,o=void 0===r?0:+r;try{if(i=function(e){var t=e.stacktrace;if(t){for(var n,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,i=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,o=t.split("\n"),a=[],s=0;s<o.length;s+=2){var u=void 0;r.exec(o[s])?u={args:[],column:void 0,func:(n=r.exec(o[s]))[3],line:+n[1],url:n[2]}:i.exec(o[s])&&(u={args:(n=i.exec(o[s]))[5]?n[5].split(","):[],column:+n[2],func:n[3]||n[4],line:+n[1],url:n[6]}),u&&(!u.func&&u.line&&(u.func="?"),u.context=[o[s+1]],a.push(u))}if(a.length)return{stack:a,message:e.message,name:e.name}}}(t))return i}catch(e){}try{if(i=e(t))return i}catch(e){}try{if(i=function(e){var t=e.message.split("\n");if(!(t.length<4)){var n,r=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,i=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,o=/^\s*Line (\d+) of function script\s*$/i,a=[],s=window&&window.document&&window.document.getElementsByTagName("script"),u=[];for(var c in s)UB(s,c)&&!s[c].src&&u.push(s[c]);for(var d=2;d<t.length;d+=2){var l=void 0;r.exec(t[d])?l={args:[],column:void 0,func:(n=r.exec(t[d]))[3],line:+n[1],url:n[2]}:i.exec(t[d])?l={args:[],column:void 0,func:(n=i.exec(t[d]))[4],line:+n[1],url:n[3]}:o.exec(t[d])&&(n=o.exec(t[d]),l={url:window.location.href.replace(/#.*$/,""),args:[],column:void 0,func:"",line:+n[1]}),l&&(l.func||(l.func="?"),l.context=[t[d+1]],a.push(l))}if(a.length)return{stack:a,message:t[0],name:e.name}}}(t))return i}catch(e){}try{if(i=n(t,o+1))return i}catch(e){}return{message:t.message,name:t.name,stack:[]}}return r.augmentStackTraceWithInitialElement=t,r.computeStackTraceFromStackProp=e,r.ofCaller=function(e){var t=1+(void 0===e?0:+e);try{throw new Error}catch(e){return qB(e,t+1)}},r}(),KB=/[^\u0000-\u007F]/,HB=function(){function e(e,t,n){void 0===n&&(n=!1),this.endpointUrl=e,this.bytesLimit=t,this.withBatchTime=n}return e.prototype.send=function(e,t){var n=this.withBatchTime?function(e){return e+(-1===e.indexOf("?")?"?":"&")+"batch_time="+(new Date).getTime()}(this.endpointUrl):this.endpointUrl;if(navigator.sendBeacon&&t<this.bytesLimit&&navigator.sendBeacon(n,e))return;var r=new XMLHttpRequest;r.open("POST",n,!0),r.send(e)},e}();var $B,VB=function(){function e(e,t,n,r,i,o){void 0===o&&(o=IB),this.request=e,this.maxSize=t,this.bytesLimit=n,this.maxMessageSize=r,this.flushTimeout=i,this.beforeUnloadCallback=o,this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesSize=0,this.bufferMessageCount=0,this.flushOnVisibilityHidden(),this.flushPeriodically()}return e.prototype.add=function(e){this.addOrUpdate(e)},e.prototype.upsert=function(e,t){this.addOrUpdate(e,t)},e.prototype.flush=function(){if(0!==this.bufferMessageCount){var e=EB(this.pushOnlyBuffer,(t=this.upsertBuffer,n=[],Object.keys(t).forEach((function(e){n.push(t[e])})),n));this.request.send(e.join("\n"),this.bufferBytesSize),this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesSize=0,this.bufferMessageCount=0}var t,n},e.prototype.sizeInBytes=function(e){return KB.test(e)?void 0!==window.TextEncoder?(new TextEncoder).encode(e).length:new Blob([e]).size:e.length},e.prototype.addOrUpdate=function(e,t){var n=this.process(e),r=n.processedMessage,i=n.messageBytesSize;i>=this.maxMessageSize?console.warn("Discarded a message whose size was bigger than the maximum allowed size "+this.maxMessageSize+"KB."):(this.hasMessageFor(t)&&this.remove(t),this.willReachedBytesLimitWith(i)&&this.flush(),this.push(r,i,t),this.isFull()&&this.flush())},e.prototype.process=function(e){var t=MB(e);return{processedMessage:t,messageBytesSize:this.sizeInBytes(t)}},e.prototype.push=function(e,t,n){this.bufferMessageCount>0&&(this.bufferBytesSize+=1),void 0!==n?this.upsertBuffer[n]=e:this.pushOnlyBuffer.push(e),this.bufferBytesSize+=t,this.bufferMessageCount+=1},e.prototype.remove=function(e){var t=this.upsertBuffer[e];delete this.upsertBuffer[e];var n=this.sizeInBytes(t);this.bufferBytesSize-=n,this.bufferMessageCount-=1,this.bufferMessageCount>0&&(this.bufferBytesSize-=1)},e.prototype.hasMessageFor=function(e){return void 0!==e&&void 0!==this.upsertBuffer[e]},e.prototype.willReachedBytesLimitWith=function(e){return this.bufferBytesSize+e+1>=this.bytesLimit},e.prototype.isFull=function(){return this.bufferMessageCount===this.maxSize||this.bufferBytesSize>=this.bytesLimit},e.prototype.flushPeriodically=function(){var e=this;setTimeout((function(){e.flush(),e.flushPeriodically()}),this.flushTimeout)},e.prototype.flushOnVisibilityHidden=function(){var e=this;navigator.sendBeacon&&(window.addEventListener(kB.BEFORE_UNLOAD,eL(this.beforeUnloadCallback)),document.addEventListener(kB.VISIBILITY_CHANGE,eL((function(){"hidden"===document.visibilityState&&e.flush()}))),window.addEventListener(kB.BEFORE_UNLOAD,eL((function(){return e.flush()}))))},e}();!function(e){e.info="info",e.error="error"}($B||($B={}));var GB,WB,YB,QB,JB={maxMessagesPerPage:0,sentMessageCount:0};function XB(e){if(e.internalMonitoringEndpoint){var t=function(e){var t,n=r(e.internalMonitoringEndpoint);void 0!==e.replica&&(t=r(e.replica.internalMonitoringEndpoint));function r(t){return new VB(new HB(t,e.batchBytesLimit),e.maxBatchSize,e.batchBytesLimit,e.maxMessageSize,e.flushTimeout)}function i(e){return _B({date:(new Date).getTime(),view:{referrer:document.referrer,url:window.location.href}},void 0!==GB?GB():{},e)}return{add:function(e){var r=i(e);n.add(r),t&&t.add(r)}}}(e);PB(JB,{batch:t,maxMessagesPerPage:e.maxInternalMonitoringMessagesPerPage,sentMessageCount:0})}return{setExternalContextProvider:function(e){GB=e}}}function ZB(e,t,n){var r=n.value;n.value=function(){var e=JB.batch?eL(r):r;return e.apply(this,arguments)}}function eL(e){return function(){try{return e.apply(this,arguments)}catch(e){rL(e);try{tL(e)}catch(e){rL(e)}}}}function tL(e){!function(e){JB.batch&&JB.sentMessageCount<JB.maxMessagesPerPage&&(JB.sentMessageCount+=1,JB.batch.add(e))}(wB(wB({},function(e){if(e instanceof Error){var t=qB(e);return{error:{kind:t.name,stack:TL(t)},message:t.message}}return{error:{stack:"Not an instance of error"},message:"Uncaught "+MB(e)}}(e)),{status:$B.error}))}function nL(e){JB.debugMode=e}function rL(e){JB.debugMode&&console.warn("[INTERNAL ERROR]",e)}function iL(e){return sL(e,LB(window.location)).href}function oL(e,t){return aL(e)===aL(t)}function aL(e){return LB(sL(e))}function sL(e,t){if(function(){if(void 0!==WB)return WB;try{var e=new URL("http://test/path");return WB="http://test/path"===e.href}catch(e){WB=!1}return WB}())return void 0!==t?new URL(e,t):new URL(e);if(void 0===t&&!/:/.test(e))throw new Error("Invalid URL: '"+e+"'");var n=document,r=n.createElement("a");if(void 0!==t){var i=(n=document.implementation.createHTMLDocument("")).createElement("base");i.href=t,n.head.appendChild(i),n.body.appendChild(r)}return r.href=e,r}var uL=[],cL=[];function dL(){return YB||(!function(){if(!window.fetch)return;QB=window.fetch,window.fetch=eL((function(e,t){var n=this,r=t&&t.method||"object"==typeof e&&e.method||"GET",i=iL("object"==typeof e&&e.url||e),o={init:t,method:r,startTime:performance.now(),url:i},a=function(e){return bB(n,void 0,void 0,(function(){var t,n;return SB(this,(function(r){switch(r.label){case 0:return o.duration=performance.now()-o.startTime,"stack"in e||e instanceof Error?(o.status=0,o.response=TL(qB(e)),cL.forEach((function(e){return e(o)})),[3,6]):[3,1];case 1:if(!("status"in e))return[3,6];t=void 0,r.label=2;case 2:return r.trys.push([2,4,,5]),[4,e.clone().text()];case 3:return t=r.sent(),[3,5];case 4:return n=r.sent(),t="Unable to retrieve response: "+n,[3,5];case 5:o.response=t,o.responseType=e.type,o.status=e.status,cL.forEach((function(e){return e(o)})),r.label=6;case 6:return[2]}}))}))};uL.forEach((function(e){return e(o)}));var s=QB.call(this,e,o.init);return s.then(eL(a),eL(a)),s}))}(),YB={beforeSend:function(e){uL.push(e)},onRequestComplete:function(e){cL.push(e)}}),YB}var lL,fL,pL,hL,vL,mL,gL,yL,wL,bL=function(){function e(){this.observers=[]}return e.prototype.subscribe=function(e){this.observers.push(e)},e.prototype.notify=function(e){this.observers.forEach((function(t){return t(e)}))},e}(),SL=[],EL=[];function kL(){return lL||(fL=XMLHttpRequest.prototype.open,pL=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.open=eL((function(e,t){return this._datadog_xhr={method:e,url:iL(t)},fL.apply(this,arguments)})),XMLHttpRequest.prototype.send=eL((function(e){var t=this;if(this._datadog_xhr){this._datadog_xhr.startTime=performance.now();var n=this.onreadystatechange;this.onreadystatechange=function(){this.readyState===XMLHttpRequest.DONE&&eL(i)(),n&&n.apply(this,arguments)};var r=!1,i=function(){r||(r=!0,t._datadog_xhr.duration=performance.now()-t._datadog_xhr.startTime,t._datadog_xhr.response=t.response,t._datadog_xhr.status=t.status,EL.forEach((function(e){return e(t._datadog_xhr)})))};this.addEventListener("loadend",eL(i)),SL.forEach((function(e){return e(t._datadog_xhr,t)}))}return pL.apply(this,arguments)})),lL={beforeSend:function(e){SL.push(e)},onRequestComplete:function(e){EL.push(e)}}),lL}function CL(e){if(!vL){var t=new bL;!function(e,t){function n(n,r){(function(e,t){return oL(e,t.logsEndpoint)||oL(e,t.rumEndpoint)||oL(e,t.traceEndpoint)||t.internalMonitoringEndpoint&&oL(e,t.internalMonitoringEndpoint)||t.proxyHost&&oL(e,t.proxyHost)||t.replica&&(oL(e,t.replica.logsEndpoint)||oL(e,t.replica.rumEndpoint)||oL(e,t.replica.internalMonitoringEndpoint))})(r.url,e)||!function(e){return 0===e.status&&"opaque"!==e.responseType}(r)&&!function(e){return e.status>=500}(r)||t.notify({context:{error:{origin:hL.NETWORK,stack:NL(r.response,e)||"Failed to load"},http:{method:r.method,status_code:r.status,url:r.url}},message:OL(n)+" error "+r.method+" "+r.url,startTime:r.startTime})}kL().onRequestComplete((function(e){return n(xB.XHR,e)})),dL().onRequestComplete((function(e){return n(xB.FETCH,e)}))}(e,t),function(e){mL=console.error,console.error=eL((function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];mL.apply(console,EB([t],n)),e.notify({context:{error:{origin:hL.CONSOLE}},message:EB(["console error:",t],n).map(xL).join(" "),startTime:performance.now()})}))}(t),function(e){gL=function(t,n,r){e.notify(function(e,t){var n,r;void 0!==e.message||t instanceof Error?(n=e.message||"Empty message",r=TL(e)):(n="Uncaught "+MB(t),r="No stack, consider using an instance of Error");return{message:n,context:{error:{stack:r,kind:e.name,origin:hL.SOURCE}},startTime:performance.now()}}(t,r))},FB.subscribe(gL)}(t),vL=function(e,t){var n=0,r=new bL;return t.subscribe((function(t){n<e.maxErrorsByMinute?(n+=1,r.notify(t)):n===e.maxErrorsByMinute&&(n+=1,r.notify({context:{error:{origin:hL.AGENT}},message:"Reached max number of errors by minute: "+e.maxErrorsByMinute,startTime:performance.now()}))})),setInterval((function(){return n=0}),6e4),r}(e,t)}return vL}function xL(e){return"string"==typeof e?e:e instanceof Error?TL(qB(e)):MB(e,0,2)}function TL(e){var t=(e.name||"Error")+": "+e.message;return e.stack.forEach((function(e){var n="?"===e.func?"<anonymous>":e.func,r=e.args&&e.args.length>0?"("+e.args.join(", ")+")":"",i=e.line?":"+e.line:"",o=e.line&&e.column?":"+e.column:"";t+="\n  at "+n+r+" @ "+e.url+i+o})),t}function NL(e,t){return e&&e.length>t.requestErrorResponseLengthLimit?e.substring(0,t.requestErrorResponseLengthLimit)+"...":e}function OL(e){return xB.XHR===e?"XHR":"Fetch"}function _L(e){console.warn("'"+e+"' not yet available, please call '.init()' first.")}!function(e){e.AGENT="agent",e.CONSOLE="console",e.NETWORK="network",e.SOURCE="source",e.LOGGER="logger"}(hL||(hL={})),function(e){e.US="us",e.EU="eu"}(wL||(wL={}));var PL,AL=((yL={})[wL.EU]="datadoghq.eu",yL[wL.US]="datadoghq.com",yL);function IL(e,t){var n=function(e,t){var n={applicationId:e.applicationId,buildMode:t.buildMode,clientToken:e.clientToken,env:e.env,proxyHost:e.proxyHost,sdkVersion:t.sdkVersion,service:e.service,site:e.site||AL[e.datacenter||t.datacenter],version:e.version},r=Array.isArray(e.enableExperimentalFeatures)?e.enableExperimentalFeatures:[],i=wB({cookieOptions:{},isEnabled:function(e){return t=e,-1!==r.indexOf(t);var t},logsEndpoint:BL("browser",n),proxyHost:e.proxyHost,rumEndpoint:BL("rum",n),traceEndpoint:BL("public-trace",n)},RL);e.internalMonitoringApiKey&&(i.internalMonitoringEndpoint=BL("browser",n,"browser-agent-internal-monitoring"));"allowedTracingOrigins"in e&&(i.allowedTracingOrigins=e.allowedTracingOrigins);"isCollectingError"in e&&(i.isCollectingError=!!e.isCollectingError);"sampleRate"in e&&(i.sampleRate=e.sampleRate);"resourceSampleRate"in e&&(i.resourceSampleRate=e.resourceSampleRate);"trackInteractions"in e&&(i.trackInteractions=!!e.trackInteractions);i.cookieOptions.secure=LL(e),i.cookieOptions.crossSite=!!e.useCrossSiteSessionCookie,!e.trackSessionAcrossSubdomains||(i.cookieOptions.domain=function(){for(var e="dd_site_test",t=window.location.hostname.split("."),n=t.pop();t.length&&!jB(e);)DB(e,"test",1e3,{domain:n=t.pop()+"."+n});return n}());n.buildMode===PL.E2E_TEST&&(void 0!==e.internalMonitoringEndpoint&&(i.internalMonitoringEndpoint=e.internalMonitoringEndpoint),void 0!==e.logsEndpoint&&(i.logsEndpoint=e.logsEndpoint),void 0!==e.rumEndpoint&&(i.rumEndpoint=e.rumEndpoint));if(n.buildMode===PL.STAGING&&void 0!==e.replica){var o=wB(wB({},n),{applicationId:e.replica.applicationId,clientToken:e.replica.clientToken,site:AL[wL.US]});i.replica={applicationId:e.replica.applicationId,internalMonitoringEndpoint:BL("browser",o,"browser-agent-internal-monitoring"),logsEndpoint:BL("browser",o),rumEndpoint:BL("rum",o)}}return i}(e,t),r=XB(n);return{configuration:n,errorObservable:n.isCollectingError?CL(n):new bL,internalMonitoring:r}}function ML(){return"file:"!==window.location.protocol||(console.error("Execution is not allowed in the current context."),!1)}!function(e){e.RELEASE="release",e.STAGING="staging",e.E2E_TEST="e2e-test"}(PL||(PL={}));var RL={allowedTracingOrigins:[],isCollectingError:!0,maxErrorsByMinute:3e3,maxInternalMonitoringMessagesPerPage:15,resourceSampleRate:100,sampleRate:100,silentMultipleInit:!1,trackInteractions:!1,requestErrorResponseLengthLimit:32768,flushTimeout:3e4,maxBatchSize:50,maxMessageSize:262144,batchBytesLimit:16384};function BL(e,t,n){var r="sdk_version:"+t.sdkVersion+(t.env?",env:"+t.env:"")+(t.service?",service:"+t.service:"")+(t.version?",version:"+t.version:""),i=e+"-http-intake.logs."+t.site,o=t.proxyHost?t.proxyHost:i,a=t.proxyHost?"ddhost="+i+"&":"",s=""+(t.applicationId?"_dd.application_id="+t.applicationId+"&":"")+a+"ddsource="+(n||"browser")+"&ddtags="+r;return"https://"+o+"/v1/input/"+t.clientToken+"?"+s}function LL(e){return!!e.useSecureSessionCookie||!!e.useCrossSiteSessionCookie}function DL(e,t,n){var r=function(e,t){var n,r,i=!1,o=function(){i=!0,window.clearTimeout(n),n=window.setTimeout((function(){i=!1}),1e3)};return{get:function(){return i||(r=jB(e),o()),r},set:function(n,i){DB(e,n,i,t),r=n,o()}}}("_dd_s",e);!function(e){var t=e.get(),n=jB("_dd"),r=jB("_dd_r"),i=jB("_dd_l");if(!t){var o={};n&&(o.id=n),i&&/^[01]$/.test(i)&&(o.logs=i),r&&/^[012]$/.test(r)&&(o.rum=r),qL(o,e)}}(r);var i=new bL,o=FL(r).id,a=function(e,t,n){var r,i=!n||void 0===n.leading||n.leading,o=!n||void 0===n.trailing||n.trailing,a=!1,s=!1;return{throttled:function(){var n=this;a?s=!0:(i?e.apply(this):s=!0,a=!0,r=window.setTimeout((function(){o&&s&&e.apply(n),a=!1,s=!1}),t))},cancel:function(){window.clearTimeout(r),a=!1,s=!1}}}((function(){var e=FL(r),a=n(e[t]),s=a.trackingType,u=a.isTracked;e[t]=s,u&&!e.id&&(e.id=AB(),e.created=String(Date.now())),qL(e,r),u&&o!==e.id&&(o=e.id,i.notify())}),1e3).throttled;return a(),function(e){var t=eL(e),n={capture:!0,passive:!0};[kB.CLICK,kB.TOUCH_START,kB.KEY_DOWN,kB.SCROLL].forEach((function(e){document.addEventListener(e,t,n)}))}(a),function(e){var t=eL((function(){"visible"===document.visibilityState&&e()}));window.setInterval(t,6e4),document.addEventListener(kB.VISIBILITY_CHANGE,t)}((function(){qL(FL(r),r)})),{getId:function(){return FL(r).id},getTrackingType:function(){return FL(r)[t]},renewObservable:i}}var jL,zL,UL=/^([a-z]+)=([a-z0-9-]+)$/;function FL(e){var t=function(e){var t=e.get(),n={};(function(e){return void 0!==e&&(-1!==e.indexOf("&")||UL.test(e))})(t)&&t.split("&").forEach((function(e){var t=UL.exec(e);if(null!==t){var r=t[1],i=t[2];n[r]=i}}));return n}(e);return function(e){return(void 0===e.created||Date.now()-Number(e.created)<144e5)&&(void 0===e.expire||Date.now()<Number(e.expire))}(t)?t:(KL(e),{})}function qL(e,t){if(n=e,0!==Object.keys(n).length){var n;e.expire=String(Date.now()+9e5);var r=function(e){return Object.keys(e).map((function(t){return[t,e[t]]}))}(e).map((function(e){return e[0]+"="+e[1]})).join("&");t.set(r,9e5)}else KL(t)}function KL(e){e.set("",0)}!function(e){e.debug="debug",e.info="info",e.warn="warn",e.error="error"}(zL||(zL={}));var HL,$L,VL=((jL={})[zL.debug]=0,jL[zL.info]=1,jL[zL.warn]=2,jL[zL.error]=3,jL);function GL(e,t,n,r){var i,o={};r.setExternalContextProvider((function(){return _B({session_id:n.getId()},o,QL())}));var a=function(e,t,n){var r,i=o(e.logsEndpoint);void 0!==e.replica&&(r=o(e.replica.logsEndpoint));function o(t){return new VB(new HB(t,e.batchBytesLimit),e.maxBatchSize,e.batchBytesLimit,e.maxMessageSize,e.flushTimeout)}function a(e){return _B({date:(new Date).getTime(),session_id:t.getId(),view:{referrer:document.referrer,url:window.location.href}},n(),QL(),e)}return{add:function(e){var t=a(e);i.add(t),r&&r.add(t)}}}(t,n,(function(){return o})),s=((i={})[HL.console]=function(e){return console.log(e.status+": "+e.message)},i[HL.http]=function(e){return a.add(e)},i[HL.silent]=IB,i),u=new YL(n,s);$L={},e.subscribe((function(e){return u.error(e.message,_B(wB({date:BB(e.startTime)},e.context),QL(e.startTime)))}));var c={setLoggerGlobalContext:function(e){o=e},addLoggerGlobalContext:function(e,t){o[e]=t}};return c.createLogger=function(e,t){return function(n,r){return void 0===r&&(r={}),$L[n]=new YL(e,t,r.handler,r.level,wB(wB({},r.context),{logger:{name:n}})),$L[n]}}(n,s),c.getLogger=WL,c.logger=u,c}function WL(e){return $L[e]}!function(e){e.http="http",e.console="console",e.silent="silent"}(HL||(HL={}));var YL=function(){function e(e,t,n,r,i){void 0===n&&(n=HL.http),void 0===r&&(r=zL.debug),void 0===i&&(i={}),this.session=e,this.handlers=t,this.level=r,this.loggerContext=i,this.handler=this.handlers[n]}return e.prototype.log=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n=zL.info),this.session.isTracked()&&VL[n]>=VL[this.level]&&this.handler(wB({message:e,status:n},_B({},this.loggerContext,t)))},e.prototype.debug=function(e,t){void 0===t&&(t={}),this.log(e,t,zL.debug)},e.prototype.info=function(e,t){void 0===t&&(t={}),this.log(e,t,zL.info)},e.prototype.warn=function(e,t){void 0===t&&(t={}),this.log(e,t,zL.warn)},e.prototype.error=function(e,t){void 0===t&&(t={});var n={error:{origin:hL.LOGGER}};this.log(e,_B({},n,t),zL.error)},e.prototype.setContext=function(e){this.loggerContext=e},e.prototype.addContext=function(e,t){this.loggerContext[e]=t},e.prototype.removeContext=function(e){delete this.loggerContext[e]},e.prototype.setHandler=function(e){this.handler=this.handlers[e]},e.prototype.setLevel=function(e){this.level=e},function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);o>3&&a&&Object.defineProperty(t,n,a)}([ZB],e.prototype,"log",null),e}();function QL(e){var t=window.DD_RUM;return t&&t.getInternalContext?t.getInternalContext(e):void 0}var JL,XL={buildMode:"release",datacenter:"us",sdkVersion:"1.19.0"};function ZL(e,t){if(!t){var n=eD(e)===JL.TRACKED;return{getId:function(){},isTracked:function(){return n}}}var r=DL(e.cookieOptions,"logs",(function(t){return function(e,t){var n=function(e){return e===JL.NOT_TRACKED||e===JL.TRACKED}(t)?t:eD(e);return{trackingType:n,isTracked:n===JL.TRACKED}}(e,t)}));return{getId:r.getId,isTracked:function(){return r.getTrackingType()===JL.TRACKED}}}function eD(e){return 0!==(t=e.sampleRate)&&100*Math.random()<=t?JL.TRACKED:JL.NOT_TRACKED;var t}!function(e){e.NOT_TRACKED="0",e.TRACKED="1"}(JL||(JL={}));var tD={debug:function(e,t){_L("logs.logger.debug")},error:function(e,t){_L("logs.logger.error")},info:function(e,t){_L("logs.logger.info")},log:function(e,t,n){_L("logs.logger.log")},warn:function(e,t){_L("logs.logger.warn")},setContext:function(e){_L("logs.logger.setContext")},addContext:function(e,t){_L("logs.logger.addContext")},removeContext:function(e){_L("logs.logger.removeContext")},setHandler:function(e){_L("logs.logger.setHandler")},setLevel:function(e){_L("logs.logger.setLevel")}},nD=function(e){var t=function(e){var t=wB({},e);return Object.defineProperty(t,"_setDebug",{get:function(){return nL},enumerable:!1}),t}(e),n=!1;return t.init=eL((function(e){if(ML()&&function(e){if(n)return e.silentMultipleInit||console.error("DD_LOGS is already initialized."),!1;if(!e||!e.publicApiKey&&!e.clientToken)return console.error("Client Token is not configured, we will not send any data."),!1;if(void 0!==e.sampleRate&&(t=e.sampleRate,!(function(e){return"number"==typeof e}(t)&&t>=0&&t<=100)))return console.error("Sample Rate should be a number between 0 and 100"),!1;var t;return!0}(e)){e.publicApiKey&&(e.clientToken=e.publicApiKey,console.warn("Public API Key is deprecated. Please use Client Token instead."));var r=!1!==e.forwardErrorsToLogs,i=IL(wB(wB({},e),{isCollectingError:r}),XL),o=i.errorObservable,a=i.configuration,s=i.internalMonitoring,u=GL(o,a,ZL(a,function(e){if(void 0===document.cookie||null===document.cookie)return!1;try{var t="dd_cookie_test",n="test";return DB(t,n,1e3,{secure:e}),jB(t)===n}catch(e){return console.error(e),!1}}(LL(e))),s);PB(t,u),n=!0}})),t}({logger:tD,init:function(e){_L("core.init")},addLoggerGlobalContext:function(e,t){_L("addLoggerGlobalContext")},setLoggerGlobalContext:function(e){_L("setLoggerGlobalContext")},createLogger:function(e,t){return _L("createLogger"),tD},getLogger:function(e){_L("getLogger")}});(function(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var e=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!=typeof e&&(e="object"==typeof self?self:"object"==typeof window?window:{}),e}()).DD_LOGS=nD;const rD=(e,t)=>{nD.init(Object.assign({forwardErrorsToLogs:!1},t));let n=[],r=!1;const i=i=>{const{level:o,message:a,context:s,tags:u}=i;if(!1===mB(o,e)||!0===r)return;const c=o===Ce.Fatal?Ce.Error:o,d=(e=>{switch(fB(e)){case dB.String:return{message:e,context:{}};case dB.Error:return{message:e.message,context:{error:vB(e)}};case dB.Unknown:default:return{message:"Meta: Unidentifed payload captured",context:{}}}})(a),l=Object.assign(Object.assign(Object.assign({service:t.service},d.context),s),{tags:u});"error"===c&&(l.breadcrumbs=n.reduce(((e,[t,n])=>(e[`crumb-${t}`]=n,e)),{}),n=[]),nD.logger.log(d.message,l,c)};return{onEvent:i,captureCrumb:e=>{if(!0===r)return;n.push(e);const[,t]=e;i(Object.assign(Object.assign({},t),{tags:{}}))},teardown:()=>(r=!0,Promise.resolve())}};var iD=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};function oD(e,t){return Object.assign(Object.assign({},e),{tags:e.tags.concat(t)})}function aD(e){return e?Object.entries(e).map((([e,t])=>({key:e,value:String(t)}))):[]}function sD({metricsConfig:e,graphqlClient:t,sdkPartnerName:n}){const r={key:"sdkPartnerName",value:String(n)},i={increment:[],gauge:[]};let o=Date.now();const a=({increment:n,gauge:a,force:s})=>iD(this,void 0,void 0,(function*(){if(e.disableDatadogMetrics)return Promise.resolve(void 0);!function(e,t){e&&i.increment.push(...e),t&&i.gauge.push(...t)}(n,a);if((Date.now()-o>1e4||s)&&(i.increment.length||i.gauge.length)){o=Date.now();const e=function(e,t,n,r){var i,o;return iD(this,void 0,void 0,(function*(){return(yield e.mutation(ni`
        mutation EmitDatadogEvents(
          $increment: [DatadogIncrementInput!]!
          $gauge: [DatadogGuageInput!]!
        ) {
          emitDatadogEvents(increment: $increment, gauge: $gauge) {
            ... on EmitDatadogEventsPayload {
              success
              message
            }
          }
        }
      `,{increment:null!==(i=null==t?void 0:t.map((e=>oD(e,r))))&&void 0!==i?i:[],gauge:null!==(o=null==n?void 0:n.map((e=>oD(e,r))))&&void 0!==o?o:[]}).toPromise()).data}))}(t,i.increment,i.gauge,r);i.increment=[],i.gauge=[],yield e}}));return setInterval((()=>a({force:!0})),1e4),{increment:(e,t)=>{a({increment:[{keyName:e,tags:aD(t)}],force:!1})},gauge:(e,t,n)=>{a({gauge:[{keyName:e,value:t,tags:aD(n)}],force:!1})},flush:()=>a({force:!0})}}const uD=(e,t)=>{const{trackerConfig:n,graphqlConfig:r,metricsConfig:i,analyticsConfig:o,sdkPartnerName:a}=t,s=(({sentryDsn:e,environment:t,baseContext:n,datadog:r})=>{const i=[yB([Ce.Error],{dsn:e,environment:t,normalizeDepth:8})];return r&&i.push(rD([Ce.Error,Ce.Fatal,Ce.Warning,Ce.Info],{clientToken:r.datadogClientToken,env:t,service:r.datadogServiceName})),Ii({baseContext:n,trackerMethods:i,onCrumbHook:()=>!1,isConsoleLogActive:()=>t!==He.Production})})(n),u=DI(e,r,s);return{config:t,logger:s,analytics:bI(o,s),gqlClient:u,metrics:sD({metricsConfig:i,graphqlClient:u,sdkPartnerName:a})}};var cD=function(e){if(!1==("undefined"!=typeof window&&null!=window.env&&"string"==typeof window.env))return null;var t=JSON.parse(atob(window.env));return t.trackerConfig.environment=function(){var e=window.location,t=e.hostname,n=e.pathname;return t.includes("loomlocal.com")?He.Development:t.includes("stage.loom.com")?He.Staging:t.includes("localhost")&&n.includes("sdk-testbench")?He.Testbench:He.Production}(),uD(e,t)}("LoomSDK");null!=cD&&zO(cD);
